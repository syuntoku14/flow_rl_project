{"timesteps_since_restore": 52453, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170f60>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-55-08", "episode_reward_min": NaN, "timesteps_this_iter": 52453, "training_iteration": 1, "episode_reward_mean": NaN, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 1, "custom_metrics": {}, "info": {"num_steps_trained": 52453, "load_time_ms": 84.136, "grad_time_ms": 11465.072, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.20000004768371582, "total_loss": 1.5960296392440796, "vf_loss": 1.596408724784851, "policy_loss": -0.0004991411115042865, "kl": 0.000599831051658839, "vf_explained_var": 0.8990830183029175, "entropy": 1.4271795749664307}, "update_time_ms": 600.886, "num_steps_sampled": 52453, "sample_time_ms": 16579.097}, "episode_len_mean": NaN, "time_this_iter_s": 28.867503881454468, "pid": 12036, "timesteps_total": 52453, "hostname": "flow-main", "episodes_total": 0, "timestamp": 1557222908, "episode_reward_max": NaN, "episodes_this_iter": 0, "time_total_s": 28.867503881454468, "time_since_restore": 28.867503881454468}
{"timesteps_since_restore": 96972, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd039b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03a20>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-55-37", "episode_reward_min": 285.410594231269, "timesteps_this_iter": 44519, "training_iteration": 2, "episode_reward_mean": 476.20016377291284, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 2, "custom_metrics": {"cost2_mean": -126.62093235810673, "outflow_rate_max": 802.0321738261739, "cost1_mean": 229.06638997882638, "system_level_velocity_mean": 8.702287966079558, "cost2_min": -172.41289265945082, "cost1_max": 313.26933546269925, "cost1_min": 160.2450151511815, "cost2_max": -68.30794825171618, "outflow_rate_mean": 472.8022650749252, "system_level_velocity_min": 6.2334015905267055, "outflow_rate_min": 185.6065714285714, "system_level_velocity_max": 11.698276091286049}, "info": {"num_steps_trained": 96972, "load_time_ms": 49.248, "grad_time_ms": 10844.838, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731, "total_loss": 1.0356608629226685, "vf_loss": 1.0372880697250366, "policy_loss": -0.002156764268875122, "kl": 0.005295522045344114, "vf_explained_var": 0.9737831354141235, "entropy": 1.4249889850616455}, "update_time_ms": 304.243, "num_steps_sampled": 96972, "sample_time_ms": 17338.517}, "episode_len_mean": 700.0, "time_this_iter_s": 28.43879508972168, "pid": 12036, "timesteps_total": 96972, "hostname": "flow-main", "episodes_total": 20, "timestamp": 1557222937, "episode_reward_max": 724.9084107986962, "episodes_this_iter": 20, "time_total_s": 57.30629897117615, "time_since_restore": 57.30629897117615}
{"timesteps_since_restore": 144998, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcd67f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcd66d8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-56-05", "episode_reward_min": 285.410594231269, "timesteps_this_iter": 48026, "training_iteration": 3, "episode_reward_mean": 462.54120754150426, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 3, "custom_metrics": {"cost2_mean": -122.1650306236345, "outflow_rate_max": 836.7174825174825, "cost1_mean": 227.03877553409353, "system_level_velocity_mean": 8.640949520427016, "cost2_min": -172.41289265945082, "cost1_max": 321.82903250704913, "cost1_min": 159.42532243417122, "cost2_max": -68.30794825171618, "outflow_rate_mean": 485.8826757464757, "system_level_velocity_min": 6.2334015905267055, "outflow_rate_min": 185.6065714285714, "system_level_velocity_max": 12.376571029711574}, "info": {"num_steps_trained": 144998, "load_time_ms": 37.771, "grad_time_ms": 10862.267, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000002384185791, "total_loss": 0.8199344873428345, "vf_loss": 0.8207188844680786, "policy_loss": -0.0011436200002208352, "kl": 0.003592144697904587, "vf_explained_var": 0.9756680727005005, "entropy": 1.4170085191726685}, "update_time_ms": 205.807, "num_steps_sampled": 144998, "sample_time_ms": 17298.305}, "episode_len_mean": 700.0, "time_this_iter_s": 28.236441373825073, "pid": 12036, "timesteps_total": 144998, "hostname": "flow-main", "episodes_total": 36, "timestamp": 1557222965, "episode_reward_max": 724.9084107986962, "episodes_this_iter": 16, "time_total_s": 85.54274034500122, "time_since_restore": 85.54274034500122}
{"timesteps_since_restore": 190616, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a58>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-56-31", "episode_reward_min": 47.75389899515084, "timesteps_this_iter": 45618, "training_iteration": 4, "episode_reward_mean": 457.1209199787128, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 4, "custom_metrics": {"cost2_mean": -119.80666999173562, "outflow_rate_max": 836.7174825174825, "cost1_mean": 222.36235282032695, "system_level_velocity_mean": 8.880411041967703, "cost2_min": -172.41289265945082, "cost1_max": 321.82903250704913, "cost1_min": 33.71097467114227, "cost2_max": -29.216365232077276, "outflow_rate_mean": 489.43465892545197, "system_level_velocity_min": 6.2334015905267055, "outflow_rate_min": 185.6065714285714, "system_level_velocity_max": 19.086572453305404}, "info": {"num_steps_trained": 190616, "load_time_ms": 32.255, "grad_time_ms": 10842.555, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 1.280961513519287, "vf_loss": 1.2866750955581665, "policy_loss": -0.006426885724067688, "kl": 0.014264330267906189, "vf_explained_var": 0.9840468764305115, "entropy": 1.4268549680709839}, "update_time_ms": 156.658, "num_steps_sampled": 190616, "sample_time_ms": 16637.753}, "episode_len_mean": 684.5238095238095, "time_this_iter_s": 25.553407907485962, "pid": 12036, "timesteps_total": 190616, "hostname": "flow-main", "episodes_total": 42, "timestamp": 1557222991, "episode_reward_max": 724.9084107986962, "episodes_this_iter": 6, "time_total_s": 111.09614825248718, "time_since_restore": 111.09614825248718}
{"timesteps_since_restore": 230469, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd7f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd940>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-56-55", "episode_reward_min": 47.75389899515084, "timesteps_this_iter": 39853, "training_iteration": 5, "episode_reward_mean": 457.0606254907772, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 5, "custom_metrics": {"cost2_mean": -108.87094321194748, "outflow_rate_max": 849.6135428571429, "cost1_mean": 220.30851105176401, "system_level_velocity_mean": 8.657698567650762, "cost2_min": -172.41289265945082, "cost1_max": 321.82903250704913, "cost1_min": 33.71097467114227, "cost2_max": -29.216365232077276, "outflow_rate_mean": 501.4621063604758, "system_level_velocity_min": 6.2334015905267055, "outflow_rate_min": 185.6065714285714, "system_level_velocity_max": 19.086572453305404}, "info": {"num_steps_trained": 230469, "load_time_ms": 28.564, "grad_time_ms": 10603.403, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 2.790198802947998, "vf_loss": 2.795850992202759, "policy_loss": -0.006380979437381029, "kl": 0.014579322189092636, "vf_explained_var": 0.9728381633758545, "entropy": 1.4054802656173706}, "update_time_ms": 126.678, "num_steps_sampled": 230469, "sample_time_ms": 16307.125}, "episode_len_mean": 689.516129032258, "time_this_iter_s": 24.73210334777832, "pid": 12036, "timesteps_total": 230469, "hostname": "flow-main", "episodes_total": 62, "timestamp": 1557223015, "episode_reward_max": 724.9084107986962, "episodes_this_iter": 20, "time_total_s": 135.8282516002655, "time_since_restore": 135.8282516002655}
{"timesteps_since_restore": 269182, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03550>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-57-19", "episode_reward_min": 47.75389899515084, "timesteps_this_iter": 38713, "training_iteration": 6, "episode_reward_mean": 498.1416349685975, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 6, "custom_metrics": {"cost2_mean": -98.03698258264026, "outflow_rate_max": 954.4301714285715, "cost1_mean": 228.57059403092768, "system_level_velocity_mean": 8.913714276712401, "cost2_min": -172.41289265945082, "cost1_max": 321.82903250704913, "cost1_min": 33.71097467114227, "cost2_max": -29.216365232077276, "outflow_rate_mean": 562.1228274293687, "system_level_velocity_min": 6.2334015905267055, "outflow_rate_min": 185.6065714285714, "system_level_velocity_max": 19.086572453305404}, "info": {"num_steps_trained": 269182, "load_time_ms": 25.618, "grad_time_ms": 10485.747, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 9.392241477966309, "vf_loss": 9.395403861999512, "policy_loss": -0.003859971184283495, "kl": 0.013979160226881504, "vf_explained_var": 0.8240633606910706, "entropy": 1.372533917427063}, "update_time_ms": 106.731, "num_steps_sampled": 269182, "sample_time_ms": 15795.32}, "episode_len_mean": 691.875, "time_this_iter_s": 23.24901509284973, "pid": 12036, "timesteps_total": 269182, "hostname": "flow-main", "episodes_total": 80, "timestamp": 1557223039, "episode_reward_max": 747.8509499494589, "episodes_this_iter": 18, "time_total_s": 159.07726669311523, "time_since_restore": 159.07726669311523}
{"timesteps_since_restore": 309170, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc806d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc805f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80cf8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-57-41", "episode_reward_min": 47.75389899515084, "timesteps_this_iter": 39988, "training_iteration": 7, "episode_reward_mean": 535.235997654279, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 7, "custom_metrics": {"cost2_mean": -91.89829720412395, "outflow_rate_max": 974.7349038961039, "cost1_mean": 235.6973881898157, "system_level_velocity_mean": 9.144417693975521, "cost2_min": -172.41289265945082, "cost1_max": 321.82903250704913, "cost1_min": 33.71097467114227, "cost2_max": -29.216365232077276, "outflow_rate_mean": 607.9436851291672, "system_level_velocity_min": 6.2334015905267055, "outflow_rate_min": 185.6065714285714, "system_level_velocity_max": 19.086572453305404}, "info": {"num_steps_trained": 309170, "load_time_ms": 24.012, "grad_time_ms": 10424.867, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 7.948563098907471, "vf_loss": 7.949381351470947, "policy_loss": -0.0011544348672032356, "kl": 0.0067172967828810215, "vf_explained_var": 0.8273755311965942, "entropy": 1.3596943616867065}, "update_time_ms": 92.743, "num_steps_sampled": 309170, "sample_time_ms": 15345.628}, "episode_len_mean": 693.0851063829788, "time_this_iter_s": 22.839526653289795, "pid": 12036, "timesteps_total": 309170, "hostname": "flow-main", "episodes_total": 94, "timestamp": 1557223061, "episode_reward_max": 824.7327162003426, "episodes_this_iter": 14, "time_total_s": 181.91679334640503, "time_since_restore": 181.91679334640503}
{"timesteps_since_restore": 349247, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdb38>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-58-07", "episode_reward_min": 47.75389899515084, "timesteps_this_iter": 40077, "training_iteration": 8, "episode_reward_mean": 597.786250928193, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 8, "custom_metrics": {"cost2_mean": -80.78551592410702, "outflow_rate_max": 992.3665558441559, "cost1_mean": 247.9766090498927, "system_level_velocity_mean": 9.56608279879992, "cost2_min": -160.56464127427114, "cost1_max": 321.82903250704913, "cost1_min": 33.71097467114227, "cost2_max": -29.216365232077276, "outflow_rate_mean": 693.1006297077308, "system_level_velocity_min": 6.2783276208129, "outflow_rate_min": 201.07885714285712, "system_level_velocity_max": 19.086572453305404}, "info": {"num_steps_trained": 349247, "load_time_ms": 22.697, "grad_time_ms": 10418.48, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 10.469688415527344, "vf_loss": 10.472514152526855, "policy_loss": -0.0035249784123152494, "kl": 0.01397029310464859, "vf_explained_var": 0.7029532790184021, "entropy": 1.362716794013977}, "update_time_ms": 82.258, "num_steps_sampled": 349247, "sample_time_ms": 15298.55}, "episode_len_mean": 693.5, "time_this_iter_s": 25.458998680114746, "pid": 12036, "timesteps_total": 349247, "hostname": "flow-main", "episodes_total": 114, "timestamp": 1557223087, "episode_reward_max": 833.3827018360648, "episodes_this_iter": 20, "time_total_s": 207.37579202651978, "time_since_restore": 207.37579202651978}
{"timesteps_since_restore": 389343, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd5c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfda58>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-58-31", "episode_reward_min": 47.75389899515084, "timesteps_this_iter": 40096, "training_iteration": 9, "episode_reward_mean": 631.3237359392882, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 9, "custom_metrics": {"cost2_mean": -72.35872375670623, "outflow_rate_max": 1001.1510909090908, "cost1_mean": 251.64100605165578, "system_level_velocity_mean": 9.693980458278036, "cost2_min": -157.73578631360647, "cost1_max": 321.82903250704913, "cost1_min": 33.71097467114227, "cost2_max": -29.216365232077276, "outflow_rate_mean": 730.1083363570814, "system_level_velocity_min": 6.2783276208129, "outflow_rate_min": 201.07885714285712, "system_level_velocity_max": 19.086572453305404}, "info": {"num_steps_trained": 389343, "load_time_ms": 21.067, "grad_time_ms": 10369.371, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 6.704056262969971, "vf_loss": 6.705418109893799, "policy_loss": -0.0017985474551096559, "kl": 0.00874753762036562, "vf_explained_var": 0.8245903253555298, "entropy": 1.3626638650894165}, "update_time_ms": 73.979, "num_steps_sampled": 389343, "sample_time_ms": 15097.944}, "episode_len_mean": 693.5, "time_this_iter_s": 23.584317207336426, "pid": 12036, "timesteps_total": 389343, "hostname": "flow-main", "episodes_total": 125, "timestamp": 1557223111, "episode_reward_max": 833.3827018360648, "episodes_this_iter": 11, "time_total_s": 230.9601092338562, "time_since_restore": 230.9601092338562}
{"timesteps_since_restore": 429649, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd031d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd032e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-58-54", "episode_reward_min": 373.59756703827185, "timesteps_this_iter": 40306, "training_iteration": 10, "episode_reward_mean": 708.9342671009013, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 10, "custom_metrics": {"cost2_mean": -59.58226371613759, "outflow_rate_max": 1015.6026285714287, "cost1_mean": 264.9937942196288, "system_level_velocity_mean": 10.00381353455069, "cost2_min": -132.55711646081397, "cost1_max": 313.2755743124033, "cost1_min": 179.01593148815417, "cost2_max": -34.261063937685, "outflow_rate_mean": 809.6980002597404, "system_level_velocity_min": 6.759430212923217, "outflow_rate_min": 333.4731428571429, "system_level_velocity_max": 12.045312773842449}, "info": {"num_steps_trained": 429649, "load_time_ms": 20.279, "grad_time_ms": 10311.837, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 12.232667922973633, "vf_loss": 12.23410415649414, "policy_loss": -0.001899244263768196, "kl": 0.00925242155790329, "vf_explained_var": 0.6999799609184265, "entropy": 1.3456898927688599}, "update_time_ms": 67.44, "num_steps_sampled": 429649, "sample_time_ms": 14964.915}, "episode_len_mean": 700.0, "time_this_iter_s": 23.67941975593567, "pid": 12036, "timesteps_total": 429649, "hostname": "flow-main", "episodes_total": 145, "timestamp": 1557223134, "episode_reward_max": 867.3261474779014, "episodes_this_iter": 20, "time_total_s": 254.63952898979187, "time_since_restore": 254.63952898979187}
{"timesteps_since_restore": 469406, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc800f0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-59-19", "episode_reward_min": 520.9777750686478, "timesteps_this_iter": 39757, "training_iteration": 11, "episode_reward_mean": 776.8189011206575, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 11, "custom_metrics": {"cost2_mean": -53.48941007608465, "outflow_rate_max": 1066.5307012987012, "cost1_mean": 278.6774804048867, "system_level_velocity_mean": 10.51711934136718, "cost2_min": -132.55711646081397, "cost1_max": 330.5181839700594, "cost1_min": 196.54113284575294, "cost2_max": -34.261063937685, "outflow_rate_mean": 883.1863280519481, "system_level_velocity_min": 7.469707371657694, "outflow_rate_min": 486.9305766233767, "system_level_velocity_max": 12.621134867227143}, "info": {"num_steps_trained": 469406, "load_time_ms": 13.071, "grad_time_ms": 10172.732, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 10.736357688903809, "vf_loss": 10.737044334411621, "policy_loss": -0.0010527287377044559, "kl": 0.007303167134523392, "vf_explained_var": 0.7575260996818542, "entropy": 1.3457667827606201}, "update_time_ms": 8.117, "num_steps_sampled": 469406, "sample_time_ms": 14726.588}, "episode_len_mean": 700.0, "time_this_iter_s": 24.39358353614807, "pid": 12036, "timesteps_total": 469406, "hostname": "flow-main", "episodes_total": 161, "timestamp": 1557223159, "episode_reward_max": 922.8969461468565, "episodes_this_iter": 16, "time_total_s": 279.03311252593994, "time_since_restore": 279.03311252593994}
{"timesteps_since_restore": 510702, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd9b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd160>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_09-59-44", "episode_reward_min": 586.6151571302489, "timesteps_this_iter": 41296, "training_iteration": 12, "episode_reward_mean": 820.254088534955, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 12, "custom_metrics": {"cost2_mean": -52.5322047154633, "outflow_rate_max": 1068.2401558441557, "cost1_mean": 288.1857722373632, "system_level_velocity_mean": 10.855670010859301, "cost2_min": -80.62519431421244, "cost1_max": 335.3800681159905, "cost1_min": 226.29588719839464, "cost2_max": -34.261063937685, "outflow_rate_mean": 924.1410775784217, "system_level_velocity_min": 8.596050709955662, "outflow_rate_min": 711.247142857143, "system_level_velocity_max": 12.766061579637839}, "info": {"num_steps_trained": 510702, "load_time_ms": 12.983, "grad_time_ms": 10136.73, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 8.69493293762207, "vf_loss": 8.697346687316895, "policy_loss": -0.002868123585358262, "kl": 0.009094486013054848, "vf_explained_var": 0.8673827648162842, "entropy": 1.361656665802002}, "update_time_ms": 8.214, "num_steps_sampled": 510702, "sample_time_ms": 14477.533}, "episode_len_mean": 700.0, "time_this_iter_s": 25.57371163368225, "pid": 12036, "timesteps_total": 510702, "hostname": "flow-main", "episodes_total": 178, "timestamp": 1557223184, "episode_reward_max": 957.4536288594031, "episodes_this_iter": 17, "time_total_s": 304.6068241596222, "time_since_restore": 304.6068241596222}
{"timesteps_since_restore": 553187, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03828>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03550>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-00-11", "episode_reward_min": 750.8598290078754, "timesteps_this_iter": 42485, "training_iteration": 13, "episode_reward_mean": 845.0181169975153, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 13, "custom_metrics": {"cost2_mean": -56.75290768056515, "outflow_rate_max": 1123.2314201798201, "cost1_mean": 295.14726440801144, "system_level_velocity_mean": 11.09305504533803, "cost2_min": -104.26292764323841, "cost1_max": 340.3281559264019, "cost1_min": 247.03358927145132, "cost2_max": -34.261063937685, "outflow_rate_mean": 947.6514668011988, "system_level_velocity_min": 9.32041690803136, "outflow_rate_min": 807.464161038961, "system_level_velocity_max": 12.81383158264969}, "info": {"num_steps_trained": 553187, "load_time_ms": 12.761, "grad_time_ms": 10022.058, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 6.103725433349609, "vf_loss": 6.107970714569092, "policy_loss": -0.004836371634155512, "kl": 0.011838022619485855, "vf_explained_var": 0.9263883829116821, "entropy": 1.3689512014389038}, "update_time_ms": 8.411, "num_steps_sampled": 553187, "sample_time_ms": 14454.92}, "episode_len_mean": 700.0, "time_this_iter_s": 26.886661291122437, "pid": 12036, "timesteps_total": 553187, "hostname": "flow-main", "episodes_total": 197, "timestamp": 1557223211, "episode_reward_max": 973.0248885721899, "episodes_this_iter": 19, "time_total_s": 331.49348545074463, "time_since_restore": 331.49348545074463}
{"timesteps_since_restore": 594524, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc807f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80c50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-00-37", "episode_reward_min": 49.251470299694176, "timesteps_this_iter": 41337, "training_iteration": 14, "episode_reward_mean": 834.0546341765333, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 14, "custom_metrics": {"cost2_mean": -56.05553031065014, "outflow_rate_max": 1123.2314201798201, "cost1_mean": 291.9779955161503, "system_level_velocity_mean": 11.398963573837827, "cost2_min": -104.26292764323841, "cost1_max": 340.3281559264019, "cost1_min": 30.800250724562957, "cost2_max": -21.8918299226368, "outflow_rate_mean": 942.1427391482067, "system_level_velocity_min": 9.32041690803136, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.544187678916224}, "info": {"num_steps_trained": 594524, "load_time_ms": 12.579, "grad_time_ms": 9893.065, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 7.091272830963135, "vf_loss": 7.094033718109131, "policy_loss": -0.0033105500042438507, "kl": 0.01098739355802536, "vf_explained_var": 0.8933308124542236, "entropy": 1.3504911661148071}, "update_time_ms": 8.4, "num_steps_sampled": 594524, "sample_time_ms": 14593.382}, "episode_len_mean": 682.76, "time_this_iter_s": 25.647174835205078, "pid": 12036, "timesteps_total": 594524, "hostname": "flow-main", "episodes_total": 209, "timestamp": 1557223237, "episode_reward_max": 973.0248885721899, "episodes_this_iter": 12, "time_total_s": 357.1406602859497, "time_since_restore": 357.1406602859497}
{"timesteps_since_restore": 635144, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80518>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-01-02", "episode_reward_min": 49.251470299694176, "timesteps_this_iter": 40620, "training_iteration": 15, "episode_reward_mean": 853.542193133332, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 15, "custom_metrics": {"cost2_mean": -57.78412688887768, "outflow_rate_max": 1138.8886545454548, "cost1_mean": 298.71443075516476, "system_level_velocity_mean": 11.660259188600564, "cost2_min": -104.26292764323841, "cost1_max": 353.46820835204005, "cost1_min": 30.800250724562957, "cost2_max": -21.8918299226368, "outflow_rate_mean": 965.3921725508043, "system_level_velocity_min": 9.364892440893584, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.544187678916224}, "info": {"num_steps_trained": 635144, "load_time_ms": 12.414, "grad_time_ms": 9804.447, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 10.157808303833008, "vf_loss": 10.1602783203125, "policy_loss": -0.0031428176444023848, "kl": 0.013467355631291866, "vf_explained_var": 0.8497015833854675, "entropy": 1.3522529602050781}, "update_time_ms": 8.761, "num_steps_sampled": 635144, "sample_time_ms": 14688.967}, "episode_len_mean": 682.76, "time_this_iter_s": 24.79495930671692, "pid": 12036, "timesteps_total": 635144, "hostname": "flow-main", "episodes_total": 228, "timestamp": 1557223262, "episode_reward_max": 973.0248885721899, "episodes_this_iter": 19, "time_total_s": 381.9356195926666, "time_since_restore": 381.9356195926666}
{"timesteps_since_restore": 676037, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a668>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-01-27", "episode_reward_min": 49.251470299694176, "timesteps_this_iter": 40893, "training_iteration": 16, "episode_reward_mean": 855.4259856453283, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 16, "custom_metrics": {"cost2_mean": -58.94222811598327, "outflow_rate_max": 1138.8886545454548, "cost1_mean": 301.8789771162072, "system_level_velocity_mean": 11.788451355266432, "cost2_min": -104.26292764323841, "cost1_max": 353.46820835204005, "cost1_min": 30.800250724562957, "cost2_max": -21.8918299226368, "outflow_rate_mean": 973.080003375979, "system_level_velocity_min": 9.469202825528566, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.544187678916224}, "info": {"num_steps_trained": 676037, "load_time_ms": 12.564, "grad_time_ms": 9704.453, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 9.25343132019043, "vf_loss": 9.254590034484863, "policy_loss": -0.0016387079376727343, "kl": 0.009623836725950241, "vf_explained_var": 0.9045264720916748, "entropy": 1.3584223985671997}, "update_time_ms": 8.743, "num_steps_sampled": 676037, "sample_time_ms": 14957.696}, "episode_len_mean": 682.76, "time_this_iter_s": 24.910568475723267, "pid": 12036, "timesteps_total": 676037, "hostname": "flow-main", "episodes_total": 243, "timestamp": 1557223287, "episode_reward_max": 973.0248885721899, "episodes_this_iter": 15, "time_total_s": 406.8461880683899, "time_since_restore": 406.8461880683899}
{"timesteps_since_restore": 715490, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc807f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80b38>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-01-51", "episode_reward_min": 44.54908958235546, "timesteps_this_iter": 39453, "training_iteration": 17, "episode_reward_mean": 835.6781993019292, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 17, "custom_metrics": {"cost2_mean": -58.56739026721169, "outflow_rate_max": 1138.8886545454548, "cost1_mean": 300.51218920638536, "system_level_velocity_mean": 11.941570089662516, "cost2_min": -104.26292764323841, "cost1_max": 357.76565002057754, "cost1_min": 27.89594536067188, "cost2_max": -20.02883348327227, "outflow_rate_mean": 963.1841111469882, "system_level_velocity_min": 9.469202825528566, "outflow_rate_min": 332.19890697104705, "system_level_velocity_max": 18.81777715773901}, "info": {"num_steps_trained": 715490, "load_time_ms": 12.284, "grad_time_ms": 9580.583, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 11.136219024658203, "vf_loss": 11.137772560119629, "policy_loss": -0.0019542875234037638, "kl": 0.008012669160962105, "vf_explained_var": 0.8724907040596008, "entropy": 1.3471333980560303}, "update_time_ms": 8.476, "num_steps_sampled": 715490, "sample_time_ms": 15222.676}, "episode_len_mean": 676.19, "time_this_iter_s": 24.20832085609436, "pid": 12036, "timesteps_total": 715490, "hostname": "flow-main", "episodes_total": 260, "timestamp": 1557223311, "episode_reward_max": 973.0248885721899, "episodes_this_iter": 17, "time_total_s": 431.05450892448425, "time_since_restore": 431.05450892448425}
{"timesteps_since_restore": 753659, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ab00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ac18>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a860>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-02-14", "episode_reward_min": 44.54908958235546, "timesteps_this_iter": 38169, "training_iteration": 18, "episode_reward_mean": 823.6257268252034, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 18, "custom_metrics": {"cost2_mean": -55.821369304537114, "outflow_rate_max": 1159.0255480519481, "cost1_mean": 300.5895457447751, "system_level_velocity_mean": 11.990218292840769, "cost2_min": -104.26292764323841, "cost1_max": 357.76565002057754, "cost1_min": 27.89594536067188, "cost2_max": -20.02883348327227, "outflow_rate_mean": 960.1522596984369, "system_level_velocity_min": 9.469202825528566, "outflow_rate_min": 332.19890697104705, "system_level_velocity_max": 18.81777715773901}, "info": {"num_steps_trained": 753659, "load_time_ms": 12.246, "grad_time_ms": 9442.936, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 13.48310661315918, "vf_loss": 13.485390663146973, "policy_loss": -0.002868895186111331, "kl": 0.011679287068545818, "vf_explained_var": 0.8206688761711121, "entropy": 1.337410569190979}, "update_time_ms": 8.248, "num_steps_sampled": 753659, "sample_time_ms": 15119.182}, "episode_len_mean": 676.19, "time_this_iter_s": 23.033928394317627, "pid": 12036, "timesteps_total": 753659, "hostname": "flow-main", "episodes_total": 279, "timestamp": 1557223334, "episode_reward_max": 973.0248885721899, "episodes_this_iter": 19, "time_total_s": 454.0884373188019, "time_since_restore": 454.0884373188019}
{"timesteps_since_restore": 792226, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80dd8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-02-38", "episode_reward_min": 44.54908958235546, "timesteps_this_iter": 38567, "training_iteration": 19, "episode_reward_mean": 811.580694354953, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 19, "custom_metrics": {"cost2_mean": -48.3604653386921, "outflow_rate_max": 1206.9406857142856, "cost1_mean": 300.07347244122656, "system_level_velocity_mean": 12.15956217267415, "cost2_min": -70.17930347198495, "cost1_max": 357.76565002057754, "cost1_min": 27.89594536067188, "cost2_max": -20.02883348327227, "outflow_rate_mean": 963.8173410105762, "system_level_velocity_min": 9.469202825528566, "outflow_rate_min": 332.19890697104705, "system_level_velocity_max": 18.81777715773901}, "info": {"num_steps_trained": 792226, "load_time_ms": 12.656, "grad_time_ms": 9403.747, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.050000011920928955, "total_loss": 13.88233757019043, "vf_loss": 13.883930206298828, "policy_loss": -0.0020493546035140753, "kl": 0.009120706468820572, "vf_explained_var": 0.8314067125320435, "entropy": 1.3289735317230225}, "update_time_ms": 8.254, "num_steps_sampled": 792226, "sample_time_ms": 15156.854}, "episode_len_mean": 670.34, "time_this_iter_s": 23.55294680595398, "pid": 12036, "timesteps_total": 792226, "hostname": "flow-main", "episodes_total": 299, "timestamp": 1557223358, "episode_reward_max": 970.7072266080179, "episodes_this_iter": 20, "time_total_s": 477.64138412475586, "time_since_restore": 477.64138412475586}
{"timesteps_since_restore": 831540, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc807f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80c50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-03-02", "episode_reward_min": 44.54908958235546, "timesteps_this_iter": 39314, "training_iteration": 20, "episode_reward_mean": 828.6491117867545, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 20, "custom_metrics": {"cost2_mean": -46.506933725273996, "outflow_rate_max": 1206.9406857142856, "cost1_mean": 310.0616086417906, "system_level_velocity_mean": 12.184584375846708, "cost2_min": -70.17930347198495, "cost1_max": 363.1728424285674, "cost1_min": 27.89594536067188, "cost2_max": -20.02883348327227, "outflow_rate_mean": 991.9950480361955, "system_level_velocity_min": 9.469202825528566, "outflow_rate_min": 332.19890697104705, "system_level_velocity_max": 18.81777715773901}, "info": {"num_steps_trained": 831540, "load_time_ms": 12.473, "grad_time_ms": 9426.505, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 13.324121475219727, "vf_loss": 13.325201988220215, "policy_loss": -0.0016118063358590007, "kl": 0.010605458170175552, "vf_explained_var": 0.8140811920166016, "entropy": 1.3246427774429321}, "update_time_ms": 8.223, "num_steps_sampled": 831540, "sample_time_ms": 15215.533}, "episode_len_mean": 687.58, "time_this_iter_s": 24.478521585464478, "pid": 12036, "timesteps_total": 831540, "hostname": "flow-main", "episodes_total": 319, "timestamp": 1557223382, "episode_reward_max": 970.7072266080179, "episodes_this_iter": 20, "time_total_s": 502.11990571022034, "time_since_restore": 502.11990571022034}
{"timesteps_since_restore": 870228, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a400>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-03-27", "episode_reward_min": 44.05816497132135, "timesteps_this_iter": 38688, "training_iteration": 21, "episode_reward_mean": 822.2639150039889, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 21, "custom_metrics": {"cost2_mean": -45.08836241106789, "outflow_rate_max": 1206.9406857142856, "cost1_mean": 309.5401549907743, "system_level_velocity_mean": 12.374946875334475, "cost2_min": -55.91862303420655, "cost1_max": 363.1728424285674, "cost1_min": 27.89594536067188, "cost2_max": -20.02883348327227, "outflow_rate_mean": 995.0479295924051, "system_level_velocity_min": 9.554694953228342, "outflow_rate_min": 332.19890697104705, "system_level_velocity_max": 18.865339705648434}, "info": {"num_steps_trained": 870228, "load_time_ms": 12.422, "grad_time_ms": 9405.147, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 10.217070579528809, "vf_loss": 10.218526840209961, "policy_loss": -0.0018528546206653118, "kl": 0.007921731099486351, "vf_explained_var": 0.8492581248283386, "entropy": 1.3396806716918945}, "update_time_ms": 8.462, "num_steps_sampled": 870228, "sample_time_ms": 15312.073}, "episode_len_mean": 681.01, "time_this_iter_s": 25.121692895889282, "pid": 12036, "timesteps_total": 870228, "hostname": "flow-main", "episodes_total": 332, "timestamp": 1557223407, "episode_reward_max": 952.6675821069704, "episodes_this_iter": 13, "time_total_s": 527.2415986061096, "time_since_restore": 527.2415986061096}
{"timesteps_since_restore": 909351, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8af60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ae10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ac18>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-03-52", "episode_reward_min": 44.05816497132135, "timesteps_this_iter": 39123, "training_iteration": 22, "episode_reward_mean": 823.4859867724424, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 22, "custom_metrics": {"cost2_mean": -45.209935091489406, "outflow_rate_max": 1228.7718845154845, "cost1_mean": 311.92891757016554, "system_level_velocity_mean": 12.65743786483415, "cost2_min": -55.65728928910677, "cost1_max": 363.2888439769133, "cost1_min": 28.039859843876968, "cost2_max": -20.20490680750508, "outflow_rate_mean": 1011.8467370889578, "system_level_velocity_min": 9.554694953228342, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.865339705648434}, "info": {"num_steps_trained": 909351, "load_time_ms": 12.394, "grad_time_ms": 9379.929, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 15.18623161315918, "vf_loss": 15.187219619750977, "policy_loss": -0.0013579062651842833, "kl": 0.007400124799460173, "vf_explained_var": 0.8129134178161621, "entropy": 1.340410828590393}, "update_time_ms": 8.512, "num_steps_sampled": 909351, "sample_time_ms": 15301.551}, "episode_len_mean": 673.23, "time_this_iter_s": 25.235913038253784, "pid": 12036, "timesteps_total": 909351, "hostname": "flow-main", "episodes_total": 354, "timestamp": 1557223432, "episode_reward_max": 944.3236927769501, "episodes_this_iter": 22, "time_total_s": 552.4775116443634, "time_since_restore": 552.4775116443634}
{"timesteps_since_restore": 948727, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80518>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9461150a20>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-04-16", "episode_reward_min": 44.05816497132135, "timesteps_this_iter": 39376, "training_iteration": 23, "episode_reward_mean": 832.9518454738406, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 23, "custom_metrics": {"cost2_mean": -45.44677315773902, "outflow_rate_max": 1228.7718845154845, "cost1_mean": 313.704692662816, "system_level_velocity_mean": 12.788316372651412, "cost2_min": -55.65728928910677, "cost1_max": 363.2888439769133, "cost1_min": 28.039859843876968, "cost2_max": -20.20490680750508, "outflow_rate_mean": 1023.7492203611378, "system_level_velocity_min": 9.851300845532878, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.865339705648434}, "info": {"num_steps_trained": 948727, "load_time_ms": 12.536, "grad_time_ms": 9386.119, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 10.85672378540039, "vf_loss": 10.857609748840332, "policy_loss": -0.0012497674906626344, "kl": 0.007294409442692995, "vf_explained_var": 0.8607402443885803, "entropy": 1.3289059400558472}, "update_time_ms": 8.355, "num_steps_sampled": 948727, "sample_time_ms": 15003.154}, "episode_len_mean": 670.54, "time_this_iter_s": 23.92871928215027, "pid": 12036, "timesteps_total": 948727, "hostname": "flow-main", "episodes_total": 368, "timestamp": 1557223456, "episode_reward_max": 958.7629806839036, "episodes_this_iter": 14, "time_total_s": 576.4062309265137, "time_since_restore": 576.4062309265137}
{"timesteps_since_restore": 988357, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc808d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc809e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-04-43", "episode_reward_min": 44.05816497132135, "timesteps_this_iter": 39630, "training_iteration": 24, "episode_reward_mean": 831.2112562107789, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 24, "custom_metrics": {"cost2_mean": -46.074491776667166, "outflow_rate_max": 1228.7718845154845, "cost1_mean": 312.49729334515416, "system_level_velocity_mean": 13.029614540889083, "cost2_min": -55.65728928910677, "cost1_max": 364.04832599436673, "cost1_min": 28.039859843876968, "cost2_max": -20.20490680750508, "outflow_rate_mean": 1030.6371432603867, "system_level_velocity_min": 10.550627326870496, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.865339705648434}, "info": {"num_steps_trained": 988357, "load_time_ms": 12.422, "grad_time_ms": 9401.033, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 14.500344276428223, "vf_loss": 14.501526832580566, "policy_loss": -0.0017276317812502384, "kl": 0.010911880992352962, "vf_explained_var": 0.8199490308761597, "entropy": 1.3158036470413208}, "update_time_ms": 8.34, "num_steps_sampled": 988357, "sample_time_ms": 15114.012}, "episode_len_mean": 659.72, "time_this_iter_s": 26.900294065475464, "pid": 12036, "timesteps_total": 988357, "hostname": "flow-main", "episodes_total": 387, "timestamp": 1557223483, "episode_reward_max": 967.3020805052803, "episodes_this_iter": 19, "time_total_s": 603.3065249919891, "time_since_restore": 603.3065249919891}
{"timesteps_since_restore": 1026838, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd039b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-05-07", "episode_reward_min": 44.05816497132135, "timesteps_this_iter": 38481, "training_iteration": 25, "episode_reward_mean": 842.7791409958501, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 25, "custom_metrics": {"cost2_mean": -46.09984189318097, "outflow_rate_max": 1228.7718845154845, "cost1_mean": 311.96298056110936, "system_level_velocity_mean": 13.071148693705585, "cost2_min": -55.65728928910677, "cost1_max": 364.04832599436673, "cost1_min": 28.039859843876968, "cost2_max": -20.20490680750508, "outflow_rate_mean": 1036.07559380299, "system_level_velocity_min": 10.70620126370851, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.865339705648434}, "info": {"num_steps_trained": 1026838, "load_time_ms": 12.511, "grad_time_ms": 9398.934, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 16.44536781311035, "vf_loss": 16.448348999023438, "policy_loss": -0.003520598402246833, "kl": 0.010735087096691132, "vf_explained_var": 0.7883030772209167, "entropy": 1.3135554790496826}, "update_time_ms": 8.028, "num_steps_sampled": 1026838, "sample_time_ms": 14985.709}, "episode_len_mean": 656.55, "time_this_iter_s": 23.500070095062256, "pid": 12036, "timesteps_total": 1026838, "hostname": "flow-main", "episodes_total": 408, "timestamp": 1557223507, "episode_reward_max": 979.3412560216783, "episodes_this_iter": 21, "time_total_s": 626.8065950870514, "time_since_restore": 626.8065950870514}
{"timesteps_since_restore": 1065917, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fd30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fbe0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f358>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-05-32", "episode_reward_min": 44.05816497132135, "timesteps_this_iter": 39079, "training_iteration": 26, "episode_reward_mean": 838.1077254660933, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 26, "custom_metrics": {"cost2_mean": -45.560453706514856, "outflow_rate_max": 1228.7718845154845, "cost1_mean": 309.35846151012487, "system_level_velocity_mean": 13.049769424323681, "cost2_min": -55.65728928910677, "cost1_max": 364.04832599436673, "cost1_min": 28.039859843876968, "cost2_max": -20.20490680750508, "outflow_rate_mean": 1031.5296515953144, "system_level_velocity_min": 10.70620126370851, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.865339705648434}, "info": {"num_steps_trained": 1065917, "load_time_ms": 12.523, "grad_time_ms": 9411.554, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 12.707220077514648, "vf_loss": 12.710009574890137, "policy_loss": -0.0032828636467456818, "kl": 0.009865261614322662, "vf_explained_var": 0.8361400961875916, "entropy": 1.3232966661453247}, "update_time_ms": 8.038, "num_steps_sampled": 1065917, "sample_time_ms": 14947.284}, "episode_len_mean": 652.45, "time_this_iter_s": 24.663273334503174, "pid": 12036, "timesteps_total": 1065917, "hostname": "flow-main", "episodes_total": 424, "timestamp": 1557223532, "episode_reward_max": 979.3412560216783, "episodes_this_iter": 16, "time_total_s": 651.4698684215546, "time_since_restore": 651.4698684215546}
{"timesteps_since_restore": 1105317, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80d30>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-05-56", "episode_reward_min": 46.01773352169471, "timesteps_this_iter": 39400, "training_iteration": 27, "episode_reward_mean": 852.7101918705748, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 27, "custom_metrics": {"cost2_mean": -44.92030340837939, "outflow_rate_max": 1228.7718845154845, "cost1_mean": 312.79505617410956, "system_level_velocity_mean": 12.905352549154145, "cost2_min": -55.556687356249924, "cost1_max": 364.04832599436673, "cost1_min": 30.60962193545768, "cost2_max": -21.903475702010184, "outflow_rate_mean": 1037.5254180042741, "system_level_velocity_min": 10.70620126370851, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.573219576381256}, "info": {"num_steps_trained": 1105317, "load_time_ms": 12.623, "grad_time_ms": 9411.953, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 13.413763046264648, "vf_loss": 13.41534423828125, "policy_loss": -0.0021359119564294815, "kl": 0.011069996282458305, "vf_explained_var": 0.8431354761123657, "entropy": 1.323725938796997}, "update_time_ms": 8.209, "num_steps_sampled": 1105317, "sample_time_ms": 14958.116}, "episode_len_mean": 662.25, "time_this_iter_s": 24.334794998168945, "pid": 12036, "timesteps_total": 1105317, "hostname": "flow-main", "episodes_total": 444, "timestamp": 1557223556, "episode_reward_max": 979.3412560216783, "episodes_this_iter": 20, "time_total_s": 675.8046634197235, "time_since_restore": 675.8046634197235}
{"timesteps_since_restore": 1144935, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8aa20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a7f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8af28>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-06-20", "episode_reward_min": 42.15356203330312, "timesteps_this_iter": 39618, "training_iteration": 28, "episode_reward_mean": 850.1782454731166, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 28, "custom_metrics": {"cost2_mean": -43.431799653580704, "outflow_rate_max": 1217.1512571428573, "cost1_mean": 310.0249827438422, "system_level_velocity_mean": 12.872918195119887, "cost2_min": -55.556687356249924, "cost1_max": 364.04832599436673, "cost1_min": 27.934497684045414, "cost2_max": -19.36381556842212, "outflow_rate_mean": 1028.2617111135876, "system_level_velocity_min": 10.304716500103321, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 18.793673069209284}, "info": {"num_steps_trained": 1144935, "load_time_ms": 12.64, "grad_time_ms": 9417.857, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 12.617894172668457, "vf_loss": 12.61992073059082, "policy_loss": -0.002653160598129034, "kl": 0.012558642774820328, "vf_explained_var": 0.8480797410011292, "entropy": 1.3202611207962036}, "update_time_ms": 8.198, "num_steps_sampled": 1144935, "sample_time_ms": 15013.502}, "episode_len_mean": 659.61, "time_this_iter_s": 23.673620223999023, "pid": 12036, "timesteps_total": 1144935, "hostname": "flow-main", "episodes_total": 460, "timestamp": 1557223580, "episode_reward_max": 979.3412560216783, "episodes_this_iter": 16, "time_total_s": 699.4782836437225, "time_since_restore": 699.4782836437225}
{"timesteps_since_restore": 1183326, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f0b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ffd0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-06-46", "episode_reward_min": 42.15356203330312, "timesteps_this_iter": 38391, "training_iteration": 29, "episode_reward_mean": 858.5639653030881, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 29, "custom_metrics": {"cost2_mean": -41.6408011852216, "outflow_rate_max": 1217.1512571428573, "cost1_mean": 312.2813245597088, "system_level_velocity_mean": 12.770200250963235, "cost2_min": -52.537161128558544, "cost1_max": 361.84444797279536, "cost1_min": 27.934497684045414, "cost2_max": -19.36381556842212, "outflow_rate_mean": 1034.278387090888, "system_level_velocity_min": 10.304716500103321, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.793673069209284}, "info": {"num_steps_trained": 1183326, "load_time_ms": 12.834, "grad_time_ms": 9351.556, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 17.852737426757812, "vf_loss": 17.854259490966797, "policy_loss": -0.0020698760636150837, "kl": 0.010992391034960747, "vf_explained_var": 0.7630010843276978, "entropy": 1.2987604141235352}, "update_time_ms": 8.151, "num_steps_sampled": 1183326, "sample_time_ms": 15347.119}, "episode_len_mean": 667.3, "time_this_iter_s": 26.231016635894775, "pid": 12036, "timesteps_total": 1183326, "hostname": "flow-main", "episodes_total": 480, "timestamp": 1557223606, "episode_reward_max": 979.3412560216783, "episodes_this_iter": 20, "time_total_s": 725.7093002796173, "time_since_restore": 725.7093002796173}
{"timesteps_since_restore": 1221492, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fbe0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f828>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-07-09", "episode_reward_min": 42.15356203330312, "timesteps_this_iter": 38166, "training_iteration": 30, "episode_reward_mean": 849.8124358571293, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 30, "custom_metrics": {"cost2_mean": -39.56369431443901, "outflow_rate_max": 1217.1512571428573, "cost1_mean": 310.33472421271875, "system_level_velocity_mean": 12.725581123220236, "cost2_min": -52.537161128558544, "cost1_max": 361.84444797279536, "cost1_min": 27.934497684045414, "cost2_max": -19.36381556842212, "outflow_rate_mean": 1026.5617380439348, "system_level_velocity_min": 10.304716500103321, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.793673069209284}, "info": {"num_steps_trained": 1221492, "load_time_ms": 12.844, "grad_time_ms": 9201.13, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 16.28335952758789, "vf_loss": 16.285888671875, "policy_loss": -0.003072872292250395, "kl": 0.010919157415628433, "vf_explained_var": 0.786486029624939, "entropy": 1.3015427589416504}, "update_time_ms": 8.084, "num_steps_sampled": 1221492, "sample_time_ms": 15338.949}, "episode_len_mean": 666.47, "time_this_iter_s": 22.887415409088135, "pid": 12036, "timesteps_total": 1221492, "hostname": "flow-main", "episodes_total": 498, "timestamp": 1557223629, "episode_reward_max": 963.8006746285364, "episodes_this_iter": 18, "time_total_s": 748.5967156887054, "time_since_restore": 748.5967156887054}
{"timesteps_since_restore": 1260288, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc807f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80ef0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-07-34", "episode_reward_min": 42.15356203330312, "timesteps_this_iter": 38796, "training_iteration": 31, "episode_reward_mean": 850.3077940922328, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 31, "custom_metrics": {"cost2_mean": -38.222523444311214, "outflow_rate_max": 1217.1512571428573, "cost1_mean": 311.47167770669904, "system_level_velocity_mean": 12.78475228963775, "cost2_min": -52.537161128558544, "cost1_max": 357.84883481306065, "cost1_min": 27.934497684045414, "cost2_max": -19.36381556842212, "outflow_rate_mean": 1028.1866265981744, "system_level_velocity_min": 10.304716500103321, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.793673069209284}, "info": {"num_steps_trained": 1260288, "load_time_ms": 12.859, "grad_time_ms": 9077.33, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.050000011920928955, "total_loss": 16.579721450805664, "vf_loss": 16.581558227539062, "policy_loss": -0.002536125248298049, "kl": 0.01401002611964941, "vf_explained_var": 0.7383387684822083, "entropy": 1.2826141119003296}, "update_time_ms": 7.733, "num_steps_sampled": 1260288, "sample_time_ms": 15490.548}, "episode_len_mean": 666.74, "time_this_iter_s": 25.3967502117157, "pid": 12036, "timesteps_total": 1260288, "hostname": "flow-main", "episodes_total": 515, "timestamp": 1557223654, "episode_reward_max": 962.7895393917813, "episodes_this_iter": 17, "time_total_s": 773.9934659004211, "time_since_restore": 773.9934659004211}
{"timesteps_since_restore": 1298992, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fa90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8feb8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-07-58", "episode_reward_min": 42.15356203330312, "timesteps_this_iter": 38704, "training_iteration": 32, "episode_reward_mean": 859.8712265960216, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 32, "custom_metrics": {"cost2_mean": -38.446711973150045, "outflow_rate_max": 1208.605007792208, "cost1_mean": 313.6509762551506, "system_level_velocity_mean": 12.767660879739894, "cost2_min": -53.164950063197615, "cost1_max": 356.0494024039436, "cost1_min": 27.934497684045414, "cost2_max": -19.36381556842212, "outflow_rate_mean": 1034.1663108438122, "system_level_velocity_min": 10.304716500103321, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.793673069209284}, "info": {"num_steps_trained": 1298992, "load_time_ms": 12.674, "grad_time_ms": 8935.522, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 14.342659950256348, "vf_loss": 14.34441089630127, "policy_loss": -0.0023078611120581627, "kl": 0.011149856261909008, "vf_explained_var": 0.8265689015388489, "entropy": 1.2677676677703857}, "update_time_ms": 7.512, "num_steps_sampled": 1298992, "sample_time_ms": 15477.336}, "episode_len_mean": 672.09, "time_this_iter_s": 23.692084550857544, "pid": 12036, "timesteps_total": 1298992, "hostname": "flow-main", "episodes_total": 534, "timestamp": 1557223678, "episode_reward_max": 980.2070873813414, "episodes_this_iter": 19, "time_total_s": 797.6855504512787, "time_since_restore": 797.6855504512787}
{"timesteps_since_restore": 1337758, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f3c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f668>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-08-22", "episode_reward_min": 208.25686479905198, "timesteps_this_iter": 38766, "training_iteration": 33, "episode_reward_mean": 872.2734834528975, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 33, "custom_metrics": {"cost2_mean": -39.68387289316639, "outflow_rate_max": 1269.9078545454545, "cost1_mean": 320.15361222390914, "system_level_velocity_mean": 12.833785894198268, "cost2_min": -53.164950063197615, "cost1_max": 374.7795881126525, "cost1_min": 98.68003393920264, "cost2_max": -26.96062846654759, "outflow_rate_mean": 1060.744355386959, "system_level_velocity_min": 10.304716500103321, "outflow_rate_min": 568.5314038425028, "system_level_velocity_max": 16.200739794368342}, "info": {"num_steps_trained": 1337758, "load_time_ms": 12.127, "grad_time_ms": 8743.409, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 12.49560832977295, "vf_loss": 12.497983932495117, "policy_loss": -0.00300193321891129, "kl": 0.01252360362559557, "vf_explained_var": 0.8550641536712646, "entropy": 1.2649658918380737}, "update_time_ms": 7.483, "num_steps_sampled": 1337758, "sample_time_ms": 15719.174}, "episode_len_mean": 679.9, "time_this_iter_s": 24.414603233337402, "pid": 12036, "timesteps_total": 1337758, "hostname": "flow-main", "episodes_total": 550, "timestamp": 1557223702, "episode_reward_max": 980.2070873813414, "episodes_this_iter": 16, "time_total_s": 822.1001536846161, "time_since_restore": 822.1001536846161}
{"timesteps_since_restore": 1376580, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fbe0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f2b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-08-49", "episode_reward_min": 50.10313125603646, "timesteps_this_iter": 38822, "training_iteration": 34, "episode_reward_mean": 858.9536033443516, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 34, "custom_metrics": {"cost2_mean": -40.751883473224524, "outflow_rate_max": 1269.9078545454545, "cost1_mean": 317.76640010908693, "system_level_velocity_mean": 13.041232350225652, "cost2_min": -54.17234511608529, "cost1_max": 378.23113534320913, "cost1_min": 32.78531526005782, "cost2_max": -22.215173269717717, "outflow_rate_mean": 1063.7135405042225, "system_level_velocity_min": 11.0640799251667, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.134979953336877}, "info": {"num_steps_trained": 1376580, "load_time_ms": 12.085, "grad_time_ms": 8652.658, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.050000011920928955, "total_loss": 17.754735946655273, "vf_loss": 17.756153106689453, "policy_loss": -0.001994332065805793, "kl": 0.011568291112780571, "vf_explained_var": 0.8013885021209717, "entropy": 1.2451682090759277}, "update_time_ms": 7.28, "num_steps_sampled": 1376580, "sample_time_ms": 15736.253}, "episode_len_mean": 667.99, "time_this_iter_s": 26.15538215637207, "pid": 12036, "timesteps_total": 1376580, "hostname": "flow-main", "episodes_total": 571, "timestamp": 1557223729, "episode_reward_max": 980.2070873813414, "episodes_this_iter": 21, "time_total_s": 848.2555358409882, "time_since_restore": 848.2555358409882}
{"timesteps_since_restore": 1414833, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ada0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8aef0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-09-14", "episode_reward_min": 50.10313125603646, "timesteps_this_iter": 38253, "training_iteration": 35, "episode_reward_mean": 867.3556368198595, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 35, "custom_metrics": {"cost2_mean": -41.70854701734247, "outflow_rate_max": 1269.9078545454545, "cost1_mean": 322.3190403493773, "system_level_velocity_mean": 13.1517923877921, "cost2_min": -54.17234511608529, "cost1_max": 378.23113534320913, "cost1_min": 32.78531526005782, "cost2_max": -22.215173269717717, "outflow_rate_mean": 1079.7328981537494, "system_level_velocity_min": 10.728842819541807, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.134979953336877}, "info": {"num_steps_trained": 1414833, "load_time_ms": 11.986, "grad_time_ms": 8641.592, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 16.092275619506836, "vf_loss": 16.093982696533203, "policy_loss": -0.0024388402234762907, "kl": 0.01465551182627678, "vf_explained_var": 0.8265218138694763, "entropy": 1.2690874338150024}, "update_time_ms": 7.523, "num_steps_sampled": 1414833, "sample_time_ms": 15929.158}, "episode_len_mean": 671.98, "time_this_iter_s": 25.31792426109314, "pid": 12036, "timesteps_total": 1414833, "hostname": "flow-main", "episodes_total": 588, "timestamp": 1557223754, "episode_reward_max": 980.2070873813414, "episodes_this_iter": 17, "time_total_s": 873.5734601020813, "time_since_restore": 873.5734601020813}
{"timesteps_since_restore": 1454303, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ff98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ff60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-09-38", "episode_reward_min": 50.10313125603646, "timesteps_this_iter": 39470, "training_iteration": 36, "episode_reward_mean": 861.9036690029028, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 36, "custom_metrics": {"cost2_mean": -43.9593639086614, "outflow_rate_max": 1269.9078545454545, "cost1_mean": 322.3591187527184, "system_level_velocity_mean": 13.286237750173516, "cost2_min": -58.11032881477004, "cost1_max": 378.23113534320913, "cost1_min": 32.78531526005782, "cost2_max": -22.215173269717717, "outflow_rate_mean": 1083.189232679923, "system_level_velocity_min": 10.728842819541807, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.134979953336877}, "info": {"num_steps_trained": 1454303, "load_time_ms": 12.122, "grad_time_ms": 8640.968, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 10.326767921447754, "vf_loss": 10.329084396362305, "policy_loss": -0.0031148656271398067, "kl": 0.015977125614881516, "vf_explained_var": 0.8969330191612244, "entropy": 1.275132179260254}, "update_time_ms": 7.596, "num_steps_sampled": 1454303, "sample_time_ms": 15834.244}, "episode_len_mean": 666.58, "time_this_iter_s": 23.702433347702026, "pid": 12036, "timesteps_total": 1454303, "hostname": "flow-main", "episodes_total": 606, "timestamp": 1557223778, "episode_reward_max": 984.5550648525958, "episodes_this_iter": 18, "time_total_s": 897.2758934497833, "time_since_restore": 897.2758934497833}
{"timesteps_since_restore": 1492340, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc804a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc808d0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-10-02", "episode_reward_min": 50.10313125603646, "timesteps_this_iter": 38037, "training_iteration": 37, "episode_reward_mean": 862.3030349611768, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 37, "custom_metrics": {"cost2_mean": -46.576859967243244, "outflow_rate_max": 1269.9078545454545, "cost1_mean": 323.03209701778445, "system_level_velocity_mean": 13.34940868158882, "cost2_min": -67.64403574407262, "cost1_max": 378.23113534320913, "cost1_min": 32.78531526005782, "cost2_max": -22.215173269717717, "outflow_rate_mean": 1087.15047853248, "system_level_velocity_min": 10.728842819541807, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.134979953336877}, "info": {"num_steps_trained": 1492340, "load_time_ms": 12.121, "grad_time_ms": 8611.621, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 14.48667049407959, "vf_loss": 14.489078521728516, "policy_loss": -0.003144599264487624, "kl": 0.014719512313604355, "vf_explained_var": 0.886228621006012, "entropy": 1.2784137725830078}, "update_time_ms": 7.422, "num_steps_sampled": 1492340, "sample_time_ms": 15810.023}, "episode_len_mean": 665.35, "time_this_iter_s": 23.789509057998657, "pid": 12036, "timesteps_total": 1492340, "hostname": "flow-main", "episodes_total": 625, "timestamp": 1557223802, "episode_reward_max": 994.2265866426683, "episodes_this_iter": 19, "time_total_s": 921.065402507782, "time_since_restore": 921.065402507782}
{"timesteps_since_restore": 1530147, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95d68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95208>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-10-27", "episode_reward_min": 24.869738702075743, "timesteps_this_iter": 37807, "training_iteration": 38, "episode_reward_mean": 858.6804754165008, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 38, "custom_metrics": {"cost2_mean": -46.40161532894692, "outflow_rate_max": 1276.5789246753247, "cost1_mean": 325.097724610848, "system_level_velocity_mean": 13.46763578033531, "cost2_min": -67.64403574407262, "cost1_max": 378.23113534320913, "cost1_min": 17.433504087093905, "cost2_max": -12.709235670430672, "outflow_rate_mean": 1086.7792000230108, "system_level_velocity_min": 10.728842819541807, "outflow_rate_min": 317.5287350200169, "system_level_velocity_max": 18.454072429567116}, "info": {"num_steps_trained": 1530147, "load_time_ms": 11.867, "grad_time_ms": 8563.559, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 14.820327758789062, "vf_loss": 14.824536323547363, "policy_loss": -0.004945350810885429, "kl": 0.014687101356685162, "vf_explained_var": 0.8394175171852112, "entropy": 1.2586532831192017}, "update_time_ms": 7.418, "num_steps_sampled": 1530147, "sample_time_ms": 16006.908}, "episode_len_mean": 666.01, "time_this_iter_s": 25.122013330459595, "pid": 12036, "timesteps_total": 1530147, "hostname": "flow-main", "episodes_total": 643, "timestamp": 1557223827, "episode_reward_max": 994.2265866426683, "episodes_this_iter": 18, "time_total_s": 946.1874158382416, "time_since_restore": 946.1874158382416}
{"timesteps_since_restore": 1568275, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9461150ba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9461150208>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-10-53", "episode_reward_min": 24.869738702075743, "timesteps_this_iter": 38128, "training_iteration": 39, "episode_reward_mean": 860.1774224790029, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 39, "custom_metrics": {"cost2_mean": -45.7552636073661, "outflow_rate_max": 1276.5789246753247, "cost1_mean": 326.48310187920646, "system_level_velocity_mean": 13.424737624133849, "cost2_min": -67.64403574407262, "cost1_max": 378.23113534320913, "cost1_min": 17.433504087093905, "cost2_max": -12.709235670430672, "outflow_rate_mean": 1083.970354324365, "system_level_velocity_min": 10.728842819541807, "outflow_rate_min": 317.5287350200169, "system_level_velocity_max": 18.454072429567116}, "info": {"num_steps_trained": 1568275, "load_time_ms": 11.587, "grad_time_ms": 8615.176, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 16.278600692749023, "vf_loss": 16.28057861328125, "policy_loss": -0.00264204409904778, "kl": 0.01322749350219965, "vf_explained_var": 0.8426039814949036, "entropy": 1.2355142831802368}, "update_time_ms": 7.507, "num_steps_sampled": 1568275, "sample_time_ms": 15932.981}, "episode_len_mean": 670.08, "time_this_iter_s": 26.001723289489746, "pid": 12036, "timesteps_total": 1568275, "hostname": "flow-main", "episodes_total": 663, "timestamp": 1557223853, "episode_reward_max": 994.2265866426683, "episodes_this_iter": 20, "time_total_s": 972.1891391277313, "time_since_restore": 972.1891391277313}
{"timesteps_since_restore": 1605594, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f5c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f9b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f358>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-11-18", "episode_reward_min": 24.869738702075743, "timesteps_this_iter": 37319, "training_iteration": 40, "episode_reward_mean": 847.303799898811, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 40, "custom_metrics": {"cost2_mean": -44.845283312156596, "outflow_rate_max": 1276.5789246753247, "cost1_mean": 323.8533608515589, "system_level_velocity_mean": 13.45413945952949, "cost2_min": -67.64403574407262, "cost1_max": 375.5324821544416, "cost1_min": 17.433504087093905, "cost2_max": -12.709235670430672, "outflow_rate_mean": 1070.1781711903109, "system_level_velocity_min": 11.280458972883283, "outflow_rate_min": 317.5287350200169, "system_level_velocity_max": 18.454072429567116}, "info": {"num_steps_trained": 1605594, "load_time_ms": 11.504, "grad_time_ms": 8605.501, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 17.68253517150879, "vf_loss": 17.684066772460938, "policy_loss": -0.0021435096859931946, "kl": 0.012213493697345257, "vf_explained_var": 0.7704869508743286, "entropy": 1.2146885395050049}, "update_time_ms": 7.399, "num_steps_sampled": 1605594, "sample_time_ms": 16222.691}, "episode_len_mean": 666.44, "time_this_iter_s": 25.685714721679688, "pid": 12036, "timesteps_total": 1605594, "hostname": "flow-main", "episodes_total": 680, "timestamp": 1557223878, "episode_reward_max": 994.2265866426683, "episodes_this_iter": 17, "time_total_s": 997.874853849411, "time_since_restore": 997.874853849411}
{"timesteps_since_restore": 1643028, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd898>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-11-44", "episode_reward_min": 24.869738702075743, "timesteps_this_iter": 37434, "training_iteration": 41, "episode_reward_mean": 838.3701131532855, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 41, "custom_metrics": {"cost2_mean": -42.60496413937226, "outflow_rate_max": 1276.5789246753247, "cost1_mean": 322.94186867856456, "system_level_velocity_mean": 13.373365602724352, "cost2_min": -67.64403574407262, "cost1_max": 375.5324821544416, "cost1_min": 17.433504087093905, "cost2_max": -12.709235670430672, "outflow_rate_mean": 1059.2567328281903, "system_level_velocity_min": 11.280458972883283, "outflow_rate_min": 317.5287350200169, "system_level_velocity_max": 18.454072429567116}, "info": {"num_steps_trained": 1643028, "load_time_ms": 11.584, "grad_time_ms": 8580.415, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 22.140010833740234, "vf_loss": 22.142324447631836, "policy_loss": -0.0030461137648671865, "kl": 0.014598874375224113, "vf_explained_var": 0.7362855076789856, "entropy": 1.2006443738937378}, "update_time_ms": 7.456, "num_steps_sampled": 1643028, "sample_time_ms": 16229.209}, "episode_len_mean": 670.06, "time_this_iter_s": 25.214930534362793, "pid": 12036, "timesteps_total": 1643028, "hostname": "flow-main", "episodes_total": 702, "timestamp": 1557223904, "episode_reward_max": 994.2265866426683, "episodes_this_iter": 22, "time_total_s": 1023.0897843837738, "time_since_restore": 1023.0897843837738}
{"timesteps_since_restore": 1680782, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc959e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95c18>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-12-08", "episode_reward_min": 24.869738702075743, "timesteps_this_iter": 37754, "training_iteration": 42, "episode_reward_mean": 819.1808334254055, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 42, "custom_metrics": {"cost2_mean": -38.83331483592062, "outflow_rate_max": 1276.5789246753247, "cost1_mean": 319.8025187115398, "system_level_velocity_mean": 13.383272902931125, "cost2_min": -67.64403574407262, "cost1_max": 375.5324821544416, "cost1_min": 17.433504087093905, "cost2_max": -12.709235670430672, "outflow_rate_mean": 1045.4490624986013, "system_level_velocity_min": 11.280458972883283, "outflow_rate_min": 317.5287350200169, "system_level_velocity_max": 18.454072429567116}, "info": {"num_steps_trained": 1680782, "load_time_ms": 11.573, "grad_time_ms": 8529.726, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000074505806, "total_loss": 18.543663024902344, "vf_loss": 18.54477882385254, "policy_loss": -0.0017319252947345376, "kl": 0.01232457347214222, "vf_explained_var": 0.7857609391212463, "entropy": 1.2095953226089478}, "update_time_ms": 7.456, "num_steps_sampled": 1680782, "sample_time_ms": 16335.818}, "episode_len_mean": 667.83, "time_this_iter_s": 24.22386121749878, "pid": 12036, "timesteps_total": 1680782, "hostname": "flow-main", "episodes_total": 722, "timestamp": 1557223928, "episode_reward_max": 958.6187356521806, "episodes_this_iter": 20, "time_total_s": 1047.3136456012726, "time_since_restore": 1047.3136456012726}
{"timesteps_since_restore": 1719129, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdcf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd550>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-12-33", "episode_reward_min": 55.362772988960266, "timesteps_this_iter": 38347, "training_iteration": 43, "episode_reward_mean": 823.031013480886, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 43, "custom_metrics": {"cost2_mean": -37.017610796727475, "outflow_rate_max": 1255.5054753246754, "cost1_mean": 320.8903060014112, "system_level_velocity_mean": 13.285864706540051, "cost2_min": -56.04900554426541, "cost1_max": 374.0217538593519, "cost1_min": 31.760089895641112, "cost2_max": -20.94290514637283, "outflow_rate_mean": 1046.210097210339, "system_level_velocity_min": 11.185151115256321, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.799791122781347}, "info": {"num_steps_trained": 1719129, "load_time_ms": 11.891, "grad_time_ms": 8469.224, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 15.486892700195312, "vf_loss": 15.489189147949219, "policy_loss": -0.002876205136999488, "kl": 0.011601674370467663, "vf_explained_var": 0.7660368084907532, "entropy": 1.194789171218872}, "update_time_ms": 7.257, "num_steps_sampled": 1719129, "sample_time_ms": 16484.746}, "episode_len_mean": 674.56, "time_this_iter_s": 25.304463863372803, "pid": 12036, "timesteps_total": 1719129, "hostname": "flow-main", "episodes_total": 739, "timestamp": 1557223953, "episode_reward_max": 950.7737358866868, "episodes_this_iter": 17, "time_total_s": 1072.6181094646454, "time_since_restore": 1072.6181094646454}
{"timesteps_since_restore": 1756473, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fc50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-12-58", "episode_reward_min": 54.97979621190818, "timesteps_this_iter": 37344, "training_iteration": 44, "episode_reward_mean": 811.7919842696887, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 44, "custom_metrics": {"cost2_mean": -34.15089179102625, "outflow_rate_max": 1214.9196715284716, "cost1_mean": 316.016015876875, "system_level_velocity_mean": 13.299142462340477, "cost2_min": -46.76539208461035, "cost1_max": 361.25256868047006, "cost1_min": 31.522601651293748, "cost2_max": -19.98244800446167, "outflow_rate_mean": 1035.1476076322617, "system_level_velocity_min": 11.185151115256321, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.799791122781347}, "info": {"num_steps_trained": 1756473, "load_time_ms": 12.034, "grad_time_ms": 8352.731, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 21.438053131103516, "vf_loss": 21.43983268737793, "policy_loss": -0.002542296191677451, "kl": 0.015239890664815903, "vf_explained_var": 0.7476840019226074, "entropy": 1.204640507698059}, "update_time_ms": 7.238, "num_steps_sampled": 1756473, "sample_time_ms": 16484.061}, "episode_len_mean": 668.18, "time_this_iter_s": 24.9850332736969, "pid": 12036, "timesteps_total": 1756473, "hostname": "flow-main", "episodes_total": 760, "timestamp": 1557223978, "episode_reward_max": 905.8649541729114, "episodes_this_iter": 21, "time_total_s": 1097.6031427383423, "time_since_restore": 1097.6031427383423}
{"timesteps_since_restore": 1795195, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95ef0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-13-24", "episode_reward_min": 54.97979621190818, "timesteps_this_iter": 38722, "training_iteration": 45, "episode_reward_mean": 818.7506455389207, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 45, "custom_metrics": {"cost2_mean": -33.43046389106008, "outflow_rate_max": 1214.9196715284716, "cost1_mean": 317.38417394156954, "system_level_velocity_mean": 13.251891454425348, "cost2_min": -43.10108050338703, "cost1_max": 358.756897638648, "cost1_min": 31.522601651293748, "cost2_max": -19.98244800446167, "outflow_rate_mean": 1039.0493613132578, "system_level_velocity_min": 11.185151115256321, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.527839874881742}, "info": {"num_steps_trained": 1795195, "load_time_ms": 12.005, "grad_time_ms": 8284.43, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 14.517783164978027, "vf_loss": 14.520614624023438, "policy_loss": -0.003602193668484688, "kl": 0.015411234460771084, "vf_explained_var": 0.8565819263458252, "entropy": 1.2347993850708008}, "update_time_ms": 7.374, "num_steps_sampled": 1795195, "sample_time_ms": 16576.645}, "episode_len_mean": 671.98, "time_this_iter_s": 25.55649495124817, "pid": 12036, "timesteps_total": 1795195, "hostname": "flow-main", "episodes_total": 777, "timestamp": 1557224004, "episode_reward_max": 905.8649541729114, "episodes_this_iter": 17, "time_total_s": 1123.1596376895905, "time_since_restore": 1123.1596376895905}
{"timesteps_since_restore": 1833282, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdf98>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-13-50", "episode_reward_min": 54.97979621190818, "timesteps_this_iter": 38087, "training_iteration": 46, "episode_reward_mean": 822.5919943930879, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 46, "custom_metrics": {"cost2_mean": -33.40270421378855, "outflow_rate_max": 1220.503153246753, "cost1_mean": 316.3381519064944, "system_level_velocity_mean": 13.20989815093436, "cost2_min": -43.10108050338703, "cost1_max": 358.756897638648, "cost1_min": 31.522601651293748, "cost2_max": -19.98244800446167, "outflow_rate_mean": 1040.3469671628923, "system_level_velocity_min": 11.185151115256321, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.527839874881742}, "info": {"num_steps_trained": 1833282, "load_time_ms": 11.713, "grad_time_ms": 8168.769, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 17.360807418823242, "vf_loss": 17.363037109375, "policy_loss": -0.002969196066260338, "kl": 0.014767637476325035, "vf_explained_var": 0.8139708042144775, "entropy": 1.1863170862197876}, "update_time_ms": 7.359, "num_steps_sampled": 1833282, "sample_time_ms": 16919.034}, "episode_len_mean": 670.99, "time_this_iter_s": 25.962625741958618, "pid": 12036, "timesteps_total": 1833282, "hostname": "flow-main", "episodes_total": 797, "timestamp": 1557224030, "episode_reward_max": 905.8649541729114, "episodes_this_iter": 20, "time_total_s": 1149.122263431549, "time_since_restore": 1149.122263431549}
{"timesteps_since_restore": 1870648, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd9b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd160>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-14-16", "episode_reward_min": 46.908428821844915, "timesteps_this_iter": 37366, "training_iteration": 47, "episode_reward_mean": 824.4840415872053, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 47, "custom_metrics": {"cost2_mean": -33.22735700594868, "outflow_rate_max": 1220.503153246753, "cost1_mean": 314.9666407544907, "system_level_velocity_mean": 13.23392219019555, "cost2_min": -42.4268149753707, "cost1_max": 359.47259700424365, "cost1_min": 27.888954255633088, "cost2_max": -16.042147034680283, "outflow_rate_mean": 1037.568109062686, "system_level_velocity_min": 11.185151115256321, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 17.527839874881742}, "info": {"num_steps_trained": 1870648, "load_time_ms": 11.814, "grad_time_ms": 8054.245, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 18.333925247192383, "vf_loss": 18.335643768310547, "policy_loss": -0.0024178323801606894, "kl": 0.01397793274372816, "vf_explained_var": 0.7713606357574463, "entropy": 1.1602575778961182}, "update_time_ms": 7.349, "num_steps_sampled": 1870648, "sample_time_ms": 17235.996}, "episode_len_mean": 667.54, "time_this_iter_s": 25.81486439704895, "pid": 12036, "timesteps_total": 1870648, "hostname": "flow-main", "episodes_total": 814, "timestamp": 1557224056, "episode_reward_max": 916.9211899888771, "episodes_this_iter": 17, "time_total_s": 1174.937127828598, "time_since_restore": 1174.937127828598}
{"timesteps_since_restore": 1907511, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8abe0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a668>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-14-41", "episode_reward_min": 46.908428821844915, "timesteps_this_iter": 36863, "training_iteration": 48, "episode_reward_mean": 821.6821473810976, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 48, "custom_metrics": {"cost2_mean": -33.066546427911966, "outflow_rate_max": 1243.532961038961, "cost1_mean": 314.5644616589102, "system_level_velocity_mean": 13.310284995065182, "cost2_min": -42.4268149753707, "cost1_max": 359.47259700424365, "cost1_min": 27.888954255633088, "cost2_max": -16.042147034680283, "outflow_rate_mean": 1041.3828986012406, "system_level_velocity_min": 11.435466801552241, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 17.527839874881742}, "info": {"num_steps_trained": 1907511, "load_time_ms": 11.766, "grad_time_ms": 7885.225, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000074505806, "total_loss": 19.98464012145996, "vf_loss": 19.98773193359375, "policy_loss": -0.00389337376691401, "kl": 0.016009707003831863, "vf_explained_var": 0.7227335572242737, "entropy": 1.1256828308105469}, "update_time_ms": 7.344, "num_steps_sampled": 1907511, "sample_time_ms": 17376.018}, "episode_len_mean": 664.14, "time_this_iter_s": 24.82599711418152, "pid": 12036, "timesteps_total": 1907511, "hostname": "flow-main", "episodes_total": 835, "timestamp": 1557224081, "episode_reward_max": 925.3705439307554, "episodes_this_iter": 21, "time_total_s": 1199.7631249427795, "time_since_restore": 1199.7631249427795}
{"timesteps_since_restore": 1945293, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80b70>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-15-08", "episode_reward_min": 27.44395403064354, "timesteps_this_iter": 37782, "training_iteration": 49, "episode_reward_mean": 798.9095713023013, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 49, "custom_metrics": {"cost2_mean": -32.617124558791986, "outflow_rate_max": 1243.532961038961, "cost1_mean": 308.95194722422747, "system_level_velocity_mean": 13.494614784116994, "cost2_min": -42.4268149753707, "cost1_max": 364.5555020170218, "cost1_min": 17.53119818724277, "cost2_max": -12.96824278609977, "outflow_rate_mean": 1029.4741000523497, "system_level_velocity_min": 11.435466801552241, "outflow_rate_min": 313.71724101201016, "system_level_velocity_max": 18.68410077682259}, "info": {"num_steps_trained": 1945293, "load_time_ms": 11.718, "grad_time_ms": 7716.027, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 21.733224868774414, "vf_loss": 21.735851287841797, "policy_loss": -0.0034360159188508987, "kl": 0.01619689352810383, "vf_explained_var": 0.742141842842102, "entropy": 1.116932988166809}, "update_time_ms": 7.195, "num_steps_sampled": 1945293, "sample_time_ms": 17675.258}, "episode_len_mean": 648.14, "time_this_iter_s": 27.320592641830444, "pid": 12036, "timesteps_total": 1945293, "hostname": "flow-main", "episodes_total": 859, "timestamp": 1557224108, "episode_reward_max": 925.3705439307554, "episodes_this_iter": 24, "time_total_s": 1227.08371758461, "time_since_restore": 1227.08371758461}
{"timesteps_since_restore": 1982687, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc959b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95828>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-15-32", "episode_reward_min": 27.44395403064354, "timesteps_this_iter": 37394, "training_iteration": 50, "episode_reward_mean": 776.4874486929243, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 50, "custom_metrics": {"cost2_mean": -31.988188606932862, "outflow_rate_max": 1243.532961038961, "cost1_mean": 300.4293468005475, "system_level_velocity_mean": 13.581521946949005, "cost2_min": -42.4268149753707, "cost1_max": 364.5555020170218, "cost1_min": 17.53119818724277, "cost2_max": -12.96824278609977, "outflow_rate_mean": 1009.4775834073001, "system_level_velocity_min": 11.389466358589555, "outflow_rate_min": 313.71724101201016, "system_level_velocity_max": 18.68410077682259}, "info": {"num_steps_trained": 1982687, "load_time_ms": 11.857, "grad_time_ms": 7612.823, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 22.160470962524414, "vf_loss": 22.164066314697266, "policy_loss": -0.004485889803618193, "kl": 0.0178016796708107, "vf_explained_var": 0.7679718732833862, "entropy": 1.1146492958068848}, "update_time_ms": 7.326, "num_steps_sampled": 1982687, "sample_time_ms": 17654.609}, "episode_len_mean": 631.51, "time_this_iter_s": 24.451455116271973, "pid": 12036, "timesteps_total": 1982687, "hostname": "flow-main", "episodes_total": 879, "timestamp": 1557224132, "episode_reward_max": 925.3705439307554, "episodes_this_iter": 20, "time_total_s": 1251.535172700882, "time_since_restore": 1251.535172700882}
{"timesteps_since_restore": 2019718, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc950f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc955c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95cf8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-15-59", "episode_reward_min": 27.44395403064354, "timesteps_this_iter": 37031, "training_iteration": 51, "episode_reward_mean": 764.5768466457237, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 51, "custom_metrics": {"cost2_mean": -30.89140850809502, "outflow_rate_max": 1243.532961038961, "cost1_mean": 299.4551814414405, "system_level_velocity_mean": 13.606578216841218, "cost2_min": -42.4268149753707, "cost1_max": 364.5555020170218, "cost1_min": 17.53119818724277, "cost2_max": -12.96824278609977, "outflow_rate_mean": 1007.2664477769417, "system_level_velocity_min": 11.254971833456004, "outflow_rate_min": 313.71724101201016, "system_level_velocity_max": 18.68410077682259}, "info": {"num_steps_trained": 2019718, "load_time_ms": 11.747, "grad_time_ms": 7675.414, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 24.25092887878418, "vf_loss": 24.25400733947754, "policy_loss": -0.0038357293233275414, "kl": 0.015137806534767151, "vf_explained_var": 0.6383996605873108, "entropy": 1.0948365926742554}, "update_time_ms": 7.492, "num_steps_sampled": 2019718, "sample_time_ms": 17699.193}, "episode_len_mean": 631.75, "time_this_iter_s": 26.29253888130188, "pid": 12036, "timesteps_total": 2019718, "hostname": "flow-main", "episodes_total": 900, "timestamp": 1557224159, "episode_reward_max": 925.3705439307554, "episodes_this_iter": 21, "time_total_s": 1277.8277115821838, "time_since_restore": 1277.8277115821838}
{"timesteps_since_restore": 2056538, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f2b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f9e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-16-23", "episode_reward_min": 27.44395403064354, "timesteps_this_iter": 36820, "training_iteration": 52, "episode_reward_mean": 759.7892812292026, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 52, "custom_metrics": {"cost2_mean": -30.185203494341636, "outflow_rate_max": 1210.7057714285713, "cost1_mean": 299.1262835109555, "system_level_velocity_mean": 13.540884592533002, "cost2_min": -39.06667218736454, "cost1_max": 364.5555020170218, "cost1_min": 17.53119818724277, "cost2_max": -12.96824278609977, "outflow_rate_mean": 1000.7426133590623, "system_level_velocity_min": 11.254971833456004, "outflow_rate_min": 313.71724101201016, "system_level_velocity_max": 18.68410077682259}, "info": {"num_steps_trained": 2056538, "load_time_ms": 11.88, "grad_time_ms": 7648.326, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000074505806, "total_loss": 22.77178955078125, "vf_loss": 22.7742977142334, "policy_loss": -0.0032701522577553988, "kl": 0.015262985602021217, "vf_explained_var": 0.6958786249160767, "entropy": 1.0947412252426147}, "update_time_ms": 7.798, "num_steps_sampled": 2056538, "sample_time_ms": 17758.574}, "episode_len_mean": 635.06, "time_this_iter_s": 24.55383610725403, "pid": 12036, "timesteps_total": 2056538, "hostname": "flow-main", "episodes_total": 920, "timestamp": 1557224183, "episode_reward_max": 925.3705439307554, "episodes_this_iter": 20, "time_total_s": 1302.3815476894379, "time_since_restore": 1302.3815476894379}
{"timesteps_since_restore": 2093047, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca32b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3080>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-16-48", "episode_reward_min": 41.57919214804991, "timesteps_this_iter": 36509, "training_iteration": 53, "episode_reward_mean": 736.7051130786865, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 53, "custom_metrics": {"cost2_mean": -29.45564053825277, "outflow_rate_max": 1191.228638961039, "cost1_mean": 292.66714357860565, "system_level_velocity_mean": 13.538483838086798, "cost2_min": -37.44253731421327, "cost1_max": 360.9594487370485, "cost1_min": 26.89887093731162, "cost2_max": -14.256167288688337, "outflow_rate_mean": 985.8871802946405, "system_level_velocity_min": 11.20621132778076, "outflow_rate_min": 313.71724101201016, "system_level_velocity_max": 18.245340254404734}, "info": {"num_steps_trained": 2093047, "load_time_ms": 11.812, "grad_time_ms": 7728.639, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 29.99744987487793, "vf_loss": 30.000452041625977, "policy_loss": -0.0037671232130378485, "kl": 0.01535941381007433, "vf_explained_var": 0.5691817402839661, "entropy": 1.1025464534759521}, "update_time_ms": 7.922, "num_steps_sampled": 2093047, "sample_time_ms": 17619.012}, "episode_len_mean": 623.2, "time_this_iter_s": 24.71590542793274, "pid": 12036, "timesteps_total": 2093047, "hostname": "flow-main", "episodes_total": 944, "timestamp": 1557224208, "episode_reward_max": 924.5731535266751, "episodes_this_iter": 24, "time_total_s": 1327.0974531173706, "time_since_restore": 1327.0974531173706}
{"timesteps_since_restore": 2130209, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc955c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95e10>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-17-13", "episode_reward_min": 41.57919214804991, "timesteps_this_iter": 37162, "training_iteration": 54, "episode_reward_mean": 737.2945007035836, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 54, "custom_metrics": {"cost2_mean": -28.941219283372625, "outflow_rate_max": 1191.228638961039, "cost1_mean": 293.62061010482734, "system_level_velocity_mean": 13.415052689621078, "cost2_min": -37.290900064747674, "cost1_max": 359.3652032047711, "cost1_min": 26.89887093731162, "cost2_max": -14.256167288688337, "outflow_rate_mean": 985.2885877945982, "system_level_velocity_min": 11.20621132778076, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 18.245340254404734}, "info": {"num_steps_trained": 2130209, "load_time_ms": 11.885, "grad_time_ms": 7832.386, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 20.6604061126709, "vf_loss": 20.663610458374023, "policy_loss": -0.004017484374344349, "kl": 0.016279898583889008, "vf_explained_var": 0.6235488653182983, "entropy": 1.0910117626190186}, "update_time_ms": 8.128, "num_steps_sampled": 2130209, "sample_time_ms": 17514.542}, "episode_len_mean": 629.8, "time_this_iter_s": 24.978346347808838, "pid": 12036, "timesteps_total": 2130209, "hostname": "flow-main", "episodes_total": 963, "timestamp": 1557224233, "episode_reward_max": 924.5731535266751, "episodes_this_iter": 19, "time_total_s": 1352.0757994651794, "time_since_restore": 1352.0757994651794}
{"timesteps_since_restore": 2166639, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd035c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fd03a58>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-17-38", "episode_reward_min": 41.57919214804991, "timesteps_this_iter": 36430, "training_iteration": 55, "episode_reward_mean": 745.3895909056414, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 55, "custom_metrics": {"cost2_mean": -28.397782579129128, "outflow_rate_max": 1183.1613558441559, "cost1_mean": 299.0882404071983, "system_level_velocity_mean": 13.327377380202423, "cost2_min": -34.1281060889679, "cost1_max": 359.3652032047711, "cost1_min": 27.163458733759715, "cost2_max": -14.256167288688337, "outflow_rate_mean": 993.337164828796, "system_level_velocity_min": 10.844433154264754, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 18.245340254404734}, "info": {"num_steps_trained": 2166639, "load_time_ms": 11.673, "grad_time_ms": 7891.543, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 25.230966567993164, "vf_loss": 25.23351287841797, "policy_loss": -0.0034308230970054865, "kl": 0.017712941393256187, "vf_explained_var": 0.6124258041381836, "entropy": 1.0786373615264893}, "update_time_ms": 7.83, "num_steps_sampled": 2166639, "sample_time_ms": 17406.832}, "episode_len_mean": 643.37, "time_this_iter_s": 25.065528869628906, "pid": 12036, "timesteps_total": 2166639, "hostname": "flow-main", "episodes_total": 985, "timestamp": 1557224258, "episode_reward_max": 886.3957058777517, "episodes_this_iter": 22, "time_total_s": 1377.1413283348083, "time_since_restore": 1377.1413283348083}
{"timesteps_since_restore": 2202958, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f4e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f9b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-18-04", "episode_reward_min": 46.53056705568227, "timesteps_this_iter": 36319, "training_iteration": 56, "episode_reward_mean": 735.4627985670527, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 56, "custom_metrics": {"cost2_mean": -27.64781432798585, "outflow_rate_max": 1183.1613558441559, "cost1_mean": 297.1345306062201, "system_level_velocity_mean": 13.394348587650637, "cost2_min": -34.1281060889679, "cost1_max": 359.3652032047711, "cost1_min": 27.511751698738085, "cost2_max": -14.256167288688337, "outflow_rate_mean": 990.2763084807027, "system_level_velocity_min": 10.844433154264754, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 18.059100561438058}, "info": {"num_steps_trained": 2202958, "load_time_ms": 11.576, "grad_time_ms": 7952.024, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 24.833559036254883, "vf_loss": 24.836910247802734, "policy_loss": -0.0041540986858308315, "kl": 0.01608355902135372, "vf_explained_var": 0.5958638787269592, "entropy": 1.057551383972168}, "update_time_ms": 8.003, "num_steps_sampled": 2202958, "sample_time_ms": 17323.461}, "episode_len_mean": 638.73, "time_this_iter_s": 25.737935781478882, "pid": 12036, "timesteps_total": 2202958, "hostname": "flow-main", "episodes_total": 1007, "timestamp": 1557224284, "episode_reward_max": 867.2803392085627, "episodes_this_iter": 22, "time_total_s": 1402.8792641162872, "time_since_restore": 1402.8792641162872}
{"timesteps_since_restore": 2239810, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95f98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95a20>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc952b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-18-28", "episode_reward_min": 46.53056705568227, "timesteps_this_iter": 36852, "training_iteration": 57, "episode_reward_mean": 746.5332638656076, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 57, "custom_metrics": {"cost2_mean": -27.438688943569343, "outflow_rate_max": 1183.1613558441559, "cost1_mean": 301.6168544080202, "system_level_velocity_mean": 13.377542866815773, "cost2_min": -33.993404187213564, "cost1_max": 359.3652032047711, "cost1_min": 27.511751698738085, "cost2_max": -14.256167288688337, "outflow_rate_mean": 996.3072257172032, "system_level_velocity_min": 10.844433154264754, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 18.059100561438058}, "info": {"num_steps_trained": 2239810, "load_time_ms": 11.219, "grad_time_ms": 7998.982, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000074505806, "total_loss": 21.33100700378418, "vf_loss": 21.333892822265625, "policy_loss": -0.0037504546344280243, "kl": 0.017283249646425247, "vf_explained_var": 0.7228556871414185, "entropy": 1.0849354267120361}, "update_time_ms": 8.104, "num_steps_sampled": 2239810, "sample_time_ms": 17112.054}, "episode_len_mean": 648.94, "time_this_iter_s": 24.175739765167236, "pid": 12036, "timesteps_total": 2239810, "hostname": "flow-main", "episodes_total": 1025, "timestamp": 1557224308, "episode_reward_max": 867.2803392085627, "episodes_this_iter": 18, "time_total_s": 1427.0550038814545, "time_since_restore": 1427.0550038814545}
{"timesteps_since_restore": 2276998, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80fd0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-18-52", "episode_reward_min": 52.01313353328793, "timesteps_this_iter": 37188, "training_iteration": 58, "episode_reward_mean": 753.2657619297689, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 58, "custom_metrics": {"cost2_mean": -27.30392208294341, "outflow_rate_max": 1145.2001610389611, "cost1_mean": 303.14129963687793, "system_level_velocity_mean": 13.259101335930445, "cost2_min": -33.676786201656185, "cost1_max": 348.89339393719445, "cost1_min": 30.736327781631573, "cost2_max": -16.987594385837955, "outflow_rate_mean": 1003.3848393611441, "system_level_velocity_min": 10.844433154264754, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.095092283525513}, "info": {"num_steps_trained": 2276998, "load_time_ms": 11.37, "grad_time_ms": 8032.816, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 18.517467498779297, "vf_loss": 18.521085739135742, "policy_loss": -0.004494066350162029, "kl": 0.017520179972052574, "vf_explained_var": 0.7216992974281311, "entropy": 1.0692304372787476}, "update_time_ms": 8.285, "num_steps_sampled": 2276998, "sample_time_ms": 16977.638}, "episode_len_mean": 654.85, "time_this_iter_s": 23.837437868118286, "pid": 12036, "timesteps_total": 2276998, "hostname": "flow-main", "episodes_total": 1044, "timestamp": 1557224332, "episode_reward_max": 872.4897423177191, "episodes_this_iter": 19, "time_total_s": 1450.8924417495728, "time_since_restore": 1450.8924417495728}
{"timesteps_since_restore": 2314399, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfde10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8aa58>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-19-16", "episode_reward_min": 52.01313353328793, "timesteps_this_iter": 37401, "training_iteration": 59, "episode_reward_mean": 770.6237091652259, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 59, "custom_metrics": {"cost2_mean": -27.16576094634671, "outflow_rate_max": 1160.8963376623376, "cost1_mean": 306.65477710618677, "system_level_velocity_mean": 13.15557919920978, "cost2_min": -33.676786201656185, "cost1_max": 348.89339393719445, "cost1_min": 30.736327781631573, "cost2_max": -16.987594385837955, "outflow_rate_mean": 1009.7023516329663, "system_level_velocity_min": 10.844433154264754, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.095092283525513}, "info": {"num_steps_trained": 2314399, "load_time_ms": 11.429, "grad_time_ms": 7931.832, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 20.74372673034668, "vf_loss": 20.74610137939453, "policy_loss": -0.0031681109685450792, "kl": 0.015831928700208664, "vf_explained_var": 0.7627761363983154, "entropy": 1.0881985425949097}, "update_time_ms": 8.506, "num_steps_sampled": 2314399, "sample_time_ms": 16787.064}, "episode_len_mean": 665.39, "time_this_iter_s": 24.384493112564087, "pid": 12036, "timesteps_total": 2314399, "hostname": "flow-main", "episodes_total": 1064, "timestamp": 1557224356, "episode_reward_max": 890.4696454754794, "episodes_this_iter": 20, "time_total_s": 1475.2769348621368, "time_since_restore": 1475.2769348621368}
{"timesteps_since_restore": 2351795, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3390>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-19-41", "episode_reward_min": 52.01313353328793, "timesteps_this_iter": 37396, "training_iteration": 60, "episode_reward_mean": 787.2576580616594, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 60, "custom_metrics": {"cost2_mean": -27.581996577025826, "outflow_rate_max": 1178.8209454545456, "cost1_mean": 313.6688560906395, "system_level_velocity_mean": 13.228236672276863, "cost2_min": -33.676786201656185, "cost1_max": 351.5537717859967, "cost1_min": 30.736327781631573, "cost2_max": -16.987594385837955, "outflow_rate_mean": 1027.0471915730573, "system_level_velocity_min": 10.964970821689429, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.095092283525513}, "info": {"num_steps_trained": 2351795, "load_time_ms": 11.016, "grad_time_ms": 7897.304, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 18.42649269104004, "vf_loss": 18.42931365966797, "policy_loss": -0.0036278089974075556, "kl": 0.016133226454257965, "vf_explained_var": 0.7602224349975586, "entropy": 1.0830421447753906}, "update_time_ms": 8.61, "num_steps_sampled": 2351795, "sample_time_ms": 16846.234}, "episode_len_mean": 674.98, "time_this_iter_s": 24.68807601928711, "pid": 12036, "timesteps_total": 2351795, "hostname": "flow-main", "episodes_total": 1082, "timestamp": 1557224381, "episode_reward_max": 890.4696454754794, "episodes_this_iter": 18, "time_total_s": 1499.965010881424, "time_since_restore": 1499.965010881424}
{"timesteps_since_restore": 2388829, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc955c0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-20-05", "episode_reward_min": 174.676238143276, "timesteps_this_iter": 37034, "training_iteration": 61, "episode_reward_mean": 807.5187248674141, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 61, "custom_metrics": {"cost2_mean": -28.131178173364198, "outflow_rate_max": 1221.6871584415585, "cost1_mean": 319.4200067012229, "system_level_velocity_mean": 13.15762135810929, "cost2_min": -34.935923490103676, "cost1_max": 351.9792065174346, "cost1_min": 77.7011120185145, "cost2_max": -19.68850106405333, "outflow_rate_mean": 1039.18160168562, "system_level_velocity_min": 10.964970821689429, "outflow_rate_min": 541.4784691143955, "system_level_velocity_max": 15.248383755110353}, "info": {"num_steps_trained": 2388829, "load_time_ms": 11.172, "grad_time_ms": 7620.247, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 20.280885696411133, "vf_loss": 20.28322982788086, "policy_loss": -0.0032859689090400934, "kl": 0.018810495734214783, "vf_explained_var": 0.7386729121208191, "entropy": 1.090322732925415}, "update_time_ms": 8.368, "num_steps_sampled": 2388829, "sample_time_ms": 16927.559}, "episode_len_mean": 686.19, "time_this_iter_s": 24.316113233566284, "pid": 12036, "timesteps_total": 2388829, "hostname": "flow-main", "episodes_total": 1102, "timestamp": 1557224405, "episode_reward_max": 890.4696454754794, "episodes_this_iter": 20, "time_total_s": 1524.2811241149902, "time_since_restore": 1524.2811241149902}
{"timesteps_since_restore": 2425579, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3d30>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-20-30", "episode_reward_min": 174.676238143276, "timesteps_this_iter": 36750, "training_iteration": 62, "episode_reward_mean": 798.9070412265206, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 62, "custom_metrics": {"cost2_mean": -28.20619333706977, "outflow_rate_max": 1221.6871584415585, "cost1_mean": 315.75089891597474, "system_level_velocity_mean": 13.186663709626103, "cost2_min": -34.935923490103676, "cost1_max": 351.9792065174346, "cost1_min": 77.7011120185145, "cost2_max": -19.649020596865412, "outflow_rate_mean": 1032.752280641038, "system_level_velocity_min": 10.964970821689429, "outflow_rate_min": 541.4784691143955, "system_level_velocity_max": 15.304585702761914}, "info": {"num_steps_trained": 2425579, "load_time_ms": 11.12, "grad_time_ms": 7593.46, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000074505806, "total_loss": 21.379899978637695, "vf_loss": 21.382768630981445, "policy_loss": -0.003736262209713459, "kl": 0.01735011301934719, "vf_explained_var": 0.7856610417366028, "entropy": 1.0901520252227783}, "update_time_ms": 7.937, "num_steps_sampled": 2425579, "sample_time_ms": 16919.079}, "episode_len_mean": 676.68, "time_this_iter_s": 24.178769826889038, "pid": 12036, "timesteps_total": 2425579, "hostname": "flow-main", "episodes_total": 1123, "timestamp": 1557224430, "episode_reward_max": 890.4696454754794, "episodes_this_iter": 21, "time_total_s": 1548.4598939418793, "time_since_restore": 1548.4598939418793}
{"timesteps_since_restore": 2462970, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca33c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3e80>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-20-54", "episode_reward_min": 346.1045181027666, "timesteps_this_iter": 37391, "training_iteration": 63, "episode_reward_mean": 816.3878215462528, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 63, "custom_metrics": {"cost2_mean": -28.518754092507958, "outflow_rate_max": 1235.0645454545454, "cost1_mean": 322.66297399420034, "system_level_velocity_mean": 13.25878964789728, "cost2_min": -35.84501088019955, "cost1_max": 358.2891487536475, "cost1_min": 155.34414841255386, "cost2_max": -19.649020596865412, "outflow_rate_mean": 1049.716163263728, "system_level_velocity_min": 10.964970821689429, "outflow_rate_min": 823.3438182771445, "system_level_velocity_max": 15.304585702761914}, "info": {"num_steps_trained": 2462970, "load_time_ms": 11.105, "grad_time_ms": 7661.499, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 19.59174919128418, "vf_loss": 19.594942092895508, "policy_loss": -0.004077485296875238, "kl": 0.01771143637597561, "vf_explained_var": 0.7543830275535583, "entropy": 1.0823217630386353}, "update_time_ms": 7.703, "num_steps_sampled": 2462970, "sample_time_ms": 16816.743}, "episode_len_mean": 686.85, "time_this_iter_s": 24.36110234260559, "pid": 12036, "timesteps_total": 2462970, "hostname": "flow-main", "episodes_total": 1140, "timestamp": 1557224454, "episode_reward_max": 896.7419268793714, "episodes_this_iter": 17, "time_total_s": 1572.8209962844849, "time_since_restore": 1572.8209962844849}
{"timesteps_since_restore": 2500823, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc955c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95fd0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-21-19", "episode_reward_min": 205.05892358048604, "timesteps_this_iter": 37853, "training_iteration": 64, "episode_reward_mean": 820.3038006551213, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 64, "custom_metrics": {"cost2_mean": -28.51516025582956, "outflow_rate_max": 1235.0645454545454, "cost1_mean": 323.61932973315913, "system_level_velocity_mean": 13.340448449193062, "cost2_min": -35.84501088019955, "cost1_max": 359.73757684042886, "cost1_min": 90.97906967517491, "cost2_max": -19.649020596865412, "outflow_rate_mean": 1053.0635507351244, "system_level_velocity_min": 10.964970821689429, "outflow_rate_min": 524.999080068601, "system_level_velocity_max": 16.162325232298397}, "info": {"num_steps_trained": 2500823, "load_time_ms": 10.899, "grad_time_ms": 7772.66, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 18.951108932495117, "vf_loss": 18.95394515991211, "policy_loss": -0.003547897096723318, "kl": 0.014215117320418358, "vf_explained_var": 0.7945637106895447, "entropy": 1.1111743450164795}, "update_time_ms": 7.496, "num_steps_sampled": 2500823, "sample_time_ms": 16743.854}, "episode_len_mean": 685.05, "time_this_iter_s": 25.354612588882446, "pid": 12036, "timesteps_total": 2500823, "hostname": "flow-main", "episodes_total": 1158, "timestamp": 1557224479, "episode_reward_max": 911.4889575092158, "episodes_this_iter": 18, "time_total_s": 1598.1756088733673, "time_since_restore": 1598.1756088733673}
{"timesteps_since_restore": 2538505, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca30b8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-21-44", "episode_reward_min": 205.05892358048604, "timesteps_this_iter": 37682, "training_iteration": 65, "episode_reward_mean": 823.8171626864837, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 65, "custom_metrics": {"cost2_mean": -28.837470884151372, "outflow_rate_max": 1245.4230285714286, "cost1_mean": 324.31164403256713, "system_level_velocity_mean": 13.392555325569111, "cost2_min": -36.05686113816927, "cost1_max": 366.4092658719978, "cost1_min": 90.97906967517491, "cost2_max": -19.649020596865412, "outflow_rate_mean": 1065.686271430429, "system_level_velocity_min": 11.084132654450494, "outflow_rate_min": 524.999080068601, "system_level_velocity_max": 16.162325232298397}, "info": {"num_steps_trained": 2538505, "load_time_ms": 11.288, "grad_time_ms": 7858.139, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000074505806, "total_loss": 22.2708740234375, "vf_loss": 22.274600982666016, "policy_loss": -0.004662837367504835, "kl": 0.018737174570560455, "vf_explained_var": 0.7198006510734558, "entropy": 1.109665870666504}, "update_time_ms": 7.485, "num_steps_sampled": 2538505, "sample_time_ms": 16568.849}, "episode_len_mean": 683.31, "time_this_iter_s": 24.194841861724854, "pid": 12036, "timesteps_total": 2538505, "hostname": "flow-main", "episodes_total": 1177, "timestamp": 1557224504, "episode_reward_max": 926.3230940890192, "episodes_this_iter": 19, "time_total_s": 1622.3704507350922, "time_since_restore": 1622.3704507350922}
{"timesteps_since_restore": 2575385, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc958d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95470>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-22-09", "episode_reward_min": 51.82277848579978, "timesteps_this_iter": 36880, "training_iteration": 66, "episode_reward_mean": 807.3231514284848, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 66, "custom_metrics": {"cost2_mean": -29.01039601778957, "outflow_rate_max": 1251.8908779220778, "cost1_mean": 317.8409675872606, "system_level_velocity_mean": 13.502723073435446, "cost2_min": -36.327999605563356, "cost1_max": 366.4092658719978, "cost1_min": 31.864579349914116, "cost2_max": -19.154998738450274, "outflow_rate_mean": 1060.4991697205044, "system_level_velocity_min": 11.084132654450494, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70032921607869}, "info": {"num_steps_trained": 2575385, "load_time_ms": 11.549, "grad_time_ms": 7961.602, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 23.441631317138672, "vf_loss": 23.44691276550293, "policy_loss": -0.006146861240267754, "kl": 0.017362214624881744, "vf_explained_var": 0.7220029830932617, "entropy": 1.1041536331176758}, "update_time_ms": 7.397, "num_steps_sampled": 2575385, "sample_time_ms": 16379.099}, "episode_len_mean": 666.68, "time_this_iter_s": 24.884475231170654, "pid": 12036, "timesteps_total": 2575385, "hostname": "flow-main", "episodes_total": 1199, "timestamp": 1557224529, "episode_reward_max": 935.4568930413099, "episodes_this_iter": 22, "time_total_s": 1647.2549259662628, "time_since_restore": 1647.2549259662628}
{"timesteps_since_restore": 2612670, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ff60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f518>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-22-34", "episode_reward_min": 51.82277848579978, "timesteps_this_iter": 37285, "training_iteration": 67, "episode_reward_mean": 818.4161555488103, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 67, "custom_metrics": {"cost2_mean": -29.363095595590163, "outflow_rate_max": 1264.317387012987, "cost1_mean": 321.05494678314557, "system_level_velocity_mean": 13.58059656731391, "cost2_min": -36.327999605563356, "cost1_max": 366.4092658719978, "cost1_min": 31.864579349914116, "cost2_max": -19.154998738450274, "outflow_rate_mean": 1074.9787163148585, "system_level_velocity_min": 11.084132654450494, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70032921607869}, "info": {"num_steps_trained": 2612670, "load_time_ms": 11.708, "grad_time_ms": 8163.078, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 18.90033531188965, "vf_loss": 18.90282440185547, "policy_loss": -0.003216514363884926, "kl": 0.014547344297170639, "vf_explained_var": 0.810313880443573, "entropy": 1.1263225078582764}, "update_time_ms": 7.566, "num_steps_sampled": 2612670, "sample_time_ms": 16252.305}, "episode_len_mean": 668.33, "time_this_iter_s": 24.941179513931274, "pid": 12036, "timesteps_total": 2612670, "hostname": "flow-main", "episodes_total": 1219, "timestamp": 1557224554, "episode_reward_max": 949.066709873672, "episodes_this_iter": 20, "time_total_s": 1672.196105480194, "time_since_restore": 1672.196105480194}
{"timesteps_since_restore": 2650572, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95be0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-22-59", "episode_reward_min": 51.82277848579978, "timesteps_this_iter": 37902, "training_iteration": 68, "episode_reward_mean": 830.1107538526194, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 68, "custom_metrics": {"cost2_mean": -30.151088172552093, "outflow_rate_max": 1264.317387012987, "cost1_mean": 323.5316493715594, "system_level_velocity_mean": 13.597915797038917, "cost2_min": -39.89102302230395, "cost1_max": 366.4092658719978, "cost1_min": 31.864579349914116, "cost2_max": -19.154998738450274, "outflow_rate_mean": 1081.9083957295445, "system_level_velocity_min": 11.084132654450494, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70032921607869}, "info": {"num_steps_trained": 2650572, "load_time_ms": 11.662, "grad_time_ms": 8368.169, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 18.661230087280273, "vf_loss": 18.66550636291504, "policy_loss": -0.005117872264236212, "kl": 0.01684245467185974, "vf_explained_var": 0.8030073642730713, "entropy": 1.1369080543518066}, "update_time_ms": 7.634, "num_steps_sampled": 2650572, "sample_time_ms": 16183.235}, "episode_len_mean": 670.75, "time_this_iter_s": 25.216353178024292, "pid": 12036, "timesteps_total": 2650572, "hostname": "flow-main", "episodes_total": 1237, "timestamp": 1557224579, "episode_reward_max": 962.5335624941376, "episodes_this_iter": 18, "time_total_s": 1697.4124586582184, "time_since_restore": 1697.4124586582184}
{"timesteps_since_restore": 2688951, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8acc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc957f0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-23-23", "episode_reward_min": 51.82277848579978, "timesteps_this_iter": 38379, "training_iteration": 69, "episode_reward_mean": 828.6584648742396, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 69, "custom_metrics": {"cost2_mean": -31.416273358014827, "outflow_rate_max": 1264.317387012987, "cost1_mean": 320.99799844348274, "system_level_velocity_mean": 13.61285743012675, "cost2_min": -47.65389630871603, "cost1_max": 366.4092658719978, "cost1_min": 31.864579349914116, "cost2_max": -19.154998738450274, "outflow_rate_mean": 1080.8864222872971, "system_level_velocity_min": 11.258782891658212, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.0525132498788}, "info": {"num_steps_trained": 2688951, "load_time_ms": 11.67, "grad_time_ms": 8582.959, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 18.85700798034668, "vf_loss": 18.862648010253906, "policy_loss": -0.006611744407564402, "kl": 0.019430287182331085, "vf_explained_var": 0.8171142339706421, "entropy": 1.158388614654541}, "update_time_ms": 7.844, "num_steps_sampled": 2688951, "sample_time_ms": 15978.321}, "episode_len_mean": 664.75, "time_this_iter_s": 24.491743564605713, "pid": 12036, "timesteps_total": 2688951, "hostname": "flow-main", "episodes_total": 1255, "timestamp": 1557224603, "episode_reward_max": 962.5335624941376, "episodes_this_iter": 18, "time_total_s": 1721.904202222824, "time_since_restore": 1721.904202222824}
{"timesteps_since_restore": 2727429, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfde10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd5c0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-23-50", "episode_reward_min": 51.82277848579978, "timesteps_this_iter": 38478, "training_iteration": 70, "episode_reward_mean": 811.5593049434527, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 70, "custom_metrics": {"cost2_mean": -32.66681081486606, "outflow_rate_max": 1279.3054285714286, "cost1_mean": 313.22500218881805, "system_level_velocity_mean": 13.707408003053322, "cost2_min": -47.65389630871603, "cost1_max": 382.2607386026517, "cost1_min": 31.864579349914116, "cost2_max": -19.154998738450274, "outflow_rate_mean": 1062.1908098458798, "system_level_velocity_min": 11.258782891658212, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.0525132498788}, "info": {"num_steps_trained": 2727429, "load_time_ms": 12.189, "grad_time_ms": 8727.296, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 19.577796936035156, "vf_loss": 19.58175277709961, "policy_loss": -0.0048753987066447735, "kl": 0.018422124907374382, "vf_explained_var": 0.8166057467460632, "entropy": 1.1651592254638672}, "update_time_ms": 7.978, "num_steps_sampled": 2727429, "sample_time_ms": 16029.031}, "episode_len_mean": 646.39, "time_this_iter_s": 26.649428367614746, "pid": 12036, "timesteps_total": 2727429, "hostname": "flow-main", "episodes_total": 1275, "timestamp": 1557224630, "episode_reward_max": 962.5335624941376, "episodes_this_iter": 20, "time_total_s": 1748.5536305904388, "time_since_restore": 1748.5536305904388}
{"timesteps_since_restore": 2766072, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3d68>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-24-15", "episode_reward_min": 51.82277848579978, "timesteps_this_iter": 38643, "training_iteration": 71, "episode_reward_mean": 827.0487025089268, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 71, "custom_metrics": {"cost2_mean": -34.26586377411909, "outflow_rate_max": 1279.3054285714286, "cost1_mean": 319.0481202233449, "system_level_velocity_mean": 13.705932164734124, "cost2_min": -47.65389630871603, "cost1_max": 382.2607386026517, "cost1_min": 31.864579349914116, "cost2_max": -19.154998738450274, "outflow_rate_mean": 1072.2917059988, "system_level_velocity_min": 11.258782891658212, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.0525132498788}, "info": {"num_steps_trained": 2766072, "load_time_ms": 12.131, "grad_time_ms": 8974.895, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.050000011920928955, "total_loss": 16.96210289001465, "vf_loss": 16.96810531616211, "policy_loss": -0.00693125743418932, "kl": 0.018536942079663277, "vf_explained_var": 0.8283635377883911, "entropy": 1.1917452812194824}, "update_time_ms": 7.943, "num_steps_sampled": 2766072, "sample_time_ms": 15838.266}, "episode_len_mean": 656.52, "time_this_iter_s": 24.889084100723267, "pid": 12036, "timesteps_total": 2766072, "hostname": "flow-main", "episodes_total": 1292, "timestamp": 1557224655, "episode_reward_max": 962.5335624941376, "episodes_this_iter": 17, "time_total_s": 1773.442714691162, "time_since_restore": 1773.442714691162}
{"timesteps_since_restore": 2804032, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8afd0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-24-40", "episode_reward_min": 56.26958031688757, "timesteps_this_iter": 37960, "training_iteration": 72, "episode_reward_mean": 834.058861058239, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 72, "custom_metrics": {"cost2_mean": -35.79345811449935, "outflow_rate_max": 1279.3054285714286, "cost1_mean": 321.14512353855486, "system_level_velocity_mean": 13.70434721960811, "cost2_min": -47.65389630871603, "cost1_max": 382.2607386026517, "cost1_min": 32.49768013104998, "cost2_max": -20.351430797831274, "outflow_rate_mean": 1081.7831780603624, "system_level_velocity_min": 11.51153933611028, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.0525132498788}, "info": {"num_steps_trained": 2804032, "load_time_ms": 12.184, "grad_time_ms": 9130.876, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 23.19045639038086, "vf_loss": 23.1937313079834, "policy_loss": -0.004112578928470612, "kl": 0.01679055765271187, "vf_explained_var": 0.7629923224449158, "entropy": 1.1709083318710327}, "update_time_ms": 8.1, "num_steps_sampled": 2804032, "sample_time_ms": 15755.818}, "episode_len_mean": 658.6, "time_this_iter_s": 24.928971529006958, "pid": 12036, "timesteps_total": 2804032, "hostname": "flow-main", "episodes_total": 1311, "timestamp": 1557224680, "episode_reward_max": 962.5434875883709, "episodes_this_iter": 19, "time_total_s": 1798.371686220169, "time_since_restore": 1798.371686220169}
{"timesteps_since_restore": 2842171, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95080>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-25-05", "episode_reward_min": 56.26958031688757, "timesteps_this_iter": 38139, "training_iteration": 73, "episode_reward_mean": 842.4351657488638, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 73, "custom_metrics": {"cost2_mean": -37.16715541762351, "outflow_rate_max": 1279.3054285714286, "cost1_mean": 321.7891230399697, "system_level_velocity_mean": 13.577934383150607, "cost2_min": -48.396521503873856, "cost1_max": 382.2607386026517, "cost1_min": 32.49768013104998, "cost2_max": -22.213158441936276, "outflow_rate_mean": 1079.3341042887123, "system_level_velocity_min": 11.51153933611028, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.0525132498788}, "info": {"num_steps_trained": 2842171, "load_time_ms": 12.527, "grad_time_ms": 9125.22, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 16.054420471191406, "vf_loss": 16.058015823364258, "policy_loss": -0.00440813135355711, "kl": 0.016310371458530426, "vf_explained_var": 0.8490476012229919, "entropy": 1.182259440422058}, "update_time_ms": 8.226, "num_steps_sampled": 2842171, "sample_time_ms": 15804.335}, "episode_len_mean": 664.04, "time_this_iter_s": 24.79934072494507, "pid": 12036, "timesteps_total": 2842171, "hostname": "flow-main", "episodes_total": 1331, "timestamp": 1557224705, "episode_reward_max": 992.7684585591676, "episodes_this_iter": 20, "time_total_s": 1823.1710269451141, "time_since_restore": 1823.1710269451141}
{"timesteps_since_restore": 2879354, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca38d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3048>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-25-30", "episode_reward_min": 44.48987883988719, "timesteps_this_iter": 37183, "training_iteration": 74, "episode_reward_mean": 836.1820086116727, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 74, "custom_metrics": {"cost2_mean": -38.00364649427296, "outflow_rate_max": 1291.6826493506492, "cost1_mean": 321.2228489891646, "system_level_velocity_mean": 13.612774338561588, "cost2_min": -50.84086122280218, "cost1_max": 382.99122257841003, "cost1_min": 27.04195848589535, "cost2_max": -16.168094615323874, "outflow_rate_mean": 1076.255487508899, "system_level_velocity_min": 11.2106146067641, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.23648074136741}, "info": {"num_steps_trained": 2879354, "load_time_ms": 12.496, "grad_time_ms": 9018.217, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 18.088415145874023, "vf_loss": 18.09250831604004, "policy_loss": -0.004897699691355228, "kl": 0.01609232649207115, "vf_explained_var": 0.832497239112854, "entropy": 1.2032182216644287}, "update_time_ms": 8.299, "num_steps_sampled": 2879354, "sample_time_ms": 15883.125}, "episode_len_mean": 661.65, "time_this_iter_s": 25.083723783493042, "pid": 12036, "timesteps_total": 2879354, "hostname": "flow-main", "episodes_total": 1350, "timestamp": 1557224730, "episode_reward_max": 992.7684585591676, "episodes_this_iter": 19, "time_total_s": 1848.2547507286072, "time_since_restore": 1848.2547507286072}
{"timesteps_since_restore": 2917296, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-25-54", "episode_reward_min": 44.48987883988719, "timesteps_this_iter": 37942, "training_iteration": 75, "episode_reward_mean": 854.1702382144955, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 75, "custom_metrics": {"cost2_mean": -38.689078454341214, "outflow_rate_max": 1291.6826493506492, "cost1_mean": 330.1724562662598, "system_level_velocity_mean": 13.51121626191862, "cost2_min": -50.84086122280218, "cost1_max": 382.99122257841003, "cost1_min": 27.04195848589535, "cost2_max": -16.168094615323874, "outflow_rate_mean": 1093.6800609415266, "system_level_velocity_min": 11.2106146067641, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.23648074136741}, "info": {"num_steps_trained": 2917296, "load_time_ms": 12.465, "grad_time_ms": 8963.855, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 16.446918487548828, "vf_loss": 16.452041625976562, "policy_loss": -0.005992776248604059, "kl": 0.01742824725806713, "vf_explained_var": 0.8522796034812927, "entropy": 1.2177629470825195}, "update_time_ms": 8.236, "num_steps_sampled": 2917296, "sample_time_ms": 15931.225}, "episode_len_mean": 680.51, "time_this_iter_s": 24.117086172103882, "pid": 12036, "timesteps_total": 2917296, "hostname": "flow-main", "episodes_total": 1368, "timestamp": 1557224754, "episode_reward_max": 992.7684585591676, "episodes_this_iter": 18, "time_total_s": 1872.371836900711, "time_since_restore": 1872.371836900711}
{"timesteps_since_restore": 2956242, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc955c0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-26-20", "episode_reward_min": 44.48987883988719, "timesteps_this_iter": 38946, "training_iteration": 76, "episode_reward_mean": 849.3612933650951, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 76, "custom_metrics": {"cost2_mean": -38.61510533475625, "outflow_rate_max": 1291.6826493506492, "cost1_mean": 327.28668909379246, "system_level_velocity_mean": 13.379573289654429, "cost2_min": -50.84086122280218, "cost1_max": 382.99122257841003, "cost1_min": 27.04195848589535, "cost2_max": -16.168094615323874, "outflow_rate_mean": 1082.8145787517162, "system_level_velocity_min": 11.2106146067641, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.23648074136741}, "info": {"num_steps_trained": 2956242, "load_time_ms": 12.625, "grad_time_ms": 9029.862, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 15.824633598327637, "vf_loss": 15.828690528869629, "policy_loss": -0.004910028539597988, "kl": 0.017052864655852318, "vf_explained_var": 0.8436442017555237, "entropy": 1.2131189107894897}, "update_time_ms": 8.344, "num_steps_sampled": 2956242, "sample_time_ms": 15950.605}, "episode_len_mean": 680.51, "time_this_iter_s": 25.77138662338257, "pid": 12036, "timesteps_total": 2956242, "hostname": "flow-main", "episodes_total": 1385, "timestamp": 1557224780, "episode_reward_max": 992.7684585591676, "episodes_this_iter": 17, "time_total_s": 1898.1432235240936, "time_since_restore": 1898.1432235240936}
{"timesteps_since_restore": 2994445, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a90>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-26-44", "episode_reward_min": 44.48987883988719, "timesteps_this_iter": 38203, "training_iteration": 77, "episode_reward_mean": 845.7662074491386, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 77, "custom_metrics": {"cost2_mean": -38.6126225707407, "outflow_rate_max": 1291.6826493506492, "cost1_mean": 326.5292555450243, "system_level_velocity_mean": 13.435852073648523, "cost2_min": -50.84086122280218, "cost1_max": 382.99122257841003, "cost1_min": 27.04195848589535, "cost2_max": -16.168094615323874, "outflow_rate_mean": 1083.8914153429982, "system_level_velocity_min": 11.20623775800149, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.23648074136741}, "info": {"num_steps_trained": 2994445, "load_time_ms": 12.627, "grad_time_ms": 8984.603, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 17.46942710876465, "vf_loss": 17.47433090209961, "policy_loss": -0.0056525967083871365, "kl": 0.014939532615244389, "vf_explained_var": 0.8351626396179199, "entropy": 1.193050503730774}, "update_time_ms": 8.462, "num_steps_sampled": 2994445, "sample_time_ms": 15956.079}, "episode_len_mean": 677.28, "time_this_iter_s": 24.529589891433716, "pid": 12036, "timesteps_total": 2994445, "hostname": "flow-main", "episodes_total": 1403, "timestamp": 1557224804, "episode_reward_max": 992.7684585591676, "episodes_this_iter": 18, "time_total_s": 1922.6728134155273, "time_since_restore": 1922.6728134155273}
{"timesteps_since_restore": 3033191, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd6d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdf60>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-27-09", "episode_reward_min": 44.48987883988719, "timesteps_this_iter": 38746, "training_iteration": 78, "episode_reward_mean": 846.9449352955543, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 78, "custom_metrics": {"cost2_mean": -39.03074697661773, "outflow_rate_max": 1291.6826493506492, "cost1_mean": 325.12308951211526, "system_level_velocity_mean": 13.292322681307018, "cost2_min": -50.84086122280218, "cost1_max": 382.99122257841003, "cost1_min": 27.04195848589535, "cost2_max": -16.168094615323874, "outflow_rate_mean": 1077.5453698134652, "system_level_velocity_min": 10.807795189947884, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.23648074136741}, "info": {"num_steps_trained": 3033191, "load_time_ms": 12.692, "grad_time_ms": 8994.127, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000819563866, "total_loss": 14.19985294342041, "vf_loss": 14.203561782836914, "policy_loss": -0.004427595064043999, "kl": 0.0144133185967803, "vf_explained_var": 0.8854590654373169, "entropy": 1.2242001295089722}, "update_time_ms": 8.356, "num_steps_sampled": 3033191, "sample_time_ms": 15908.505}, "episode_len_mean": 679.99, "time_this_iter_s": 24.835607051849365, "pid": 12036, "timesteps_total": 3033191, "hostname": "flow-main", "episodes_total": 1420, "timestamp": 1557224829, "episode_reward_max": 992.7684585591676, "episodes_this_iter": 17, "time_total_s": 1947.5084204673767, "time_since_restore": 1947.5084204673767}
{"timesteps_since_restore": 3072148, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca61d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6550>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-27-36", "episode_reward_min": 44.48987883988719, "timesteps_this_iter": 38957, "training_iteration": 79, "episode_reward_mean": 840.779731965719, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 79, "custom_metrics": {"cost2_mean": -38.45577432054954, "outflow_rate_max": 1287.2614181818183, "cost1_mean": 322.3922440272426, "system_level_velocity_mean": 13.27731441753168, "cost2_min": -49.82476394163007, "cost1_max": 378.60433592270425, "cost1_min": 27.04195848589535, "cost2_max": -16.168094615323874, "outflow_rate_mean": 1072.9401669081979, "system_level_velocity_min": 10.807795189947884, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.23648074136741}, "info": {"num_steps_trained": 3072148, "load_time_ms": 12.665, "grad_time_ms": 9108.178, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000447034836, "total_loss": 18.801898956298828, "vf_loss": 18.807226181030273, "policy_loss": -0.006284504197537899, "kl": 0.01918722316622734, "vf_explained_var": 0.8261194825172424, "entropy": 1.2188829183578491}, "update_time_ms": 8.324, "num_steps_sampled": 3072148, "sample_time_ms": 15989.015}, "episode_len_mean": 675.2, "time_this_iter_s": 26.471410274505615, "pid": 12036, "timesteps_total": 3072148, "hostname": "flow-main", "episodes_total": 1438, "timestamp": 1557224856, "episode_reward_max": 974.456925749667, "episodes_this_iter": 18, "time_total_s": 1973.9798307418823, "time_since_restore": 1973.9798307418823}
{"timesteps_since_restore": 3109863, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca39b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3a90>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-27-59", "episode_reward_min": 42.11510709912318, "timesteps_this_iter": 37715, "training_iteration": 80, "episode_reward_mean": 824.8986071776184, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 80, "custom_metrics": {"cost2_mean": -38.09055800780756, "outflow_rate_max": 1284.7796675324676, "cost1_mean": 313.9554544327177, "system_level_velocity_mean": 13.232241100380023, "cost2_min": -49.82476394163007, "cost1_max": 378.60433592270425, "cost1_min": 27.379841166383933, "cost2_max": -17.563094518301135, "outflow_rate_mean": 1056.1497472491546, "system_level_velocity_min": 10.807795189947884, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 18.472728341517115}, "info": {"num_steps_trained": 3109863, "load_time_ms": 12.446, "grad_time_ms": 9069.927, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.05000000074505806, "total_loss": 22.60620880126953, "vf_loss": 22.610551834106445, "policy_loss": -0.005347498692572117, "kl": 0.020113173872232437, "vf_explained_var": 0.8237053155899048, "entropy": 1.2233785390853882}, "update_time_ms": 9.055, "num_steps_sampled": 3109863, "sample_time_ms": 15726.767}, "episode_len_mean": 660.8, "time_this_iter_s": 23.657850742340088, "pid": 12036, "timesteps_total": 3109863, "hostname": "flow-main", "episodes_total": 1461, "timestamp": 1557224879, "episode_reward_max": 974.456925749667, "episodes_this_iter": 23, "time_total_s": 1997.6376814842224, "time_since_restore": 1997.6376814842224}
{"timesteps_since_restore": 3146918, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80358>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-28-22", "episode_reward_min": 42.11510709912318, "timesteps_this_iter": 37055, "training_iteration": 81, "episode_reward_mean": 831.5159057210932, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 81, "custom_metrics": {"cost2_mean": -37.269559374147235, "outflow_rate_max": 1284.7796675324676, "cost1_mean": 314.56053923555714, "system_level_velocity_mean": 13.21235107055788, "cost2_min": -49.82476394163007, "cost1_max": 378.60433592270425, "cost1_min": 27.379841166383933, "cost2_max": -17.563094518301135, "outflow_rate_mean": 1058.7293720774321, "system_level_velocity_min": 10.807795189947884, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 18.472728341517115}, "info": {"num_steps_trained": 3146918, "load_time_ms": 12.265, "grad_time_ms": 8965.062, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499999552965164, "total_loss": 17.68585777282715, "vf_loss": 17.69114875793457, "policy_loss": -0.0065230089239776134, "kl": 0.016425520181655884, "vf_explained_var": 0.8456165790557861, "entropy": 1.2244465351104736}, "update_time_ms": 9.422, "num_steps_sampled": 3146918, "sample_time_ms": 15596.27}, "episode_len_mean": 662.88, "time_this_iter_s": 22.53852152824402, "pid": 12036, "timesteps_total": 3146918, "hostname": "flow-main", "episodes_total": 1479, "timestamp": 1557224902, "episode_reward_max": 974.456925749667, "episodes_this_iter": 18, "time_total_s": 2020.1762030124664, "time_since_restore": 2020.1762030124664}
{"timesteps_since_restore": 3184641, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca61d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca69e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-28-47", "episode_reward_min": 42.11510709912318, "timesteps_this_iter": 37723, "training_iteration": 82, "episode_reward_mean": 836.2321829618948, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 82, "custom_metrics": {"cost2_mean": -35.4975321367674, "outflow_rate_max": 1284.7796675324676, "cost1_mean": 315.5154656498778, "system_level_velocity_mean": 13.142598641121536, "cost2_min": -49.82476394163007, "cost1_max": 367.5979953130885, "cost1_min": 27.379841166383933, "cost2_max": -17.563094518301135, "outflow_rate_mean": 1053.6773896399964, "system_level_velocity_min": 10.807795189947884, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 18.472728341517115}, "info": {"num_steps_trained": 3184641, "load_time_ms": 12.064, "grad_time_ms": 8872.296, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499998807907104, "total_loss": 19.31507682800293, "vf_loss": 19.320478439331055, "policy_loss": -0.006657361518591642, "kl": 0.01677507534623146, "vf_explained_var": 0.8034577369689941, "entropy": 1.2353266477584839}, "update_time_ms": 9.684, "num_steps_sampled": 3184641, "sample_time_ms": 15712.36}, "episode_len_mean": 667.82, "time_this_iter_s": 25.16612696647644, "pid": 12036, "timesteps_total": 3184641, "hostname": "flow-main", "episodes_total": 1497, "timestamp": 1557224927, "episode_reward_max": 974.456925749667, "episodes_this_iter": 18, "time_total_s": 2045.3423299789429, "time_since_restore": 2045.3423299789429}
{"timesteps_since_restore": 3223173, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdcf8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-29-13", "episode_reward_min": 42.11510709912318, "timesteps_this_iter": 38532, "training_iteration": 83, "episode_reward_mean": 830.7752180787368, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 83, "custom_metrics": {"cost2_mean": -33.24147717798174, "outflow_rate_max": 1284.7796675324676, "cost1_mean": 315.81033678342936, "system_level_velocity_mean": 13.182511015877843, "cost2_min": -49.82476394163007, "cost1_max": 369.509807179733, "cost1_min": 27.379841166383933, "cost2_max": -17.563094518301135, "outflow_rate_mean": 1054.4526463872492, "system_level_velocity_min": 10.267330015447447, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 18.472728341517115}, "info": {"num_steps_trained": 3223173, "load_time_ms": 11.749, "grad_time_ms": 8844.159, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499998807907104, "total_loss": 19.263395309448242, "vf_loss": 19.26795196533203, "policy_loss": -0.005762075539678335, "kl": 0.016080167144536972, "vf_explained_var": 0.804549515247345, "entropy": 1.245063304901123}, "update_time_ms": 9.731, "num_steps_sampled": 3223173, "sample_time_ms": 15843.938}, "episode_len_mean": 667.82, "time_this_iter_s": 25.851383209228516, "pid": 12036, "timesteps_total": 3223173, "hostname": "flow-main", "episodes_total": 1515, "timestamp": 1557224953, "episode_reward_max": 974.456925749667, "episodes_this_iter": 18, "time_total_s": 2071.1937131881714, "time_since_restore": 2071.1937131881714}
{"timesteps_since_restore": 3261353, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ae48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f470>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-29-38", "episode_reward_min": 42.11510709912318, "timesteps_this_iter": 38180, "training_iteration": 84, "episode_reward_mean": 821.2498381186264, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 84, "custom_metrics": {"cost2_mean": -31.12522027446788, "outflow_rate_max": 1251.0483928071926, "cost1_mean": 313.5344505414134, "system_level_velocity_mean": 13.220489167292675, "cost2_min": -49.82476394163007, "cost1_max": 369.509807179733, "cost1_min": 27.379841166383933, "cost2_max": -17.563094518301135, "outflow_rate_mean": 1042.7760464311923, "system_level_velocity_min": 10.267330015447447, "outflow_rate_min": 323.39756559883244, "system_level_velocity_max": 18.472728341517115}, "info": {"num_steps_trained": 3261353, "load_time_ms": 11.762, "grad_time_ms": 8802.749, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499999552965164, "total_loss": 19.06036376953125, "vf_loss": 19.06534767150879, "policy_loss": -0.006274156738072634, "kl": 0.01721079833805561, "vf_explained_var": 0.7996298670768738, "entropy": 1.2408119440078735}, "update_time_ms": 9.974, "num_steps_sampled": 3261353, "sample_time_ms": 15897.359}, "episode_len_mean": 664.18, "time_this_iter_s": 25.19879651069641, "pid": 12036, "timesteps_total": 3261353, "hostname": "flow-main", "episodes_total": 1533, "timestamp": 1557224978, "episode_reward_max": 958.4146329588489, "episodes_this_iter": 18, "time_total_s": 2096.392509698868, "time_since_restore": 2096.392509698868}
{"timesteps_since_restore": 3298582, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8aef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a5c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8aac8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-30-03", "episode_reward_min": 42.11510709912318, "timesteps_this_iter": 37229, "training_iteration": 85, "episode_reward_mean": 825.3158953366863, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 85, "custom_metrics": {"cost2_mean": -29.36626608997333, "outflow_rate_max": 1267.2092155844155, "cost1_mean": 317.05301092129235, "system_level_velocity_mean": 13.250144346642086, "cost2_min": -46.109377315263664, "cost1_max": 372.43726464451936, "cost1_min": 27.379841166383933, "cost2_max": -17.563094518301135, "outflow_rate_mean": 1044.7311603868372, "system_level_velocity_min": 10.267330015447447, "outflow_rate_min": 323.39756559883244, "system_level_velocity_max": 18.472728341517115}, "info": {"num_steps_trained": 3298582, "load_time_ms": 11.709, "grad_time_ms": 8757.129, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499999552965164, "total_loss": 20.069726943969727, "vf_loss": 20.074657440185547, "policy_loss": -0.006302193272858858, "kl": 0.01829688996076584, "vf_explained_var": 0.7893326282501221, "entropy": 1.2228833436965942}, "update_time_ms": 10.072, "num_steps_sampled": 3298582, "sample_time_ms": 16051.797}, "episode_len_mean": 670.77, "time_this_iter_s": 25.200342893600464, "pid": 12036, "timesteps_total": 3298582, "hostname": "flow-main", "episodes_total": 1551, "timestamp": 1557225003, "episode_reward_max": 957.4655015433514, "episodes_this_iter": 18, "time_total_s": 2121.5928525924683, "time_since_restore": 2121.5928525924683}
{"timesteps_since_restore": 3336297, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca66d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6940>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-30-28", "episode_reward_min": 49.12849303132509, "timesteps_this_iter": 37715, "training_iteration": 86, "episode_reward_mean": 848.5013281697982, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 86, "custom_metrics": {"cost2_mean": -28.13151772193797, "outflow_rate_max": 1267.2092155844155, "cost1_mean": 324.6847456129483, "system_level_velocity_mean": 13.068079575212597, "cost2_min": -38.02510747344838, "cost1_max": 372.43726464451936, "cost1_min": 32.25506357818497, "cost2_max": -17.834505182676697, "outflow_rate_mean": 1059.0305045552593, "system_level_velocity_min": 10.267330015447447, "outflow_rate_min": 323.39756559883244, "system_level_velocity_max": 17.40210921673689}, "info": {"num_steps_trained": 3336297, "load_time_ms": 11.454, "grad_time_ms": 8597.696, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499998807907104, "total_loss": 19.076448440551758, "vf_loss": 19.081857681274414, "policy_loss": -0.006718591786921024, "kl": 0.01743766851723194, "vf_explained_var": 0.7978843450546265, "entropy": 1.2198843955993652}, "update_time_ms": 9.986, "num_steps_sampled": 3336297, "sample_time_ms": 16131.77}, "episode_len_mean": 691.15, "time_this_iter_s": 24.939652681350708, "pid": 12036, "timesteps_total": 3336297, "hostname": "flow-main", "episodes_total": 1569, "timestamp": 1557225028, "episode_reward_max": 957.4655015433514, "episodes_this_iter": 18, "time_total_s": 2146.532505273819, "time_since_restore": 2146.532505273819}
{"timesteps_since_restore": 3374130, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc806d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc804a8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-30-53", "episode_reward_min": 49.12849303132509, "timesteps_this_iter": 37833, "training_iteration": 87, "episode_reward_mean": 842.9632521875839, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 87, "custom_metrics": {"cost2_mean": -26.618897808899025, "outflow_rate_max": 1267.2092155844155, "cost1_mean": 322.28201569234096, "system_level_velocity_mean": 13.060573020972349, "cost2_min": -34.91236056925532, "cost1_max": 372.43726464451936, "cost1_min": 32.25506357818497, "cost2_max": -17.834505182676697, "outflow_rate_mean": 1058.473097061775, "system_level_velocity_min": 10.267330015447447, "outflow_rate_min": 323.39756559883244, "system_level_velocity_max": 17.40210921673689}, "info": {"num_steps_trained": 3374130, "load_time_ms": 11.401, "grad_time_ms": 8544.124, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499998807907104, "total_loss": 21.66522789001465, "vf_loss": 21.668922424316406, "policy_loss": -0.0047747064381837845, "kl": 0.014377416111528873, "vf_explained_var": 0.7728086113929749, "entropy": 1.2121927738189697}, "update_time_ms": 9.782, "num_steps_sampled": 3374130, "sample_time_ms": 16233.791}, "episode_len_mean": 686.4, "time_this_iter_s": 25.004704475402832, "pid": 12036, "timesteps_total": 3374130, "hostname": "flow-main", "episodes_total": 1588, "timestamp": 1557225053, "episode_reward_max": 957.4655015433514, "episodes_this_iter": 19, "time_total_s": 2171.537209749222, "time_since_restore": 2171.537209749222}
{"timesteps_since_restore": 3411751, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca67f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc807f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6d68>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-31-18", "episode_reward_min": 49.12849303132509, "timesteps_this_iter": 37621, "training_iteration": 88, "episode_reward_mean": 830.6275774515648, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 88, "custom_metrics": {"cost2_mean": -25.605599638288414, "outflow_rate_max": 1267.2092155844155, "cost1_mean": 316.33445721057865, "system_level_velocity_mean": 13.106998756769118, "cost2_min": -34.91236056925532, "cost1_max": 372.43726464451936, "cost1_min": 32.25506357818497, "cost2_max": -16.33846322514854, "outflow_rate_mean": 1043.300876084553, "system_level_velocity_min": 11.1891063693957, "outflow_rate_min": 323.39756559883244, "system_level_velocity_max": 17.40210921673689}, "info": {"num_steps_trained": 3411751, "load_time_ms": 11.54, "grad_time_ms": 8502.662, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499999552965164, "total_loss": 20.138763427734375, "vf_loss": 20.143747329711914, "policy_loss": -0.006226848345249891, "kl": 0.016564788296818733, "vf_explained_var": 0.8120072484016418, "entropy": 1.2247231006622314}, "update_time_ms": 9.936, "num_steps_sampled": 3411751, "sample_time_ms": 16213.673}, "episode_len_mean": 673.78, "time_this_iter_s": 24.70335054397583, "pid": 12036, "timesteps_total": 3411751, "hostname": "flow-main", "episodes_total": 1608, "timestamp": 1557225078, "episode_reward_max": 940.0352188089475, "episodes_this_iter": 20, "time_total_s": 2196.2405602931976, "time_since_restore": 2196.2405602931976}
{"timesteps_since_restore": 3449845, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc952e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-31-45", "episode_reward_min": 46.13690577877953, "timesteps_this_iter": 38094, "training_iteration": 89, "episode_reward_mean": 820.4293835157151, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 89, "custom_metrics": {"cost2_mean": -24.663610668426532, "outflow_rate_max": 1267.2092155844155, "cost1_mean": 312.29398565918893, "system_level_velocity_mean": 13.189422060938014, "cost2_min": -34.91236056925532, "cost1_max": 372.43726464451936, "cost1_min": 26.58271803233376, "cost2_max": -11.71421714314669, "outflow_rate_mean": 1036.5187830117893, "system_level_velocity_min": 11.1891063693957, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.889485819535032}, "info": {"num_steps_trained": 3449845, "load_time_ms": 11.665, "grad_time_ms": 8413.623, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.07499999552965164, "total_loss": 21.732812881469727, "vf_loss": 21.738754272460938, "policy_loss": -0.00757138105109334, "kl": 0.02172904647886753, "vf_explained_var": 0.7580593824386597, "entropy": 1.2121773958206177}, "update_time_ms": 9.866, "num_steps_sampled": 3449845, "sample_time_ms": 16373.912}, "episode_len_mean": 663.72, "time_this_iter_s": 27.151140928268433, "pid": 12036, "timesteps_total": 3449845, "hostname": "flow-main", "episodes_total": 1628, "timestamp": 1557225105, "episode_reward_max": 940.0352188089475, "episodes_this_iter": 20, "time_total_s": 2223.391701221466, "time_since_restore": 2223.391701221466}
{"timesteps_since_restore": 3486874, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3ac8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-32-10", "episode_reward_min": 46.13690577877953, "timesteps_this_iter": 37029, "training_iteration": 90, "episode_reward_mean": 808.661052017293, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 90, "custom_metrics": {"cost2_mean": -23.495288080194847, "outflow_rate_max": 1252.179277922078, "cost1_mean": 308.48507877595637, "system_level_velocity_mean": 13.167915535174739, "cost2_min": -34.91236056925532, "cost1_max": 363.64971977369, "cost1_min": 26.58271803233376, "cost2_max": -11.71421714314669, "outflow_rate_mean": 1031.8930299637354, "system_level_velocity_min": 10.95229277112626, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.889485819535032}, "info": {"num_steps_trained": 3486874, "load_time_ms": 11.653, "grad_time_ms": 8464.261, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250000447034836, "total_loss": 23.169403076171875, "vf_loss": 23.173446655273438, "policy_loss": -0.005810154601931572, "kl": 0.015694892033934593, "vf_explained_var": 0.7498037219047546, "entropy": 1.2228565216064453}, "update_time_ms": 9.079, "num_steps_sampled": 3486874, "sample_time_ms": 16459.493}, "episode_len_mean": 657.59, "time_this_iter_s": 25.004215955734253, "pid": 12036, "timesteps_total": 3486874, "hostname": "flow-main", "episodes_total": 1648, "timestamp": 1557225130, "episode_reward_max": 940.0352188089475, "episodes_this_iter": 20, "time_total_s": 2248.3959171772003, "time_since_restore": 2248.3959171772003}
{"timesteps_since_restore": 3525088, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca66d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6550>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-32-35", "episode_reward_min": 46.13690577877953, "timesteps_this_iter": 38214, "training_iteration": 91, "episode_reward_mean": 805.8997738054001, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 91, "custom_metrics": {"cost2_mean": -22.71494481855442, "outflow_rate_max": 1227.7855480519481, "cost1_mean": 307.27648293395964, "system_level_velocity_mean": 13.113977760005236, "cost2_min": -34.91236056925532, "cost1_max": 363.64971977369, "cost1_min": 26.58271803233376, "cost2_max": -11.71421714314669, "outflow_rate_mean": 1028.6382341275716, "system_level_velocity_min": 10.01309032055857, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.889485819535032}, "info": {"num_steps_trained": 3525088, "load_time_ms": 11.651, "grad_time_ms": 8552.89, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250000447034836, "total_loss": 18.106172561645508, "vf_loss": 18.109922409057617, "policy_loss": -0.0056062499061226845, "kl": 0.016490334644913673, "vf_explained_var": 0.8129229545593262, "entropy": 1.2471495866775513}, "update_time_ms": 9.019, "num_steps_sampled": 3525088, "sample_time_ms": 16561.242}, "episode_len_mean": 658.01, "time_this_iter_s": 24.452280282974243, "pid": 12036, "timesteps_total": 3525088, "hostname": "flow-main", "episodes_total": 1666, "timestamp": 1557225155, "episode_reward_max": 975.3104782393159, "episodes_this_iter": 18, "time_total_s": 2272.8481974601746, "time_since_restore": 2272.8481974601746}
{"timesteps_since_restore": 3562506, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc957f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcd6eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc950f0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-33-00", "episode_reward_min": 46.13690577877953, "timesteps_this_iter": 37418, "training_iteration": 92, "episode_reward_mean": 798.5183149785324, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 92, "custom_metrics": {"cost2_mean": -21.95310247489376, "outflow_rate_max": 1227.4196363636363, "cost1_mean": 305.16058112293837, "system_level_velocity_mean": 13.077777986934935, "cost2_min": -28.453671583446006, "cost1_max": 362.23193106626456, "cost1_min": 26.58271803233376, "cost2_max": -11.71421714314669, "outflow_rate_mean": 1018.3158246376422, "system_level_velocity_min": 10.01309032055857, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.889485819535032}, "info": {"num_steps_trained": 3562506, "load_time_ms": 11.942, "grad_time_ms": 8614.716, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250000447034836, "total_loss": 21.121257781982422, "vf_loss": 21.12578773498535, "policy_loss": -0.006306590512394905, "kl": 0.015809714794158936, "vf_explained_var": 0.7819097638130188, "entropy": 1.2470053434371948}, "update_time_ms": 9.015, "num_steps_sampled": 3562506, "sample_time_ms": 16523.034}, "episode_len_mean": 656.87, "time_this_iter_s": 25.41665291786194, "pid": 12036, "timesteps_total": 3562506, "hostname": "flow-main", "episodes_total": 1686, "timestamp": 1557225180, "episode_reward_max": 975.3104782393159, "episodes_this_iter": 20, "time_total_s": 2298.2648503780365, "time_since_restore": 2298.2648503780365}
{"timesteps_since_restore": 3600488, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3358>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-33-26", "episode_reward_min": 46.13690577877953, "timesteps_this_iter": 37982, "training_iteration": 93, "episode_reward_mean": 794.0777078971414, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 93, "custom_metrics": {"cost2_mean": -21.578348894461566, "outflow_rate_max": 1227.4196363636363, "cost1_mean": 304.54151183812536, "system_level_velocity_mean": 13.060935212302121, "cost2_min": -28.453671583446006, "cost1_max": 362.23193106626456, "cost1_min": 26.06960200851924, "cost2_max": -9.873767176192558, "outflow_rate_mean": 1015.0776945764999, "system_level_velocity_min": 10.01309032055857, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 17.889485819535032}, "info": {"num_steps_trained": 3600488, "load_time_ms": 11.984, "grad_time_ms": 8597.483, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250001192092896, "total_loss": 14.485259056091309, "vf_loss": 14.489309310913086, "policy_loss": -0.005559192970395088, "kl": 0.01342504657804966, "vf_explained_var": 0.8451777696609497, "entropy": 1.2531907558441162}, "update_time_ms": 9.102, "num_steps_sampled": 3600488, "sample_time_ms": 16490.995}, "episode_len_mean": 657.04, "time_this_iter_s": 25.33738112449646, "pid": 12036, "timesteps_total": 3600488, "hostname": "flow-main", "episodes_total": 1702, "timestamp": 1557225206, "episode_reward_max": 975.3104782393159, "episodes_this_iter": 16, "time_total_s": 2323.602231502533, "time_since_restore": 2323.602231502533}
{"timesteps_since_restore": 3639564, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca32e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3b70>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-33-52", "episode_reward_min": 46.13690577877953, "timesteps_this_iter": 39076, "training_iteration": 94, "episode_reward_mean": 800.5347040212456, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 94, "custom_metrics": {"cost2_mean": -21.374577344642507, "outflow_rate_max": 1227.4196363636363, "cost1_mean": 305.24602257305634, "system_level_velocity_mean": 12.838098284414086, "cost2_min": -28.453671583446006, "cost1_max": 362.23193106626456, "cost1_min": 26.06960200851924, "cost2_max": -9.873767176192558, "outflow_rate_mean": 1013.6012629449283, "system_level_velocity_min": 10.01309032055857, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 17.889485819535032}, "info": {"num_steps_trained": 3639564, "load_time_ms": 12.018, "grad_time_ms": 8679.192, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11249999701976776, "total_loss": 21.271238327026367, "vf_loss": 21.2744197845459, "policy_loss": -0.004850670695304871, "kl": 0.014809994958341122, "vf_explained_var": 0.7536203861236572, "entropy": 1.2615699768066406}, "update_time_ms": 8.975, "num_steps_sampled": 3639564, "sample_time_ms": 16548.797}, "episode_len_mean": 666.25, "time_this_iter_s": 26.607505798339844, "pid": 12036, "timesteps_total": 3639564, "hostname": "flow-main", "episodes_total": 1722, "timestamp": 1557225232, "episode_reward_max": 975.3104782393159, "episodes_this_iter": 20, "time_total_s": 2350.209737300873, "time_since_restore": 2350.209737300873}
{"timesteps_since_restore": 3678245, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca69e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6668>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-34-18", "episode_reward_min": 46.214943711322974, "timesteps_this_iter": 38681, "training_iteration": 95, "episode_reward_mean": 808.229370962464, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 95, "custom_metrics": {"cost2_mean": -21.250937935062833, "outflow_rate_max": 1212.6223776223776, "cost1_mean": 305.2240060530075, "system_level_velocity_mean": 12.639782941337655, "cost2_min": -28.453671583446006, "cost1_max": 362.23193106626456, "cost1_min": 26.06960200851924, "cost2_max": -9.873767176192558, "outflow_rate_mean": 1009.9465398182895, "system_level_velocity_min": 10.01309032055857, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 17.506346863393777}, "info": {"num_steps_trained": 3678245, "load_time_ms": 12.266, "grad_time_ms": 8710.332, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250000447034836, "total_loss": 14.394098281860352, "vf_loss": 14.39684009552002, "policy_loss": -0.004376015160232782, "kl": 0.014538850635290146, "vf_explained_var": 0.8250405788421631, "entropy": 1.2394143342971802}, "update_time_ms": 9.204, "num_steps_sampled": 3678245, "sample_time_ms": 16605.867}, "episode_len_mean": 672.82, "time_this_iter_s": 26.094401359558105, "pid": 12036, "timesteps_total": 3678245, "hostname": "flow-main", "episodes_total": 1737, "timestamp": 1557225258, "episode_reward_max": 975.3104782393159, "episodes_this_iter": 15, "time_total_s": 2376.304138660431, "time_since_restore": 2376.304138660431}
{"timesteps_since_restore": 3717175, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca34e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3f98>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-34-44", "episode_reward_min": 46.214943711322974, "timesteps_this_iter": 38930, "training_iteration": 96, "episode_reward_mean": 816.3124444084722, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 96, "custom_metrics": {"cost2_mean": -21.190585822123033, "outflow_rate_max": 1210.8852051948054, "cost1_mean": 304.94228815754894, "system_level_velocity_mean": 12.577920308160506, "cost2_min": -28.453671583446006, "cost1_max": 362.23193106626456, "cost1_min": 26.06960200851924, "cost2_max": -9.873767176192558, "outflow_rate_mean": 1005.574274178437, "system_level_velocity_min": 10.01309032055857, "outflow_rate_min": 314.6188744831659, "system_level_velocity_max": 17.506346863393777}, "info": {"num_steps_trained": 3717175, "load_time_ms": 12.133, "grad_time_ms": 8722.153, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250000447034836, "total_loss": 19.42442512512207, "vf_loss": 19.428260803222656, "policy_loss": -0.005403357092291117, "kl": 0.013941881246864796, "vf_explained_var": 0.7940694093704224, "entropy": 1.2257462739944458}, "update_time_ms": 9.327, "num_steps_sampled": 3717175, "sample_time_ms": 16641.468}, "episode_len_mean": 674.46, "time_this_iter_s": 25.418840885162354, "pid": 12036, "timesteps_total": 3717175, "hostname": "flow-main", "episodes_total": 1757, "timestamp": 1557225284, "episode_reward_max": 975.3104782393159, "episodes_this_iter": 20, "time_total_s": 2401.7229795455933, "time_since_restore": 2401.7229795455933}
{"timesteps_since_restore": 3755602, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-35-09", "episode_reward_min": 43.42450006929026, "timesteps_this_iter": 38427, "training_iteration": 97, "episode_reward_mean": 793.6808508268674, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 97, "custom_metrics": {"cost2_mean": -21.178584447075565, "outflow_rate_max": 1210.8852051948054, "cost1_mean": 292.92058530567084, "system_level_velocity_mean": 12.5945074046752, "cost2_min": -28.939066182270793, "cost1_max": 358.0430171739704, "cost1_min": 26.06960200851924, "cost2_max": -9.873767176192558, "outflow_rate_mean": 970.9408814377375, "system_level_velocity_min": 10.151467858801583, "outflow_rate_min": 314.6188744831659, "system_level_velocity_max": 17.77511278065314}, "info": {"num_steps_trained": 3755602, "load_time_ms": 12.203, "grad_time_ms": 8705.661, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11249999701976776, "total_loss": 19.411514282226562, "vf_loss": 19.415651321411133, "policy_loss": -0.005873893853276968, "kl": 0.01544261910021305, "vf_explained_var": 0.8258277177810669, "entropy": 1.2433780431747437}, "update_time_ms": 9.301, "num_steps_sampled": 3755602, "sample_time_ms": 16647.067}, "episode_len_mean": 652.82, "time_this_iter_s": 24.92573833465576, "pid": 12036, "timesteps_total": 3755602, "hostname": "flow-main", "episodes_total": 1777, "timestamp": 1557225309, "episode_reward_max": 949.5402024565155, "episodes_this_iter": 20, "time_total_s": 2426.648717880249, "time_since_restore": 2426.648717880249}
{"timesteps_since_restore": 3794131, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc806d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc808d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80b38>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-35-34", "episode_reward_min": 43.42450006929026, "timesteps_this_iter": 38529, "training_iteration": 98, "episode_reward_mean": 811.2692698655178, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 98, "custom_metrics": {"cost2_mean": -22.19917802537626, "outflow_rate_max": 1210.8852051948054, "cost1_mean": 297.3392452264884, "system_level_velocity_mean": 12.585717414368144, "cost2_min": -33.16893942588832, "cost1_max": 358.0430171739704, "cost1_min": 26.540263410383112, "cost2_max": -11.226658002134945, "outflow_rate_mean": 988.4863035249098, "system_level_velocity_min": 10.151467858801583, "outflow_rate_min": 314.6188744831659, "system_level_velocity_max": 17.77511278065314}, "info": {"num_steps_trained": 3794131, "load_time_ms": 12.151, "grad_time_ms": 8691.033, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250001192092896, "total_loss": 17.101238250732422, "vf_loss": 17.10511589050293, "policy_loss": -0.005400599911808968, "kl": 0.01352548785507679, "vf_explained_var": 0.8268973231315613, "entropy": 1.2222957611083984}, "update_time_ms": 9.042, "num_steps_sampled": 3794131, "sample_time_ms": 16780.159}, "episode_len_mean": 658.84, "time_this_iter_s": 25.383444786071777, "pid": 12036, "timesteps_total": 3794131, "hostname": "flow-main", "episodes_total": 1795, "timestamp": 1557225334, "episode_reward_max": 976.4817096667664, "episodes_this_iter": 18, "time_total_s": 2452.032162666321, "time_since_restore": 2452.032162666321}
{"timesteps_since_restore": 3832577, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f630>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-35-59", "episode_reward_min": 43.42450006929026, "timesteps_this_iter": 38446, "training_iteration": 99, "episode_reward_mean": 813.4772227372364, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 99, "custom_metrics": {"cost2_mean": -23.83210449462467, "outflow_rate_max": 1210.8852051948054, "cost1_mean": 297.1681023529096, "system_level_velocity_mean": 12.675586735295473, "cost2_min": -33.82461130370353, "cost1_max": 361.56886439691397, "cost1_min": 26.540263410383112, "cost2_max": -11.226658002134945, "outflow_rate_mean": 989.1736295302082, "system_level_velocity_min": 10.151467858801583, "outflow_rate_min": 314.6188744831659, "system_level_velocity_max": 17.77511278065314}, "info": {"num_steps_trained": 3832577, "load_time_ms": 12.162, "grad_time_ms": 8665.511, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11249999701976776, "total_loss": 19.61433982849121, "vf_loss": 19.619478225708008, "policy_loss": -0.007057449780404568, "kl": 0.01706618070602417, "vf_explained_var": 0.8181473612785339, "entropy": 1.2303131818771362}, "update_time_ms": 8.722, "num_steps_sampled": 3832577, "sample_time_ms": 16595.614}, "episode_len_mean": 654.01, "time_this_iter_s": 25.060407638549805, "pid": 12036, "timesteps_total": 3832577, "hostname": "flow-main", "episodes_total": 1815, "timestamp": 1557225359, "episode_reward_max": 976.4817096667664, "episodes_this_iter": 20, "time_total_s": 2477.0925703048706, "time_since_restore": 2477.0925703048706}
{"timesteps_since_restore": 3871932, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3278>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-36-22", "episode_reward_min": 43.42450006929026, "timesteps_this_iter": 39355, "training_iteration": 100, "episode_reward_mean": 823.28720183409, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 100, "custom_metrics": {"cost2_mean": -24.94780759978309, "outflow_rate_max": 1224.938051948052, "cost1_mean": 300.39112129925536, "system_level_velocity_mean": 12.660485758442944, "cost2_min": -33.82461130370353, "cost1_max": 361.7475850797995, "cost1_min": 26.540263410383112, "cost2_max": -11.226658002134945, "outflow_rate_mean": 996.1659330659775, "system_level_velocity_min": 10.151467858801583, "outflow_rate_min": 314.6188744831659, "system_level_velocity_max": 17.77511278065314}, "info": {"num_steps_trained": 3871932, "load_time_ms": 12.184, "grad_time_ms": 8758.032, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11249999701976776, "total_loss": 12.573116302490234, "vf_loss": 12.577615737915039, "policy_loss": -0.006177919916808605, "kl": 0.014921414665877819, "vf_explained_var": 0.881101131439209, "entropy": 1.26129949092865}, "update_time_ms": 8.495, "num_steps_sampled": 3871932, "sample_time_ms": 16304.501}, "episode_len_mean": 659.92, "time_this_iter_s": 23.019071102142334, "pid": 12036, "timesteps_total": 3871932, "hostname": "flow-main", "episodes_total": 1830, "timestamp": 1557225382, "episode_reward_max": 976.4817096667664, "episodes_this_iter": 15, "time_total_s": 2500.111641407013, "time_since_restore": 2500.111641407013}
{"timesteps_since_restore": 3910849, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc955f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95978>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-36-47", "episode_reward_min": 43.42450006929026, "timesteps_this_iter": 38917, "training_iteration": 101, "episode_reward_mean": 827.1447063842088, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 101, "custom_metrics": {"cost2_mean": -27.189932907474123, "outflow_rate_max": 1224.938051948052, "cost1_mean": 301.7132820030201, "system_level_velocity_mean": 12.685745398822943, "cost2_min": -41.04921439877326, "cost1_max": 361.7475850797995, "cost1_min": 26.540263410383112, "cost2_max": -11.226658002134945, "outflow_rate_mean": 1003.9976010060373, "system_level_velocity_min": 10.151467858801583, "outflow_rate_min": 314.6188744831659, "system_level_velocity_max": 17.77511278065314}, "info": {"num_steps_trained": 3910849, "load_time_ms": 12.374, "grad_time_ms": 8985.059, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250000447034836, "total_loss": 13.975645065307617, "vf_loss": 13.97973346710205, "policy_loss": -0.006154004018753767, "kl": 0.018372301012277603, "vf_explained_var": 0.878866970539093, "entropy": 1.2284862995147705}, "update_time_ms": 8.424, "num_steps_sampled": 3910849, "sample_time_ms": 16055.627}, "episode_len_mean": 659.92, "time_this_iter_s": 24.263681411743164, "pid": 12036, "timesteps_total": 3910849, "hostname": "flow-main", "episodes_total": 1847, "timestamp": 1557225407, "episode_reward_max": 993.476935787181, "episodes_this_iter": 17, "time_total_s": 2524.375322818756, "time_since_restore": 2524.375322818756}
{"timesteps_since_restore": 3950659, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca62b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-37-10", "episode_reward_min": 43.42450006929026, "timesteps_this_iter": 39810, "training_iteration": 102, "episode_reward_mean": 838.9065302419602, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 102, "custom_metrics": {"cost2_mean": -28.98206554592119, "outflow_rate_max": 1234.1664087912086, "cost1_mean": 305.7496777756286, "system_level_velocity_mean": 12.687956108111637, "cost2_min": -42.301854573416996, "cost1_max": 361.7475850797995, "cost1_min": 26.540263410383112, "cost2_max": -11.702917096960416, "outflow_rate_mean": 1014.9392428266405, "system_level_velocity_min": 10.151467858801583, "outflow_rate_min": 327.1099134487595, "system_level_velocity_max": 17.77511278065314}, "info": {"num_steps_trained": 3950659, "load_time_ms": 12.428, "grad_time_ms": 9049.148, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250001192092896, "total_loss": 12.676471710205078, "vf_loss": 12.681344985961914, "policy_loss": -0.006808173842728138, "kl": 0.017196200788021088, "vf_explained_var": 0.8829439878463745, "entropy": 1.2376528978347778}, "update_time_ms": 8.455, "num_steps_sampled": 3950659, "sample_time_ms": 15736.53}, "episode_len_mean": 666.35, "time_this_iter_s": 22.856987953186035, "pid": 12036, "timesteps_total": 3950659, "hostname": "flow-main", "episodes_total": 1861, "timestamp": 1557225430, "episode_reward_max": 993.476935787181, "episodes_this_iter": 14, "time_total_s": 2547.232310771942, "time_since_restore": 2547.232310771942}
{"timesteps_since_restore": 3990422, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f4a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f9e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fba8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-37-38", "episode_reward_min": 215.24658443273265, "timesteps_this_iter": 39763, "training_iteration": 103, "episode_reward_mean": 869.2299205448352, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 103, "custom_metrics": {"cost2_mean": -30.88657417748168, "outflow_rate_max": 1234.1664087912086, "cost1_mean": 316.21180760268726, "system_level_velocity_mean": 12.527827809954458, "cost2_min": -42.301854573416996, "cost1_max": 361.7475850797995, "cost1_min": 89.74722750515005, "cost2_max": -19.030245723235552, "outflow_rate_mean": 1044.5417722893555, "system_level_velocity_min": 10.247655986166317, "outflow_rate_min": 498.47473469940087, "system_level_velocity_max": 15.239405038287996}, "info": {"num_steps_trained": 3990422, "load_time_ms": 12.79, "grad_time_ms": 9438.229, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11249999701976776, "total_loss": 14.377574920654297, "vf_loss": 14.382660865783691, "policy_loss": -0.006838178727775812, "kl": 0.015573350712656975, "vf_explained_var": 0.8866004347801208, "entropy": 1.2539628744125366}, "update_time_ms": 8.658, "num_steps_sampled": 3990422, "sample_time_ms": 15666.994}, "episode_len_mean": 689.07, "time_this_iter_s": 28.556406497955322, "pid": 12036, "timesteps_total": 3990422, "hostname": "flow-main", "episodes_total": 1882, "timestamp": 1557225458, "episode_reward_max": 993.476935787181, "episodes_this_iter": 21, "time_total_s": 2575.7887172698975, "time_since_restore": 2575.7887172698975}
{"timesteps_since_restore": 4029742, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0780>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-38-02", "episode_reward_min": 215.24658443273265, "timesteps_this_iter": 39320, "training_iteration": 104, "episode_reward_mean": 866.0165065472985, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 104, "custom_metrics": {"cost2_mean": -31.36683308187907, "outflow_rate_max": 1234.1664087912086, "cost1_mean": 313.3207355778788, "system_level_velocity_mean": 12.386489670825574, "cost2_min": -42.301854573416996, "cost1_max": 361.7475850797995, "cost1_min": 89.74722750515005, "cost2_max": -19.030245723235552, "outflow_rate_mean": 1036.8675212523929, "system_level_velocity_min": 9.87450614775481, "outflow_rate_min": 498.47473469940087, "system_level_velocity_max": 15.239405038287996}, "info": {"num_steps_trained": 4029742, "load_time_ms": 12.639, "grad_time_ms": 9254.623, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11249999701976776, "total_loss": 16.878210067749023, "vf_loss": 16.881916046142578, "policy_loss": -0.0055151344276964664, "kl": 0.01609470695257187, "vf_explained_var": 0.8504700064659119, "entropy": 1.2220003604888916}, "update_time_ms": 8.72, "num_steps_sampled": 4029742, "sample_time_ms": 15545.788}, "episode_len_mean": 689.07, "time_this_iter_s": 23.570290088653564, "pid": 12036, "timesteps_total": 4029742, "hostname": "flow-main", "episodes_total": 1898, "timestamp": 1557225482, "episode_reward_max": 993.476935787181, "episodes_this_iter": 16, "time_total_s": 2599.359007358551, "time_since_restore": 2599.359007358551}
{"timesteps_since_restore": 4068069, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca32e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95cf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3e80>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-38-25", "episode_reward_min": 215.24658443273265, "timesteps_this_iter": 38327, "training_iteration": 105, "episode_reward_mean": 871.173268393433, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 105, "custom_metrics": {"cost2_mean": -31.629829173660205, "outflow_rate_max": 1234.1664087912086, "cost1_mean": 313.82947681986576, "system_level_velocity_mean": 12.319649752324711, "cost2_min": -42.301854573416996, "cost1_max": 361.7475850797995, "cost1_min": 89.74722750515005, "cost2_max": -19.030245723235552, "outflow_rate_mean": 1039.695103421639, "system_level_velocity_min": 9.87450614775481, "outflow_rate_min": 498.47473469940087, "system_level_velocity_max": 15.057444939336534}, "info": {"num_steps_trained": 4068069, "load_time_ms": 12.434, "grad_time_ms": 9070.056, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250000447034836, "total_loss": 12.97818660736084, "vf_loss": 12.982294082641602, "policy_loss": -0.00595522066578269, "kl": 0.016434896737337112, "vf_explained_var": 0.8982919454574585, "entropy": 1.2013189792633057}, "update_time_ms": 8.602, "num_steps_sampled": 4068069, "sample_time_ms": 15454.942}, "episode_len_mean": 692.5, "time_this_iter_s": 23.319984674453735, "pid": 12036, "timesteps_total": 4068069, "hostname": "flow-main", "episodes_total": 1915, "timestamp": 1557225505, "episode_reward_max": 993.476935787181, "episodes_this_iter": 17, "time_total_s": 2622.6789920330048, "time_since_restore": 2622.6789920330048}
{"timesteps_since_restore": 4106025, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc806d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80b38>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-38-51", "episode_reward_min": 215.24658443273265, "timesteps_this_iter": 37956, "training_iteration": 106, "episode_reward_mean": 858.9328072281969, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 106, "custom_metrics": {"cost2_mean": -31.2835280638423, "outflow_rate_max": 1234.1664087912086, "cost1_mean": 310.7715291295841, "system_level_velocity_mean": 12.457698962121974, "cost2_min": -44.0740673810353, "cost1_max": 360.4947590165766, "cost1_min": 89.74722750515005, "cost2_max": -19.030245723235552, "outflow_rate_mean": 1037.9175111610475, "system_level_velocity_min": 9.87450614775481, "outflow_rate_min": 498.47473469940087, "system_level_velocity_max": 15.113068157357311}, "info": {"num_steps_trained": 4106025, "load_time_ms": 12.896, "grad_time_ms": 8999.031, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.11250001192092896, "total_loss": 21.576677322387695, "vf_loss": 21.5830020904541, "policy_loss": -0.008794138208031654, "kl": 0.021964343264698982, "vf_explained_var": 0.8249000906944275, "entropy": 1.2025879621505737}, "update_time_ms": 8.214, "num_steps_sampled": 4106025, "sample_time_ms": 15551.773}, "episode_len_mean": 681.48, "time_this_iter_s": 25.6703519821167, "pid": 12036, "timesteps_total": 4106025, "hostname": "flow-main", "episodes_total": 1935, "timestamp": 1557225531, "episode_reward_max": 993.476935787181, "episodes_this_iter": 20, "time_total_s": 2648.3493440151215, "time_since_restore": 2648.3493440151215}
{"timesteps_since_restore": 4144970, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8feb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f2b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-39-16", "episode_reward_min": 43.61964776668025, "timesteps_this_iter": 38945, "training_iteration": 107, "episode_reward_mean": 832.9175133754698, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 107, "custom_metrics": {"cost2_mean": -29.207536040387723, "outflow_rate_max": 1217.0355844155843, "cost1_mean": 304.20830691249336, "system_level_velocity_mean": 12.590329155325538, "cost2_min": -44.0740673810353, "cost1_max": 359.0861566616379, "cost1_min": 26.91771501281308, "cost2_max": -13.33223116499829, "outflow_rate_mean": 1025.216446157775, "system_level_velocity_min": 9.87450614775481, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.06656009707256}, "info": {"num_steps_trained": 4144970, "load_time_ms": 13.074, "grad_time_ms": 8948.65, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 21.962482452392578, "vf_loss": 21.965965270996094, "policy_loss": -0.005858312360942364, "kl": 0.014080449007451534, "vf_explained_var": 0.8189015984535217, "entropy": 1.2142242193222046}, "update_time_ms": 8.034, "num_steps_sampled": 4144970, "sample_time_ms": 15622.418}, "episode_len_mean": 665.91, "time_this_iter_s": 25.092455625534058, "pid": 12036, "timesteps_total": 4144970, "hostname": "flow-main", "episodes_total": 1956, "timestamp": 1557225556, "episode_reward_max": 992.6669462972574, "episodes_this_iter": 21, "time_total_s": 2673.4417996406555, "time_since_restore": 2673.4417996406555}
{"timesteps_since_restore": 4183161, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb02b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0358>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-39-39", "episode_reward_min": 43.61964776668025, "timesteps_this_iter": 38191, "training_iteration": 108, "episode_reward_mean": 834.0279290780588, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 108, "custom_metrics": {"cost2_mean": -28.34030144727474, "outflow_rate_max": 1217.0355844155843, "cost1_mean": 304.9507374480119, "system_level_velocity_mean": 12.520143460116971, "cost2_min": -44.0740673810353, "cost1_max": 359.0861566616379, "cost1_min": 26.91771501281308, "cost2_max": -13.33223116499829, "outflow_rate_mean": 1026.9199149985932, "system_level_velocity_min": 9.87450614775481, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.06656009707256}, "info": {"num_steps_trained": 4183161, "load_time_ms": 13.028, "grad_time_ms": 8901.456, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 18.133655548095703, "vf_loss": 18.137968063354492, "policy_loss": -0.006560043897479773, "kl": 0.013318492099642754, "vf_explained_var": 0.820105254650116, "entropy": 1.2184549570083618}, "update_time_ms": 7.959, "num_steps_sampled": 4183161, "sample_time_ms": 15446.789}, "episode_len_mean": 671.27, "time_this_iter_s": 23.152860164642334, "pid": 12036, "timesteps_total": 4183161, "hostname": "flow-main", "episodes_total": 1973, "timestamp": 1557225579, "episode_reward_max": 987.8440405062297, "episodes_this_iter": 17, "time_total_s": 2696.594659805298, "time_since_restore": 2696.594659805298}
{"timesteps_since_restore": 4222249, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95978>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-40-02", "episode_reward_min": 43.61964776668025, "timesteps_this_iter": 39088, "training_iteration": 109, "episode_reward_mean": 828.8755357730919, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 109, "custom_metrics": {"cost2_mean": -27.8286158246893, "outflow_rate_max": 1217.0355844155843, "cost1_mean": 303.2310491359864, "system_level_velocity_mean": 12.550084120963188, "cost2_min": -44.0740673810353, "cost1_max": 359.0861566616379, "cost1_min": 26.91771501281308, "cost2_max": -13.33223116499829, "outflow_rate_mean": 1024.7491453609357, "system_level_velocity_min": 9.87450614775481, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.06656009707256}, "info": {"num_steps_trained": 4222249, "load_time_ms": 12.998, "grad_time_ms": 8898.394, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 13.211383819580078, "vf_loss": 13.216089248657227, "policy_loss": -0.0071175964549183846, "kl": 0.014291440136730671, "vf_explained_var": 0.879244863986969, "entropy": 1.235336184501648}, "update_time_ms": 7.913, "num_steps_sampled": 4222249, "sample_time_ms": 15246.269}, "episode_len_mean": 666.88, "time_this_iter_s": 23.025943994522095, "pid": 12036, "timesteps_total": 4222249, "hostname": "flow-main", "episodes_total": 1989, "timestamp": 1557225602, "episode_reward_max": 966.4188024983512, "episodes_this_iter": 16, "time_total_s": 2719.62060379982, "time_since_restore": 2719.62060379982}
{"timesteps_since_restore": 4260803, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8aef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6860>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-40-27", "episode_reward_min": 43.61964776668025, "timesteps_this_iter": 38554, "training_iteration": 110, "episode_reward_mean": 829.7880823081111, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 110, "custom_metrics": {"cost2_mean": -27.29258773221106, "outflow_rate_max": 1250.7636935064936, "cost1_mean": 304.5682482918566, "system_level_velocity_mean": 12.584735625481821, "cost2_min": -44.0740673810353, "cost1_max": 356.6395102054738, "cost1_min": 26.91771501281308, "cost2_max": -13.33223116499829, "outflow_rate_mean": 1026.8073874561205, "system_level_velocity_min": 10.500366445617514, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.06656009707256}, "info": {"num_steps_trained": 4260803, "load_time_ms": 13.025, "grad_time_ms": 8778.377, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 14.322226524353027, "vf_loss": 14.329007148742676, "policy_loss": -0.009468702599406242, "kl": 0.015929676592350006, "vf_explained_var": 0.879948079586029, "entropy": 1.2394617795944214}, "update_time_ms": 7.897, "num_steps_sampled": 4260803, "sample_time_ms": 15586.935}, "episode_len_mean": 668.81, "time_this_iter_s": 25.22214436531067, "pid": 12036, "timesteps_total": 4260803, "hostname": "flow-main", "episodes_total": 2007, "timestamp": 1557225627, "episode_reward_max": 966.4188024983512, "episodes_this_iter": 18, "time_total_s": 2744.8427481651306, "time_since_restore": 2744.8427481651306}
{"timesteps_since_restore": 4299156, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca35c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3198>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-40-53", "episode_reward_min": 43.61964776668025, "timesteps_this_iter": 38353, "training_iteration": 111, "episode_reward_mean": 838.5081237403014, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 111, "custom_metrics": {"cost2_mean": -26.692406854467173, "outflow_rate_max": 1250.7636935064936, "cost1_mean": 310.0952120759428, "system_level_velocity_mean": 12.590076374570426, "cost2_min": -35.605453591753445, "cost1_max": 356.6395102054738, "cost1_min": 26.91771501281308, "cost2_max": -13.33223116499829, "outflow_rate_mean": 1035.0077972391896, "system_level_velocity_min": 10.500366445617514, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.06656009707256}, "info": {"num_steps_trained": 4299156, "load_time_ms": 13.1, "grad_time_ms": 8508.663, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 18.2270565032959, "vf_loss": 18.232101440429688, "policy_loss": -0.0075510116294026375, "kl": 0.014859252609312534, "vf_explained_var": 0.8264858722686768, "entropy": 1.2346770763397217}, "update_time_ms": 7.76, "num_steps_sampled": 4299156, "sample_time_ms": 15938.209}, "episode_len_mean": 680.04, "time_this_iter_s": 25.07275152206421, "pid": 12036, "timesteps_total": 4299156, "hostname": "flow-main", "episodes_total": 2026, "timestamp": 1557225653, "episode_reward_max": 956.1768050520309, "episodes_this_iter": 19, "time_total_s": 2769.915499687195, "time_since_restore": 2769.915499687195}
{"timesteps_since_restore": 4338005, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb07b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0c18>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-41-15", "episode_reward_min": 43.61964776668025, "timesteps_this_iter": 38849, "training_iteration": 112, "episode_reward_mean": 835.7126797784281, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 112, "custom_metrics": {"cost2_mean": -26.15331783909071, "outflow_rate_max": 1250.7636935064936, "cost1_mean": 308.03488511268, "system_level_velocity_mean": 12.486777274805553, "cost2_min": -35.605453591753445, "cost1_max": 355.6264742229606, "cost1_min": 26.91771501281308, "cost2_max": -13.33223116499829, "outflow_rate_mean": 1028.8263309974313, "system_level_velocity_min": 10.203391337813727, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.06656009707256}, "info": {"num_steps_trained": 4338005, "load_time_ms": 13.026, "grad_time_ms": 8412.744, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 14.336427688598633, "vf_loss": 14.340801239013672, "policy_loss": -0.006866412702947855, "kl": 0.014780370518565178, "vf_explained_var": 0.8518958687782288, "entropy": 1.2399870157241821}, "update_time_ms": 7.857, "num_steps_sampled": 4338005, "sample_time_ms": 16030.375}, "episode_len_mean": 680.85, "time_this_iter_s": 22.815237760543823, "pid": 12036, "timesteps_total": 4338005, "hostname": "flow-main", "episodes_total": 2041, "timestamp": 1557225675, "episode_reward_max": 956.1768050520309, "episodes_this_iter": 15, "time_total_s": 2792.7307374477386, "time_since_restore": 2792.7307374477386}
{"timesteps_since_restore": 4376446, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdeb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd0f0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-41-40", "episode_reward_min": 328.00320101689323, "timesteps_this_iter": 38441, "training_iteration": 113, "episode_reward_mean": 851.8152470397307, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 113, "custom_metrics": {"cost2_mean": -26.07966381075228, "outflow_rate_max": 1250.7636935064936, "cost1_mean": 310.87692729735886, "system_level_velocity_mean": 12.236634100297117, "cost2_min": -35.605453591753445, "cost1_max": 355.6264742229606, "cost1_min": 131.0680727026525, "cost2_max": -19.0446058395017, "outflow_rate_mean": 1029.3640135231817, "system_level_velocity_min": 10.128535158310958, "outflow_rate_min": 652.5419788915775, "system_level_velocity_max": 14.35588097978627}, "info": {"num_steps_trained": 4376446, "load_time_ms": 12.66, "grad_time_ms": 7921.791, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875003278255463, "total_loss": 15.799325942993164, "vf_loss": 15.804044723510742, "policy_loss": -0.0073296912014484406, "kl": 0.015477205626666546, "vf_explained_var": 0.8632411956787109, "entropy": 1.2577698230743408}, "update_time_ms": 7.663, "num_steps_sampled": 4376446, "sample_time_ms": 16094.646}, "episode_len_mean": 695.43, "time_this_iter_s": 24.253774166107178, "pid": 12036, "timesteps_total": 4376446, "hostname": "flow-main", "episodes_total": 2058, "timestamp": 1557225700, "episode_reward_max": 956.1768050520309, "episodes_this_iter": 17, "time_total_s": 2816.984511613846, "time_since_restore": 2816.984511613846}
{"timesteps_since_restore": 4414600, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8fe10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8feb8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-42-05", "episode_reward_min": 328.00320101689323, "timesteps_this_iter": 38154, "training_iteration": 114, "episode_reward_mean": 850.1732566909633, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 114, "custom_metrics": {"cost2_mean": -25.122862832236663, "outflow_rate_max": 1250.7636935064936, "cost1_mean": 313.9838335427038, "system_level_velocity_mean": 12.394709150080793, "cost2_min": -35.605453591753445, "cost1_max": 357.23174361077247, "cost1_min": 131.0680727026525, "cost2_max": -16.81262596586315, "outflow_rate_mean": 1032.547675788916, "system_level_velocity_min": 10.128535158310958, "outflow_rate_min": 652.5419788915775, "system_level_velocity_max": 14.35588097978627}, "info": {"num_steps_trained": 4414600, "load_time_ms": 12.667, "grad_time_ms": 7904.651, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 18.870437622070312, "vf_loss": 18.874061584472656, "policy_loss": -0.006157215218991041, "kl": 0.015025196596980095, "vf_explained_var": 0.8328294157981873, "entropy": 1.2336184978485107}, "update_time_ms": 7.336, "num_steps_sampled": 4414600, "sample_time_ms": 16314.776}, "episode_len_mean": 695.43, "time_this_iter_s": 25.558666944503784, "pid": 12036, "timesteps_total": 4414600, "hostname": "flow-main", "episodes_total": 2078, "timestamp": 1557225725, "episode_reward_max": 949.95632562739, "episodes_this_iter": 20, "time_total_s": 2842.5431785583496, "time_since_restore": 2842.5431785583496}
{"timesteps_since_restore": 4452667, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0f98>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-42-30", "episode_reward_min": 160.71373827628784, "timesteps_this_iter": 38067, "training_iteration": 115, "episode_reward_mean": 835.1757445041243, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 115, "custom_metrics": {"cost2_mean": -23.821166585390817, "outflow_rate_max": 1250.7636935064936, "cost1_mean": 312.3448690782897, "system_level_velocity_mean": 12.525709831965756, "cost2_min": -35.605453591753445, "cost1_max": 357.23174361077247, "cost1_min": 71.69509097799772, "cost2_max": -14.3596906135638, "outflow_rate_mean": 1026.8266217079474, "system_level_velocity_min": 10.128535158310958, "outflow_rate_min": 400.19442958108044, "system_level_velocity_max": 14.964627904988543}, "info": {"num_steps_trained": 4452667, "load_time_ms": 12.798, "grad_time_ms": 7883.181, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 22.828041076660156, "vf_loss": 22.832233428955078, "policy_loss": -0.006563955917954445, "kl": 0.014063256792724133, "vf_explained_var": 0.7922793030738831, "entropy": 1.2440159320831299}, "update_time_ms": 6.99, "num_steps_sampled": 4452667, "sample_time_ms": 16470.794}, "episode_len_mean": 688.41, "time_this_iter_s": 24.685009717941284, "pid": 12036, "timesteps_total": 4452667, "hostname": "flow-main", "episodes_total": 2099, "timestamp": 1557225750, "episode_reward_max": 949.1788740488032, "episodes_this_iter": 21, "time_total_s": 2867.228188276291, "time_since_restore": 2867.228188276291}
{"timesteps_since_restore": 4490480, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfd080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdd68>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-43-00", "episode_reward_min": 54.99763632064854, "timesteps_this_iter": 37813, "training_iteration": 116, "episode_reward_mean": 817.7844264870051, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 116, "custom_metrics": {"cost2_mean": -22.681772076647444, "outflow_rate_max": 1195.2404175824179, "cost1_mean": 307.30142665707217, "system_level_velocity_mean": 12.493136543745633, "cost2_min": -31.206763526804245, "cost1_max": 357.23174361077247, "cost1_min": 32.03500065693295, "cost2_max": -11.327010358400864, "outflow_rate_mean": 1011.9384047756705, "system_level_velocity_min": 10.128535158310958, "outflow_rate_min": 330.22370737173105, "system_level_velocity_max": 16.429832067486792}, "info": {"num_steps_trained": 4490480, "load_time_ms": 13.585, "grad_time_ms": 7916.906, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 19.42359733581543, "vf_loss": 19.4285831451416, "policy_loss": -0.007798101752996445, "kl": 0.016656331717967987, "vf_explained_var": 0.7976625561714172, "entropy": 1.2489562034606934}, "update_time_ms": 7.117, "num_steps_sampled": 4490480, "sample_time_ms": 16889.987}, "episode_len_mean": 681.35, "time_this_iter_s": 30.222388744354248, "pid": 12036, "timesteps_total": 4490480, "hostname": "flow-main", "episodes_total": 2118, "timestamp": 1557225780, "episode_reward_max": 940.367949850022, "episodes_this_iter": 19, "time_total_s": 2897.450577020645, "time_since_restore": 2897.450577020645}
{"timesteps_since_restore": 4528926, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f6d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f668>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-43-31", "episode_reward_min": 54.99763632064854, "timesteps_this_iter": 38446, "training_iteration": 117, "episode_reward_mean": 812.133968243382, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 117, "custom_metrics": {"cost2_mean": -21.970315548430907, "outflow_rate_max": 1184.5130177822175, "cost1_mean": 304.9241252334567, "system_level_velocity_mean": 12.404794812087149, "cost2_min": -28.78963426305234, "cost1_max": 357.23174361077247, "cost1_min": 32.03500065693295, "cost2_max": -11.327010358400864, "outflow_rate_mean": 1005.1883848635828, "system_level_velocity_min": 9.737506839491745, "outflow_rate_min": 330.22370737173105, "system_level_velocity_max": 16.429832067486792}, "info": {"num_steps_trained": 4528926, "load_time_ms": 13.508, "grad_time_ms": 7974.362, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875003278255463, "total_loss": 15.914892196655273, "vf_loss": 15.91903305053711, "policy_loss": -0.006705672945827246, "kl": 0.015188738703727722, "vf_explained_var": 0.8368632793426514, "entropy": 1.2428406476974487}, "update_time_ms": 7.137, "num_steps_sampled": 4528926, "sample_time_ms": 17391.759}, "episode_len_mean": 680.38, "time_this_iter_s": 30.694795846939087, "pid": 12036, "timesteps_total": 4528926, "hostname": "flow-main", "episodes_total": 2134, "timestamp": 1557225811, "episode_reward_max": 931.5820151628265, "episodes_this_iter": 16, "time_total_s": 2928.1453728675842, "time_since_restore": 2928.1453728675842}
{"timesteps_since_restore": 4567379, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0d68>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-43-55", "episode_reward_min": 54.99763632064854, "timesteps_this_iter": 38453, "training_iteration": 118, "episode_reward_mean": 811.1973683961218, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 118, "custom_metrics": {"cost2_mean": -21.28343442226029, "outflow_rate_max": 1188.2676103896104, "cost1_mean": 304.6512592346024, "system_level_velocity_mean": 12.386501336096947, "cost2_min": -30.094063785717218, "cost1_max": 357.23174361077247, "cost1_min": 32.03500065693295, "cost2_max": -11.327010358400864, "outflow_rate_mean": 1003.5901247037425, "system_level_velocity_min": 9.625414334049289, "outflow_rate_min": 330.22370737173105, "system_level_velocity_max": 16.429832067486792}, "info": {"num_steps_trained": 4567379, "load_time_ms": 13.216, "grad_time_ms": 8020.402, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875003278255463, "total_loss": 17.749134063720703, "vf_loss": 17.75417709350586, "policy_loss": -0.007693152409046888, "kl": 0.015706650912761688, "vf_explained_var": 0.8102551698684692, "entropy": 1.2450920343399048}, "update_time_ms": 7.304, "num_steps_sampled": 4567379, "sample_time_ms": 17441.613}, "episode_len_mean": 680.56, "time_this_iter_s": 24.109418392181396, "pid": 12036, "timesteps_total": 4567379, "hostname": "flow-main", "episodes_total": 2152, "timestamp": 1557225835, "episode_reward_max": 931.5820151628265, "episodes_this_iter": 18, "time_total_s": 2952.2547912597656, "time_since_restore": 2952.2547912597656}
{"timesteps_since_restore": 4606040, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb07f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0828>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-44-20", "episode_reward_min": 54.99763632064854, "timesteps_this_iter": 38661, "training_iteration": 119, "episode_reward_mean": 801.2478837225322, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 119, "custom_metrics": {"cost2_mean": -20.813415091525854, "outflow_rate_max": 1188.2676103896104, "cost1_mean": 300.4982727366745, "system_level_velocity_mean": 12.260036559685512, "cost2_min": -30.094063785717218, "cost1_max": 351.9339353159868, "cost1_min": 32.03500065693295, "cost2_max": -11.327010358400864, "outflow_rate_mean": 991.9850733918948, "system_level_velocity_min": 9.625414334049289, "outflow_rate_min": 330.22370737173105, "system_level_velocity_max": 16.429832067486792}, "info": {"num_steps_trained": 4606040, "load_time_ms": 13.29, "grad_time_ms": 8038.414, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 17.386411666870117, "vf_loss": 17.391271591186523, "policy_loss": -0.0074287233874201775, "kl": 0.015216591767966747, "vf_explained_var": 0.8019490838050842, "entropy": 1.2518500089645386}, "update_time_ms": 7.445, "num_steps_sampled": 4606040, "sample_time_ms": 17569.502}, "episode_len_mean": 677.39, "time_this_iter_s": 24.464406490325928, "pid": 12036, "timesteps_total": 4606040, "hostname": "flow-main", "episodes_total": 2169, "timestamp": 1557225860, "episode_reward_max": 931.5820151628265, "episodes_this_iter": 17, "time_total_s": 2976.7191977500916, "time_since_restore": 2976.7191977500916}
{"timesteps_since_restore": 4644940, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdd68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc807f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80ba8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-44-42", "episode_reward_min": 54.99763632064854, "timesteps_this_iter": 38900, "training_iteration": 120, "episode_reward_mean": 796.8007292529561, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 120, "custom_metrics": {"cost2_mean": -20.57768308316659, "outflow_rate_max": 1188.2676103896104, "cost1_mean": 297.1911465087099, "system_level_velocity_mean": 12.098766762880592, "cost2_min": -30.094063785717218, "cost1_max": 351.9339353159868, "cost1_min": 32.03500065693295, "cost2_max": -11.327010358400864, "outflow_rate_mean": 984.042049339947, "system_level_velocity_min": 9.625414334049289, "outflow_rate_min": 330.22370737173105, "system_level_velocity_max": 16.429832067486792}, "info": {"num_steps_trained": 4644940, "load_time_ms": 13.584, "grad_time_ms": 8112.783, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 17.522174835205078, "vf_loss": 17.52631378173828, "policy_loss": -0.006896250415593386, "kl": 0.01632511429488659, "vf_explained_var": 0.7772247791290283, "entropy": 1.2566426992416382}, "update_time_ms": 7.436, "num_steps_sampled": 4644940, "sample_time_ms": 17211.36}, "episode_len_mean": 677.61, "time_this_iter_s": 22.421031951904297, "pid": 12036, "timesteps_total": 4644940, "hostname": "flow-main", "episodes_total": 2185, "timestamp": 1557225882, "episode_reward_max": 931.5820151628265, "episodes_this_iter": 16, "time_total_s": 2999.140229701996, "time_since_restore": 2999.140229701996}
{"timesteps_since_restore": 4683808, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca67b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6f60>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-45-05", "episode_reward_min": 54.99763632064854, "timesteps_this_iter": 38868, "training_iteration": 121, "episode_reward_mean": 805.4891843788296, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 121, "custom_metrics": {"cost2_mean": -20.29994941067402, "outflow_rate_max": 1188.2676103896104, "cost1_mean": 295.4788351296246, "system_level_velocity_mean": 11.736230253058865, "cost2_min": -30.094063785717218, "cost1_max": 351.9339353159868, "cost1_min": 32.03500065693295, "cost2_max": -11.327010358400864, "outflow_rate_mean": 978.4152618178136, "system_level_velocity_min": 9.435609202238975, "outflow_rate_min": 330.22370737173105, "system_level_velocity_max": 16.429832067486792}, "info": {"num_steps_trained": 4683808, "load_time_ms": 13.225, "grad_time_ms": 8171.233, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 16.169147491455078, "vf_loss": 16.17209815979004, "policy_loss": -0.00588534539565444, "kl": 0.01740744523704052, "vf_explained_var": 0.8181548118591309, "entropy": 1.2517880201339722}, "update_time_ms": 7.466, "num_steps_sampled": 4683808, "sample_time_ms": 16914.908}, "episode_len_mean": 688.8, "time_this_iter_s": 22.68651032447815, "pid": 12036, "timesteps_total": 4683808, "hostname": "flow-main", "episodes_total": 2201, "timestamp": 1557225905, "episode_reward_max": 913.6772761319687, "episodes_this_iter": 16, "time_total_s": 3021.826740026474, "time_since_restore": 3021.826740026474}
{"timesteps_since_restore": 4722425, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca39e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-45-30", "episode_reward_min": 50.91759019138019, "timesteps_this_iter": 38617, "training_iteration": 122, "episode_reward_mean": 802.23927877216, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 122, "custom_metrics": {"cost2_mean": -20.094804033170348, "outflow_rate_max": 1188.2676103896104, "cost1_mean": 290.77260377212457, "system_level_velocity_mean": 11.563082664035008, "cost2_min": -30.094063785717218, "cost1_max": 351.9339353159868, "cost1_min": 29.993042758093413, "cost2_max": -11.348657768793117, "outflow_rate_mean": 968.645132072997, "system_level_velocity_min": 9.435609202238975, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 16.385705737043}, "info": {"num_steps_trained": 4722425, "load_time_ms": 13.28, "grad_time_ms": 8215.221, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 18.82296371459961, "vf_loss": 18.827180862426758, "policy_loss": -0.007109056692570448, "kl": 0.01714353635907173, "vf_explained_var": 0.7940492033958435, "entropy": 1.230228304862976}, "update_time_ms": 7.406, "num_steps_sampled": 4722425, "sample_time_ms": 17066.011}, "episode_len_mean": 686.53, "time_this_iter_s": 24.776121854782104, "pid": 12036, "timesteps_total": 4722425, "hostname": "flow-main", "episodes_total": 2222, "timestamp": 1557225930, "episode_reward_max": 913.6772761319687, "episodes_this_iter": 21, "time_total_s": 3046.602861881256, "time_since_restore": 3046.602861881256}
{"timesteps_since_restore": 4760914, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6f98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6b70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca65f8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-45-54", "episode_reward_min": 50.91759019138019, "timesteps_this_iter": 38489, "training_iteration": 123, "episode_reward_mean": 802.6372238413473, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 123, "custom_metrics": {"cost2_mean": -19.673700050167984, "outflow_rate_max": 1154.8909246753246, "cost1_mean": 287.9005855491047, "system_level_velocity_mean": 11.488137293340442, "cost2_min": -30.094063785717218, "cost1_max": 346.7288298345562, "cost1_min": 29.993042758093413, "cost2_max": -11.348657768793117, "outflow_rate_mean": 956.8768860664637, "system_level_velocity_min": 9.435609202238975, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 16.385705737043}, "info": {"num_steps_trained": 4760914, "load_time_ms": 13.271, "grad_time_ms": 8347.412, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875003278255463, "total_loss": 17.555524826049805, "vf_loss": 17.559017181396484, "policy_loss": -0.0065045226365327835, "kl": 0.01784961111843586, "vf_explained_var": 0.8069559335708618, "entropy": 1.2427024841308594}, "update_time_ms": 7.5, "num_steps_sampled": 4760914, "sample_time_ms": 16981.616}, "episode_len_mean": 683.95, "time_this_iter_s": 24.747588396072388, "pid": 12036, "timesteps_total": 4760914, "hostname": "flow-main", "episodes_total": 2239, "timestamp": 1557225954, "episode_reward_max": 934.5820761232346, "episodes_this_iter": 17, "time_total_s": 3071.3504502773285, "time_since_restore": 3071.3504502773285}
{"timesteps_since_restore": 4799721, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3a58>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-46-17", "episode_reward_min": 50.91759019138019, "timesteps_this_iter": 38807, "training_iteration": 124, "episode_reward_mean": 803.3611277685675, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 124, "custom_metrics": {"cost2_mean": -19.445885031476838, "outflow_rate_max": 1154.8909246753246, "cost1_mean": 287.77573994849337, "system_level_velocity_mean": 11.413077081421024, "cost2_min": -26.158360876991544, "cost1_max": 346.7288298345562, "cost1_min": 29.993042758093413, "cost2_max": -11.348657768793117, "outflow_rate_mean": 955.1558541775124, "system_level_velocity_min": 9.435609202238975, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 16.385705737043}, "info": {"num_steps_trained": 4799721, "load_time_ms": 13.516, "grad_time_ms": 8560.582, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 15.37859058380127, "vf_loss": 15.384819984436035, "policy_loss": -0.009059257805347443, "kl": 0.016777804121375084, "vf_explained_var": 0.8347611427307129, "entropy": 1.2850651741027832}, "update_time_ms": 7.547, "num_steps_sampled": 4799721, "sample_time_ms": 16492.47}, "episode_len_mean": 687.12, "time_this_iter_s": 22.834348678588867, "pid": 12036, "timesteps_total": 4799721, "hostname": "flow-main", "episodes_total": 2256, "timestamp": 1557225977, "episode_reward_max": 934.5820761232346, "episodes_this_iter": 17, "time_total_s": 3094.1847989559174, "time_since_restore": 3094.1847989559174}
{"timesteps_since_restore": 4838162, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc80e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3940>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-46-40", "episode_reward_min": 50.91759019138019, "timesteps_this_iter": 38441, "training_iteration": 125, "episode_reward_mean": 794.9009824270917, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 125, "custom_metrics": {"cost2_mean": -19.343405861027687, "outflow_rate_max": 1122.914181818182, "cost1_mean": 285.07925909910585, "system_level_velocity_mean": 11.306593690352582, "cost2_min": -26.116974325035955, "cost1_max": 345.24883983591934, "cost1_min": 29.993042758093413, "cost2_max": -11.348657768793117, "outflow_rate_mean": 944.1108710086813, "system_level_velocity_min": 9.181954130955065, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 16.385705737043}, "info": {"num_steps_trained": 4838162, "load_time_ms": 13.189, "grad_time_ms": 8830.558, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875003278255463, "total_loss": 13.641769409179688, "vf_loss": 13.646585464477539, "policy_loss": -0.007427383214235306, "kl": 0.015463842079043388, "vf_explained_var": 0.8764671683311462, "entropy": 1.289217472076416}, "update_time_ms": 7.605, "num_steps_sampled": 4838162, "sample_time_ms": 15997.186}, "episode_len_mean": 686.84, "time_this_iter_s": 22.423288106918335, "pid": 12036, "timesteps_total": 4838162, "hostname": "flow-main", "episodes_total": 2273, "timestamp": 1557226000, "episode_reward_max": 934.5820761232346, "episodes_this_iter": 17, "time_total_s": 3116.6080870628357, "time_since_restore": 3116.6080870628357}
{"timesteps_since_restore": 4876621, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-47-04", "episode_reward_min": 50.91759019138019, "timesteps_this_iter": 38459, "training_iteration": 126, "episode_reward_mean": 800.7743007878963, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 126, "custom_metrics": {"cost2_mean": -19.113610849545303, "outflow_rate_max": 1151.8036363636365, "cost1_mean": 287.2182031527088, "system_level_velocity_mean": 11.405293002456398, "cost2_min": -24.274548513326984, "cost1_max": 345.24883983591934, "cost1_min": 29.993042758093413, "cost2_max": -11.348657768793117, "outflow_rate_mean": 945.8502965871029, "system_level_velocity_min": 9.181954130955065, "outflow_rate_min": 326.0110599951004, "system_level_velocity_max": 16.385705737043}, "info": {"num_steps_trained": 4876621, "load_time_ms": 11.744, "grad_time_ms": 9053.032, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875003278255463, "total_loss": 13.523794174194336, "vf_loss": 13.527203559875488, "policy_loss": -0.0057983105070889, "kl": 0.014155219309031963, "vf_explained_var": 0.8765484690666199, "entropy": 1.2746291160583496}, "update_time_ms": 7.641, "num_steps_sampled": 4876621, "sample_time_ms": 15159.025}, "episode_len_mean": 686.84, "time_this_iter_s": 24.053575038909912, "pid": 12036, "timesteps_total": 4876621, "hostname": "flow-main", "episodes_total": 2292, "timestamp": 1557226024, "episode_reward_max": 934.5820761232346, "episodes_this_iter": 19, "time_total_s": 3140.6616621017456, "time_since_restore": 3140.6616621017456}
{"timesteps_since_restore": 4915398, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca62e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6358>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-47-29", "episode_reward_min": 413.7472666338461, "timesteps_this_iter": 38777, "training_iteration": 127, "episode_reward_mean": 807.4247337921514, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 127, "custom_metrics": {"cost2_mean": -19.128422944239247, "outflow_rate_max": 1151.8036363636365, "cost1_mean": 292.78002561822353, "system_level_velocity_mean": 11.487713952101227, "cost2_min": -25.124811848527994, "cost1_max": 345.24883983591934, "cost1_min": 166.08851364589535, "cost2_max": -13.707717902530653, "outflow_rate_mean": 959.6664575715673, "system_level_velocity_min": 9.181954130955065, "outflow_rate_min": 746.2239879580883, "system_level_velocity_max": 14.219386151624542}, "info": {"num_steps_trained": 4915398, "load_time_ms": 11.527, "grad_time_ms": 9062.559, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 14.887758255004883, "vf_loss": 14.891929626464844, "policy_loss": -0.00684787891805172, "kl": 0.015870055183768272, "vf_explained_var": 0.8571120500564575, "entropy": 1.2749425172805786}, "update_time_ms": 8.112, "num_steps_sampled": 4915398, "sample_time_ms": 14584.238}, "episode_len_mean": 693.34, "time_this_iter_s": 25.04671335220337, "pid": 12036, "timesteps_total": 4915398, "hostname": "flow-main", "episodes_total": 2310, "timestamp": 1557226049, "episode_reward_max": 934.5820761232346, "episodes_this_iter": 18, "time_total_s": 3165.708375453949, "time_since_restore": 3165.708375453949}
{"timesteps_since_restore": 4953941, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3828>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-47-54", "episode_reward_min": 413.7472666338461, "timesteps_this_iter": 38543, "training_iteration": 128, "episode_reward_mean": 814.2329756864913, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 128, "custom_metrics": {"cost2_mean": -18.98167353161892, "outflow_rate_max": 1151.8036363636365, "cost1_mean": 293.98506089499733, "system_level_velocity_mean": 11.48171305935603, "cost2_min": -25.124811848527994, "cost1_max": 344.96298284306346, "cost1_min": 166.08851364589535, "cost2_max": -13.707717902530653, "outflow_rate_mean": 960.3832152322284, "system_level_velocity_min": 9.181954130955065, "outflow_rate_min": 746.2239879580883, "system_level_velocity_max": 13.589870675493936}, "info": {"num_steps_trained": 4953941, "load_time_ms": 11.659, "grad_time_ms": 9034.342, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 16.35258674621582, "vf_loss": 16.35577392578125, "policy_loss": -0.005924669560045004, "kl": 0.01621626503765583, "vf_explained_var": 0.8184123635292053, "entropy": 1.226136326789856}, "update_time_ms": 8.376, "num_steps_sampled": 4953941, "sample_time_ms": 14687.258}, "episode_len_mean": 696.17, "time_this_iter_s": 24.88586926460266, "pid": 12036, "timesteps_total": 4953941, "hostname": "flow-main", "episodes_total": 2326, "timestamp": 1557226074, "episode_reward_max": 935.9510057177471, "episodes_this_iter": 16, "time_total_s": 3190.5942447185516, "time_since_restore": 3190.5942447185516}
{"timesteps_since_restore": 4992686, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca37f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca33c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca34a8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-48-20", "episode_reward_min": 136.8022405276299, "timesteps_this_iter": 38745, "training_iteration": 129, "episode_reward_mean": 813.1869566106626, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 129, "custom_metrics": {"cost2_mean": -18.95494318728806, "outflow_rate_max": 1151.8036363636365, "cost1_mean": 295.5296393304549, "system_level_velocity_mean": 11.615127274077947, "cost2_min": -25.124811848527994, "cost1_max": 344.96298284306346, "cost1_min": 60.06497695027209, "cost2_max": -10.2522625400997, "outflow_rate_mean": 966.5059244108851, "system_level_velocity_min": 9.181954130955065, "outflow_rate_min": 393.7772598697338, "system_level_velocity_max": 14.806814143253874}, "info": {"num_steps_trained": 4992686, "load_time_ms": 11.641, "grad_time_ms": 9023.737, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 18.362712860107422, "vf_loss": 18.366395950317383, "policy_loss": -0.006603837013244629, "kl": 0.017313135787844658, "vf_explained_var": 0.7921989560127258, "entropy": 1.2290593385696411}, "update_time_ms": 8.582, "num_steps_sampled": 4992686, "sample_time_ms": 14828.151}, "episode_len_mean": 693.83, "time_this_iter_s": 25.797531604766846, "pid": 12036, "timesteps_total": 4992686, "hostname": "flow-main", "episodes_total": 2345, "timestamp": 1557226100, "episode_reward_max": 935.9510057177471, "episodes_this_iter": 19, "time_total_s": 3216.3917763233185, "time_since_restore": 3216.3917763233185}
{"timesteps_since_restore": 5031677, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca65f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6e48>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-48-45", "episode_reward_min": 136.8022405276299, "timesteps_this_iter": 38991, "training_iteration": 130, "episode_reward_mean": 822.1091144735572, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 130, "custom_metrics": {"cost2_mean": -18.80620229057383, "outflow_rate_max": 1151.8036363636365, "cost1_mean": 296.7338234076264, "system_level_velocity_mean": 11.66126144080047, "cost2_min": -25.124811848527994, "cost1_max": 344.96298284306346, "cost1_min": 60.06497695027209, "cost2_max": -10.2522625400997, "outflow_rate_mean": 971.1899435277682, "system_level_velocity_min": 9.181954130955065, "outflow_rate_min": 393.7772598697338, "system_level_velocity_max": 14.806814143253874}, "info": {"num_steps_trained": 5031677, "load_time_ms": 11.327, "grad_time_ms": 8947.737, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 13.325225830078125, "vf_loss": 13.332191467285156, "policy_loss": -0.009999784640967846, "kl": 0.017978910356760025, "vf_explained_var": 0.8405956029891968, "entropy": 1.231766700744629}, "update_time_ms": 8.681, "num_steps_sampled": 5031677, "sample_time_ms": 15176.975}, "episode_len_mean": 693.83, "time_this_iter_s": 25.11110520362854, "pid": 12036, "timesteps_total": 5031677, "hostname": "flow-main", "episodes_total": 2360, "timestamp": 1557226125, "episode_reward_max": 935.9510057177471, "episodes_this_iter": 15, "time_total_s": 3241.502881526947, "time_since_restore": 3241.502881526947}
{"timesteps_since_restore": 5070720, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3da0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-49-08", "episode_reward_min": 47.40745450368863, "timesteps_this_iter": 39043, "training_iteration": 131, "episode_reward_mean": 820.8417400751952, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 131, "custom_metrics": {"cost2_mean": -18.57118431915894, "outflow_rate_max": 1142.506503896104, "cost1_mean": 294.19070850849516, "system_level_velocity_mean": 11.735099641160833, "cost2_min": -25.124811848527994, "cost1_max": 344.96298284306346, "cost1_min": 26.045016443624718, "cost2_max": -7.804297305934636, "outflow_rate_mean": 966.6153638839621, "system_level_velocity_min": 9.782184337293845, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 16.857949329077318}, "info": {"num_steps_trained": 5070720, "load_time_ms": 11.67, "grad_time_ms": 8954.991, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875001788139343, "total_loss": 17.310169219970703, "vf_loss": 17.314313888549805, "policy_loss": -0.007314154412597418, "kl": 0.01879016123712063, "vf_explained_var": 0.8237785696983337, "entropy": 1.2269428968429565}, "update_time_ms": 8.713, "num_steps_sampled": 5070720, "sample_time_ms": 15264.289}, "episode_len_mean": 685.0, "time_this_iter_s": 23.608123779296875, "pid": 12036, "timesteps_total": 5070720, "hostname": "flow-main", "episodes_total": 2380, "timestamp": 1557226148, "episode_reward_max": 935.9510057177471, "episodes_this_iter": 20, "time_total_s": 3265.111005306244, "time_since_restore": 3265.111005306244}
{"timesteps_since_restore": 5109192, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3da0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-49-34", "episode_reward_min": 47.40745450368863, "timesteps_this_iter": 38472, "training_iteration": 132, "episode_reward_mean": 822.457631388215, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 132, "custom_metrics": {"cost2_mean": -18.52133442005426, "outflow_rate_max": 1142.506503896104, "cost1_mean": 293.4260797963042, "system_level_velocity_mean": 11.74608425677161, "cost2_min": -23.334531223993288, "cost1_max": 344.96298284306346, "cost1_min": 26.045016443624718, "cost2_max": -7.804297305934636, "outflow_rate_mean": 964.6508778240614, "system_level_velocity_min": 9.697610039848927, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 16.857949329077318}, "info": {"num_steps_trained": 5109192, "load_time_ms": 11.44, "grad_time_ms": 8970.878, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.16875003278255463, "total_loss": 14.527851104736328, "vf_loss": 14.5335111618042, "policy_loss": -0.009119197726249695, "kl": 0.020504044368863106, "vf_explained_var": 0.8470671772956848, "entropy": 1.2397159337997437}, "update_time_ms": 8.581, "num_steps_sampled": 5109192, "sample_time_ms": 15374.545}, "episode_len_mean": 682.08, "time_this_iter_s": 26.021441221237183, "pid": 12036, "timesteps_total": 5109192, "hostname": "flow-main", "episodes_total": 2398, "timestamp": 1557226174, "episode_reward_max": 935.9510057177471, "episodes_this_iter": 18, "time_total_s": 3291.132446527481, "time_since_restore": 3291.132446527481}
{"timesteps_since_restore": 5148098, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0dd8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-49-59", "episode_reward_min": 45.31326264260259, "timesteps_this_iter": 38906, "training_iteration": 133, "episode_reward_mean": 817.5920529618561, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 133, "custom_metrics": {"cost2_mean": -18.494056040119073, "outflow_rate_max": 1142.506503896104, "cost1_mean": 289.83757775478773, "system_level_velocity_mean": 11.746339691848535, "cost2_min": -23.334531223993288, "cost1_max": 337.1874600796989, "cost1_min": 25.329605071722092, "cost2_max": -7.804297305934636, "outflow_rate_mean": 952.41450463102, "system_level_velocity_min": 9.697610039848927, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 16.857949329077318}, "info": {"num_steps_trained": 5148098, "load_time_ms": 11.499, "grad_time_ms": 9018.072, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 12.902352333068848, "vf_loss": 12.907530784606934, "policy_loss": -0.009105999022722244, "kl": 0.015516885556280613, "vf_explained_var": 0.8743695020675659, "entropy": 1.2615406513214111}, "update_time_ms": 8.35, "num_steps_sampled": 5148098, "sample_time_ms": 15265.735}, "episode_len_mean": 675.51, "time_this_iter_s": 24.152488231658936, "pid": 12036, "timesteps_total": 5148098, "hostname": "flow-main", "episodes_total": 2417, "timestamp": 1557226199, "episode_reward_max": 923.4628537649909, "episodes_this_iter": 19, "time_total_s": 3315.28493475914, "time_since_restore": 3315.28493475914}
{"timesteps_since_restore": 5187126, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95828>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-50-22", "episode_reward_min": 45.31326264260259, "timesteps_this_iter": 39028, "training_iteration": 134, "episode_reward_mean": 823.5406730476919, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 134, "custom_metrics": {"cost2_mean": -18.80137153170442, "outflow_rate_max": 1142.506503896104, "cost1_mean": 291.42598068282297, "system_level_velocity_mean": 11.664650678168977, "cost2_min": -23.334531223993288, "cost1_max": 337.1874600796989, "cost1_min": 25.329605071722092, "cost2_max": -7.804297305934636, "outflow_rate_mean": 953.6178126556991, "system_level_velocity_min": 9.44189085597633, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 16.857949329077318}, "info": {"num_steps_trained": 5187126, "load_time_ms": 11.256, "grad_time_ms": 9051.141, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 13.682861328125, "vf_loss": 13.687546730041504, "policy_loss": -0.00825055968016386, "kl": 0.014089659787714481, "vf_explained_var": 0.871465265750885, "entropy": 1.277740240097046}, "update_time_ms": 8.54, "num_steps_sampled": 5187126, "sample_time_ms": 15322.764}, "episode_len_mean": 681.4, "time_this_iter_s": 23.71500277519226, "pid": 12036, "timesteps_total": 5187126, "hostname": "flow-main", "episodes_total": 2434, "timestamp": 1557226222, "episode_reward_max": 923.4628537649909, "episodes_this_iter": 17, "time_total_s": 3338.9999375343323, "time_since_restore": 3338.9999375343323}
{"timesteps_since_restore": 5225281, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc804e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8a208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95ef0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-50-47", "episode_reward_min": 45.31326264260259, "timesteps_this_iter": 38155, "training_iteration": 135, "episode_reward_mean": 821.1247440940977, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 135, "custom_metrics": {"cost2_mean": -18.993747404205315, "outflow_rate_max": 1142.506503896104, "cost1_mean": 291.3785270791744, "system_level_velocity_mean": 11.693449784015082, "cost2_min": -25.157912685806558, "cost1_max": 342.98209432544337, "cost1_min": 25.329605071722092, "cost2_max": -7.804297305934636, "outflow_rate_mean": 953.7791243440108, "system_level_velocity_min": 9.44189085597633, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 16.857949329077318}, "info": {"num_steps_trained": 5225281, "load_time_ms": 11.307, "grad_time_ms": 9036.961, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 13.045080184936523, "vf_loss": 13.048200607299805, "policy_loss": -0.00689289066940546, "kl": 0.014903532341122627, "vf_explained_var": 0.849794864654541, "entropy": 1.2585580348968506}, "update_time_ms": 8.812, "num_steps_sampled": 5225281, "sample_time_ms": 15589.677}, "episode_len_mean": 679.69, "time_this_iter_s": 24.952006578445435, "pid": 12036, "timesteps_total": 5225281, "hostname": "flow-main", "episodes_total": 2450, "timestamp": 1557226247, "episode_reward_max": 920.7977372392388, "episodes_this_iter": 16, "time_total_s": 3363.9519441127777, "time_since_restore": 3363.9519441127777}
{"timesteps_since_restore": 5263542, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3780>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-51-13", "episode_reward_min": 42.63866693253074, "timesteps_this_iter": 38261, "training_iteration": 136, "episode_reward_mean": 806.2815731753441, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 136, "custom_metrics": {"cost2_mean": -19.010161341596024, "outflow_rate_max": 1142.461994805195, "cost1_mean": 288.7683310046093, "system_level_velocity_mean": 11.883245839824562, "cost2_min": -25.248797301228237, "cost1_max": 350.59312649258675, "cost1_min": 25.329605071722092, "cost2_max": -7.804297305934636, "outflow_rate_mean": 951.5705511825993, "system_level_velocity_min": 9.44189085597633, "outflow_rate_min": 327.3926328531922, "system_level_velocity_max": 17.362978737685975}, "info": {"num_steps_trained": 5263542, "load_time_ms": 11.31, "grad_time_ms": 8915.215, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.037168502807617, "vf_loss": 20.041175842285156, "policy_loss": -0.007310441695153713, "kl": 0.013056609779596329, "vf_explained_var": 0.8002873659133911, "entropy": 1.2558622360229492}, "update_time_ms": 8.819, "num_steps_sampled": 5263542, "sample_time_ms": 15859.774}, "episode_len_mean": 667.54, "time_this_iter_s": 25.524248838424683, "pid": 12036, "timesteps_total": 5263542, "hostname": "flow-main", "episodes_total": 2472, "timestamp": 1557226273, "episode_reward_max": 913.0716679366509, "episodes_this_iter": 22, "time_total_s": 3389.4761929512024, "time_since_restore": 3389.4761929512024}
{"timesteps_since_restore": 5300713, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca34a8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-51-38", "episode_reward_min": 42.63866693253074, "timesteps_this_iter": 37171, "training_iteration": 137, "episode_reward_mean": 816.5572655025746, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 137, "custom_metrics": {"cost2_mean": -19.322148874762703, "outflow_rate_max": 1142.461994805195, "cost1_mean": 295.135934209607, "system_level_velocity_mean": 11.972226159210047, "cost2_min": -25.248797301228237, "cost1_max": 350.59312649258675, "cost1_min": 25.329605071722092, "cost2_max": -8.909912501402678, "outflow_rate_mean": 969.0649322290029, "system_level_velocity_min": 9.44189085597633, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.362978737685975}, "info": {"num_steps_trained": 5300713, "load_time_ms": 11.537, "grad_time_ms": 8932.299, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.67966651916504, "vf_loss": 19.683923721313477, "policy_loss": -0.0078668761998415, "kl": 0.014257753267884254, "vf_explained_var": 0.7590439915657043, "entropy": 1.2268017530441284}, "update_time_ms": 8.67, "num_steps_sampled": 5300713, "sample_time_ms": 15797.659}, "episode_len_mean": 675.97, "time_this_iter_s": 24.624388217926025, "pid": 12036, "timesteps_total": 5300713, "hostname": "flow-main", "episodes_total": 2490, "timestamp": 1557226298, "episode_reward_max": 913.0716679366509, "episodes_this_iter": 18, "time_total_s": 3414.1005811691284, "time_since_restore": 3414.1005811691284}
{"timesteps_since_restore": 5337876, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6278>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-52-02", "episode_reward_min": 42.63866693253074, "timesteps_this_iter": 37163, "training_iteration": 138, "episode_reward_mean": 808.1323486501079, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 138, "custom_metrics": {"cost2_mean": -19.414001378322514, "outflow_rate_max": 1142.461994805195, "cost1_mean": 296.3659516715896, "system_level_velocity_mean": 12.161391904104393, "cost2_min": -25.50528165969626, "cost1_max": 350.59312649258675, "cost1_min": 25.329605071722092, "cost2_max": -8.909912501402678, "outflow_rate_mean": 976.785425746158, "system_level_velocity_min": 9.44189085597633, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.362978737685975}, "info": {"num_steps_trained": 5337876, "load_time_ms": 11.163, "grad_time_ms": 8982.493, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 24.50648307800293, "vf_loss": 24.509769439697266, "policy_loss": -0.006691093556582928, "kl": 0.01344266813248396, "vf_explained_var": 0.7194470763206482, "entropy": 1.23527193069458}, "update_time_ms": 8.606, "num_steps_sampled": 5337876, "sample_time_ms": 15746.174}, "episode_len_mean": 671.36, "time_this_iter_s": 24.859052181243896, "pid": 12036, "timesteps_total": 5337876, "hostname": "flow-main", "episodes_total": 2512, "timestamp": 1557226322, "episode_reward_max": 913.0716679366509, "episodes_this_iter": 22, "time_total_s": 3438.9596333503723, "time_since_restore": 3438.9596333503723}
{"timesteps_since_restore": 5375711, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb30b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3438>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-52-28", "episode_reward_min": 42.63866693253074, "timesteps_this_iter": 37835, "training_iteration": 139, "episode_reward_mean": 810.1633815168093, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 139, "custom_metrics": {"cost2_mean": -19.1980353139033, "outflow_rate_max": 1142.461994805195, "cost1_mean": 299.64545906638136, "system_level_velocity_mean": 12.265515951744815, "cost2_min": -25.50528165969626, "cost1_max": 350.59312649258675, "cost1_min": 25.930231139817568, "cost2_max": -11.76288182194692, "outflow_rate_mean": 987.1091802228979, "system_level_velocity_min": 9.44189085597633, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.362978737685975}, "info": {"num_steps_trained": 5375711, "load_time_ms": 10.924, "grad_time_ms": 8969.887, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.562774658203125, "vf_loss": 18.567846298217773, "policy_loss": -0.009003964252769947, "kl": 0.015524615533649921, "vf_explained_var": 0.7809141874313354, "entropy": 1.2252495288848877}, "update_time_ms": 8.61, "num_steps_sampled": 5375711, "sample_time_ms": 15706.859}, "episode_len_mean": 673.69, "time_this_iter_s": 25.2739737033844, "pid": 12036, "timesteps_total": 5375711, "hostname": "flow-main", "episodes_total": 2530, "timestamp": 1557226348, "episode_reward_max": 913.0716679366509, "episodes_this_iter": 18, "time_total_s": 3464.2336070537567, "time_since_restore": 3464.2336070537567}
{"timesteps_since_restore": 5413049, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb34a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0f98>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-52-53", "episode_reward_min": 42.63866693253074, "timesteps_this_iter": 37338, "training_iteration": 140, "episode_reward_mean": 791.2593432141753, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 140, "custom_metrics": {"cost2_mean": -18.93164907745787, "outflow_rate_max": 1142.461994805195, "cost1_mean": 294.83309692524546, "system_level_velocity_mean": 12.458112190552683, "cost2_min": -25.50528165969626, "cost1_max": 350.59312649258675, "cost1_min": 25.930231139817568, "cost2_max": -9.8583613070759, "outflow_rate_mean": 981.4475579999771, "system_level_velocity_min": 10.159672810787685, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.416005438811492}, "info": {"num_steps_trained": 5413049, "load_time_ms": 10.891, "grad_time_ms": 8957.904, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 20.339920043945312, "vf_loss": 20.344314575195312, "policy_loss": -0.007932559587061405, "kl": 0.013978710398077965, "vf_explained_var": 0.7629678249359131, "entropy": 1.2269055843353271}, "update_time_ms": 8.65, "num_steps_sampled": 5413049, "sample_time_ms": 15696.185}, "episode_len_mean": 657.76, "time_this_iter_s": 24.895140171051025, "pid": 12036, "timesteps_total": 5413049, "hostname": "flow-main", "episodes_total": 2550, "timestamp": 1557226373, "episode_reward_max": 913.0716679366509, "episodes_this_iter": 20, "time_total_s": 3489.1287472248077, "time_since_restore": 3489.1287472248077}
{"timesteps_since_restore": 5451009, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb36d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3240>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-53-19", "episode_reward_min": 46.03153281602136, "timesteps_this_iter": 37960, "training_iteration": 141, "episode_reward_mean": 803.0482147366158, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 141, "custom_metrics": {"cost2_mean": -19.284913804288646, "outflow_rate_max": 1192.7937662337663, "cost1_mean": 301.23962657481843, "system_level_velocity_mean": 12.450083762902521, "cost2_min": -26.608051976627465, "cost1_max": 357.70176625337285, "cost1_min": 25.970100976373278, "cost2_max": -9.8583613070759, "outflow_rate_mean": 994.5051227977523, "system_level_velocity_min": 10.316845767856211, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.416005438811492}, "info": {"num_steps_trained": 5451009, "load_time_ms": 10.605, "grad_time_ms": 8978.196, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.391347885131836, "vf_loss": 19.3946533203125, "policy_loss": -0.007469065487384796, "kl": 0.016446825116872787, "vf_explained_var": 0.7798833250999451, "entropy": 1.2244302034378052}, "update_time_ms": 8.982, "num_steps_sampled": 5451009, "sample_time_ms": 15960.885}, "episode_len_mean": 669.91, "time_this_iter_s": 26.46493935585022, "pid": 12036, "timesteps_total": 5451009, "hostname": "flow-main", "episodes_total": 2567, "timestamp": 1557226399, "episode_reward_max": 934.7868392738011, "episodes_this_iter": 17, "time_total_s": 3515.593686580658, "time_since_restore": 3515.593686580658}
{"timesteps_since_restore": 5488864, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ff60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8f9e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-53-45", "episode_reward_min": 46.03153281602136, "timesteps_this_iter": 37855, "training_iteration": 142, "episode_reward_mean": 798.6628218499053, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 142, "custom_metrics": {"cost2_mean": -19.18493839157153, "outflow_rate_max": 1192.7937662337663, "cost1_mean": 300.30125831147984, "system_level_velocity_mean": 12.489737147070633, "cost2_min": -26.608051976627465, "cost1_max": 357.70176625337285, "cost1_min": 25.970100976373278, "cost2_max": -9.8583613070759, "outflow_rate_mean": 992.367139220705, "system_level_velocity_min": 10.316845767856211, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.416005438811492}, "info": {"num_steps_trained": 5488864, "load_time_ms": 10.496, "grad_time_ms": 8961.931, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 15.511394500732422, "vf_loss": 15.516648292541504, "policy_loss": -0.009068610146641731, "kl": 0.015070979483425617, "vf_explained_var": 0.8368767499923706, "entropy": 1.2659496068954468}, "update_time_ms": 8.907, "num_steps_sampled": 5488864, "sample_time_ms": 15970.045}, "episode_len_mean": 666.82, "time_this_iter_s": 25.951325178146362, "pid": 12036, "timesteps_total": 5488864, "hostname": "flow-main", "episodes_total": 2582, "timestamp": 1557226425, "episode_reward_max": 934.7868392738011, "episodes_this_iter": 15, "time_total_s": 3541.5450117588043, "time_since_restore": 3541.5450117588043}
{"timesteps_since_restore": 5526647, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca36a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170940>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-54-12", "episode_reward_min": 46.03153281602136, "timesteps_this_iter": 37783, "training_iteration": 143, "episode_reward_mean": 805.0566845534448, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 143, "custom_metrics": {"cost2_mean": -19.290238828575724, "outflow_rate_max": 1192.7937662337663, "cost1_mean": 302.72498216435235, "system_level_velocity_mean": 12.442022376814748, "cost2_min": -26.608051976627465, "cost1_max": 357.70176625337285, "cost1_min": 25.970100976373278, "cost2_max": -9.8583613070759, "outflow_rate_mean": 993.1374527304838, "system_level_velocity_min": 10.370411000721198, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.416005438811492}, "info": {"num_steps_trained": 5526647, "load_time_ms": 10.012, "grad_time_ms": 8921.937, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.022430419921875, "vf_loss": 17.027263641357422, "policy_loss": -0.00865721981972456, "kl": 0.015102334320545197, "vf_explained_var": 0.8179163932800293, "entropy": 1.2492979764938354}, "update_time_ms": 9.299, "num_steps_sampled": 5526647, "sample_time_ms": 16285.255}, "episode_len_mean": 673.93, "time_this_iter_s": 26.877406120300293, "pid": 12036, "timesteps_total": 5526647, "hostname": "flow-main", "episodes_total": 2603, "timestamp": 1557226452, "episode_reward_max": 934.7868392738011, "episodes_this_iter": 21, "time_total_s": 3568.4224178791046, "time_since_restore": 3568.4224178791046}
{"timesteps_since_restore": 5564368, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb36a0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-54-37", "episode_reward_min": 46.03153281602136, "timesteps_this_iter": 37721, "training_iteration": 144, "episode_reward_mean": 795.2433172329748, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 144, "custom_metrics": {"cost2_mean": -19.502384934100984, "outflow_rate_max": 1192.7937662337663, "cost1_mean": 299.723446340348, "system_level_velocity_mean": 12.36857034210593, "cost2_min": -27.181639875295964, "cost1_max": 357.70176625337285, "cost1_min": 25.970100976373278, "cost2_max": -9.8583613070759, "outflow_rate_mean": 985.2354631084434, "system_level_velocity_min": 10.370411000721198, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.416005438811492}, "info": {"num_steps_trained": 5564368, "load_time_ms": 9.923, "grad_time_ms": 8841.383, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 19.98359489440918, "vf_loss": 19.98862075805664, "policy_loss": -0.008614015765488148, "kl": 0.014176245778799057, "vf_explained_var": 0.8060716986656189, "entropy": 1.2638213634490967}, "update_time_ms": 9.335, "num_steps_sampled": 5564368, "sample_time_ms": 16528.037}, "episode_len_mean": 670.84, "time_this_iter_s": 25.34820818901062, "pid": 12036, "timesteps_total": 5564368, "hostname": "flow-main", "episodes_total": 2622, "timestamp": 1557226477, "episode_reward_max": 934.7868392738011, "episodes_this_iter": 19, "time_total_s": 3593.7706260681152, "time_since_restore": 3593.7706260681152}
{"timesteps_since_restore": 5601731, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb30f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3b70>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-55-03", "episode_reward_min": 46.03153281602136, "timesteps_this_iter": 37363, "training_iteration": 145, "episode_reward_mean": 805.089687723653, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 145, "custom_metrics": {"cost2_mean": -19.497375304481796, "outflow_rate_max": 1192.7937662337663, "cost1_mean": 302.66257927007854, "system_level_velocity_mean": 12.349033942156304, "cost2_min": -27.181639875295964, "cost1_max": 357.70176625337285, "cost1_min": 25.970100976373278, "cost2_max": -9.8583613070759, "outflow_rate_mean": 990.7946133597061, "system_level_velocity_min": 10.370411000721198, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.416005438811492}, "info": {"num_steps_trained": 5601731, "load_time_ms": 9.839, "grad_time_ms": 8768.045, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.506864547729492, "vf_loss": 18.51071548461914, "policy_loss": -0.0077309985645115376, "kl": 0.015320352278649807, "vf_explained_var": 0.7694708704948425, "entropy": 1.2717629671096802}, "update_time_ms": 9.263, "num_steps_sampled": 5601731, "sample_time_ms": 16634.566}, "episode_len_mean": 678.37, "time_this_iter_s": 25.27612328529358, "pid": 12036, "timesteps_total": 5601731, "hostname": "flow-main", "episodes_total": 2640, "timestamp": 1557226503, "episode_reward_max": 934.7868392738011, "episodes_this_iter": 18, "time_total_s": 3619.046749353409, "time_since_restore": 3619.046749353409}
{"timesteps_since_restore": 5639645, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdbe0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6208>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-55-28", "episode_reward_min": 479.6025275794136, "timesteps_this_iter": 37914, "training_iteration": 146, "episode_reward_mean": 815.7036361637095, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 146, "custom_metrics": {"cost2_mean": -19.7720719627286, "outflow_rate_max": 1192.7937662337663, "cost1_mean": 306.1944753654493, "system_level_velocity_mean": 12.150347407005206, "cost2_min": -27.181639875295964, "cost1_max": 357.70176625337285, "cost1_min": 187.0089681914331, "cost2_max": -13.912038631913935, "outflow_rate_mean": 990.6065050426705, "system_level_velocity_min": 9.38920282444952, "outflow_rate_min": 574.5133714285714, "system_level_velocity_max": 14.22560197262277}, "info": {"num_steps_trained": 5639645, "load_time_ms": 10.139, "grad_time_ms": 8709.073, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 14.762378692626953, "vf_loss": 14.767216682434082, "policy_loss": -0.008594456128776073, "kl": 0.014842980541288853, "vf_explained_var": 0.8657649159431458, "entropy": 1.2904938459396362}, "update_time_ms": 9.234, "num_steps_sampled": 5639645, "sample_time_ms": 16712.921}, "episode_len_mean": 692.72, "time_this_iter_s": 25.72498655319214, "pid": 12036, "timesteps_total": 5639645, "hostname": "flow-main", "episodes_total": 2657, "timestamp": 1557226528, "episode_reward_max": 929.2143855160228, "episodes_this_iter": 17, "time_total_s": 3644.771735906601, "time_since_restore": 3644.771735906601}
{"timesteps_since_restore": 5677372, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0cc0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-55-54", "episode_reward_min": 45.027606877716764, "timesteps_this_iter": 37727, "training_iteration": 147, "episode_reward_mean": 813.2375406947125, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 147, "custom_metrics": {"cost2_mean": -19.784670399530963, "outflow_rate_max": 1148.1024623376625, "cost1_mean": 306.0232226012834, "system_level_velocity_mean": 12.241679411101023, "cost2_min": -27.181639875295964, "cost1_max": 349.7854326269671, "cost1_min": 24.770689989650865, "cost2_max": -7.522955169308277, "outflow_rate_mean": 988.2414707523261, "system_level_velocity_min": 9.38920282444952, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 16.579910260404667}, "info": {"num_steps_trained": 5677372, "load_time_ms": 9.941, "grad_time_ms": 8655.484, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.36092185974121, "vf_loss": 17.36646270751953, "policy_loss": -0.009424366988241673, "kl": 0.01533005852252245, "vf_explained_var": 0.8062555193901062, "entropy": 1.250961422920227}, "update_time_ms": 9.215, "num_steps_sampled": 5677372, "sample_time_ms": 16818.256}, "episode_len_mean": 689.24, "time_this_iter_s": 25.106818437576294, "pid": 12036, "timesteps_total": 5677372, "hostname": "flow-main", "episodes_total": 2676, "timestamp": 1557226554, "episode_reward_max": 929.2143855160228, "episodes_this_iter": 19, "time_total_s": 3669.8785543441772, "time_since_restore": 3669.8785543441772}
{"timesteps_since_restore": 5715424, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6128>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-56-19", "episode_reward_min": 45.027606877716764, "timesteps_this_iter": 38052, "training_iteration": 148, "episode_reward_mean": 797.1714889605473, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 148, "custom_metrics": {"cost2_mean": -19.650731630787288, "outflow_rate_max": 1123.8288675324675, "cost1_mean": 300.08408936076864, "system_level_velocity_mean": 12.281200638484197, "cost2_min": -27.181639875295964, "cost1_max": 349.04353131128846, "cost1_min": 24.770689989650865, "cost2_max": -7.522955169308277, "outflow_rate_mean": 971.2086496060182, "system_level_velocity_min": 9.38920282444952, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 17.39650257619056}, "info": {"num_steps_trained": 5715424, "load_time_ms": 10.361, "grad_time_ms": 8659.176, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.002220153808594, "vf_loss": 17.005346298217773, "policy_loss": -0.006783265620470047, "kl": 0.01444638054817915, "vf_explained_var": 0.8285741209983826, "entropy": 1.2701574563980103}, "update_time_ms": 8.937, "num_steps_sampled": 5715424, "sample_time_ms": 16907.949}, "episode_len_mean": 677.82, "time_this_iter_s": 25.77988600730896, "pid": 12036, "timesteps_total": 5715424, "hostname": "flow-main", "episodes_total": 2696, "timestamp": 1557226579, "episode_reward_max": 929.2143855160228, "episodes_this_iter": 20, "time_total_s": 3695.658440351486, "time_since_restore": 3695.658440351486}
{"timesteps_since_restore": 5753804, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-56-44", "episode_reward_min": 45.027606877716764, "timesteps_this_iter": 38380, "training_iteration": 149, "episode_reward_mean": 796.7543385964617, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 149, "custom_metrics": {"cost2_mean": -19.782562883811487, "outflow_rate_max": 1123.8288675324675, "cost1_mean": 300.0017916220924, "system_level_velocity_mean": 12.366447933163037, "cost2_min": -27.559457243243706, "cost1_max": 349.04353131128846, "cost1_min": 24.770689989650865, "cost2_max": -7.522955169308277, "outflow_rate_mean": 975.1869219929123, "system_level_velocity_min": 9.38920282444952, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 17.39650257619056}, "info": {"num_steps_trained": 5753804, "load_time_ms": 10.587, "grad_time_ms": 8712.85, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 15.540267944335938, "vf_loss": 15.54300594329834, "policy_loss": -0.006431911140680313, "kl": 0.014596020802855492, "vf_explained_var": 0.8335413932800293, "entropy": 1.2339589595794678}, "update_time_ms": 8.72, "num_steps_sampled": 5753804, "sample_time_ms": 16767.825}, "episode_len_mean": 673.86, "time_this_iter_s": 24.39007806777954, "pid": 12036, "timesteps_total": 5753804, "hostname": "flow-main", "episodes_total": 2713, "timestamp": 1557226604, "episode_reward_max": 930.3983067197548, "episodes_this_iter": 17, "time_total_s": 3720.0485184192657, "time_since_restore": 3720.0485184192657}
{"timesteps_since_restore": 5791237, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb02e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0630>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-57-09", "episode_reward_min": 45.027606877716764, "timesteps_this_iter": 37433, "training_iteration": 150, "episode_reward_mean": 807.6681435857818, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 150, "custom_metrics": {"cost2_mean": -19.957353973351776, "outflow_rate_max": 1153.501677922078, "cost1_mean": 304.28233235117114, "system_level_velocity_mean": 12.49759765255689, "cost2_min": -27.559457243243706, "cost1_max": 349.04353131128846, "cost1_min": 24.770689989650865, "cost2_max": -7.522955169308277, "outflow_rate_mean": 985.5642749835839, "system_level_velocity_min": 9.38920282444952, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 17.39650257619056}, "info": {"num_steps_trained": 5791237, "load_time_ms": 10.809, "grad_time_ms": 8843.175, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.54502296447754, "vf_loss": 20.54871940612793, "policy_loss": -0.007772945333272219, "kl": 0.016104457899928093, "vf_explained_var": 0.7621133923530579, "entropy": 1.2218797206878662}, "update_time_ms": 8.722, "num_steps_sampled": 5791237, "sample_time_ms": 16633.024}, "episode_len_mean": 676.95, "time_this_iter_s": 24.869191884994507, "pid": 12036, "timesteps_total": 5791237, "hostname": "flow-main", "episodes_total": 2733, "timestamp": 1557226629, "episode_reward_max": 930.3983067197548, "episodes_this_iter": 20, "time_total_s": 3744.9177103042603, "time_since_restore": 3744.9177103042603}
{"timesteps_since_restore": 5828576, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb39b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3c50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-57-35", "episode_reward_min": 45.027606877716764, "timesteps_this_iter": 37339, "training_iteration": 151, "episode_reward_mean": 816.2966695287256, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 151, "custom_metrics": {"cost2_mean": -20.338820052487176, "outflow_rate_max": 1153.501677922078, "cost1_mean": 307.61684048057003, "system_level_velocity_mean": 12.649818380669469, "cost2_min": -27.559457243243706, "cost1_max": 347.5256427739018, "cost1_min": 24.770689989650865, "cost2_max": -7.522955169308277, "outflow_rate_mean": 996.5578203941737, "system_level_velocity_min": 10.68826718634161, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 17.39650257619056}, "info": {"num_steps_trained": 5828576, "load_time_ms": 11.081, "grad_time_ms": 8919.696, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.45166778564453, "vf_loss": 17.452917098999023, "policy_loss": -0.005171317607164383, "kl": 0.015493123792111874, "vf_explained_var": 0.8054471015930176, "entropy": 1.2201811075210571}, "update_time_ms": 8.534, "num_steps_sampled": 5828576, "sample_time_ms": 16524.836}, "episode_len_mean": 676.95, "time_this_iter_s": 26.16545271873474, "pid": 12036, "timesteps_total": 5828576, "hostname": "flow-main", "episodes_total": 2752, "timestamp": 1557226655, "episode_reward_max": 930.3983067197548, "episodes_this_iter": 19, "time_total_s": 3771.083163022995, "time_since_restore": 3771.083163022995}
{"timesteps_since_restore": 5866687, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcfdbe0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95ac8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-57-59", "episode_reward_min": 46.247088255679955, "timesteps_this_iter": 38111, "training_iteration": 152, "episode_reward_mean": 829.0637844097917, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 152, "custom_metrics": {"cost2_mean": -20.791812638297902, "outflow_rate_max": 1153.501677922078, "cost1_mean": 309.500677587993, "system_level_velocity_mean": 12.616409891023189, "cost2_min": -27.868769885123175, "cost1_max": 348.07422908420995, "cost1_min": 25.964188249203207, "cost2_max": -9.468813737877419, "outflow_rate_mean": 1001.7787008838006, "system_level_velocity_min": 10.68826718634161, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.39650257619056}, "info": {"num_steps_trained": 5866687, "load_time_ms": 11.195, "grad_time_ms": 8951.931, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.556764602661133, "vf_loss": 16.559682846069336, "policy_loss": -0.006506624631583691, "kl": 0.014184351079165936, "vf_explained_var": 0.8239818215370178, "entropy": 1.1946734189987183}, "update_time_ms": 8.709, "num_steps_sampled": 5866687, "sample_time_ms": 16294.914}, "episode_len_mean": 680.04, "time_this_iter_s": 24.00851607322693, "pid": 12036, "timesteps_total": 5866687, "hostname": "flow-main", "episodes_total": 2770, "timestamp": 1557226679, "episode_reward_max": 941.7032519577964, "episodes_this_iter": 18, "time_total_s": 3795.091679096222, "time_since_restore": 3795.091679096222}
{"timesteps_since_restore": 5905533, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91cf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc913c8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-58-25", "episode_reward_min": 127.55973134552085, "timesteps_this_iter": 38846, "training_iteration": 153, "episode_reward_mean": 830.8905688748721, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 153, "custom_metrics": {"cost2_mean": -21.541676628192572, "outflow_rate_max": 1153.501677922078, "cost1_mean": 311.2444594069492, "system_level_velocity_mean": 12.648371812657722, "cost2_min": -32.570405231587756, "cost1_max": 348.07422908420995, "cost1_min": 56.62718979794456, "cost2_max": -10.681520004878852, "outflow_rate_mean": 1008.7925486196083, "system_level_velocity_min": 10.465903841297512, "outflow_rate_min": 423.37006181620706, "system_level_velocity_max": 15.927415915383916}, "info": {"num_steps_trained": 5905533, "load_time_ms": 11.503, "grad_time_ms": 9034.977, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 15.974258422851562, "vf_loss": 15.978301048278809, "policy_loss": -0.008145201951265335, "kl": 0.016202082857489586, "vf_explained_var": 0.8401128053665161, "entropy": 1.2673906087875366}, "update_time_ms": 8.493, "num_steps_sampled": 5905533, "sample_time_ms": 16165.549}, "episode_len_mean": 680.74, "time_this_iter_s": 26.41223645210266, "pid": 12036, "timesteps_total": 5905533, "hostname": "flow-main", "episodes_total": 2788, "timestamp": 1557226705, "episode_reward_max": 941.7032519577964, "episodes_this_iter": 18, "time_total_s": 3821.5039155483246, "time_since_restore": 3821.5039155483246}
{"timesteps_since_restore": 5943009, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca68d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6438>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-58-54", "episode_reward_min": 132.37600143196303, "timesteps_this_iter": 37476, "training_iteration": 154, "episode_reward_mean": 827.2457020159342, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 154, "custom_metrics": {"cost2_mean": -21.78682824215071, "outflow_rate_max": 1157.427522077922, "cost1_mean": 310.0915297022391, "system_level_velocity_mean": 12.705465460910572, "cost2_min": -32.570405231587756, "cost1_max": 352.9777419952776, "cost1_min": 63.19905085636938, "cost2_max": -12.877384244168038, "outflow_rate_mean": 1009.1160615025458, "system_level_velocity_min": 10.271390478273936, "outflow_rate_min": 437.22290078191156, "system_level_velocity_max": 16.177516877346964}, "info": {"num_steps_trained": 5943009, "load_time_ms": 11.523, "grad_time_ms": 9136.387, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.314332962036133, "vf_loss": 18.316253662109375, "policy_loss": -0.005704121198505163, "kl": 0.014944822527468204, "vf_explained_var": 0.7700424194335938, "entropy": 1.229056715965271}, "update_time_ms": 8.506, "num_steps_sampled": 5943009, "sample_time_ms": 16347.907}, "episode_len_mean": 676.24, "time_this_iter_s": 28.18134331703186, "pid": 12036, "timesteps_total": 5943009, "hostname": "flow-main", "episodes_total": 2806, "timestamp": 1557226734, "episode_reward_max": 941.7032519577964, "episodes_this_iter": 18, "time_total_s": 3849.6852588653564, "time_since_restore": 3849.6852588653564}
{"timesteps_since_restore": 5981237, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb35c0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-59-20", "episode_reward_min": 132.37600143196303, "timesteps_this_iter": 38228, "training_iteration": 155, "episode_reward_mean": 826.0701708900494, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 155, "custom_metrics": {"cost2_mean": -22.19145901876949, "outflow_rate_max": 1157.427522077922, "cost1_mean": 309.56781029204546, "system_level_velocity_mean": 12.680388931650647, "cost2_min": -34.637521722835196, "cost1_max": 352.9777419952776, "cost1_min": 63.19905085636938, "cost2_max": -12.877384244168038, "outflow_rate_mean": 1008.221455850966, "system_level_velocity_min": 10.271390478273936, "outflow_rate_min": 437.22290078191156, "system_level_velocity_max": 16.177516877346964}, "info": {"num_steps_trained": 5981237, "load_time_ms": 11.452, "grad_time_ms": 9243.973, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.034536361694336, "vf_loss": 18.0383358001709, "policy_loss": -0.007591085974127054, "kl": 0.01497979462146759, "vf_explained_var": 0.7918663024902344, "entropy": 1.2437646389007568}, "update_time_ms": 8.546, "num_steps_sampled": 5981237, "sample_time_ms": 16383.887}, "episode_len_mean": 675.51, "time_this_iter_s": 26.741029500961304, "pid": 12036, "timesteps_total": 5981237, "hostname": "flow-main", "episodes_total": 2826, "timestamp": 1557226760, "episode_reward_max": 941.7032519577964, "episodes_this_iter": 20, "time_total_s": 3876.4262883663177, "time_since_restore": 3876.4262883663177}
{"timesteps_since_restore": 6019003, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb08d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb07f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0c88>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_10-59-46", "episode_reward_min": 132.37600143196303, "timesteps_this_iter": 37766, "training_iteration": 156, "episode_reward_mean": 818.2879912009879, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 156, "custom_metrics": {"cost2_mean": -22.342138190344148, "outflow_rate_max": 1157.427522077922, "cost1_mean": 307.11118364009855, "system_level_velocity_mean": 12.65016491496981, "cost2_min": -34.637521722835196, "cost1_max": 352.9777419952776, "cost1_min": 63.19905085636938, "cost2_max": -12.877384244168038, "outflow_rate_mean": 999.9407612233051, "system_level_velocity_min": 10.271390478273936, "outflow_rate_min": 437.22290078191156, "system_level_velocity_max": 16.177516877346964}, "info": {"num_steps_trained": 6019003, "load_time_ms": 11.54, "grad_time_ms": 9232.874, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 15.707049369812012, "vf_loss": 15.709467887878418, "policy_loss": -0.005946032702922821, "kl": 0.013938703574240208, "vf_explained_var": 0.8311412930488586, "entropy": 1.220707893371582}, "update_time_ms": 8.924, "num_steps_sampled": 6019003, "sample_time_ms": 16330.975}, "episode_len_mean": 672.05, "time_this_iter_s": 25.109196662902832, "pid": 12036, "timesteps_total": 6019003, "hostname": "flow-main", "episodes_total": 2844, "timestamp": 1557226786, "episode_reward_max": 941.7032519577964, "episodes_this_iter": 18, "time_total_s": 3901.5354850292206, "time_since_restore": 3901.5354850292206}
{"timesteps_since_restore": 6056377, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca68d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6da0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-00-11", "episode_reward_min": 132.37600143196303, "timesteps_this_iter": 37374, "training_iteration": 157, "episode_reward_mean": 815.2153117696487, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 157, "custom_metrics": {"cost2_mean": -22.000197240273803, "outflow_rate_max": 1157.427522077922, "cost1_mean": 305.68324730090006, "system_level_velocity_mean": 12.618536634399218, "cost2_min": -34.637521722835196, "cost1_max": 352.9777419952776, "cost1_min": 63.19905085636938, "cost2_max": -12.877384244168038, "outflow_rate_mean": 1000.0093369515769, "system_level_velocity_min": 9.638604802717644, "outflow_rate_min": 437.22290078191156, "system_level_velocity_max": 16.177516877346964}, "info": {"num_steps_trained": 6056377, "load_time_ms": 11.63, "grad_time_ms": 9226.155, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.155527114868164, "vf_loss": 21.158323287963867, "policy_loss": -0.006185475271195173, "kl": 0.013386477716267109, "vf_explained_var": 0.7432347536087036, "entropy": 1.2119166851043701}, "update_time_ms": 9.016, "num_steps_sampled": 6056377, "sample_time_ms": 16366.141}, "episode_len_mean": 671.94, "time_this_iter_s": 25.388547658920288, "pid": 12036, "timesteps_total": 6056377, "hostname": "flow-main", "episodes_total": 2864, "timestamp": 1557226811, "episode_reward_max": 927.5984804864621, "episodes_this_iter": 20, "time_total_s": 3926.924032688141, "time_since_restore": 3926.924032688141}
{"timesteps_since_restore": 6093906, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3320>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-00-37", "episode_reward_min": 132.37600143196303, "timesteps_this_iter": 37529, "training_iteration": 158, "episode_reward_mean": 819.1055063299452, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 158, "custom_metrics": {"cost2_mean": -21.236541786044004, "outflow_rate_max": 1157.427522077922, "cost1_mean": 308.26616442146354, "system_level_velocity_mean": 12.68405346165053, "cost2_min": -34.637521722835196, "cost1_max": 352.9777419952776, "cost1_min": 66.33214839993227, "cost2_max": -15.056289807452565, "outflow_rate_mean": 1008.0775814356134, "system_level_velocity_min": 9.638604802717644, "outflow_rate_min": 437.22290078191156, "system_level_velocity_max": 16.177516877346964}, "info": {"num_steps_trained": 6093906, "load_time_ms": 11.683, "grad_time_ms": 9167.146, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 23.31468391418457, "vf_loss": 23.31932258605957, "policy_loss": -0.008401497267186642, "kl": 0.014869929291307926, "vf_explained_var": 0.6999048590660095, "entropy": 1.2273591756820679}, "update_time_ms": 9.041, "num_steps_sampled": 6093906, "sample_time_ms": 16429.179}, "episode_len_mean": 675.74, "time_this_iter_s": 25.827728271484375, "pid": 12036, "timesteps_total": 6093906, "hostname": "flow-main", "episodes_total": 2885, "timestamp": 1557226837, "episode_reward_max": 927.5984804864621, "episodes_this_iter": 21, "time_total_s": 3952.7517609596252, "time_since_restore": 3952.7517609596252}
{"timesteps_since_restore": 6131770, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3f28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3780>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-01-02", "episode_reward_min": 294.84695368333246, "timesteps_this_iter": 37864, "training_iteration": 159, "episode_reward_mean": 834.5067778333334, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 159, "custom_metrics": {"cost2_mean": -20.868238282177764, "outflow_rate_max": 1152.4738545454545, "cost1_mean": 312.96419951089257, "system_level_velocity_mean": 12.656186606736433, "cost2_min": -34.637521722835196, "cost1_max": 349.7198752658421, "cost1_min": 130.58803309845374, "cost2_max": -15.50155003187913, "outflow_rate_mean": 1018.5297829514969, "system_level_velocity_min": 9.638604802717644, "outflow_rate_min": 719.2447519168036, "system_level_velocity_max": 14.73802656785591}, "info": {"num_steps_trained": 6131770, "load_time_ms": 11.575, "grad_time_ms": 9083.276, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.584327697753906, "vf_loss": 17.58849334716797, "policy_loss": -0.007570900488644838, "kl": 0.013450530357658863, "vf_explained_var": 0.7996422648429871, "entropy": 1.2390568256378174}, "update_time_ms": 8.929, "num_steps_sampled": 6131770, "sample_time_ms": 16561.868}, "episode_len_mean": 686.19, "time_this_iter_s": 24.875787019729614, "pid": 12036, "timesteps_total": 6131770, "hostname": "flow-main", "episodes_total": 2903, "timestamp": 1557226862, "episode_reward_max": 927.5984804864621, "episodes_this_iter": 18, "time_total_s": 3977.627547979355, "time_since_restore": 3977.627547979355}
{"timesteps_since_restore": 6169670, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91dd8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-01-27", "episode_reward_min": 294.84695368333246, "timesteps_this_iter": 37900, "training_iteration": 160, "episode_reward_mean": 830.9282950446874, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 160, "custom_metrics": {"cost2_mean": -20.410503995205033, "outflow_rate_max": 1153.212748051948, "cost1_mean": 312.8936872548365, "system_level_velocity_mean": 12.684709724480715, "cost2_min": -34.637521722835196, "cost1_max": 352.1539131721713, "cost1_min": 130.58803309845374, "cost2_max": -15.50155003187913, "outflow_rate_mean": 1012.8120513248869, "system_level_velocity_min": 9.638604802717644, "outflow_rate_min": 719.2447519168036, "system_level_velocity_max": 14.73802656785591}, "info": {"num_steps_trained": 6169670, "load_time_ms": 11.603, "grad_time_ms": 9049.827, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.52120018005371, "vf_loss": 18.52450942993164, "policy_loss": -0.00703100161626935, "kl": 0.01469701062887907, "vf_explained_var": 0.7726613879203796, "entropy": 1.2388458251953125}, "update_time_ms": 8.902, "num_steps_sampled": 6169670, "sample_time_ms": 16629.739}, "episode_len_mean": 686.41, "time_this_iter_s": 25.19260883331299, "pid": 12036, "timesteps_total": 6169670, "hostname": "flow-main", "episodes_total": 2922, "timestamp": 1557226887, "episode_reward_max": 924.0164742018237, "episodes_this_iter": 19, "time_total_s": 4002.820156812668, "time_since_restore": 4002.820156812668}
{"timesteps_since_restore": 6206658, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca68d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6278>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-01-52", "episode_reward_min": 43.77602387630997, "timesteps_this_iter": 36988, "training_iteration": 161, "episode_reward_mean": 821.4107915918593, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 161, "custom_metrics": {"cost2_mean": -20.06518727492805, "outflow_rate_max": 1180.684685714286, "cost1_mean": 310.5119653150405, "system_level_velocity_mean": 12.786531112583068, "cost2_min": -29.02542801674381, "cost1_max": 361.0735113446634, "cost1_min": 26.244611500097218, "cost2_max": -10.828024027677674, "outflow_rate_mean": 1013.0492344076645, "system_level_velocity_min": 9.638604802717644, "outflow_rate_min": 334.2309683844586, "system_level_velocity_max": 17.64083535120382}, "info": {"num_steps_trained": 6206658, "load_time_ms": 11.454, "grad_time_ms": 8968.938, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.16674041748047, "vf_loss": 21.17165756225586, "policy_loss": -0.00925079733133316, "kl": 0.017114916816353798, "vf_explained_var": 0.766610860824585, "entropy": 1.2307058572769165}, "update_time_ms": 8.642, "num_steps_sampled": 6206658, "sample_time_ms": 16560.772}, "episode_len_mean": 679.5, "time_this_iter_s": 24.642014741897583, "pid": 12036, "timesteps_total": 6206658, "hostname": "flow-main", "episodes_total": 2942, "timestamp": 1557226912, "episode_reward_max": 924.0164742018237, "episodes_this_iter": 20, "time_total_s": 4027.4621715545654, "time_since_restore": 4027.4621715545654}
{"timesteps_since_restore": 6243653, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb30f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3f28>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-02-16", "episode_reward_min": 43.77602387630997, "timesteps_this_iter": 36995, "training_iteration": 162, "episode_reward_mean": 814.0724235998036, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 162, "custom_metrics": {"cost2_mean": -19.885183398909522, "outflow_rate_max": 1180.684685714286, "cost1_mean": 310.1842421122051, "system_level_velocity_mean": 12.958333272111627, "cost2_min": -25.74769230579338, "cost1_max": 361.0735113446634, "cost1_min": 26.244611500097218, "cost2_max": -10.828024027677674, "outflow_rate_mean": 1013.6075463369822, "system_level_velocity_min": 10.250665959128797, "outflow_rate_min": 334.2309683844586, "system_level_velocity_max": 17.64083535120382}, "info": {"num_steps_trained": 6243653, "load_time_ms": 11.448, "grad_time_ms": 9023.629, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.1448974609375, "vf_loss": 21.14780616760254, "policy_loss": -0.007060868665575981, "kl": 0.01640425994992256, "vf_explained_var": 0.7271798253059387, "entropy": 1.2155156135559082}, "update_time_ms": 8.367, "num_steps_sampled": 6243653, "sample_time_ms": 16505.507}, "episode_len_mean": 673.7, "time_this_iter_s": 23.96937394142151, "pid": 12036, "timesteps_total": 6243653, "hostname": "flow-main", "episodes_total": 2960, "timestamp": 1557226936, "episode_reward_max": 950.1767246665795, "episodes_this_iter": 18, "time_total_s": 4051.431545495987, "time_since_restore": 4051.431545495987}
{"timesteps_since_restore": 6281304, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcd6eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0780>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-02-41", "episode_reward_min": 43.77602387630997, "timesteps_this_iter": 37651, "training_iteration": 163, "episode_reward_mean": 811.6834842113641, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 163, "custom_metrics": {"cost2_mean": -20.117041519348785, "outflow_rate_max": 1180.684685714286, "cost1_mean": 310.2992625771891, "system_level_velocity_mean": 12.97164421730468, "cost2_min": -29.2575608629158, "cost1_max": 361.0735113446634, "cost1_min": 26.244611500097218, "cost2_max": -10.828024027677674, "outflow_rate_mean": 1013.7150844871987, "system_level_velocity_min": 10.250665959128797, "outflow_rate_min": 334.2309683844586, "system_level_velocity_max": 17.64083535120382}, "info": {"num_steps_trained": 6281304, "load_time_ms": 11.627, "grad_time_ms": 9113.917, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.67558479309082, "vf_loss": 18.678503036499023, "policy_loss": -0.006606671027839184, "kl": 0.014573683962225914, "vf_explained_var": 0.8129928112030029, "entropy": 1.2525237798690796}, "update_time_ms": 8.392, "num_steps_sampled": 6281304, "sample_time_ms": 16307.602}, "episode_len_mean": 673.53, "time_this_iter_s": 25.36351203918457, "pid": 12036, "timesteps_total": 6281304, "hostname": "flow-main", "episodes_total": 2979, "timestamp": 1557226961, "episode_reward_max": 950.1767246665795, "episodes_this_iter": 19, "time_total_s": 4076.7950575351715, "time_since_restore": 4076.7950575351715}
{"timesteps_since_restore": 6317904, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca69e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6be0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-03-05", "episode_reward_min": 43.77602387630997, "timesteps_this_iter": 36600, "training_iteration": 164, "episode_reward_mean": 799.5021859798783, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 164, "custom_metrics": {"cost2_mean": -20.216358484432213, "outflow_rate_max": 1180.684685714286, "cost1_mean": 309.20097046466816, "system_level_velocity_mean": 13.05546530264262, "cost2_min": -29.2575608629158, "cost1_max": 361.0735113446634, "cost1_min": 26.244611500097218, "cost2_max": -10.828024027677674, "outflow_rate_mean": 1011.0835966316051, "system_level_velocity_min": 10.649396544469296, "outflow_rate_min": 334.2309683844586, "system_level_velocity_max": 17.64083535120382}, "info": {"num_steps_trained": 6317904, "load_time_ms": 11.79, "grad_time_ms": 9052.432, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 19.45014762878418, "vf_loss": 19.45445442199707, "policy_loss": -0.008040403947234154, "kl": 0.014751018956303596, "vf_explained_var": 0.7820539474487305, "entropy": 1.2375950813293457}, "update_time_ms": 8.513, "num_steps_sampled": 6317904, "sample_time_ms": 15983.032}, "episode_len_mean": 668.8, "time_this_iter_s": 24.30976366996765, "pid": 12036, "timesteps_total": 6317904, "hostname": "flow-main", "episodes_total": 3000, "timestamp": 1557226985, "episode_reward_max": 950.1767246665795, "episodes_this_iter": 21, "time_total_s": 4101.104821205139, "time_since_restore": 4101.104821205139}
{"timesteps_since_restore": 6354972, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91780>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-03-31", "episode_reward_min": 43.69508406468183, "timesteps_this_iter": 37068, "training_iteration": 165, "episode_reward_mean": 784.8328349526779, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 165, "custom_metrics": {"cost2_mean": -20.30037027248623, "outflow_rate_max": 1180.684685714286, "cost1_mean": 304.7614183639724, "system_level_velocity_mean": 13.151918129485066, "cost2_min": -29.2575608629158, "cost1_max": 361.0735113446634, "cost1_min": 25.01776329348674, "cost2_max": -8.366602995747416, "outflow_rate_mean": 1004.6138254714589, "system_level_velocity_min": 10.649396544469296, "outflow_rate_min": 334.2309683844586, "system_level_velocity_max": 17.970079439111224}, "info": {"num_steps_trained": 6354972, "load_time_ms": 12.025, "grad_time_ms": 8999.329, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 24.263856887817383, "vf_loss": 24.26860237121582, "policy_loss": -0.008918034844100475, "kl": 0.01648016832768917, "vf_explained_var": 0.751725435256958, "entropy": 1.2376855611801147}, "update_time_ms": 8.399, "num_steps_sampled": 6354972, "sample_time_ms": 15874.811}, "episode_len_mean": 658.95, "time_this_iter_s": 25.131751537322998, "pid": 12036, "timesteps_total": 6354972, "hostname": "flow-main", "episodes_total": 3022, "timestamp": 1557227011, "episode_reward_max": 950.1767246665795, "episodes_this_iter": 22, "time_total_s": 4126.236572742462, "time_since_restore": 4126.236572742462}
{"timesteps_since_restore": 6392314, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca60f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc8ab00>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-03-56", "episode_reward_min": 43.69508406468183, "timesteps_this_iter": 37342, "training_iteration": 166, "episode_reward_mean": 775.3954536419681, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 166, "custom_metrics": {"cost2_mean": -20.063602481573465, "outflow_rate_max": 1176.6732883116883, "cost1_mean": 302.72146391966453, "system_level_velocity_mean": 13.169208660192234, "cost2_min": -29.2575608629158, "cost1_max": 359.49589713397665, "cost1_min": 25.01776329348674, "cost2_max": -8.366602995747416, "outflow_rate_mean": 998.1973222316225, "system_level_velocity_min": 10.649396544469296, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 17.970079439111224}, "info": {"num_steps_trained": 6392314, "load_time_ms": 11.924, "grad_time_ms": 8970.856, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.939069747924805, "vf_loss": 17.943634033203125, "policy_loss": -0.00856419000774622, "kl": 0.01579354703426361, "vf_explained_var": 0.7852912545204163, "entropy": 1.2544493675231934}, "update_time_ms": 8.007, "num_steps_sampled": 6392314, "sample_time_ms": 15980.74}, "episode_len_mean": 653.83, "time_this_iter_s": 25.87100315093994, "pid": 12036, "timesteps_total": 6392314, "hostname": "flow-main", "episodes_total": 3041, "timestamp": 1557227036, "episode_reward_max": 950.1767246665795, "episodes_this_iter": 19, "time_total_s": 4152.107575893402, "time_since_restore": 4152.107575893402}
{"timesteps_since_restore": 6429120, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb72e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-04-20", "episode_reward_min": 43.69508406468183, "timesteps_this_iter": 36806, "training_iteration": 167, "episode_reward_mean": 773.0726924579161, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 167, "custom_metrics": {"cost2_mean": -19.934871146946662, "outflow_rate_max": 1179.6885038961036, "cost1_mean": 301.4777597977044, "system_level_velocity_mean": 13.054383537473235, "cost2_min": -29.2575608629158, "cost1_max": 359.49589713397665, "cost1_min": 25.01776329348674, "cost2_max": -8.366602995747416, "outflow_rate_mean": 997.8644946311299, "system_level_velocity_min": 10.649396544469296, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 17.970079439111224}, "info": {"num_steps_trained": 6429120, "load_time_ms": 11.919, "grad_time_ms": 8870.769, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.53759002685547, "vf_loss": 21.54120635986328, "policy_loss": -0.007694100495427847, "kl": 0.01611756533384323, "vf_explained_var": 0.6990140080451965, "entropy": 1.2438520193099976}, "update_time_ms": 7.773, "num_steps_sampled": 6429120, "sample_time_ms": 15923.125}, "episode_len_mean": 655.27, "time_this_iter_s": 23.804095029830933, "pid": 12036, "timesteps_total": 6429120, "hostname": "flow-main", "episodes_total": 3061, "timestamp": 1557227060, "episode_reward_max": 917.7403164066889, "episodes_this_iter": 20, "time_total_s": 4175.911670923233, "time_since_restore": 4175.911670923233}
{"timesteps_since_restore": 6466874, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc804e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcd6eb8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-04-45", "episode_reward_min": 43.69508406468183, "timesteps_this_iter": 37754, "training_iteration": 168, "episode_reward_mean": 776.7933135260943, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 168, "custom_metrics": {"cost2_mean": -19.37100980474356, "outflow_rate_max": 1179.6885038961036, "cost1_mean": 302.7069276706172, "system_level_velocity_mean": 13.024600614935368, "cost2_min": -27.23694632239016, "cost1_max": 359.49589713397665, "cost1_min": 25.01776329348674, "cost2_max": -8.366602995747416, "outflow_rate_mean": 1000.4470232594479, "system_level_velocity_min": 10.649396544469296, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 17.970079439111224}, "info": {"num_steps_trained": 6466874, "load_time_ms": 11.972, "grad_time_ms": 8847.833, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.892005920410156, "vf_loss": 21.89471435546875, "policy_loss": -0.006460566073656082, "kl": 0.014830132015049458, "vf_explained_var": 0.7232075929641724, "entropy": 1.2386819124221802}, "update_time_ms": 7.744, "num_steps_sampled": 6466874, "sample_time_ms": 15856.044}, "episode_len_mean": 659.88, "time_this_iter_s": 24.92030644416809, "pid": 12036, "timesteps_total": 6466874, "hostname": "flow-main", "episodes_total": 3080, "timestamp": 1557227085, "episode_reward_max": 908.9104010138644, "episodes_this_iter": 19, "time_total_s": 4200.831977367401, "time_since_restore": 4200.831977367401}
{"timesteps_since_restore": 6504463, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca39e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3978>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-05-10", "episode_reward_min": 43.69508406468183, "timesteps_this_iter": 37589, "training_iteration": 169, "episode_reward_mean": 775.8365461637595, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 169, "custom_metrics": {"cost2_mean": -19.3262851168706, "outflow_rate_max": 1179.6885038961036, "cost1_mean": 299.7277293608611, "system_level_velocity_mean": 12.9143005631858, "cost2_min": -26.87701009905117, "cost1_max": 350.8486311071386, "cost1_min": 25.01776329348674, "cost2_max": -8.366602995747416, "outflow_rate_mean": 994.4011248739364, "system_level_velocity_min": 9.513409166373853, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 17.970079439111224}, "info": {"num_steps_trained": 6504463, "load_time_ms": 11.943, "grad_time_ms": 8837.905, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.172752380371094, "vf_loss": 19.176048278808594, "policy_loss": -0.007364092394709587, "kl": 0.01607147976756096, "vf_explained_var": 0.7931241393089294, "entropy": 1.2490178346633911}, "update_time_ms": 7.692, "num_steps_sampled": 6504463, "sample_time_ms": 15843.209}, "episode_len_mean": 658.08, "time_this_iter_s": 24.63482141494751, "pid": 12036, "timesteps_total": 6504463, "hostname": "flow-main", "episodes_total": 3099, "timestamp": 1557227110, "episode_reward_max": 893.8313628043484, "episodes_this_iter": 19, "time_total_s": 4225.466798782349, "time_since_restore": 4225.466798782349}
{"timesteps_since_restore": 6541829, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc910f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91f28>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-05-35", "episode_reward_min": 45.01556478952503, "timesteps_this_iter": 37366, "training_iteration": 170, "episode_reward_mean": 781.456266483871, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 170, "custom_metrics": {"cost2_mean": -19.218580227835687, "outflow_rate_max": 1179.6885038961036, "cost1_mean": 301.18562175280874, "system_level_velocity_mean": 12.823040771102292, "cost2_min": -26.87701009905117, "cost1_max": 350.12290725616157, "cost1_min": 25.01776329348674, "cost2_max": -8.366602995747416, "outflow_rate_mean": 999.5642090165836, "system_level_velocity_min": 9.513409166373853, "outflow_rate_min": 335.6139678872712, "system_level_velocity_max": 17.453433993065524}, "info": {"num_steps_trained": 6541829, "load_time_ms": 11.845, "grad_time_ms": 8783.999, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.91664695739746, "vf_loss": 21.91872787475586, "policy_loss": -0.005692583043128252, "kl": 0.014270314015448093, "vf_explained_var": 0.6683814525604248, "entropy": 1.2308695316314697}, "update_time_ms": 7.568, "num_steps_sampled": 6541829, "sample_time_ms": 15845.132}, "episode_len_mean": 662.68, "time_this_iter_s": 24.662887573242188, "pid": 12036, "timesteps_total": 6541829, "hostname": "flow-main", "episodes_total": 3118, "timestamp": 1557227135, "episode_reward_max": 891.8876095622953, "episodes_this_iter": 19, "time_total_s": 4250.129686355591, "time_since_restore": 4250.129686355591}
{"timesteps_since_restore": 6579778, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca68d0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-05-58", "episode_reward_min": 47.05511742250506, "timesteps_this_iter": 37949, "training_iteration": 171, "episode_reward_mean": 783.7871664578421, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 171, "custom_metrics": {"cost2_mean": -19.307666206370968, "outflow_rate_max": 1179.6885038961036, "cost1_mean": 299.5473973107017, "system_level_velocity_mean": 12.678836673588199, "cost2_min": -26.87701009905117, "cost1_max": 343.0824077797164, "cost1_min": 26.25166160581162, "cost2_max": -9.080342981863646, "outflow_rate_mean": 995.090359892534, "system_level_velocity_min": 9.513409166373853, "outflow_rate_min": 338.86037478867604, "system_level_velocity_max": 17.248880431454463}, "info": {"num_steps_trained": 6579778, "load_time_ms": 11.802, "grad_time_ms": 8827.548, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.707456588745117, "vf_loss": 18.712339401245117, "policy_loss": -0.009111552499234676, "kl": 0.016715247184038162, "vf_explained_var": 0.8370839953422546, "entropy": 1.2766262292861938}, "update_time_ms": 7.503, "num_steps_sampled": 6579778, "sample_time_ms": 15685.453}, "episode_len_mean": 663.37, "time_this_iter_s": 23.482551336288452, "pid": 12036, "timesteps_total": 6579778, "hostname": "flow-main", "episodes_total": 3137, "timestamp": 1557227158, "episode_reward_max": 909.3380421352851, "episodes_this_iter": 19, "time_total_s": 4273.612237691879, "time_since_restore": 4273.612237691879}
{"timesteps_since_restore": 6617139, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb30f0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-06-23", "episode_reward_min": 47.05511742250506, "timesteps_this_iter": 37361, "training_iteration": 172, "episode_reward_mean": 800.9096646850965, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 172, "custom_metrics": {"cost2_mean": -19.433468335539654, "outflow_rate_max": 1179.6885038961036, "cost1_mean": 301.61674291930103, "system_level_velocity_mean": 12.505151457399572, "cost2_min": -26.87701009905117, "cost1_max": 343.0824077797164, "cost1_min": 26.25166160581162, "cost2_max": -9.080342981863646, "outflow_rate_mean": 995.4478968976816, "system_level_velocity_min": 9.513409166373853, "outflow_rate_min": 338.86037478867604, "system_level_velocity_max": 17.248880431454463}, "info": {"num_steps_trained": 6617139, "load_time_ms": 11.907, "grad_time_ms": 8854.799, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 19.07958221435547, "vf_loss": 19.08445167541504, "policy_loss": -0.00877106562256813, "kl": 0.015420136973261833, "vf_explained_var": 0.7696530222892761, "entropy": 1.2527872323989868}, "update_time_ms": 7.625, "num_steps_sampled": 6617139, "sample_time_ms": 15719.622}, "episode_len_mean": 674.26, "time_this_iter_s": 24.589449882507324, "pid": 12036, "timesteps_total": 6617139, "hostname": "flow-main", "episodes_total": 3158, "timestamp": 1557227183, "episode_reward_max": 909.3380421352851, "episodes_this_iter": 21, "time_total_s": 4298.201687574387, "time_since_restore": 4298.201687574387}
{"timesteps_since_restore": 6654239, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb05f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0c88>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-06-48", "episode_reward_min": 47.05511742250506, "timesteps_this_iter": 37100, "training_iteration": 173, "episode_reward_mean": 799.1475381587347, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 173, "custom_metrics": {"cost2_mean": -19.77051864109071, "outflow_rate_max": 1181.1018285714285, "cost1_mean": 302.9065696047237, "system_level_velocity_mean": 12.569808312981106, "cost2_min": -26.87701009905117, "cost1_max": 351.0398902450111, "cost1_min": 26.25166160581162, "cost2_max": -9.080342981863646, "outflow_rate_mean": 997.3058440665128, "system_level_velocity_min": 9.513409166373853, "outflow_rate_min": 338.86037478867604, "system_level_velocity_max": 17.248880431454463}, "info": {"num_steps_trained": 6654239, "load_time_ms": 11.864, "grad_time_ms": 8782.354, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.39972496032715, "vf_loss": 21.40374183654785, "policy_loss": -0.007579382508993149, "kl": 0.014069745317101479, "vf_explained_var": 0.6744561195373535, "entropy": 1.2327818870544434}, "update_time_ms": 7.618, "num_steps_sampled": 6654239, "sample_time_ms": 15741.529}, "episode_len_mean": 673.46, "time_this_iter_s": 24.854782819747925, "pid": 12036, "timesteps_total": 6654239, "hostname": "flow-main", "episodes_total": 3178, "timestamp": 1557227208, "episode_reward_max": 909.3380421352851, "episodes_this_iter": 20, "time_total_s": 4323.0564703941345, "time_since_restore": 4323.0564703941345}
{"timesteps_since_restore": 6691988, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc912e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-07-13", "episode_reward_min": 47.05511742250506, "timesteps_this_iter": 37749, "training_iteration": 174, "episode_reward_mean": 810.6391779665657, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 174, "custom_metrics": {"cost2_mean": -19.876634838036622, "outflow_rate_max": 1181.1018285714285, "cost1_mean": 307.2818311418985, "system_level_velocity_mean": 12.570660470043743, "cost2_min": -26.577540389387863, "cost1_max": 351.0398902450111, "cost1_min": 26.25166160581162, "cost2_max": -9.080342981863646, "outflow_rate_mean": 1010.2464713985269, "system_level_velocity_min": 9.855173964546163, "outflow_rate_min": 338.86037478867604, "system_level_velocity_max": 17.248880431454463}, "info": {"num_steps_trained": 6691988, "load_time_ms": 11.801, "grad_time_ms": 8761.58, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.566940307617188, "vf_loss": 18.56976318359375, "policy_loss": -0.006570801138877869, "kl": 0.014808283187448978, "vf_explained_var": 0.7494983077049255, "entropy": 1.233427882194519}, "update_time_ms": 7.545, "num_steps_sampled": 6691988, "sample_time_ms": 15835.648}, "episode_len_mean": 680.8, "time_this_iter_s": 25.045804738998413, "pid": 12036, "timesteps_total": 6691988, "hostname": "flow-main", "episodes_total": 3196, "timestamp": 1557227233, "episode_reward_max": 909.3380421352851, "episodes_this_iter": 18, "time_total_s": 4348.102275133133, "time_since_restore": 4348.102275133133}
{"timesteps_since_restore": 6729433, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6e48>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-07-37", "episode_reward_min": 47.05511742250506, "timesteps_this_iter": 37445, "training_iteration": 175, "episode_reward_mean": 811.9389229592567, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 175, "custom_metrics": {"cost2_mean": -19.896630818347628, "outflow_rate_max": 1183.3530649350648, "cost1_mean": 306.1614655521456, "system_level_velocity_mean": 12.520245768474483, "cost2_min": -26.577540389387863, "cost1_max": 351.0398902450111, "cost1_min": 26.25166160581162, "cost2_max": -9.080342981863646, "outflow_rate_mean": 1010.2132070348906, "system_level_velocity_min": 9.855173964546163, "outflow_rate_min": 338.86037478867604, "system_level_velocity_max": 17.248880431454463}, "info": {"num_steps_trained": 6729433, "load_time_ms": 11.799, "grad_time_ms": 8713.851, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.51780128479004, "vf_loss": 20.52140998840332, "policy_loss": -0.0074768997728824615, "kl": 0.015284701250493526, "vf_explained_var": 0.697253406047821, "entropy": 1.2486191987991333}, "update_time_ms": 7.587, "num_steps_sampled": 6729433, "sample_time_ms": 15823.521}, "episode_len_mean": 680.41, "time_this_iter_s": 24.517167329788208, "pid": 12036, "timesteps_total": 6729433, "hostname": "flow-main", "episodes_total": 3214, "timestamp": 1557227257, "episode_reward_max": 909.3380421352851, "episodes_this_iter": 18, "time_total_s": 4372.619442462921, "time_since_restore": 4372.619442462921}
{"timesteps_since_restore": 6767092, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca67f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca60f0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-08-02", "episode_reward_min": 47.05511742250506, "timesteps_this_iter": 37659, "training_iteration": 176, "episode_reward_mean": 807.8249422199049, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 176, "custom_metrics": {"cost2_mean": -19.57049573329094, "outflow_rate_max": 1183.3530649350648, "cost1_mean": 305.14650370090976, "system_level_velocity_mean": 12.567299743314921, "cost2_min": -26.577540389387863, "cost1_max": 351.0398902450111, "cost1_min": 26.25166160581162, "cost2_max": -7.745214770184386, "outflow_rate_mean": 1006.3412653861255, "system_level_velocity_min": 9.93849372715988, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.248880431454463}, "info": {"num_steps_trained": 6767092, "load_time_ms": 11.798, "grad_time_ms": 8714.007, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.671649932861328, "vf_loss": 21.67466163635254, "policy_loss": -0.006480645854026079, "kl": 0.01369014848023653, "vf_explained_var": 0.65399569272995, "entropy": 1.2713258266448975}, "update_time_ms": 7.856, "num_steps_sampled": 6767092, "sample_time_ms": 15720.667}, "episode_len_mean": 676.62, "time_this_iter_s": 24.831420421600342, "pid": 12036, "timesteps_total": 6767092, "hostname": "flow-main", "episodes_total": 3233, "timestamp": 1557227282, "episode_reward_max": 904.083558257808, "episodes_this_iter": 19, "time_total_s": 4397.4508628845215, "time_since_restore": 4397.4508628845215}
{"timesteps_since_restore": 6805012, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb02b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0630>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-08-27", "episode_reward_min": 51.363485320255556, "timesteps_this_iter": 37920, "training_iteration": 177, "episode_reward_mean": 814.9985716312073, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 177, "custom_metrics": {"cost2_mean": -19.600569376403524, "outflow_rate_max": 1183.3530649350648, "cost1_mean": 309.9640107158284, "system_level_velocity_mean": 12.587086442888934, "cost2_min": -26.577540389387863, "cost1_max": 352.1521002666178, "cost1_min": 28.005307091183095, "cost2_max": -7.745214770184386, "outflow_rate_mean": 1016.6337004222041, "system_level_velocity_min": 9.93849372715988, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 15.611201428976615}, "info": {"num_steps_trained": 6805012, "load_time_ms": 11.851, "grad_time_ms": 8829.943, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.564010620117188, "vf_loss": 19.567821502685547, "policy_loss": -0.007199223153293133, "kl": 0.013379889540374279, "vf_explained_var": 0.7719555497169495, "entropy": 1.2922545671463013}, "update_time_ms": 7.772, "num_steps_sampled": 6805012, "sample_time_ms": 15696.292}, "episode_len_mean": 685.72, "time_this_iter_s": 24.728525400161743, "pid": 12036, "timesteps_total": 6805012, "hostname": "flow-main", "episodes_total": 3252, "timestamp": 1557227307, "episode_reward_max": 898.1410161273511, "episodes_this_iter": 19, "time_total_s": 4422.179388284683, "time_since_restore": 4422.179388284683}
{"timesteps_since_restore": 6842069, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb07b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0940>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-08-52", "episode_reward_min": 51.363485320255556, "timesteps_this_iter": 37057, "training_iteration": 178, "episode_reward_mean": 810.0043287716547, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 178, "custom_metrics": {"cost2_mean": -19.197610063246522, "outflow_rate_max": 1183.3530649350648, "cost1_mean": 307.44735555873604, "system_level_velocity_mean": 12.570706953593719, "cost2_min": -26.295951767075486, "cost1_max": 352.1521002666178, "cost1_min": 28.005307091183095, "cost2_max": -7.745214770184386, "outflow_rate_mean": 1008.8967558445803, "system_level_velocity_min": 10.482230132632127, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 15.611201428976615}, "info": {"num_steps_trained": 6842069, "load_time_ms": 11.933, "grad_time_ms": 8846.806, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.979053497314453, "vf_loss": 18.98504638671875, "policy_loss": -0.010207102634012699, "kl": 0.016651121899485588, "vf_explained_var": 0.760490894317627, "entropy": 1.2829740047454834}, "update_time_ms": 7.907, "num_steps_sampled": 6842069, "sample_time_ms": 15685.247}, "episode_len_mean": 682.0, "time_this_iter_s": 24.990333557128906, "pid": 12036, "timesteps_total": 6842069, "hostname": "flow-main", "episodes_total": 3272, "timestamp": 1557227332, "episode_reward_max": 898.1410161273511, "episodes_this_iter": 20, "time_total_s": 4447.169721841812, "time_since_restore": 4447.169721841812}
{"timesteps_since_restore": 6878759, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7a58>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-09-16", "episode_reward_min": 51.363485320255556, "timesteps_this_iter": 36690, "training_iteration": 179, "episode_reward_mean": 791.6878070957043, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 179, "custom_metrics": {"cost2_mean": -18.811812682097376, "outflow_rate_max": 1183.3530649350648, "cost1_mean": 302.2803028701856, "system_level_velocity_mean": 12.59900365741533, "cost2_min": -26.295951767075486, "cost1_max": 352.1521002666178, "cost1_min": 28.005307091183095, "cost2_max": -7.745214770184386, "outflow_rate_mean": 995.927170048411, "system_level_velocity_min": 10.482230132632127, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 15.611201428976615}, "info": {"num_steps_trained": 6878759, "load_time_ms": 12.088, "grad_time_ms": 8900.121, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 22.355134963989258, "vf_loss": 22.358047485351562, "policy_loss": -0.006285217124968767, "kl": 0.013322923332452774, "vf_explained_var": 0.6853322386741638, "entropy": 1.3014980554580688}, "update_time_ms": 8.121, "num_steps_sampled": 6878759, "sample_time_ms": 15607.726}, "episode_len_mean": 670.98, "time_this_iter_s": 24.41457962989807, "pid": 12036, "timesteps_total": 6878759, "hostname": "flow-main", "episodes_total": 3293, "timestamp": 1557227356, "episode_reward_max": 893.9278130090208, "episodes_this_iter": 21, "time_total_s": 4471.58430147171, "time_since_restore": 4471.58430147171}
{"timesteps_since_restore": 6916253, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca60f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca67f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6a90>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-09-42", "episode_reward_min": 51.363485320255556, "timesteps_this_iter": 37494, "training_iteration": 180, "episode_reward_mean": 782.8736359577057, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 180, "custom_metrics": {"cost2_mean": -18.428995000668007, "outflow_rate_max": 1120.5384103896104, "cost1_mean": 299.759166158681, "system_level_velocity_mean": 12.579314627027536, "cost2_min": -25.845520300119137, "cost1_max": 352.1521002666178, "cost1_min": 28.005307091183095, "cost2_max": -7.745214770184386, "outflow_rate_mean": 980.3099819576585, "system_level_velocity_min": 10.339414673049866, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 15.611201428976615}, "info": {"num_steps_trained": 6916253, "load_time_ms": 12.148, "grad_time_ms": 8979.266, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.059720993041992, "vf_loss": 21.064884185791016, "policy_loss": -0.009046138264238834, "kl": 0.015339602716267109, "vf_explained_var": 0.7717104554176331, "entropy": 1.3456767797470093}, "update_time_ms": 8.278, "num_steps_sampled": 6916253, "sample_time_ms": 15598.652}, "episode_len_mean": 668.38, "time_this_iter_s": 25.37529993057251, "pid": 12036, "timesteps_total": 6916253, "hostname": "flow-main", "episodes_total": 3313, "timestamp": 1557227382, "episode_reward_max": 892.7301918418804, "episodes_this_iter": 20, "time_total_s": 4496.959601402283, "time_since_restore": 4496.959601402283}
{"timesteps_since_restore": 6953348, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3d30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3588>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-10-06", "episode_reward_min": 349.0566890976843, "timesteps_this_iter": 37095, "training_iteration": 181, "episode_reward_mean": 794.6004027825797, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 181, "custom_metrics": {"cost2_mean": -18.376477212795535, "outflow_rate_max": 1161.6262805194804, "cost1_mean": 304.9290489841711, "system_level_velocity_mean": 12.585744571797013, "cost2_min": -25.845520300119137, "cost1_max": 352.1521002666178, "cost1_min": 146.93907697663974, "cost2_max": -12.661301171522092, "outflow_rate_mean": 989.784084372544, "system_level_velocity_min": 10.339414673049866, "outflow_rate_min": 733.4578029493435, "system_level_velocity_max": 14.68107939685484}, "info": {"num_steps_trained": 6953348, "load_time_ms": 12.378, "grad_time_ms": 9005.699, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.882776260375977, "vf_loss": 17.886709213256836, "policy_loss": -0.007317103911191225, "kl": 0.013386685401201248, "vf_explained_var": 0.7378900051116943, "entropy": 1.286873698234558}, "update_time_ms": 8.559, "num_steps_sampled": 6953348, "sample_time_ms": 15668.633}, "episode_len_mean": 679.08, "time_this_iter_s": 24.47424077987671, "pid": 12036, "timesteps_total": 6953348, "hostname": "flow-main", "episodes_total": 3331, "timestamp": 1557227406, "episode_reward_max": 892.7301918418804, "episodes_this_iter": 18, "time_total_s": 4521.433842182159, "time_since_restore": 4521.433842182159}
{"timesteps_since_restore": 6990733, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb75f8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-10-30", "episode_reward_min": 349.0566890976843, "timesteps_this_iter": 37385, "training_iteration": 182, "episode_reward_mean": 792.4470187859173, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 182, "custom_metrics": {"cost2_mean": -18.658203884163473, "outflow_rate_max": 1203.0547636363638, "cost1_mean": 304.9691512592106, "system_level_velocity_mean": 12.577187259576744, "cost2_min": -27.808489689850248, "cost1_max": 350.97191088909324, "cost1_min": 146.93907697663974, "cost2_max": -12.661301171522092, "outflow_rate_mean": 995.4053451517649, "system_level_velocity_min": 10.339414673049866, "outflow_rate_min": 733.4578029493435, "system_level_velocity_max": 14.385133046808619}, "info": {"num_steps_trained": 6990733, "load_time_ms": 12.363, "grad_time_ms": 8961.455, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.522878646850586, "vf_loss": 20.52603530883789, "policy_loss": -0.006527279037982225, "kl": 0.013310947455465794, "vf_explained_var": 0.7105306386947632, "entropy": 1.306195855140686}, "update_time_ms": 8.64, "num_steps_sampled": 6990733, "sample_time_ms": 15664.905}, "episode_len_mean": 679.08, "time_this_iter_s": 24.115297079086304, "pid": 12036, "timesteps_total": 6990733, "hostname": "flow-main", "episodes_total": 3350, "timestamp": 1557227430, "episode_reward_max": 887.2796192597685, "episodes_this_iter": 19, "time_total_s": 4545.549139261246, "time_since_restore": 4545.549139261246}
{"timesteps_since_restore": 7028384, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb72b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7e48>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-10-56", "episode_reward_min": 203.32643955989573, "timesteps_this_iter": 37651, "training_iteration": 183, "episode_reward_mean": 784.8843621775994, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 183, "custom_metrics": {"cost2_mean": -18.807081885041622, "outflow_rate_max": 1203.0547636363638, "cost1_mean": 301.5514683800599, "system_level_velocity_mean": 12.528499061822783, "cost2_min": -27.808489689850248, "cost1_max": 350.97191088909324, "cost1_min": 84.10058408524941, "cost2_max": -11.13492017800879, "outflow_rate_mean": 987.9718828826332, "system_level_velocity_min": 10.339414673049866, "outflow_rate_min": 510.82548796827393, "system_level_velocity_max": 14.377820141121386}, "info": {"num_steps_trained": 7028384, "load_time_ms": 12.571, "grad_time_ms": 8915.483, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.78961753845215, "vf_loss": 18.793521881103516, "policy_loss": -0.007528659421950579, "kl": 0.014312125742435455, "vf_explained_var": 0.773290753364563, "entropy": 1.3139125108718872}, "update_time_ms": 8.727, "num_steps_sampled": 7028384, "sample_time_ms": 15788.93}, "episode_len_mean": 672.7, "time_this_iter_s": 25.62588620185852, "pid": 12036, "timesteps_total": 7028384, "hostname": "flow-main", "episodes_total": 3371, "timestamp": 1557227456, "episode_reward_max": 879.4768957656897, "episodes_this_iter": 21, "time_total_s": 4571.175025463104, "time_since_restore": 4571.175025463104}
{"timesteps_since_restore": 7066008, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91550>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-11-21", "episode_reward_min": 128.12362964913714, "timesteps_this_iter": 37624, "training_iteration": 184, "episode_reward_mean": 786.6671431113583, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 184, "custom_metrics": {"cost2_mean": -18.72933836522444, "outflow_rate_max": 1203.0547636363638, "cost1_mean": 301.92038190628335, "system_level_velocity_mean": 12.521008247314246, "cost2_min": -27.808489689850248, "cost1_max": 350.97191088909324, "cost1_min": 60.36991157021063, "cost2_max": -10.889257252839418, "outflow_rate_mean": 984.8830644560509, "system_level_velocity_min": 10.339414673049866, "outflow_rate_min": 420.45927453052116, "system_level_velocity_max": 14.751793091680224}, "info": {"num_steps_trained": 7066008, "load_time_ms": 12.661, "grad_time_ms": 8917.022, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.169191360473633, "vf_loss": 18.173707962036133, "policy_loss": -0.008411090821027756, "kl": 0.015389266423881054, "vf_explained_var": 0.7953541278839111, "entropy": 1.3486796617507935}, "update_time_ms": 8.868, "num_steps_sampled": 7066008, "sample_time_ms": 15785.166}, "episode_len_mean": 673.93, "time_this_iter_s": 25.031738758087158, "pid": 12036, "timesteps_total": 7066008, "hostname": "flow-main", "episodes_total": 3390, "timestamp": 1557227481, "episode_reward_max": 889.9176781076072, "episodes_this_iter": 19, "time_total_s": 4596.206764221191, "time_since_restore": 4596.206764221191}
{"timesteps_since_restore": 7103284, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb79b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7748>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-11-46", "episode_reward_min": 128.12362964913714, "timesteps_this_iter": 37276, "training_iteration": 185, "episode_reward_mean": 784.1528748971324, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 185, "custom_metrics": {"cost2_mean": -19.108188122165092, "outflow_rate_max": 1203.0547636363638, "cost1_mean": 300.2077972042132, "system_level_velocity_mean": 12.491321641080312, "cost2_min": -27.808489689850248, "cost1_max": 350.97191088909324, "cost1_min": 60.36991157021063, "cost2_max": -10.889257252839418, "outflow_rate_mean": 984.1750255257529, "system_level_velocity_min": 10.211230202832683, "outflow_rate_min": 420.45927453052116, "system_level_velocity_max": 15.154449297684451}, "info": {"num_steps_trained": 7103284, "load_time_ms": 12.522, "grad_time_ms": 8897.94, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 16.71134376525879, "vf_loss": 16.716400146484375, "policy_loss": -0.008964916691184044, "kl": 0.01543660182505846, "vf_explained_var": 0.8268465995788574, "entropy": 1.3484525680541992}, "update_time_ms": 8.92, "num_steps_sampled": 7103284, "sample_time_ms": 15836.932}, "episode_len_mean": 671.05, "time_this_iter_s": 24.827396869659424, "pid": 12036, "timesteps_total": 7103284, "hostname": "flow-main", "episodes_total": 3409, "timestamp": 1557227506, "episode_reward_max": 889.9176781076072, "episodes_this_iter": 19, "time_total_s": 4621.034161090851, "time_since_restore": 4621.034161090851}
{"timesteps_since_restore": 7139947, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b70>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-12-11", "episode_reward_min": 128.12362964913714, "timesteps_this_iter": 36663, "training_iteration": 186, "episode_reward_mean": 781.1091379986351, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 186, "custom_metrics": {"cost2_mean": -19.224853137762988, "outflow_rate_max": 1203.0547636363638, "cost1_mean": 300.8553599145549, "system_level_velocity_mean": 12.536393781049934, "cost2_min": -27.808489689850248, "cost1_max": 350.97191088909324, "cost1_min": 60.36991157021063, "cost2_max": -10.889257252839418, "outflow_rate_mean": 987.6998771925206, "system_level_velocity_min": 10.211230202832683, "outflow_rate_min": 420.45927453052116, "system_level_velocity_max": 15.154449297684451}, "info": {"num_steps_trained": 7139947, "load_time_ms": 12.573, "grad_time_ms": 8865.282, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.637786865234375, "vf_loss": 17.642932891845703, "policy_loss": -0.008747704327106476, "kl": 0.014227230101823807, "vf_explained_var": 0.7697820067405701, "entropy": 1.3468378782272339}, "update_time_ms": 8.808, "num_steps_sampled": 7139947, "sample_time_ms": 15909.968}, "episode_len_mean": 670.68, "time_this_iter_s": 25.24158239364624, "pid": 12036, "timesteps_total": 7139947, "hostname": "flow-main", "episodes_total": 3428, "timestamp": 1557227531, "episode_reward_max": 889.9176781076072, "episodes_this_iter": 19, "time_total_s": 4646.275743484497, "time_since_restore": 4646.275743484497}
{"timesteps_since_restore": 7177416, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3d30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3080>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-12-36", "episode_reward_min": 54.99661096470637, "timesteps_this_iter": 37469, "training_iteration": 187, "episode_reward_mean": 767.5548647991686, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 187, "custom_metrics": {"cost2_mean": -19.085356246015046, "outflow_rate_max": 1147.7272883116882, "cost1_mean": 298.01454155316264, "system_level_velocity_mean": 12.671868113852913, "cost2_min": -25.125777946281417, "cost1_max": 348.5453560867618, "cost1_min": 30.120436197038007, "cost2_max": -9.901838797261194, "outflow_rate_mean": 979.9264557912725, "system_level_velocity_min": 10.211230202832683, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.656445177889154}, "info": {"num_steps_trained": 7177416, "load_time_ms": 12.531, "grad_time_ms": 8856.83, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 23.515193939208984, "vf_loss": 23.52039337158203, "policy_loss": -0.009256003424525261, "kl": 0.016024237498641014, "vf_explained_var": 0.7514103651046753, "entropy": 1.3408892154693604}, "update_time_ms": 8.755, "num_steps_sampled": 7177416, "sample_time_ms": 15901.069}, "episode_len_mean": 661.06, "time_this_iter_s": 24.551260471343994, "pid": 12036, "timesteps_total": 7177416, "hostname": "flow-main", "episodes_total": 3449, "timestamp": 1557227556, "episode_reward_max": 889.9176781076072, "episodes_this_iter": 21, "time_total_s": 4670.827003955841, "time_since_restore": 4670.827003955841}
{"timesteps_since_restore": 7214246, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3f98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca31d0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-13-01", "episode_reward_min": 51.37614460085208, "timesteps_this_iter": 36830, "training_iteration": 188, "episode_reward_mean": 760.965069900505, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 188, "custom_metrics": {"cost2_mean": -19.010568823437215, "outflow_rate_max": 1147.7272883116882, "cost1_mean": 296.3757811767174, "system_level_velocity_mean": 12.746119766926823, "cost2_min": -25.125777946281417, "cost1_max": 348.5453560867618, "cost1_min": 29.92494273683702, "cost2_max": -9.901838797261194, "outflow_rate_mean": 976.1560897224451, "system_level_velocity_min": 10.211230202832683, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.656445177889154}, "info": {"num_steps_trained": 7214246, "load_time_ms": 12.566, "grad_time_ms": 8965.07, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.90703010559082, "vf_loss": 22.910634994506836, "policy_loss": -0.007040386088192463, "kl": 0.013570067472755909, "vf_explained_var": 0.6425626277923584, "entropy": 1.3622756004333496}, "update_time_ms": 8.807, "num_steps_sampled": 7214246, "sample_time_ms": 15769.794}, "episode_len_mean": 656.84, "time_this_iter_s": 24.761932849884033, "pid": 12036, "timesteps_total": 7214246, "hostname": "flow-main", "episodes_total": 3469, "timestamp": 1557227581, "episode_reward_max": 889.9176781076072, "episodes_this_iter": 20, "time_total_s": 4695.588936805725, "time_since_restore": 4695.588936805725}
{"timesteps_since_restore": 7250597, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0ef0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-13-24", "episode_reward_min": 51.37614460085208, "timesteps_this_iter": 36351, "training_iteration": 189, "episode_reward_mean": 758.6157624820688, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 189, "custom_metrics": {"cost2_mean": -18.972148881239924, "outflow_rate_max": 1176.3480415584418, "cost1_mean": 296.73840483700593, "system_level_velocity_mean": 12.850546192742888, "cost2_min": -27.441507817708533, "cost1_max": 348.5453560867618, "cost1_min": 29.92494273683702, "cost2_max": -9.901838797261194, "outflow_rate_mean": 983.9790308328427, "system_level_velocity_min": 10.270799141429041, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.656445177889154}, "info": {"num_steps_trained": 7250597, "load_time_ms": 12.42, "grad_time_ms": 8974.535, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 24.576032638549805, "vf_loss": 24.579004287719727, "policy_loss": -0.006680085323750973, "kl": 0.014644518494606018, "vf_explained_var": 0.5761873722076416, "entropy": 1.3501650094985962}, "update_time_ms": 8.617, "num_steps_sampled": 7250597, "sample_time_ms": 15666.857}, "episode_len_mean": 654.74, "time_this_iter_s": 23.46877360343933, "pid": 12036, "timesteps_total": 7250597, "hostname": "flow-main", "episodes_total": 3491, "timestamp": 1557227604, "episode_reward_max": 881.9174374374073, "episodes_this_iter": 22, "time_total_s": 4719.057710409164, "time_since_restore": 4719.057710409164}
{"timesteps_since_restore": 7287264, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb04e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-13-47", "episode_reward_min": 51.37614460085208, "timesteps_this_iter": 36667, "training_iteration": 190, "episode_reward_mean": 747.0579386060311, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 190, "custom_metrics": {"cost2_mean": -18.568214549435307, "outflow_rate_max": 1176.3480415584418, "cost1_mean": 295.2875414207879, "system_level_velocity_mean": 13.022639840585862, "cost2_min": -27.441507817708533, "cost1_max": 346.79476736788536, "cost1_min": 29.92494273683702, "cost2_max": -9.901838797261194, "outflow_rate_mean": 981.8882929776257, "system_level_velocity_min": 10.270799141429041, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.656445177889154}, "info": {"num_steps_trained": 7287264, "load_time_ms": 12.407, "grad_time_ms": 8955.008, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.490827560424805, "vf_loss": 21.49486541748047, "policy_loss": -0.008294095285236835, "kl": 0.01683005504310131, "vf_explained_var": 0.6626954078674316, "entropy": 1.3872586488723755}, "update_time_ms": 8.532, "num_steps_sampled": 7287264, "sample_time_ms": 15450.95}, "episode_len_mean": 646.28, "time_this_iter_s": 23.04212760925293, "pid": 12036, "timesteps_total": 7287264, "hostname": "flow-main", "episodes_total": 3511, "timestamp": 1557227627, "episode_reward_max": 881.9174374374073, "episodes_this_iter": 20, "time_total_s": 4742.099838018417, "time_since_restore": 4742.099838018417}
{"timesteps_since_restore": 7323701, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b00>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-14-12", "episode_reward_min": 51.37614460085208, "timesteps_this_iter": 36437, "training_iteration": 191, "episode_reward_mean": 738.8920444794906, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 191, "custom_metrics": {"cost2_mean": -18.605554216988704, "outflow_rate_max": 1176.3480415584418, "cost1_mean": 293.261494032583, "system_level_velocity_mean": 13.062497592193177, "cost2_min": -27.441507817708533, "cost1_max": 354.1858394745941, "cost1_min": 29.92494273683702, "cost2_max": -9.901838797261194, "outflow_rate_mean": 982.9554180121719, "system_level_velocity_min": 10.350304124823653, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.656445177889154}, "info": {"num_steps_trained": 7323701, "load_time_ms": 12.207, "grad_time_ms": 8919.273, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 24.500850677490234, "vf_loss": 24.505374908447266, "policy_loss": -0.008572823368012905, "kl": 0.01600102335214615, "vf_explained_var": 0.63487309217453, "entropy": 1.3961455821990967}, "update_time_ms": 8.762, "num_steps_sampled": 7323701, "sample_time_ms": 15532.626}, "episode_len_mean": 641.08, "time_this_iter_s": 24.913094758987427, "pid": 12036, "timesteps_total": 7323701, "hostname": "flow-main", "episodes_total": 3533, "timestamp": 1557227652, "episode_reward_max": 881.9174374374073, "episodes_this_iter": 22, "time_total_s": 4767.012932777405, "time_since_restore": 4767.012932777405}
{"timesteps_since_restore": 7360303, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb07b8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-14-36", "episode_reward_min": 51.37614460085208, "timesteps_this_iter": 36602, "training_iteration": 192, "episode_reward_mean": 739.0338676586712, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 192, "custom_metrics": {"cost2_mean": -18.580028145600025, "outflow_rate_max": 1176.3480415584418, "cost1_mean": 295.8830880700178, "system_level_velocity_mean": 13.07269927894286, "cost2_min": -27.441507817708533, "cost1_max": 354.1858394745941, "cost1_min": 29.92494273683702, "cost2_max": -10.29696608095577, "outflow_rate_mean": 986.0557349026553, "system_level_velocity_min": 10.350304124823653, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.596997905342434}, "info": {"num_steps_trained": 7360303, "load_time_ms": 12.031, "grad_time_ms": 8873.623, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 24.28390884399414, "vf_loss": 24.28810691833496, "policy_loss": -0.00822839792817831, "kl": 0.015921995043754578, "vf_explained_var": 0.5966233611106873, "entropy": 1.419716715812683}, "update_time_ms": 8.755, "num_steps_sampled": 7360303, "sample_time_ms": 15567.409}, "episode_len_mean": 646.1, "time_this_iter_s": 23.996111631393433, "pid": 12036, "timesteps_total": 7360303, "hostname": "flow-main", "episodes_total": 3553, "timestamp": 1557227676, "episode_reward_max": 881.9174374374073, "episodes_this_iter": 20, "time_total_s": 4791.009044408798, "time_since_restore": 4791.009044408798}
{"timesteps_since_restore": 7396806, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7208>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-15-00", "episode_reward_min": 132.35432894556908, "timesteps_this_iter": 36503, "training_iteration": 193, "episode_reward_mean": 743.0221295245465, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 193, "custom_metrics": {"cost2_mean": -18.91084695733672, "outflow_rate_max": 1162.3699948051947, "cost1_mean": 300.7685450205769, "system_level_velocity_mean": 13.145585108902583, "cost2_min": -33.79489863795932, "cost1_max": 354.1858394745941, "cost1_min": 63.534429101804214, "cost2_max": -10.828410121557363, "outflow_rate_mean": 997.9172429486626, "system_level_velocity_min": 10.947682285839718, "outflow_rate_min": 443.3384524835332, "system_level_velocity_max": 16.358123785984112}, "info": {"num_steps_trained": 7396806, "load_time_ms": 11.402, "grad_time_ms": 8774.064, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 23.08441925048828, "vf_loss": 23.088998794555664, "policy_loss": -0.008791446685791016, "kl": 0.016638729721307755, "vf_explained_var": 0.6939328908920288, "entropy": 1.4225012063980103}, "update_time_ms": 8.689, "num_steps_sampled": 7396806, "sample_time_ms": 15539.233}, "episode_len_mean": 654.13, "time_this_iter_s": 24.329275369644165, "pid": 12036, "timesteps_total": 7396806, "hostname": "flow-main", "episodes_total": 3574, "timestamp": 1557227700, "episode_reward_max": 881.41351334465, "episodes_this_iter": 21, "time_total_s": 4815.338319778442, "time_since_restore": 4815.338319778442}
{"timesteps_since_restore": 7433624, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b00>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-15-25", "episode_reward_min": 57.03333490760922, "timesteps_this_iter": 36818, "training_iteration": 194, "episode_reward_mean": 744.4664334849605, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 194, "custom_metrics": {"cost2_mean": -19.412356050266258, "outflow_rate_max": 1191.6811688311689, "cost1_mean": 303.22575293764186, "system_level_velocity_mean": 13.107300120470118, "cost2_min": -45.453070949614805, "cost1_max": 354.1858394745941, "cost1_min": 30.4441316379638, "cost2_max": -10.828410121557363, "outflow_rate_mean": 995.5160197675599, "system_level_velocity_min": 6.260821803933618, "outflow_rate_min": 317.89542857142857, "system_level_velocity_max": 16.801786922138113}, "info": {"num_steps_trained": 7433624, "load_time_ms": 11.683, "grad_time_ms": 8706.402, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.272804260253906, "vf_loss": 20.279197692871094, "policy_loss": -0.010248932987451553, "kl": 0.015229932963848114, "vf_explained_var": 0.8219267129898071, "entropy": 1.4422025680541992}, "update_time_ms": 8.422, "num_steps_sampled": 7433624, "sample_time_ms": 15542.453}, "episode_len_mean": 662.87, "time_this_iter_s": 24.383458137512207, "pid": 12036, "timesteps_total": 7433624, "hostname": "flow-main", "episodes_total": 3595, "timestamp": 1557227725, "episode_reward_max": 881.41351334465, "episodes_this_iter": 21, "time_total_s": 4839.721777915955, "time_since_restore": 4839.721777915955}
{"timesteps_since_restore": 7470249, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3a90>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-15-50", "episode_reward_min": 57.03333490760922, "timesteps_this_iter": 36625, "training_iteration": 195, "episode_reward_mean": 755.2413945946063, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 195, "custom_metrics": {"cost2_mean": -19.85537685746894, "outflow_rate_max": 1193.0281974025975, "cost1_mean": 306.60033936400555, "system_level_velocity_mean": 13.04856975911673, "cost2_min": -45.453070949614805, "cost1_max": 359.653799538652, "cost1_min": 30.4441316379638, "cost2_max": -11.940650013198143, "outflow_rate_mean": 1005.5594490089582, "system_level_velocity_min": 6.260821803933618, "outflow_rate_min": 317.89542857142857, "system_level_velocity_max": 16.801786922138113}, "info": {"num_steps_trained": 7470249, "load_time_ms": 11.789, "grad_time_ms": 8702.477, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 19.713729858398438, "vf_loss": 19.71881866455078, "policy_loss": -0.008901168592274189, "kl": 0.01506959181278944, "vf_explained_var": 0.7226777076721191, "entropy": 1.425305724143982}, "update_time_ms": 8.294, "num_steps_sampled": 7470249, "sample_time_ms": 15555.706}, "episode_len_mean": 671.75, "time_this_iter_s": 24.954122066497803, "pid": 12036, "timesteps_total": 7470249, "hostname": "flow-main", "episodes_total": 3615, "timestamp": 1557227750, "episode_reward_max": 881.41351334465, "episodes_this_iter": 20, "time_total_s": 4864.675899982452, "time_since_restore": 4864.675899982452}
{"timesteps_since_restore": 7507084, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0cf8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-16-15", "episode_reward_min": 57.03333490760922, "timesteps_this_iter": 36835, "training_iteration": 196, "episode_reward_mean": 747.2018936760091, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 196, "custom_metrics": {"cost2_mean": -19.696507909917564, "outflow_rate_max": 1193.0281974025975, "cost1_mean": 302.6335629835691, "system_level_velocity_mean": 13.06611862196889, "cost2_min": -45.453070949614805, "cost1_max": 360.62506082176253, "cost1_min": 30.4441316379638, "cost2_max": -11.940650013198143, "outflow_rate_mean": 997.1127737681211, "system_level_velocity_min": 6.260821803933618, "outflow_rate_min": 317.89542857142857, "system_level_velocity_max": 16.801786922138113}, "info": {"num_steps_trained": 7507084, "load_time_ms": 11.8, "grad_time_ms": 8733.579, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.624128341674805, "vf_loss": 20.627178192138672, "policy_loss": -0.006533658131957054, "kl": 0.013768792152404785, "vf_explained_var": 0.7298406362533569, "entropy": 1.4347070455551147}, "update_time_ms": 8.134, "num_steps_sampled": 7507084, "sample_time_ms": 15479.361}, "episode_len_mean": 664.0, "time_this_iter_s": 24.809094190597534, "pid": 12036, "timesteps_total": 7507084, "hostname": "flow-main", "episodes_total": 3635, "timestamp": 1557227775, "episode_reward_max": 881.41351334465, "episodes_this_iter": 20, "time_total_s": 4889.48499417305, "time_since_restore": 4889.48499417305}
{"timesteps_since_restore": 7544838, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3ac8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-16-39", "episode_reward_min": 52.15461804584055, "timesteps_this_iter": 37754, "training_iteration": 197, "episode_reward_mean": 740.4791620585764, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 197, "custom_metrics": {"cost2_mean": -20.207001831220346, "outflow_rate_max": 1241.9926545454543, "cost1_mean": 300.7512910276513, "system_level_velocity_mean": 13.137289866493695, "cost2_min": -45.453070949614805, "cost1_max": 360.62506082176253, "cost1_min": 30.4441316379638, "cost2_max": -11.35650583254363, "outflow_rate_mean": 998.0282214497142, "system_level_velocity_min": 6.260821803933618, "outflow_rate_min": 317.89542857142857, "system_level_velocity_max": 16.89062044769404}, "info": {"num_steps_trained": 7544838, "load_time_ms": 11.963, "grad_time_ms": 8759.352, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 20.406972885131836, "vf_loss": 20.4110107421875, "policy_loss": -0.007895675487816334, "kl": 0.015233853831887245, "vf_explained_var": 0.8738208413124084, "entropy": 1.4933662414550781}, "update_time_ms": 8.24, "num_steps_sampled": 7544838, "sample_time_ms": 15404.128}, "episode_len_mean": 658.2, "time_this_iter_s": 24.066235542297363, "pid": 12036, "timesteps_total": 7544838, "hostname": "flow-main", "episodes_total": 3655, "timestamp": 1557227799, "episode_reward_max": 870.5546984614577, "episodes_this_iter": 20, "time_total_s": 4913.551229715347, "time_since_restore": 4913.551229715347}
{"timesteps_since_restore": 7582324, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb77f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb78d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7668>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-17-03", "episode_reward_min": 52.15461804584055, "timesteps_this_iter": 37486, "training_iteration": 198, "episode_reward_mean": 735.6587841337887, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 198, "custom_metrics": {"cost2_mean": -20.52115072286234, "outflow_rate_max": 1241.9926545454543, "cost1_mean": 299.0466025752456, "system_level_velocity_mean": 13.114850178591006, "cost2_min": -45.453070949614805, "cost1_max": 360.62506082176253, "cost1_min": 30.4441316379638, "cost2_max": -11.35650583254363, "outflow_rate_mean": 992.0466793131221, "system_level_velocity_min": 6.260821803933618, "outflow_rate_min": 317.89542857142857, "system_level_velocity_max": 16.89062044769404}, "info": {"num_steps_trained": 7582324, "load_time_ms": 11.776, "grad_time_ms": 8702.279, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.058513641357422, "vf_loss": 18.063552856445312, "policy_loss": -0.0089340815320611, "kl": 0.015382541343569756, "vf_explained_var": 0.7900184988975525, "entropy": 1.4508236646652222}, "update_time_ms": 8.093, "num_steps_sampled": 7582324, "sample_time_ms": 15455.903}, "episode_len_mean": 655.72, "time_this_iter_s": 24.706690073013306, "pid": 12036, "timesteps_total": 7582324, "hostname": "flow-main", "episodes_total": 3675, "timestamp": 1557227823, "episode_reward_max": 870.5546984614577, "episodes_this_iter": 20, "time_total_s": 4938.257919788361, "time_since_restore": 4938.257919788361}
{"timesteps_since_restore": 7619764, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91940>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-17-29", "episode_reward_min": 52.15461804584055, "timesteps_this_iter": 37440, "training_iteration": 199, "episode_reward_mean": 734.0930359654809, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 199, "custom_metrics": {"cost2_mean": -20.582231315066586, "outflow_rate_max": 1241.9926545454543, "cost1_mean": 296.51180029221723, "system_level_velocity_mean": 13.10148763662164, "cost2_min": -29.397803015424923, "cost1_max": 360.62506082176253, "cost1_min": 30.618151979829406, "cost2_max": -11.35650583254363, "outflow_rate_mean": 990.3113065165185, "system_level_velocity_min": 7.365895694213679, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.89062044769404}, "info": {"num_steps_trained": 7619764, "load_time_ms": 11.41, "grad_time_ms": 8739.792, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.581640243530273, "vf_loss": 19.587493896484375, "policy_loss": -0.010441775433719158, "kl": 0.018125399947166443, "vf_explained_var": 0.7965900897979736, "entropy": 1.4725394248962402}, "update_time_ms": 8.288, "num_steps_sampled": 7619764, "sample_time_ms": 15602.393}, "episode_len_mean": 649.29, "time_this_iter_s": 25.3067684173584, "pid": 12036, "timesteps_total": 7619764, "hostname": "flow-main", "episodes_total": 3697, "timestamp": 1557227849, "episode_reward_max": 890.3388810609159, "episodes_this_iter": 22, "time_total_s": 4963.564688205719, "time_since_restore": 4963.564688205719}
{"timesteps_since_restore": 7656612, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca3860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca35c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca39b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-17-52", "episode_reward_min": 52.15461804584055, "timesteps_this_iter": 36848, "training_iteration": 200, "episode_reward_mean": 735.2059228656618, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 200, "custom_metrics": {"cost2_mean": -20.801805036300085, "outflow_rate_max": 1241.9926545454543, "cost1_mean": 296.6866066884816, "system_level_velocity_mean": 13.188855508864519, "cost2_min": -29.397803015424923, "cost1_max": 360.62506082176253, "cost1_min": 30.618151979829406, "cost2_max": -11.35650583254363, "outflow_rate_mean": 995.6057784090367, "system_level_velocity_min": 7.365895694213679, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.89062044769404}, "info": {"num_steps_trained": 7656612, "load_time_ms": 11.376, "grad_time_ms": 8691.135, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.336084365844727, "vf_loss": 19.340229034423828, "policy_loss": -0.007549910806119442, "kl": 0.013454471714794636, "vf_explained_var": 0.784341037273407, "entropy": 1.4809651374816895}, "update_time_ms": 8.268, "num_steps_sampled": 7656612, "sample_time_ms": 15694.111}, "episode_len_mean": 645.99, "time_this_iter_s": 23.459011554718018, "pid": 12036, "timesteps_total": 7656612, "hostname": "flow-main", "episodes_total": 3716, "timestamp": 1557227872, "episode_reward_max": 893.6529214901313, "episodes_this_iter": 19, "time_total_s": 4987.023699760437, "time_since_restore": 4987.023699760437}
{"timesteps_since_restore": 7693647, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6278>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-18-18", "episode_reward_min": 52.15461804584055, "timesteps_this_iter": 37035, "training_iteration": 201, "episode_reward_mean": 749.5060376551606, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 201, "custom_metrics": {"cost2_mean": -21.019672971022548, "outflow_rate_max": 1241.9926545454543, "cost1_mean": 301.5055512141079, "system_level_velocity_mean": 13.27877781410071, "cost2_min": -27.439146550924125, "cost1_max": 364.35293906050686, "cost1_min": 30.618151979829406, "cost2_max": -11.35650583254363, "outflow_rate_mean": 1006.7832868113245, "system_level_velocity_min": 9.81006452734704, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.89062044769404}, "info": {"num_steps_trained": 7693647, "load_time_ms": 11.39, "grad_time_ms": 8694.475, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.205381393432617, "vf_loss": 22.209598541259766, "policy_loss": -0.007845439948141575, "kl": 0.014331799931824207, "vf_explained_var": 0.6804959774017334, "entropy": 1.4878761768341064}, "update_time_ms": 7.941, "num_steps_sampled": 7693647, "sample_time_ms": 15730.054}, "episode_len_mean": 650.21, "time_this_iter_s": 25.298439025878906, "pid": 12036, "timesteps_total": 7693647, "hostname": "flow-main", "episodes_total": 3738, "timestamp": 1557227898, "episode_reward_max": 923.8329171983024, "episodes_this_iter": 22, "time_total_s": 5012.322138786316, "time_since_restore": 5012.322138786316}
{"timesteps_since_restore": 7731514, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7d30>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-18-42", "episode_reward_min": 135.89113527714193, "timesteps_this_iter": 37867, "training_iteration": 202, "episode_reward_mean": 762.5800165003902, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 202, "custom_metrics": {"cost2_mean": -21.341955038957575, "outflow_rate_max": 1224.9977194805197, "cost1_mean": 303.4773194564727, "system_level_velocity_mean": 13.172483802285347, "cost2_min": -28.63477968928334, "cost1_max": 364.35293906050686, "cost1_min": 65.47063514237814, "cost2_max": -12.34330392477355, "outflow_rate_mean": 1007.3925303645442, "system_level_velocity_min": 9.81006452734704, "outflow_rate_min": 421.3833888094166, "system_level_velocity_max": 16.528988846759617}, "info": {"num_steps_trained": 7731514, "load_time_ms": 11.539, "grad_time_ms": 8752.681, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.482786178588867, "vf_loss": 18.48862648010254, "policy_loss": -0.009656059555709362, "kl": 0.015073980204761028, "vf_explained_var": 0.7889513969421387, "entropy": 1.4981977939605713}, "update_time_ms": 7.758, "num_steps_sampled": 7731514, "sample_time_ms": 15717.08}, "episode_len_mean": 656.36, "time_this_iter_s": 24.45104670524597, "pid": 12036, "timesteps_total": 7731514, "hostname": "flow-main", "episodes_total": 3756, "timestamp": 1557227922, "episode_reward_max": 923.8329171983024, "episodes_this_iter": 18, "time_total_s": 5036.773185491562, "time_since_restore": 5036.773185491562}
{"timesteps_since_restore": 7768652, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91630>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-19-06", "episode_reward_min": 135.89113527714193, "timesteps_this_iter": 37138, "training_iteration": 203, "episode_reward_mean": 783.2592687150992, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 203, "custom_metrics": {"cost2_mean": -21.687854994720524, "outflow_rate_max": 1224.9977194805197, "cost1_mean": 307.23372863796516, "system_level_velocity_mean": 13.106975531157138, "cost2_min": -32.03478308149137, "cost1_max": 364.35293906050686, "cost1_min": 68.45243167434408, "cost2_max": -12.34330392477355, "outflow_rate_mean": 1017.9934512527537, "system_level_velocity_min": 10.544705881541333, "outflow_rate_min": 434.86786424823913, "system_level_velocity_max": 16.528988846759617}, "info": {"num_steps_trained": 7768652, "load_time_ms": 12.056, "grad_time_ms": 8843.535, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 14.689173698425293, "vf_loss": 14.693231582641602, "policy_loss": -0.007489922922104597, "kl": 0.013560810126364231, "vf_explained_var": 0.8832749128341675, "entropy": 1.5096502304077148}, "update_time_ms": 7.601, "num_steps_sampled": 7768652, "sample_time_ms": 15595.698}, "episode_len_mean": 664.69, "time_this_iter_s": 24.036773681640625, "pid": 12036, "timesteps_total": 7768652, "hostname": "flow-main", "episodes_total": 3776, "timestamp": 1557227946, "episode_reward_max": 923.8329171983024, "episodes_this_iter": 20, "time_total_s": 5060.8099591732025, "time_since_restore": 5060.8099591732025}
{"timesteps_since_restore": 7806301, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7240>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-19-31", "episode_reward_min": 49.80742128157318, "timesteps_this_iter": 37649, "training_iteration": 204, "episode_reward_mean": 786.1500152314853, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 204, "custom_metrics": {"cost2_mean": -22.228126527699146, "outflow_rate_max": 1224.9977194805197, "cost1_mean": 307.95376481115795, "system_level_velocity_mean": 13.139620494753169, "cost2_min": -36.32785038172429, "cost1_max": 364.35293906050686, "cost1_min": 31.11159701589862, "cost2_max": -12.34330392477355, "outflow_rate_mean": 1018.4393578702931, "system_level_velocity_min": 10.940021075413904, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.495179198409556}, "info": {"num_steps_trained": 7806301, "load_time_ms": 11.593, "grad_time_ms": 8936.027, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 16.06761932373047, "vf_loss": 16.072837829589844, "policy_loss": -0.008754245005548, "kl": 0.013964906334877014, "vf_explained_var": 0.8444966673851013, "entropy": 1.529595971107483}, "update_time_ms": 7.67, "num_steps_sampled": 7806301, "sample_time_ms": 15548.876}, "episode_len_mean": 664.77, "time_this_iter_s": 24.842278718948364, "pid": 12036, "timesteps_total": 7806301, "hostname": "flow-main", "episodes_total": 3795, "timestamp": 1557227971, "episode_reward_max": 923.8329171983024, "episodes_this_iter": 19, "time_total_s": 5085.652237892151, "time_since_restore": 5085.652237892151}
{"timesteps_since_restore": 7843617, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca66d8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-19-57", "episode_reward_min": 49.80742128157318, "timesteps_this_iter": 37316, "training_iteration": 205, "episode_reward_mean": 775.6669460032208, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 205, "custom_metrics": {"cost2_mean": -22.545093000922044, "outflow_rate_max": 1224.9977194805197, "cost1_mean": 302.2828292315707, "system_level_velocity_mean": 13.168233795623724, "cost2_min": -36.32785038172429, "cost1_max": 363.3243864173362, "cost1_min": 31.11159701589862, "cost2_max": -13.373557746301236, "outflow_rate_mean": 1003.1211246718975, "system_level_velocity_min": 11.050171132076258, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.495179198409556}, "info": {"num_steps_trained": 7843617, "load_time_ms": 11.539, "grad_time_ms": 9002.114, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 20.697765350341797, "vf_loss": 20.70276641845703, "policy_loss": -0.00894984696060419, "kl": 0.015608565881848335, "vf_explained_var": 0.7669845819473267, "entropy": 1.5339535474777222}, "update_time_ms": 7.838, "num_steps_sampled": 7843617, "sample_time_ms": 15600.706}, "episode_len_mean": 652.2, "time_this_iter_s": 26.111974477767944, "pid": 12036, "timesteps_total": 7843617, "hostname": "flow-main", "episodes_total": 3819, "timestamp": 1557227997, "episode_reward_max": 923.8329171983024, "episodes_this_iter": 24, "time_total_s": 5111.764212369919, "time_since_restore": 5111.764212369919}
{"timesteps_since_restore": 7882173, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb588>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbda0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-20-22", "episode_reward_min": 49.80742128157318, "timesteps_this_iter": 38556, "training_iteration": 206, "episode_reward_mean": 772.3527377992999, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 206, "custom_metrics": {"cost2_mean": -23.262509848747246, "outflow_rate_max": 1216.5792311688313, "cost1_mean": 300.60419898792657, "system_level_velocity_mean": 13.120858304907902, "cost2_min": -36.32785038172429, "cost1_max": 363.3243864173362, "cost1_min": 30.724633508706567, "cost2_max": -12.249675864901235, "outflow_rate_mean": 994.1829545388786, "system_level_velocity_min": 10.75017842853373, "outflow_rate_min": 331.3055169108091, "system_level_velocity_max": 17.495179198409556}, "info": {"num_steps_trained": 7882173, "load_time_ms": 11.404, "grad_time_ms": 9095.947, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 12.880303382873535, "vf_loss": 12.886401176452637, "policy_loss": -0.010492091998457909, "kl": 0.017370201647281647, "vf_explained_var": 0.8932758569717407, "entropy": 1.5450587272644043}, "update_time_ms": 8.098, "num_steps_sampled": 7882173, "sample_time_ms": 15497.638}, "episode_len_mean": 651.08, "time_this_iter_s": 24.70251226425171, "pid": 12036, "timesteps_total": 7882173, "hostname": "flow-main", "episodes_total": 3835, "timestamp": 1557228022, "episode_reward_max": 906.0286392987033, "episodes_this_iter": 16, "time_total_s": 5136.4667246341705, "time_since_restore": 5136.4667246341705}
{"timesteps_since_restore": 7919962, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb0f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbf60>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-20-48", "episode_reward_min": 44.120324825669734, "timesteps_this_iter": 37789, "training_iteration": 207, "episode_reward_mean": 755.45519494721, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 207, "custom_metrics": {"cost2_mean": -23.346551710893934, "outflow_rate_max": 1222.0784883116885, "cost1_mean": 292.33014658830103, "system_level_velocity_mean": 13.096398155982827, "cost2_min": -36.32785038172429, "cost1_max": 361.32043830174814, "cost1_min": 27.774911758642055, "cost2_max": -8.16794143658603, "outflow_rate_mean": 975.0753634122566, "system_level_velocity_min": 9.878761964443617, "outflow_rate_min": 331.3055169108091, "system_level_velocity_max": 17.99860323586955}, "info": {"num_steps_trained": 7919962, "load_time_ms": 11.324, "grad_time_ms": 9176.871, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.62139892578125, "vf_loss": 17.627635955810547, "policy_loss": -0.010181532241404057, "kl": 0.015587273053824902, "vf_explained_var": 0.8211306929588318, "entropy": 1.5484987497329712}, "update_time_ms": 8.432, "num_steps_sampled": 7919962, "sample_time_ms": 15637.253}, "episode_len_mean": 636.41, "time_this_iter_s": 26.30220651626587, "pid": 12036, "timesteps_total": 7919962, "hostname": "flow-main", "episodes_total": 3856, "timestamp": 1557228048, "episode_reward_max": 906.0286392987033, "episodes_this_iter": 21, "time_total_s": 5162.768931150436, "time_since_restore": 5162.768931150436}
{"timesteps_since_restore": 7957552, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3128>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-21-13", "episode_reward_min": 43.76751339051371, "timesteps_this_iter": 37590, "training_iteration": 208, "episode_reward_mean": 746.4592029517408, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 208, "custom_metrics": {"cost2_mean": -23.273953143978424, "outflow_rate_max": 1222.0784883116885, "cost1_mean": 290.4821762055472, "system_level_velocity_mean": 13.193438001070042, "cost2_min": -36.32785038172429, "cost1_max": 361.32043830174814, "cost1_min": 26.312178541550608, "cost2_max": -8.16794143658603, "outflow_rate_mean": 972.6760096997345, "system_level_velocity_min": 9.878761964443617, "outflow_rate_min": 331.3055169108091, "system_level_velocity_max": 17.99860323586955}, "info": {"num_steps_trained": 7957552, "load_time_ms": 11.24, "grad_time_ms": 9237.008, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 15.494651794433594, "vf_loss": 15.50048542022705, "policy_loss": -0.009303059428930283, "kl": 0.013708462938666344, "vf_explained_var": 0.8322683572769165, "entropy": 1.5515869855880737}, "update_time_ms": 8.6, "num_steps_sampled": 7957552, "sample_time_ms": 15552.937}, "episode_len_mean": 629.33, "time_this_iter_s": 24.464697122573853, "pid": 12036, "timesteps_total": 7957552, "hostname": "flow-main", "episodes_total": 3875, "timestamp": 1557228073, "episode_reward_max": 906.0286392987033, "episodes_this_iter": 19, "time_total_s": 5187.23362827301, "time_since_restore": 5187.23362827301}
{"timesteps_since_restore": 7995029, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbd68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbba20>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-21-36", "episode_reward_min": 43.76751339051371, "timesteps_this_iter": 37477, "training_iteration": 209, "episode_reward_mean": 762.9096427609553, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 209, "custom_metrics": {"cost2_mean": -23.288068562085577, "outflow_rate_max": 1222.0784883116885, "cost1_mean": 293.627324040974, "system_level_velocity_mean": 13.066157545444801, "cost2_min": -33.5668140242981, "cost1_max": 361.32043830174814, "cost1_min": 26.312178541550608, "cost2_max": -8.16794143658603, "outflow_rate_mean": 983.5546141473687, "system_level_velocity_min": 9.878761964443617, "outflow_rate_min": 331.3055169108091, "system_level_velocity_max": 18.100475384648313}, "info": {"num_steps_trained": 7995029, "load_time_ms": 11.515, "grad_time_ms": 9181.945, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.908721923828125, "vf_loss": 20.914918899536133, "policy_loss": -0.010564805939793587, "kl": 0.017254889011383057, "vf_explained_var": 0.7690382599830627, "entropy": 1.5681976079940796}, "update_time_ms": 8.781, "num_steps_sampled": 7995029, "sample_time_ms": 15420.932}, "episode_len_mean": 639.25, "time_this_iter_s": 23.443049907684326, "pid": 12036, "timesteps_total": 7995029, "hostname": "flow-main", "episodes_total": 3895, "timestamp": 1557228096, "episode_reward_max": 917.4361288971054, "episodes_this_iter": 20, "time_total_s": 5210.676678180695, "time_since_restore": 5210.676678180695}
{"timesteps_since_restore": 8032457, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbba90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb588>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-22-01", "episode_reward_min": 43.76751339051371, "timesteps_this_iter": 37428, "training_iteration": 210, "episode_reward_mean": 783.711351115752, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 210, "custom_metrics": {"cost2_mean": -23.225143734928626, "outflow_rate_max": 1222.0784883116885, "cost1_mean": 299.84710712812847, "system_level_velocity_mean": 12.956172591722542, "cost2_min": -33.5668140242981, "cost1_max": 361.32043830174814, "cost1_min": 26.312178541550608, "cost2_max": -8.16794143658603, "outflow_rate_mean": 998.5129171736305, "system_level_velocity_min": 9.878761964443617, "outflow_rate_min": 331.3055169108091, "system_level_velocity_max": 18.100475384648313}, "info": {"num_steps_trained": 8032457, "load_time_ms": 10.958, "grad_time_ms": 9205.673, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.928741455078125, "vf_loss": 18.933923721313477, "policy_loss": -0.008708847686648369, "kl": 0.013937755487859249, "vf_explained_var": 0.7882365584373474, "entropy": 1.5637474060058594}, "update_time_ms": 8.908, "num_steps_sampled": 8032457, "sample_time_ms": 15564.544}, "episode_len_mean": 653.72, "time_this_iter_s": 25.11506962776184, "pid": 12036, "timesteps_total": 8032457, "hostname": "flow-main", "episodes_total": 3915, "timestamp": 1557228121, "episode_reward_max": 921.13845828217, "episodes_this_iter": 20, "time_total_s": 5235.791747808456, "time_since_restore": 5235.791747808456}
{"timesteps_since_restore": 8069563, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbeb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbf28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbdd8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-22-27", "episode_reward_min": 43.76751339051371, "timesteps_this_iter": 37106, "training_iteration": 211, "episode_reward_mean": 796.6929203125366, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 211, "custom_metrics": {"cost2_mean": -22.774678590190224, "outflow_rate_max": 1225.7053922077923, "cost1_mean": 304.1228077445566, "system_level_velocity_mean": 12.881363449024002, "cost2_min": -33.5668140242981, "cost1_max": 361.32043830174814, "cost1_min": 26.312178541550608, "cost2_max": -8.16794143658603, "outflow_rate_mean": 1012.2470930542878, "system_level_velocity_min": 9.878761964443617, "outflow_rate_min": 332.3017237622831, "system_level_velocity_max": 18.100475384648313}, "info": {"num_steps_trained": 8069563, "load_time_ms": 10.892, "grad_time_ms": 9181.943, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.844261169433594, "vf_loss": 19.848453521728516, "policy_loss": -0.008031913079321384, "kl": 0.015157549642026424, "vf_explained_var": 0.7382171750068665, "entropy": 1.5694849491119385}, "update_time_ms": 9.117, "num_steps_sampled": 8069563, "sample_time_ms": 15588.649}, "episode_len_mean": 663.94, "time_this_iter_s": 25.315733432769775, "pid": 12036, "timesteps_total": 8069563, "hostname": "flow-main", "episodes_total": 3935, "timestamp": 1557228147, "episode_reward_max": 921.2488740290909, "episodes_this_iter": 20, "time_total_s": 5261.107481241226, "time_since_restore": 5261.107481241226}
{"timesteps_since_restore": 8108223, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc915f8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-22-52", "episode_reward_min": 43.76751339051371, "timesteps_this_iter": 38660, "training_iteration": 212, "episode_reward_mean": 812.7289454411448, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 212, "custom_metrics": {"cost2_mean": -22.81263769592621, "outflow_rate_max": 1225.7053922077923, "cost1_mean": 310.13590188540695, "system_level_velocity_mean": 12.850666321506317, "cost2_min": -33.5668140242981, "cost1_max": 361.32043830174814, "cost1_min": 26.312178541550608, "cost2_max": -11.09596416060285, "outflow_rate_mean": 1027.1603749048525, "system_level_velocity_min": 10.6959467478124, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.100475384648313}, "info": {"num_steps_trained": 8108223, "load_time_ms": 10.856, "grad_time_ms": 9184.571, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.951337814331055, "vf_loss": 16.956714630126953, "policy_loss": -0.008939211256802082, "kl": 0.014075023122131824, "vf_explained_var": 0.7773072719573975, "entropy": 1.5795927047729492}, "update_time_ms": 9.27, "num_steps_sampled": 8108223, "sample_time_ms": 15672.543}, "episode_len_mean": 676.36, "time_this_iter_s": 25.323127269744873, "pid": 12036, "timesteps_total": 8108223, "hostname": "flow-main", "episodes_total": 3952, "timestamp": 1557228172, "episode_reward_max": 921.2488740290909, "episodes_this_iter": 17, "time_total_s": 5286.430608510971, "time_since_restore": 5286.430608510971}
{"timesteps_since_restore": 8144921, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-23-17", "episode_reward_min": 44.34696764893432, "timesteps_this_iter": 36698, "training_iteration": 213, "episode_reward_mean": 809.0161539328708, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 213, "custom_metrics": {"cost2_mean": -22.264761482947616, "outflow_rate_max": 1225.7053922077923, "cost1_mean": 308.53312364257704, "system_level_velocity_mean": 12.813149568741663, "cost2_min": -33.5668140242981, "cost1_max": 354.42471239929114, "cost1_min": 26.479158315299202, "cost2_max": -11.524715123832191, "outflow_rate_mean": 1023.6272998505316, "system_level_velocity_min": 10.6959467478124, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 18.100475384648313}, "info": {"num_steps_trained": 8144921, "load_time_ms": 10.725, "grad_time_ms": 9267.724, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.71921157836914, "vf_loss": 21.722768783569336, "policy_loss": -0.00734326709061861, "kl": 0.014949768781661987, "vf_explained_var": 0.6337262988090515, "entropy": 1.5821821689605713}, "update_time_ms": 9.442, "num_steps_sampled": 8144921, "sample_time_ms": 15682.655}, "episode_len_mean": 674.19, "time_this_iter_s": 24.979787588119507, "pid": 12036, "timesteps_total": 8144921, "hostname": "flow-main", "episodes_total": 3973, "timestamp": 1557228197, "episode_reward_max": 921.2488740290909, "episodes_this_iter": 21, "time_total_s": 5311.410396099091, "time_since_restore": 5311.410396099091}
{"timesteps_since_restore": 8182521, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb080>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-23-42", "episode_reward_min": 46.043487556299105, "timesteps_this_iter": 37600, "training_iteration": 214, "episode_reward_mean": 790.7996603658883, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 214, "custom_metrics": {"cost2_mean": -21.639634960433472, "outflow_rate_max": 1225.7053922077923, "cost1_mean": 302.8168684678087, "system_level_velocity_mean": 12.851819852355607, "cost2_min": -29.390953620529935, "cost1_max": 354.42471239929114, "cost1_min": 26.479158315299202, "cost2_max": -11.01511885559818, "outflow_rate_mean": 1007.3319326768838, "system_level_velocity_min": 10.6959467478124, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.733283429922665}, "info": {"num_steps_trained": 8182521, "load_time_ms": 10.738, "grad_time_ms": 9272.412, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.364500045776367, "vf_loss": 22.36985969543457, "policy_loss": -0.009214662946760654, "kl": 0.015219688415527344, "vf_explained_var": 0.6642507314682007, "entropy": 1.610335111618042}, "update_time_ms": 9.559, "num_steps_sampled": 8182521, "sample_time_ms": 15698.593}, "episode_len_mean": 661.37, "time_this_iter_s": 25.071885108947754, "pid": 12036, "timesteps_total": 8182521, "hostname": "flow-main", "episodes_total": 3994, "timestamp": 1557228222, "episode_reward_max": 921.2488740290909, "episodes_this_iter": 21, "time_total_s": 5336.482281208038, "time_since_restore": 5336.482281208038}
{"timesteps_since_restore": 8219707, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7fd0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-24-06", "episode_reward_min": 46.043487556299105, "timesteps_this_iter": 37186, "training_iteration": 215, "episode_reward_mean": 788.4597481291307, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 215, "custom_metrics": {"cost2_mean": -21.273203059469303, "outflow_rate_max": 1225.7053922077923, "cost1_mean": 302.7753062261642, "system_level_velocity_mean": 12.835518363574854, "cost2_min": -29.608224875602588, "cost1_max": 354.42471239929114, "cost1_min": 26.479158315299202, "cost2_max": -11.01511885559818, "outflow_rate_mean": 1006.7559112223383, "system_level_velocity_min": 10.658705406574088, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.733283429922665}, "info": {"num_steps_trained": 8219707, "load_time_ms": 10.683, "grad_time_ms": 9283.052, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.71579360961914, "vf_loss": 16.721773147583008, "policy_loss": -0.009559222497045994, "kl": 0.014140444807708263, "vf_explained_var": 0.7802881002426147, "entropy": 1.6047245264053345}, "update_time_ms": 9.626, "num_steps_sampled": 8219707, "sample_time_ms": 15472.434}, "episode_len_mean": 662.75, "time_this_iter_s": 23.954038858413696, "pid": 12036, "timesteps_total": 8219707, "hostname": "flow-main", "episodes_total": 4011, "timestamp": 1557228246, "episode_reward_max": 921.2488740290909, "episodes_this_iter": 17, "time_total_s": 5360.436320066452, "time_since_restore": 5360.436320066452}
{"timesteps_since_restore": 8256830, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbda0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-24-31", "episode_reward_min": 46.043487556299105, "timesteps_this_iter": 37123, "training_iteration": 216, "episode_reward_mean": 783.1307725046058, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 216, "custom_metrics": {"cost2_mean": -21.339762816913026, "outflow_rate_max": 1225.7053922077923, "cost1_mean": 301.57572736545745, "system_level_velocity_mean": 12.88077791002629, "cost2_min": -31.88643678604182, "cost1_max": 354.42471239929114, "cost1_min": 26.479158315299202, "cost2_max": -11.01511885559818, "outflow_rate_mean": 1007.9813589400583, "system_level_velocity_min": 9.344701846145721, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.733283429922665}, "info": {"num_steps_trained": 8256830, "load_time_ms": 10.334, "grad_time_ms": 9273.91, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.73235511779785, "vf_loss": 20.73711585998535, "policy_loss": -0.00855564046651125, "kl": 0.014984814450144768, "vf_explained_var": 0.7308436632156372, "entropy": 1.604889988899231}, "update_time_ms": 9.638, "num_steps_sampled": 8256830, "sample_time_ms": 15460.042}, "episode_len_mean": 659.06, "time_this_iter_s": 24.495245695114136, "pid": 12036, "timesteps_total": 8256830, "hostname": "flow-main", "episodes_total": 4031, "timestamp": 1557228271, "episode_reward_max": 897.793817980577, "episodes_this_iter": 20, "time_total_s": 5384.931565761566, "time_since_restore": 5384.931565761566}
{"timesteps_since_restore": 8294454, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3d68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-24-55", "episode_reward_min": 46.043487556299105, "timesteps_this_iter": 37624, "training_iteration": 217, "episode_reward_mean": 784.3674447301591, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 217, "custom_metrics": {"cost2_mean": -21.281926837838224, "outflow_rate_max": 1211.733012987013, "cost1_mean": 302.8477885272233, "system_level_velocity_mean": 12.837291891478065, "cost2_min": -31.88643678604182, "cost1_max": 355.8340067637667, "cost1_min": 26.479158315299202, "cost2_max": -11.01511885559818, "outflow_rate_mean": 1009.8208449706262, "system_level_velocity_min": 9.344701846145721, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.733283429922665}, "info": {"num_steps_trained": 8294454, "load_time_ms": 10.144, "grad_time_ms": 9236.819, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.90238380432129, "vf_loss": 16.90625, "policy_loss": -0.0077691092155873775, "kl": 0.015425414778292179, "vf_explained_var": 0.7565035820007324, "entropy": 1.5804754495620728}, "update_time_ms": 9.564, "num_steps_sampled": 8294454, "sample_time_ms": 15335.504}, "episode_len_mean": 661.78, "time_this_iter_s": 24.67776918411255, "pid": 12036, "timesteps_total": 8294454, "hostname": "flow-main", "episodes_total": 4050, "timestamp": 1557228295, "episode_reward_max": 897.941945830219, "episodes_this_iter": 19, "time_total_s": 5409.609334945679, "time_since_restore": 5409.609334945679}
{"timesteps_since_restore": 8331931, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cb70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c9e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-25-20", "episode_reward_min": 140.81888522925522, "timesteps_this_iter": 37477, "training_iteration": 218, "episode_reward_mean": 788.7638690640931, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 218, "custom_metrics": {"cost2_mean": -21.89481768137195, "outflow_rate_max": 1202.310051948052, "cost1_mean": 303.13793371990783, "system_level_velocity_mean": 12.747540679576906, "cost2_min": -33.13347698948538, "cost1_max": 355.8340067637667, "cost1_min": 62.23899917775414, "cost2_max": -11.01511885559818, "outflow_rate_mean": 1009.6490505094903, "system_level_velocity_min": 9.344701846145721, "outflow_rate_min": 412.07794828185257, "system_level_velocity_max": 15.34203484417958}, "info": {"num_steps_trained": 8331931, "load_time_ms": 10.255, "grad_time_ms": 9177.415, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.839553833007812, "vf_loss": 17.844144821166992, "policy_loss": -0.008453055284917355, "kl": 0.015266678296029568, "vf_explained_var": 0.7842622399330139, "entropy": 1.5725281238555908}, "update_time_ms": 9.63, "num_steps_sampled": 8331931, "sample_time_ms": 15421.011}, "episode_len_mean": 663.35, "time_this_iter_s": 24.749186992645264, "pid": 12036, "timesteps_total": 8331931, "hostname": "flow-main", "episodes_total": 4070, "timestamp": 1557228320, "episode_reward_max": 897.941945830219, "episodes_this_iter": 20, "time_total_s": 5434.358521938324, "time_since_restore": 5434.358521938324}
{"timesteps_since_restore": 8369933, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb30f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3128>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-25-46", "episode_reward_min": 140.81888522925522, "timesteps_this_iter": 38002, "training_iteration": 219, "episode_reward_mean": 802.9493073160281, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 219, "custom_metrics": {"cost2_mean": -22.337240702908552, "outflow_rate_max": 1212.8514961038961, "cost1_mean": 307.7453863644187, "system_level_velocity_mean": 12.733604170024906, "cost2_min": -33.13347698948538, "cost1_max": 359.6391371582307, "cost1_min": 62.23899917775414, "cost2_max": -11.01511885559818, "outflow_rate_mean": 1024.2218515940733, "system_level_velocity_min": 9.344701846145721, "outflow_rate_min": 412.07794828185257, "system_level_velocity_max": 15.34203484417958}, "info": {"num_steps_trained": 8369933, "load_time_ms": 10.293, "grad_time_ms": 9184.15, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 15.804659843444824, "vf_loss": 15.810464859008789, "policy_loss": -0.009558903984725475, "kl": 0.014837854541838169, "vf_explained_var": 0.7524530291557312, "entropy": 1.5507861375808716}, "update_time_ms": 9.452, "num_steps_sampled": 8369933, "sample_time_ms": 15613.278}, "episode_len_mean": 672.15, "time_this_iter_s": 25.42885994911194, "pid": 12036, "timesteps_total": 8369933, "hostname": "flow-main", "episodes_total": 4086, "timestamp": 1557228346, "episode_reward_max": 906.8960463674326, "episodes_this_iter": 16, "time_total_s": 5459.787381887436, "time_since_restore": 5459.787381887436}
{"timesteps_since_restore": 8407242, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-26-11", "episode_reward_min": 284.40721094219947, "timesteps_this_iter": 37309, "training_iteration": 220, "episode_reward_mean": 809.0070741041689, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 220, "custom_metrics": {"cost2_mean": -22.86199360969062, "outflow_rate_max": 1212.8514961038961, "cost1_mean": 309.71180618870466, "system_level_velocity_mean": 12.802355749834144, "cost2_min": -33.13347698948538, "cost1_max": 359.6391371582307, "cost1_min": 117.57197153374753, "cost2_max": -15.653190209899757, "outflow_rate_mean": 1038.5316166595994, "system_level_velocity_min": 9.344701846145721, "outflow_rate_min": 655.276749432134, "system_level_velocity_max": 15.34203484417958}, "info": {"num_steps_trained": 8407242, "load_time_ms": 10.703, "grad_time_ms": 9139.59, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 22.528440475463867, "vf_loss": 22.53358268737793, "policy_loss": -0.009014357812702656, "kl": 0.015294918790459633, "vf_explained_var": 0.7105627655982971, "entropy": 1.5643720626831055}, "update_time_ms": 9.591, "num_steps_sampled": 8407242, "sample_time_ms": 15656.257}, "episode_len_mean": 672.05, "time_this_iter_s": 25.126144886016846, "pid": 12036, "timesteps_total": 8407242, "hostname": "flow-main", "episodes_total": 4108, "timestamp": 1557228371, "episode_reward_max": 906.8960463674326, "episodes_this_iter": 22, "time_total_s": 5484.913526773453, "time_since_restore": 5484.913526773453}
{"timesteps_since_restore": 8445224, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0a20>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-26-36", "episode_reward_min": 185.22032962979645, "timesteps_this_iter": 37982, "training_iteration": 221, "episode_reward_mean": 810.3341075197375, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 221, "custom_metrics": {"cost2_mean": -23.118131713797375, "outflow_rate_max": 1212.8514961038961, "cost1_mean": 309.58302936407466, "system_level_velocity_mean": 12.818151775586962, "cost2_min": -33.13347698948538, "cost1_max": 359.6391371582307, "cost1_min": 81.58052210925925, "cost2_max": -14.814957866347614, "outflow_rate_mean": 1034.078737429243, "system_level_velocity_min": 10.05028394319366, "outflow_rate_min": 504.3107564331282, "system_level_velocity_max": 14.97867231168374}, "info": {"num_steps_trained": 8445224, "load_time_ms": 10.807, "grad_time_ms": 9103.736, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 14.9400053024292, "vf_loss": 14.944722175598145, "policy_loss": -0.008819911628961563, "kl": 0.016208628192543983, "vf_explained_var": 0.7880127429962158, "entropy": 1.5694031715393066}, "update_time_ms": 9.458, "num_steps_sampled": 8445224, "sample_time_ms": 15657.275}, "episode_len_mean": 671.23, "time_this_iter_s": 24.9563627243042, "pid": 12036, "timesteps_total": 8445224, "hostname": "flow-main", "episodes_total": 4123, "timestamp": 1557228396, "episode_reward_max": 906.8960463674326, "episodes_this_iter": 15, "time_total_s": 5509.869889497757, "time_since_restore": 5509.869889497757}
{"timesteps_since_restore": 8482642, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ce10>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-27-01", "episode_reward_min": 185.22032962979645, "timesteps_this_iter": 37418, "training_iteration": 222, "episode_reward_mean": 818.5380493810295, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 222, "custom_metrics": {"cost2_mean": -23.544577851842018, "outflow_rate_max": 1212.8514961038961, "cost1_mean": 311.6019164714113, "system_level_velocity_mean": 12.776791097131587, "cost2_min": -33.28827551936293, "cost1_max": 359.6391371582307, "cost1_min": 81.58052210925925, "cost2_max": -14.814957866347614, "outflow_rate_mean": 1036.973856416219, "system_level_velocity_min": 10.05028394319366, "outflow_rate_min": 504.3107564331282, "system_level_velocity_max": 14.97867231168374}, "info": {"num_steps_trained": 8482642, "load_time_ms": 10.886, "grad_time_ms": 9006.143, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.17586326599121, "vf_loss": 19.180788040161133, "policy_loss": -0.008935114368796349, "kl": 0.0158481877297163, "vf_explained_var": 0.7308518886566162, "entropy": 1.5602953433990479}, "update_time_ms": 9.258, "num_steps_sampled": 8482642, "sample_time_ms": 15724.99}, "episode_len_mean": 676.17, "time_this_iter_s": 25.025859832763672, "pid": 12036, "timesteps_total": 8482642, "hostname": "flow-main", "episodes_total": 4144, "timestamp": 1557228421, "episode_reward_max": 906.8960463674326, "episodes_this_iter": 21, "time_total_s": 5534.895749330521, "time_since_restore": 5534.895749330521}
{"timesteps_since_restore": 8520575, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-27-27", "episode_reward_min": 147.97357100704218, "timesteps_this_iter": 37933, "training_iteration": 223, "episode_reward_mean": 802.6009640484813, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 223, "custom_metrics": {"cost2_mean": -23.31266110568297, "outflow_rate_max": 1226.9405974025974, "cost1_mean": 305.9662160045175, "system_level_velocity_mean": 12.917135441659463, "cost2_min": -33.28827551936293, "cost1_max": 359.6391371582307, "cost1_min": 71.40335534988529, "cost2_max": -13.824981813574052, "outflow_rate_mean": 1027.1563517661539, "system_level_velocity_min": 10.54882217834517, "outflow_rate_min": 445.4684393689869, "system_level_velocity_max": 16.729775880596303}, "info": {"num_steps_trained": 8520575, "load_time_ms": 10.808, "grad_time_ms": 8872.197, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 24.447463989257812, "vf_loss": 24.452301025390625, "policy_loss": -0.008676263503730297, "kl": 0.015164520591497421, "vf_explained_var": 0.6797091364860535, "entropy": 1.5617356300354004}, "update_time_ms": 9.09, "num_steps_sampled": 8520575, "sample_time_ms": 15954.345}, "episode_len_mean": 661.84, "time_this_iter_s": 25.916807889938354, "pid": 12036, "timesteps_total": 8520575, "hostname": "flow-main", "episodes_total": 4167, "timestamp": 1557228447, "episode_reward_max": 922.8116312829968, "episodes_this_iter": 23, "time_total_s": 5560.812557220459, "time_since_restore": 5560.812557220459}
{"timesteps_since_restore": 8558665, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3d30>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-27-51", "episode_reward_min": 147.97357100704218, "timesteps_this_iter": 38090, "training_iteration": 224, "episode_reward_mean": 802.9388701412721, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 224, "custom_metrics": {"cost2_mean": -23.249820130041734, "outflow_rate_max": 1226.9405974025974, "cost1_mean": 304.2134110587002, "system_level_velocity_mean": 12.788064935589142, "cost2_min": -33.28827551936293, "cost1_max": 353.9334264174768, "cost1_min": 71.40335534988529, "cost2_max": -13.824981813574052, "outflow_rate_mean": 1018.6748018826441, "system_level_velocity_min": 10.54882217834517, "outflow_rate_min": 445.4684393689869, "system_level_velocity_max": 16.729775880596303}, "info": {"num_steps_trained": 8558665, "load_time_ms": 10.823, "grad_time_ms": 8786.402, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 15.764169692993164, "vf_loss": 15.769587516784668, "policy_loss": -0.009439964778721333, "kl": 0.015898197889328003, "vf_explained_var": 0.74281245470047, "entropy": 1.5521591901779175}, "update_time_ms": 8.851, "num_steps_sampled": 8558665, "sample_time_ms": 15971.433}, "episode_len_mean": 662.98, "time_this_iter_s": 24.354935884475708, "pid": 12036, "timesteps_total": 8558665, "hostname": "flow-main", "episodes_total": 4183, "timestamp": 1557228471, "episode_reward_max": 922.8116312829968, "episodes_this_iter": 16, "time_total_s": 5585.167493104935, "time_since_restore": 5585.167493104935}
{"timesteps_since_restore": 8596805, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc95ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0400>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-28-16", "episode_reward_min": 147.97357100704218, "timesteps_this_iter": 38140, "training_iteration": 225, "episode_reward_mean": 799.0334444527616, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 225, "custom_metrics": {"cost2_mean": -22.968564705371556, "outflow_rate_max": 1226.9405974025974, "cost1_mean": 301.0116649931005, "system_level_velocity_mean": 12.696551882702328, "cost2_min": -33.28827551936293, "cost1_max": 360.1885514402958, "cost1_min": 71.40335534988529, "cost2_max": -13.824981813574052, "outflow_rate_mean": 1005.7287705002162, "system_level_velocity_min": 10.54882217834517, "outflow_rate_min": 445.4684393689869, "system_level_velocity_max": 16.729775880596303}, "info": {"num_steps_trained": 8596805, "load_time_ms": 10.433, "grad_time_ms": 8714.496, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.10592269897461, "vf_loss": 19.109424591064453, "policy_loss": -0.0074646915309131145, "kl": 0.01565374992787838, "vf_explained_var": 0.6818882822990417, "entropy": 1.5762357711791992}, "update_time_ms": 8.614, "num_steps_sampled": 8596805, "sample_time_ms": 16157.674}, "episode_len_mean": 660.77, "time_this_iter_s": 25.111059427261353, "pid": 12036, "timesteps_total": 8596805, "hostname": "flow-main", "episodes_total": 4201, "timestamp": 1557228496, "episode_reward_max": 922.8116312829968, "episodes_this_iter": 18, "time_total_s": 5610.278552532196, "time_since_restore": 5610.278552532196}
{"timesteps_since_restore": 8633845, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc910f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc912b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-28-41", "episode_reward_min": 147.97357100704218, "timesteps_this_iter": 37040, "training_iteration": 226, "episode_reward_mean": 803.3629016068271, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 226, "custom_metrics": {"cost2_mean": -23.081009728696426, "outflow_rate_max": 1242.0529974025974, "cost1_mean": 302.9598201216751, "system_level_velocity_mean": 12.69270064181315, "cost2_min": -33.28827551936293, "cost1_max": 362.1230939669645, "cost1_min": 71.40335534988529, "cost2_max": -13.824981813574052, "outflow_rate_mean": 1015.4561308151256, "system_level_velocity_min": 10.54882217834517, "outflow_rate_min": 445.4684393689869, "system_level_velocity_max": 16.729775880596303}, "info": {"num_steps_trained": 8633845, "load_time_ms": 10.941, "grad_time_ms": 8623.205, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.507160186767578, "vf_loss": 22.511425018310547, "policy_loss": -0.007843108847737312, "kl": 0.014141112565994263, "vf_explained_var": 0.6152572631835938, "entropy": 1.5448099374771118}, "update_time_ms": 8.358, "num_steps_sampled": 8633845, "sample_time_ms": 16295.319}, "episode_len_mean": 664.12, "time_this_iter_s": 24.94208526611328, "pid": 12036, "timesteps_total": 8633845, "hostname": "flow-main", "episodes_total": 4222, "timestamp": 1557228521, "episode_reward_max": 922.8116312829968, "episodes_this_iter": 21, "time_total_s": 5635.220637798309, "time_since_restore": 5635.220637798309}
{"timesteps_since_restore": 8671392, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6240>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-29-08", "episode_reward_min": 147.97357100704218, "timesteps_this_iter": 37547, "training_iteration": 227, "episode_reward_mean": 796.2301102670892, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 227, "custom_metrics": {"cost2_mean": -22.757986000028495, "outflow_rate_max": 1242.0529974025974, "cost1_mean": 302.4956801048877, "system_level_velocity_mean": 12.817954782792153, "cost2_min": -33.28827551936293, "cost1_max": 362.1230939669645, "cost1_min": 71.40335534988529, "cost2_max": -12.847690447041641, "outflow_rate_mean": 1019.3254891212335, "system_level_velocity_min": 10.54882217834517, "outflow_rate_min": 445.4684393689869, "system_level_velocity_max": 16.729775880596303}, "info": {"num_steps_trained": 8671392, "load_time_ms": 11.025, "grad_time_ms": 8650.086, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.640504837036133, "vf_loss": 22.645877838134766, "policy_loss": -0.009838703088462353, "kl": 0.017651746049523354, "vf_explained_var": 0.6673921346664429, "entropy": 1.5848798751831055}, "update_time_ms": 8.321, "num_steps_sampled": 8671392, "sample_time_ms": 16431.916}, "episode_len_mean": 658.71, "time_this_iter_s": 26.286810398101807, "pid": 12036, "timesteps_total": 8671392, "hostname": "flow-main", "episodes_total": 4242, "timestamp": 1557228548, "episode_reward_max": 922.8116312829968, "episodes_this_iter": 20, "time_total_s": 5661.507448196411, "time_since_restore": 5661.507448196411}
{"timesteps_since_restore": 8709102, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7588>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-29-32", "episode_reward_min": 147.97357100704218, "timesteps_this_iter": 37710, "training_iteration": 228, "episode_reward_mean": 811.8648378229191, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 228, "custom_metrics": {"cost2_mean": -22.78657831908076, "outflow_rate_max": 1242.0529974025974, "cost1_mean": 306.24937034973516, "system_level_velocity_mean": 12.659885315515435, "cost2_min": -32.920799653435665, "cost1_max": 362.1230939669645, "cost1_min": 71.40335534988529, "cost2_max": -12.847690447041641, "outflow_rate_mean": 1022.970506777526, "system_level_velocity_min": 10.54882217834517, "outflow_rate_min": 445.4684393689869, "system_level_velocity_max": 16.729775880596303}, "info": {"num_steps_trained": 8709102, "load_time_ms": 11.059, "grad_time_ms": 8630.188, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.33827018737793, "vf_loss": 18.342472076416016, "policy_loss": -0.008141808211803436, "kl": 0.015565946698188782, "vf_explained_var": 0.7476329207420349, "entropy": 1.5774390697479248}, "update_time_ms": 8.219, "num_steps_sampled": 8709102, "sample_time_ms": 16462.065}, "episode_len_mean": 671.48, "time_this_iter_s": 24.824695825576782, "pid": 12036, "timesteps_total": 8709102, "hostname": "flow-main", "episodes_total": 4260, "timestamp": 1557228572, "episode_reward_max": 922.3284580722922, "episodes_this_iter": 18, "time_total_s": 5686.332144021988, "time_since_restore": 5686.332144021988}
{"timesteps_since_restore": 8746734, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb75f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb74e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7cc0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-29-56", "episode_reward_min": 193.34557799435362, "timesteps_this_iter": 37632, "training_iteration": 229, "episode_reward_mean": 826.8896127838639, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 229, "custom_metrics": {"cost2_mean": -22.768469859847947, "outflow_rate_max": 1242.0529974025974, "cost1_mean": 311.5589030108669, "system_level_velocity_mean": 12.636149932292652, "cost2_min": -32.920799653435665, "cost1_max": 362.1230939669645, "cost1_min": 87.79977987326896, "cost2_max": -12.847690447041641, "outflow_rate_mean": 1034.557282993566, "system_level_velocity_min": 10.663422288029548, "outflow_rate_min": 537.4294078335878, "system_level_velocity_max": 15.750989032532027}, "info": {"num_steps_trained": 8746734, "load_time_ms": 10.798, "grad_time_ms": 8595.728, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.625743865966797, "vf_loss": 17.631633758544922, "policy_loss": -0.009809841401875019, "kl": 0.015486840158700943, "vf_explained_var": 0.7284101843833923, "entropy": 1.5654946565628052}, "update_time_ms": 8.235, "num_steps_sampled": 8746734, "sample_time_ms": 16340.153}, "episode_len_mean": 681.96, "time_this_iter_s": 23.870535373687744, "pid": 12036, "timesteps_total": 8746734, "hostname": "flow-main", "episodes_total": 4276, "timestamp": 1557228596, "episode_reward_max": 922.3284580722922, "episodes_this_iter": 16, "time_total_s": 5710.202679395676, "time_since_restore": 5710.202679395676}
{"timesteps_since_restore": 8784740, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cb00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cf60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cb38>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-30-22", "episode_reward_min": 44.7096272729043, "timesteps_this_iter": 38006, "training_iteration": 230, "episode_reward_mean": 822.7464397952898, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 230, "custom_metrics": {"cost2_mean": -23.129142848365376, "outflow_rate_max": 1242.0529974025974, "cost1_mean": 312.48246672294607, "system_level_velocity_mean": 12.750529587499921, "cost2_min": -30.866060635522402, "cost1_max": 362.1230939669645, "cost1_min": 27.039301292129053, "cost2_max": -11.831828250339099, "outflow_rate_mean": 1035.8577579059177, "system_level_velocity_min": 10.663422288029548, "outflow_rate_min": 329.0289964895558, "system_level_velocity_max": 16.934723092093854}, "info": {"num_steps_trained": 8784740, "load_time_ms": 10.828, "grad_time_ms": 8606.245, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.1104679107666, "vf_loss": 22.116437911987305, "policy_loss": -0.009837973862886429, "kl": 0.015277251601219177, "vf_explained_var": 0.6863616704940796, "entropy": 1.5678733587265015}, "update_time_ms": 8.193, "num_steps_sampled": 8784740, "sample_time_ms": 16339.876}, "episode_len_mean": 679.82, "time_this_iter_s": 25.210449695587158, "pid": 12036, "timesteps_total": 8784740, "hostname": "flow-main", "episodes_total": 4297, "timestamp": 1557228622, "episode_reward_max": 922.3284580722922, "episodes_this_iter": 21, "time_total_s": 5735.413129091263, "time_since_restore": 5735.413129091263}
{"timesteps_since_restore": 8822081, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3780>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-30-47", "episode_reward_min": 44.7096272729043, "timesteps_this_iter": 37341, "training_iteration": 231, "episode_reward_mean": 821.9498327068592, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 231, "custom_metrics": {"cost2_mean": -23.23373332295484, "outflow_rate_max": 1242.0529974025974, "cost1_mean": 312.8422605909974, "system_level_velocity_mean": 12.84435542614552, "cost2_min": -30.866060635522402, "cost1_max": 362.1230939669645, "cost1_min": 27.039301292129053, "cost2_max": -11.831828250339099, "outflow_rate_mean": 1036.6981654633514, "system_level_velocity_min": 10.885506961443417, "outflow_rate_min": 329.0289964895558, "system_level_velocity_max": 16.934723092093854}, "info": {"num_steps_trained": 8822081, "load_time_ms": 10.88, "grad_time_ms": 8568.037, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.084749221801758, "vf_loss": 18.08930015563965, "policy_loss": -0.008512943051755428, "kl": 0.01565045490860939, "vf_explained_var": 0.7396599650382996, "entropy": 1.5529115200042725}, "update_time_ms": 8.354, "num_steps_sampled": 8822081, "sample_time_ms": 16389.598}, "episode_len_mean": 676.61, "time_this_iter_s": 25.077732801437378, "pid": 12036, "timesteps_total": 8822081, "hostname": "flow-main", "episodes_total": 4315, "timestamp": 1557228647, "episode_reward_max": 922.3284580722922, "episodes_this_iter": 18, "time_total_s": 5760.4908618927, "time_since_restore": 5760.4908618927}
{"timesteps_since_restore": 8859916, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb05f8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-31-11", "episode_reward_min": 44.7096272729043, "timesteps_this_iter": 37835, "training_iteration": 232, "episode_reward_mean": 827.6897088738318, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 232, "custom_metrics": {"cost2_mean": -23.400543106595848, "outflow_rate_max": 1194.0476311688312, "cost1_mean": 313.1402076053227, "system_level_velocity_mean": 12.731601276620486, "cost2_min": -32.18243175818999, "cost1_max": 361.1754157201708, "cost1_min": 27.039301292129053, "cost2_max": -11.831828250339099, "outflow_rate_mean": 1034.9554309672417, "system_level_velocity_min": 10.386735541465379, "outflow_rate_min": 329.0289964895558, "system_level_velocity_max": 16.934723092093854}, "info": {"num_steps_trained": 8859916, "load_time_ms": 10.859, "grad_time_ms": 8596.773, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.013090133666992, "vf_loss": 18.017940521240234, "policy_loss": -0.008768673986196518, "kl": 0.015482950955629349, "vf_explained_var": 0.7420628070831299, "entropy": 1.561786413192749}, "update_time_ms": 8.408, "num_steps_sampled": 8859916, "sample_time_ms": 16327.804}, "episode_len_mean": 680.97, "time_this_iter_s": 24.688679456710815, "pid": 12036, "timesteps_total": 8859916, "hostname": "flow-main", "episodes_total": 4332, "timestamp": 1557228671, "episode_reward_max": 916.0519455968822, "episodes_this_iter": 17, "time_total_s": 5785.179541349411, "time_since_restore": 5785.179541349411}
{"timesteps_since_restore": 8897525, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb78d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7cc0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-31-36", "episode_reward_min": 44.7096272729043, "timesteps_this_iter": 37609, "training_iteration": 233, "episode_reward_mean": 835.2300338281623, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 233, "custom_metrics": {"cost2_mean": -23.72689747468065, "outflow_rate_max": 1214.070877922078, "cost1_mean": 314.8942742084005, "system_level_velocity_mean": 12.686612172608966, "cost2_min": -32.18243175818999, "cost1_max": 356.7446443106887, "cost1_min": 27.039301292129053, "cost2_max": -11.831828250339099, "outflow_rate_mean": 1037.2914162992151, "system_level_velocity_min": 10.386735541465379, "outflow_rate_min": 329.0289964895558, "system_level_velocity_max": 16.934723092093854}, "info": {"num_steps_trained": 8897525, "load_time_ms": 11.051, "grad_time_ms": 8579.928, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.135509490966797, "vf_loss": 17.14020538330078, "policy_loss": -0.008577650412917137, "kl": 0.015336023643612862, "vf_explained_var": 0.7484474778175354, "entropy": 1.556555986404419}, "update_time_ms": 8.392, "num_steps_sampled": 8897525, "sample_time_ms": 16181.215}, "episode_len_mean": 685.58, "time_this_iter_s": 24.28768491744995, "pid": 12036, "timesteps_total": 8897525, "hostname": "flow-main", "episodes_total": 4351, "timestamp": 1557228696, "episode_reward_max": 916.0519455968822, "episodes_this_iter": 19, "time_total_s": 5809.467226266861, "time_since_restore": 5809.467226266861}
{"timesteps_since_restore": 8935407, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91400>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-32-02", "episode_reward_min": 44.7096272729043, "timesteps_this_iter": 37882, "training_iteration": 234, "episode_reward_mean": 827.3954810513335, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 234, "custom_metrics": {"cost2_mean": -23.802925855289068, "outflow_rate_max": 1216.9105402597402, "cost1_mean": 313.66660327727965, "system_level_velocity_mean": 12.818451053485939, "cost2_min": -33.94617388021368, "cost1_max": 356.7446443106887, "cost1_min": 25.970194383927073, "cost2_max": -10.024704686515491, "outflow_rate_mean": 1037.3354887884918, "system_level_velocity_min": 10.386735541465379, "outflow_rate_min": 329.0289964895558, "system_level_velocity_max": 17.35340703774621}, "info": {"num_steps_trained": 8935407, "load_time_ms": 11.258, "grad_time_ms": 8595.192, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.882171630859375, "vf_loss": 21.886030197143555, "policy_loss": -0.00767275458201766, "kl": 0.01506644394248724, "vf_explained_var": 0.7183195352554321, "entropy": 1.5692068338394165}, "update_time_ms": 8.728, "num_steps_sampled": 8935407, "sample_time_ms": 16311.495}, "episode_len_mean": 679.01, "time_this_iter_s": 25.82647132873535, "pid": 12036, "timesteps_total": 8935407, "hostname": "flow-main", "episodes_total": 4373, "timestamp": 1557228722, "episode_reward_max": 937.2475016158758, "episodes_this_iter": 22, "time_total_s": 5835.293697595596, "time_since_restore": 5835.293697595596}
{"timesteps_since_restore": 8973719, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c9e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cbe0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c6d8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-32-27", "episode_reward_min": 45.92556595594483, "timesteps_this_iter": 38312, "training_iteration": 235, "episode_reward_mean": 835.671402386703, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 235, "custom_metrics": {"cost2_mean": -24.014103594218273, "outflow_rate_max": 1216.9105402597402, "cost1_mean": 315.86304712645654, "system_level_velocity_mean": 12.782852352746227, "cost2_min": -33.94617388021368, "cost1_max": 356.7446443106887, "cost1_min": 25.970194383927073, "cost2_max": -10.024704686515491, "outflow_rate_mean": 1043.00304699542, "system_level_velocity_min": 10.386735541465379, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.35340703774621}, "info": {"num_steps_trained": 8973719, "load_time_ms": 11.853, "grad_time_ms": 8630.965, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 14.85582447052002, "vf_loss": 14.861390113830566, "policy_loss": -0.009794585406780243, "kl": 0.016706308349967003, "vf_explained_var": 0.7987552285194397, "entropy": 1.5532455444335938}, "update_time_ms": 8.745, "num_steps_sampled": 8973719, "sample_time_ms": 16253.862}, "episode_len_mean": 683.26, "time_this_iter_s": 24.875895261764526, "pid": 12036, "timesteps_total": 8973719, "hostname": "flow-main", "episodes_total": 4387, "timestamp": 1557228747, "episode_reward_max": 937.2475016158758, "episodes_this_iter": 14, "time_total_s": 5860.169592857361, "time_since_restore": 5860.169592857361}
{"timesteps_since_restore": 9011121, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7588>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-32-51", "episode_reward_min": 45.92556595594483, "timesteps_this_iter": 37402, "training_iteration": 236, "episode_reward_mean": 831.6870391826266, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 236, "custom_metrics": {"cost2_mean": -24.183466637823287, "outflow_rate_max": 1216.9105402597402, "cost1_mean": 312.64187015891804, "system_level_velocity_mean": 12.756630375060931, "cost2_min": -35.799142790034054, "cost1_max": 356.7446443106887, "cost1_min": 25.970194383927073, "cost2_max": -10.024704686515491, "outflow_rate_mean": 1039.931729932406, "system_level_velocity_min": 10.386735541465379, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.35340703774621}, "info": {"num_steps_trained": 9011121, "load_time_ms": 11.799, "grad_time_ms": 8633.794, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.296001434326172, "vf_loss": 19.300363540649414, "policy_loss": -0.008459135890007019, "kl": 0.016183212399482727, "vf_explained_var": 0.7337207198143005, "entropy": 1.542255163192749}, "update_time_ms": 8.693, "num_steps_sampled": 9011121, "sample_time_ms": 16191.478}, "episode_len_mean": 677.97, "time_this_iter_s": 24.346752166748047, "pid": 12036, "timesteps_total": 9011121, "hostname": "flow-main", "episodes_total": 4407, "timestamp": 1557228771, "episode_reward_max": 937.2475016158758, "episodes_this_iter": 20, "time_total_s": 5884.516345024109, "time_since_restore": 5884.516345024109}
{"timesteps_since_restore": 9049224, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb75f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb75c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7c18>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-33-16", "episode_reward_min": 45.311567481575324, "timesteps_this_iter": 38103, "training_iteration": 237, "episode_reward_mean": 833.0444678396503, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 237, "custom_metrics": {"cost2_mean": -24.719014466992075, "outflow_rate_max": 1216.9105402597402, "cost1_mean": 311.8310794551498, "system_level_velocity_mean": 12.776298310858255, "cost2_min": -35.799142790034054, "cost1_max": 354.5319182668123, "cost1_min": 25.970194383927073, "cost2_max": -10.024704686515491, "outflow_rate_mean": 1034.6591272478652, "system_level_velocity_min": 10.517871894485195, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.958634089911953}, "info": {"num_steps_trained": 9049224, "load_time_ms": 11.814, "grad_time_ms": 8552.677, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.627634048461914, "vf_loss": 17.6329288482666, "policy_loss": -0.009543078951537609, "kl": 0.016782410442829132, "vf_explained_var": 0.7958961725234985, "entropy": 1.5496556758880615}, "update_time_ms": 8.426, "num_steps_sampled": 9049224, "sample_time_ms": 16182.549}, "episode_len_mean": 676.06, "time_this_iter_s": 25.38398838043213, "pid": 12036, "timesteps_total": 9049224, "hostname": "flow-main", "episodes_total": 4428, "timestamp": 1557228796, "episode_reward_max": 937.2475016158758, "episodes_this_iter": 21, "time_total_s": 5909.900333404541, "time_since_restore": 5909.900333404541}
{"timesteps_since_restore": 9087096, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cf60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c748>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-33-42", "episode_reward_min": 45.311567481575324, "timesteps_this_iter": 37872, "training_iteration": 238, "episode_reward_mean": 829.2001796538863, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 238, "custom_metrics": {"cost2_mean": -24.994597741336147, "outflow_rate_max": 1216.9105402597402, "cost1_mean": 310.56160410153046, "system_level_velocity_mean": 12.851591232576789, "cost2_min": -35.799142790034054, "cost1_max": 354.5319182668123, "cost1_min": 25.970194383927073, "cost2_max": -10.024704686515491, "outflow_rate_mean": 1034.5488187198528, "system_level_velocity_min": 10.517871894485195, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.958634089911953}, "info": {"num_steps_trained": 9087096, "load_time_ms": 11.899, "grad_time_ms": 8595.816, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 16.87063980102539, "vf_loss": 16.875473022460938, "policy_loss": -0.008563055656850338, "kl": 0.014733916148543358, "vf_explained_var": 0.7785063982009888, "entropy": 1.566551685333252}, "update_time_ms": 8.432, "num_steps_sampled": 9087096, "sample_time_ms": 16194.22}, "episode_len_mean": 670.58, "time_this_iter_s": 25.389464855194092, "pid": 12036, "timesteps_total": 9087096, "hostname": "flow-main", "episodes_total": 4446, "timestamp": 1557228822, "episode_reward_max": 937.2475016158758, "episodes_this_iter": 18, "time_total_s": 5935.289798259735, "time_since_restore": 5935.289798259735}
{"timesteps_since_restore": 9124999, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb30f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3be0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-34-07", "episode_reward_min": 45.311567481575324, "timesteps_this_iter": 37903, "training_iteration": 239, "episode_reward_mean": 829.3309322392945, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 239, "custom_metrics": {"cost2_mean": -25.73934425192591, "outflow_rate_max": 1201.437677922078, "cost1_mean": 308.93266668299793, "system_level_velocity_mean": 12.861872811868837, "cost2_min": -36.322394397915104, "cost1_max": 356.67781810274323, "cost1_min": 25.970194383927073, "cost2_max": -10.024704686515491, "outflow_rate_mean": 1031.1643777555212, "system_level_velocity_min": 10.517871894485195, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.958634089911953}, "info": {"num_steps_trained": 9124999, "load_time_ms": 12.442, "grad_time_ms": 8567.723, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.5383243560791, "vf_loss": 17.542558670043945, "policy_loss": -0.008056220598518848, "kl": 0.015107110142707825, "vf_explained_var": 0.8096814751625061, "entropy": 1.5622882843017578}, "update_time_ms": 8.314, "num_steps_sampled": 9124999, "sample_time_ms": 16349.9}, "episode_len_mean": 666.92, "time_this_iter_s": 25.14437484741211, "pid": 12036, "timesteps_total": 9124999, "hostname": "flow-main", "episodes_total": 4464, "timestamp": 1557228847, "episode_reward_max": 937.2475016158758, "episodes_this_iter": 18, "time_total_s": 5960.434173107147, "time_since_restore": 5960.434173107147}
{"timesteps_since_restore": 9163089, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ce48>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-34-32", "episode_reward_min": 42.85240164503207, "timesteps_this_iter": 38090, "training_iteration": 240, "episode_reward_mean": 830.46755350854, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 240, "custom_metrics": {"cost2_mean": -26.03690043090165, "outflow_rate_max": 1201.437677922078, "cost1_mean": 310.982582944468, "system_level_velocity_mean": 12.907699208207445, "cost2_min": -36.322394397915104, "cost1_max": 356.67781810274323, "cost1_min": 26.55178698216874, "cost2_max": -13.002988100168775, "outflow_rate_mean": 1035.409731224799, "system_level_velocity_min": 10.824018855541365, "outflow_rate_min": 336.6808336172199, "system_level_velocity_max": 17.98825418018739}, "info": {"num_steps_trained": 9163089, "load_time_ms": 12.532, "grad_time_ms": 8533.628, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.118745803833008, "vf_loss": 17.1243953704834, "policy_loss": -0.00965986866503954, "kl": 0.015842603519558907, "vf_explained_var": 0.7786367535591125, "entropy": 1.5669667720794678}, "update_time_ms": 8.029, "num_steps_sampled": 9163089, "sample_time_ms": 16362.56}, "episode_len_mean": 669.23, "time_this_iter_s": 24.985628366470337, "pid": 12036, "timesteps_total": 9163089, "hostname": "flow-main", "episodes_total": 4483, "timestamp": 1557228872, "episode_reward_max": 933.306196080588, "episodes_this_iter": 19, "time_total_s": 5985.419801473618, "time_since_restore": 5985.419801473618}
{"timesteps_since_restore": 9200521, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb76d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7588>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-34-57", "episode_reward_min": 42.85240164503207, "timesteps_this_iter": 37432, "training_iteration": 241, "episode_reward_mean": 832.0804907033249, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 241, "custom_metrics": {"cost2_mean": -25.9903362852241, "outflow_rate_max": 1201.437677922078, "cost1_mean": 310.9390812228716, "system_level_velocity_mean": 12.890204490551978, "cost2_min": -36.322394397915104, "cost1_max": 356.67781810274323, "cost1_min": 26.55178698216874, "cost2_max": -13.002988100168775, "outflow_rate_mean": 1037.2508113617428, "system_level_velocity_min": 10.847469192073945, "outflow_rate_min": 336.6808336172199, "system_level_velocity_max": 17.98825418018739}, "info": {"num_steps_trained": 9200521, "load_time_ms": 12.393, "grad_time_ms": 8546.931, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.67116355895996, "vf_loss": 18.676469802856445, "policy_loss": -0.008954005315899849, "kl": 0.014412068761885166, "vf_explained_var": 0.7651714086532593, "entropy": 1.5733144283294678}, "update_time_ms": 7.708, "num_steps_sampled": 9200521, "sample_time_ms": 16313.964}, "episode_len_mean": 669.57, "time_this_iter_s": 24.71823525428772, "pid": 12036, "timesteps_total": 9200521, "hostname": "flow-main", "episodes_total": 4502, "timestamp": 1557228897, "episode_reward_max": 933.6694549762284, "episodes_this_iter": 19, "time_total_s": 6010.138036727905, "time_since_restore": 6010.138036727905}
{"timesteps_since_restore": 9238784, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c5c0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-35-22", "episode_reward_min": 42.85240164503207, "timesteps_this_iter": 38263, "training_iteration": 242, "episode_reward_mean": 839.1249031788914, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 242, "custom_metrics": {"cost2_mean": -26.235850855277775, "outflow_rate_max": 1201.437677922078, "cost1_mean": 314.2465830575222, "system_level_velocity_mean": 12.867458129156562, "cost2_min": -36.322394397915104, "cost1_max": 356.67781810274323, "cost1_min": 26.77411679899385, "cost2_max": -14.21154999378981, "outflow_rate_mean": 1042.4942629324064, "system_level_velocity_min": 10.847469192073945, "outflow_rate_min": 336.6808336172199, "system_level_velocity_max": 17.98825418018739}, "info": {"num_steps_trained": 9238784, "load_time_ms": 12.545, "grad_time_ms": 8581.043, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 15.748400688171387, "vf_loss": 15.753768920898438, "policy_loss": -0.009156065061688423, "kl": 0.014959353022277355, "vf_explained_var": 0.8046003580093384, "entropy": 1.5787527561187744}, "update_time_ms": 7.858, "num_steps_sampled": 9238784, "sample_time_ms": 16329.248}, "episode_len_mean": 676.52, "time_this_iter_s": 25.188594818115234, "pid": 12036, "timesteps_total": 9238784, "hostname": "flow-main", "episodes_total": 4518, "timestamp": 1557228922, "episode_reward_max": 939.9314267841617, "episodes_this_iter": 16, "time_total_s": 6035.3266315460205, "time_since_restore": 6035.3266315460205}
{"timesteps_since_restore": 9276873, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbba20>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-35-47", "episode_reward_min": 42.85240164503207, "timesteps_this_iter": 38089, "training_iteration": 243, "episode_reward_mean": 835.4054793970536, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 243, "custom_metrics": {"cost2_mean": -26.246133760736242, "outflow_rate_max": 1201.437677922078, "cost1_mean": 314.631033030743, "system_level_velocity_mean": 12.91414266274618, "cost2_min": -37.79537876923858, "cost1_max": 356.67781810274323, "cost1_min": 26.77411679899385, "cost2_max": -14.21154999378981, "outflow_rate_mean": 1045.688768172883, "system_level_velocity_min": 10.847469192073945, "outflow_rate_min": 336.6808336172199, "system_level_velocity_max": 17.98825418018739}, "info": {"num_steps_trained": 9276873, "load_time_ms": 12.515, "grad_time_ms": 8585.706, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.166269302368164, "vf_loss": 18.171464920043945, "policy_loss": -0.009211634285748005, "kl": 0.015859363600611687, "vf_explained_var": 0.7843778729438782, "entropy": 1.5961486101150513}, "update_time_ms": 7.96, "num_steps_sampled": 9276873, "sample_time_ms": 16409.843}, "episode_len_mean": 675.18, "time_this_iter_s": 25.138827800750732, "pid": 12036, "timesteps_total": 9276873, "hostname": "flow-main", "episodes_total": 4538, "timestamp": 1557228947, "episode_reward_max": 939.9314267841617, "episodes_this_iter": 20, "time_total_s": 6060.465459346771, "time_since_restore": 6060.465459346771}
{"timesteps_since_restore": 9314431, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fa20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ffd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f240>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-36-13", "episode_reward_min": 42.85240164503207, "timesteps_this_iter": 37558, "training_iteration": 244, "episode_reward_mean": 822.7605114986991, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 244, "custom_metrics": {"cost2_mean": -25.893068458325338, "outflow_rate_max": 1215.1071220779218, "cost1_mean": 309.99205073272924, "system_level_velocity_mean": 12.940422971688877, "cost2_min": -37.79537876923858, "cost1_max": 356.18473450726776, "cost1_min": 26.77411679899385, "cost2_max": -14.21154999378981, "outflow_rate_mean": 1035.1359159786225, "system_level_velocity_min": 11.051762653134164, "outflow_rate_min": 336.6808336172199, "system_level_velocity_max": 17.98825418018739}, "info": {"num_steps_trained": 9314431, "load_time_ms": 12.635, "grad_time_ms": 8571.828, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.122512817382812, "vf_loss": 21.128042221069336, "policy_loss": -0.009304665960371494, "kl": 0.01491709053516388, "vf_explained_var": 0.7857874035835266, "entropy": 1.6023261547088623}, "update_time_ms": 7.776, "num_steps_sampled": 9314431, "sample_time_ms": 16407.594}, "episode_len_mean": 665.94, "time_this_iter_s": 25.65315294265747, "pid": 12036, "timesteps_total": 9314431, "hostname": "flow-main", "episodes_total": 4559, "timestamp": 1557228973, "episode_reward_max": 939.9314267841617, "episodes_this_iter": 21, "time_total_s": 6086.118612289429, "time_since_restore": 6086.118612289429}
{"timesteps_since_restore": 9352060, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6c50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-36-37", "episode_reward_min": 135.96314337969594, "timesteps_this_iter": 37629, "training_iteration": 245, "episode_reward_mean": 832.7261272980817, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 245, "custom_metrics": {"cost2_mean": -26.205739630298723, "outflow_rate_max": 1215.1071220779218, "cost1_mean": 312.6358394311315, "system_level_velocity_mean": 12.861363631625984, "cost2_min": -37.79537876923858, "cost1_max": 356.18473450726776, "cost1_min": 62.48952995717604, "cost2_max": -16.99164323402799, "outflow_rate_mean": 1042.4904824119556, "system_level_velocity_min": 11.051762653134164, "outflow_rate_min": 406.58355179907306, "system_level_velocity_max": 16.188965226924157}, "info": {"num_steps_trained": 9352060, "load_time_ms": 12.095, "grad_time_ms": 8515.683, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.530942916870117, "vf_loss": 16.53765296936035, "policy_loss": -0.010349633172154427, "kl": 0.014382150955498219, "vf_explained_var": 0.8026290535926819, "entropy": 1.5767905712127686}, "update_time_ms": 7.91, "num_steps_sampled": 9352060, "sample_time_ms": 16389.932}, "episode_len_mean": 673.04, "time_this_iter_s": 24.12961459159851, "pid": 12036, "timesteps_total": 9352060, "hostname": "flow-main", "episodes_total": 4576, "timestamp": 1557228997, "episode_reward_max": 942.1261513359581, "episodes_this_iter": 17, "time_total_s": 6110.248226881027, "time_since_restore": 6110.248226881027}
{"timesteps_since_restore": 9389760, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb74e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb128>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-37-02", "episode_reward_min": 135.96314337969594, "timesteps_this_iter": 37700, "training_iteration": 246, "episode_reward_mean": 836.7745832134004, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 246, "custom_metrics": {"cost2_mean": -26.314511780003016, "outflow_rate_max": 1215.1071220779218, "cost1_mean": 314.9855513949805, "system_level_velocity_mean": 12.865294331964868, "cost2_min": -37.79537876923858, "cost1_max": 356.18473450726776, "cost1_min": 62.48952995717604, "cost2_max": -18.975355283356542, "outflow_rate_mean": 1042.8632856157478, "system_level_velocity_min": 11.086071088242448, "outflow_rate_min": 406.58355179907306, "system_level_velocity_max": 16.188965226924157}, "info": {"num_steps_trained": 9389760, "load_time_ms": 12.015, "grad_time_ms": 8538.079, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.32583999633789, "vf_loss": 18.3324031829834, "policy_loss": -0.010375848971307278, "kl": 0.015057362616062164, "vf_explained_var": 0.7779483795166016, "entropy": 1.5887537002563477}, "update_time_ms": 7.925, "num_steps_sampled": 9389760, "sample_time_ms": 16465.9}, "episode_len_mean": 677.61, "time_this_iter_s": 25.346442461013794, "pid": 12036, "timesteps_total": 9389760, "hostname": "flow-main", "episodes_total": 4596, "timestamp": 1557229022, "episode_reward_max": 942.1261513359581, "episodes_this_iter": 20, "time_total_s": 6135.594669342041, "time_since_restore": 6135.594669342041}
{"timesteps_since_restore": 9427206, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fb38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f390>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-37-26", "episode_reward_min": 135.96314337969594, "timesteps_this_iter": 37446, "training_iteration": 247, "episode_reward_mean": 836.6975473600584, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 247, "custom_metrics": {"cost2_mean": -26.030904478373426, "outflow_rate_max": 1215.1071220779218, "cost1_mean": 315.67360069546083, "system_level_velocity_mean": 12.894585097966665, "cost2_min": -37.79537876923858, "cost1_max": 356.18473450726776, "cost1_min": 62.48952995717604, "cost2_max": -19.015824968048793, "outflow_rate_mean": 1048.7191438934701, "system_level_velocity_min": 11.086071088242448, "outflow_rate_min": 406.58355179907306, "system_level_velocity_max": 16.188965226924157}, "info": {"num_steps_trained": 9427206, "load_time_ms": 12.027, "grad_time_ms": 8479.325, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.953800201416016, "vf_loss": 18.958797454833984, "policy_loss": -0.008249524980783463, "kl": 0.012852226383984089, "vf_explained_var": 0.7472460269927979, "entropy": 1.6023074388504028}, "update_time_ms": 8.221, "num_steps_sampled": 9427206, "sample_time_ms": 16393.121}, "episode_len_mean": 677.61, "time_this_iter_s": 24.067781925201416, "pid": 12036, "timesteps_total": 9427206, "hostname": "flow-main", "episodes_total": 4613, "timestamp": 1557229046, "episode_reward_max": 942.1261513359581, "episodes_this_iter": 17, "time_total_s": 6159.662451267242, "time_since_restore": 6159.662451267242}
{"timesteps_since_restore": 9465732, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fa20>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-37-52", "episode_reward_min": 135.96314337969594, "timesteps_this_iter": 38526, "training_iteration": 248, "episode_reward_mean": 831.7576557858391, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 248, "custom_metrics": {"cost2_mean": -25.376043507120556, "outflow_rate_max": 1215.1071220779218, "cost1_mean": 312.6656902325009, "system_level_velocity_mean": 12.807445377436808, "cost2_min": -34.51177197298471, "cost1_max": 352.3059433433697, "cost1_min": 62.48952995717604, "cost2_max": -17.041100840678382, "outflow_rate_mean": 1039.7861501683196, "system_level_velocity_min": 10.991798116966908, "outflow_rate_min": 406.58355179907306, "system_level_velocity_max": 16.188965226924157}, "info": {"num_steps_trained": 9465732, "load_time_ms": 11.918, "grad_time_ms": 8419.429, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.06810760498047, "vf_loss": 19.073740005493164, "policy_loss": -0.009526416659355164, "kl": 0.01538129523396492, "vf_explained_var": 0.7737147212028503, "entropy": 1.62877357006073}, "update_time_ms": 8.137, "num_steps_sampled": 9465732, "sample_time_ms": 16482.731}, "episode_len_mean": 675.75, "time_this_iter_s": 25.664554834365845, "pid": 12036, "timesteps_total": 9465732, "hostname": "flow-main", "episodes_total": 4631, "timestamp": 1557229072, "episode_reward_max": 942.1261513359581, "episodes_this_iter": 18, "time_total_s": 6185.327006101608, "time_since_restore": 6185.327006101608}
{"timesteps_since_restore": 9504070, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f668>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-38-17", "episode_reward_min": 135.96314337969594, "timesteps_this_iter": 38338, "training_iteration": 249, "episode_reward_mean": 831.8929433197696, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 249, "custom_metrics": {"cost2_mean": -25.103058949491878, "outflow_rate_max": 1189.8232255744256, "cost1_mean": 311.2287102587173, "system_level_velocity_mean": 12.755633287452424, "cost2_min": -34.51177197298471, "cost1_max": 352.3059433433697, "cost1_min": 62.48952995717604, "cost2_max": -15.105895760780026, "outflow_rate_mean": 1033.2113079326427, "system_level_velocity_min": 10.991798116966908, "outflow_rate_min": 402.0997862437208, "system_level_velocity_max": 16.188965226924157}, "info": {"num_steps_trained": 9504070, "load_time_ms": 11.907, "grad_time_ms": 8443.103, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 16.263959884643555, "vf_loss": 16.27005386352539, "policy_loss": -0.009692753665149212, "kl": 0.01421215571463108, "vf_explained_var": 0.781768262386322, "entropy": 1.6516884565353394}, "update_time_ms": 8.384, "num_steps_sampled": 9504070, "sample_time_ms": 16475.771}, "episode_len_mean": 675.19, "time_this_iter_s": 25.34441566467285, "pid": 12036, "timesteps_total": 9504070, "hostname": "flow-main", "episodes_total": 4648, "timestamp": 1557229097, "episode_reward_max": 942.1261513359581, "episodes_this_iter": 17, "time_total_s": 6210.671421766281, "time_since_restore": 6210.671421766281}
{"timesteps_since_restore": 9541988, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ca58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91d30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91978>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-38-42", "episode_reward_min": 136.66772038834276, "timesteps_this_iter": 37918, "training_iteration": 250, "episode_reward_mean": 830.2419039245843, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 250, "custom_metrics": {"cost2_mean": -24.442821124746843, "outflow_rate_max": 1189.8232255744256, "cost1_mean": 311.0646523521168, "system_level_velocity_mean": 12.656894862486968, "cost2_min": -32.982275812772265, "cost1_max": 352.3059433433697, "cost1_min": 62.65362253588161, "cost2_max": -15.105895760780026, "outflow_rate_mean": 1028.7693886551697, "system_level_velocity_min": 10.73858801874507, "outflow_rate_min": 402.0997862437208, "system_level_velocity_max": 15.208554699359354}, "info": {"num_steps_trained": 9541988, "load_time_ms": 11.808, "grad_time_ms": 8438.114, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.383377075195312, "vf_loss": 19.388410568237305, "policy_loss": -0.008688876405358315, "kl": 0.01443962287157774, "vf_explained_var": 0.7350990772247314, "entropy": 1.6579095125198364}, "update_time_ms": 8.682, "num_steps_sampled": 9541988, "sample_time_ms": 16485.843}, "episode_len_mean": 678.61, "time_this_iter_s": 25.052594661712646, "pid": 12036, "timesteps_total": 9541988, "hostname": "flow-main", "episodes_total": 4669, "timestamp": 1557229122, "episode_reward_max": 930.1215314218318, "episodes_this_iter": 21, "time_total_s": 6235.724016427994, "time_since_restore": 6235.724016427994}
{"timesteps_since_restore": 9580012, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cb00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c0f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c4a8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-39-08", "episode_reward_min": 45.363276971963614, "timesteps_this_iter": 38024, "training_iteration": 251, "episode_reward_mean": 806.325930423031, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 251, "custom_metrics": {"cost2_mean": -23.76955488930845, "outflow_rate_max": 1189.8232255744256, "cost1_mean": 301.59966214002753, "system_level_velocity_mean": 12.654071920258204, "cost2_min": -32.982275812772265, "cost1_max": 349.767024922715, "cost1_min": 26.720215153151027, "cost2_max": -13.174014705325376, "outflow_rate_mean": 1004.7801915655607, "system_level_velocity_min": 10.475821625718469, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 18.108568704723815}, "info": {"num_steps_trained": 9580012, "load_time_ms": 11.862, "grad_time_ms": 8422.763, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 24.439918518066406, "vf_loss": 24.44546127319336, "policy_loss": -0.009242896921932697, "kl": 0.014617388136684895, "vf_explained_var": 0.6608676910400391, "entropy": 1.6550630331039429}, "update_time_ms": 8.759, "num_steps_sampled": 9580012, "sample_time_ms": 16592.376}, "episode_len_mean": 663.07, "time_this_iter_s": 25.62872314453125, "pid": 12036, "timesteps_total": 9580012, "hostname": "flow-main", "episodes_total": 4689, "timestamp": 1557229148, "episode_reward_max": 930.1215314218318, "episodes_this_iter": 20, "time_total_s": 6261.352739572525, "time_since_restore": 6261.352739572525}
{"timesteps_since_restore": 9617716, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fe80>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-39-33", "episode_reward_min": 45.363276971963614, "timesteps_this_iter": 37704, "training_iteration": 252, "episode_reward_mean": 786.4250620167182, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 252, "custom_metrics": {"cost2_mean": -22.971863622184774, "outflow_rate_max": 1161.45812987013, "cost1_mean": 293.33038324837224, "system_level_velocity_mean": 12.548080573983368, "cost2_min": -31.55056157272054, "cost1_max": 349.767024922715, "cost1_min": 26.720215153151027, "cost2_max": -13.00112142284955, "outflow_rate_mean": 981.0117124396327, "system_level_velocity_min": 10.475821625718469, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 18.108568704723815}, "info": {"num_steps_trained": 9617716, "load_time_ms": 11.822, "grad_time_ms": 8354.479, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 22.045080184936523, "vf_loss": 22.05076789855957, "policy_loss": -0.008976180106401443, "kl": 0.012988711707293987, "vf_explained_var": 0.6546966433525085, "entropy": 1.6804543733596802}, "update_time_ms": 8.532, "num_steps_sampled": 9617716, "sample_time_ms": 16661.729}, "episode_len_mean": 651.94, "time_this_iter_s": 25.193029642105103, "pid": 12036, "timesteps_total": 9617716, "hostname": "flow-main", "episodes_total": 4709, "timestamp": 1557229173, "episode_reward_max": 919.0070024559219, "episodes_this_iter": 20, "time_total_s": 6286.54576921463, "time_since_restore": 6286.54576921463}
{"timesteps_since_restore": 9656021, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f898>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-39-59", "episode_reward_min": 45.363276971963614, "timesteps_this_iter": 38305, "training_iteration": 253, "episode_reward_mean": 775.9437252163226, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 253, "custom_metrics": {"cost2_mean": -22.307384632282336, "outflow_rate_max": 1161.45812987013, "cost1_mean": 290.1990016180174, "system_level_velocity_mean": 12.565689258053187, "cost2_min": -31.55056157272054, "cost1_max": 349.767024922715, "cost1_min": 26.720215153151027, "cost2_max": -11.640353263421437, "outflow_rate_mean": 971.1269392023537, "system_level_velocity_min": 10.358572737106337, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 18.108568704723815}, "info": {"num_steps_trained": 9656021, "load_time_ms": 11.752, "grad_time_ms": 8359.071, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 21.46299171447754, "vf_loss": 21.46875762939453, "policy_loss": -0.009890587069094181, "kl": 0.016300862655043602, "vf_explained_var": 0.7230465412139893, "entropy": 1.6769065856933594}, "update_time_ms": 8.467, "num_steps_sampled": 9656021, "sample_time_ms": 16656.974}, "episode_len_mean": 646.57, "time_this_iter_s": 25.135281801223755, "pid": 12036, "timesteps_total": 9656021, "hostname": "flow-main", "episodes_total": 4729, "timestamp": 1557229199, "episode_reward_max": 919.0070024559219, "episodes_this_iter": 20, "time_total_s": 6311.681051015854, "time_since_restore": 6311.681051015854}
{"timesteps_since_restore": 9693107, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb76d8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-40-23", "episode_reward_min": 45.363276971963614, "timesteps_this_iter": 37086, "training_iteration": 254, "episode_reward_mean": 781.0977113238198, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 254, "custom_metrics": {"cost2_mean": -21.799949328461874, "outflow_rate_max": 1161.45812987013, "cost1_mean": 293.33466760876564, "system_level_velocity_mean": 12.518420789818958, "cost2_min": -31.55056157272054, "cost1_max": 348.1638203379268, "cost1_min": 26.720215153151027, "cost2_max": -11.640353263421437, "outflow_rate_mean": 974.9883616590546, "system_level_velocity_min": 9.743238750433985, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 18.108568704723815}, "info": {"num_steps_trained": 9693107, "load_time_ms": 11.47, "grad_time_ms": 8338.439, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.295629501342773, "vf_loss": 20.300506591796875, "policy_loss": -0.008129237219691277, "kl": 0.012859433889389038, "vf_explained_var": 0.716682493686676, "entropy": 1.6813524961471558}, "update_time_ms": 8.366, "num_steps_sampled": 9693107, "sample_time_ms": 16581.09}, "episode_len_mean": 655.86, "time_this_iter_s": 24.68561577796936, "pid": 12036, "timesteps_total": 9693107, "hostname": "flow-main", "episodes_total": 4748, "timestamp": 1557229223, "episode_reward_max": 907.8419315984423, "episodes_this_iter": 19, "time_total_s": 6336.366666793823, "time_since_restore": 6336.366666793823}
{"timesteps_since_restore": 9730875, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91cf8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-40-47", "episode_reward_min": 45.363276971963614, "timesteps_this_iter": 37768, "training_iteration": 255, "episode_reward_mean": 778.0904314882564, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 255, "custom_metrics": {"cost2_mean": -21.431786537065445, "outflow_rate_max": 1161.45812987013, "cost1_mean": 293.4499092726114, "system_level_velocity_mean": 12.529082330112779, "cost2_min": -31.395959140407538, "cost1_max": 348.1638203379268, "cost1_min": 26.720215153151027, "cost2_max": -11.640353263421437, "outflow_rate_mean": 977.8959725811686, "system_level_velocity_min": 9.743238750433985, "outflow_rate_min": 338.35525222187107, "system_level_velocity_max": 18.108568704723815}, "info": {"num_steps_trained": 9730875, "load_time_ms": 11.848, "grad_time_ms": 8358.007, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 20.875186920166016, "vf_loss": 20.880882263183594, "policy_loss": -0.009224903769791126, "kl": 0.013950200751423836, "vf_explained_var": 0.6956626772880554, "entropy": 1.6950559616088867}, "update_time_ms": 8.222, "num_steps_sampled": 9730875, "sample_time_ms": 16567.567}, "episode_len_mean": 656.89, "time_this_iter_s": 24.21844220161438, "pid": 12036, "timesteps_total": 9730875, "hostname": "flow-main", "episodes_total": 4767, "timestamp": 1557229247, "episode_reward_max": 907.8419315984423, "episodes_this_iter": 19, "time_total_s": 6360.585108995438, "time_since_restore": 6360.585108995438}
{"timesteps_since_restore": 9767746, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ccc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c320>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-41-13", "episode_reward_min": 143.11535633270074, "timesteps_this_iter": 36871, "training_iteration": 256, "episode_reward_mean": 770.2836224007577, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 256, "custom_metrics": {"cost2_mean": -20.993427315456117, "outflow_rate_max": 1163.6648051948055, "cost1_mean": 290.66529592065257, "system_level_velocity_mean": 12.47686014538495, "cost2_min": -30.66807441598521, "cost1_max": 348.1638203379268, "cost1_min": 60.68590613164656, "cost2_max": -11.640353263421437, "outflow_rate_mean": 974.2579570175233, "system_level_velocity_min": 9.743238750433985, "outflow_rate_min": 404.46300438126553, "system_level_velocity_max": 15.811779256191432}, "info": {"num_steps_trained": 9767746, "load_time_ms": 11.925, "grad_time_ms": 8368.214, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.29539680480957, "vf_loss": 22.300460815429688, "policy_loss": -0.008906110189855099, "kl": 0.015180342830717564, "vf_explained_var": 0.6325322985649109, "entropy": 1.679049015045166}, "update_time_ms": 8.242, "num_steps_sampled": 9767746, "sample_time_ms": 16564.113}, "episode_len_mean": 652.3, "time_this_iter_s": 25.391988039016724, "pid": 12036, "timesteps_total": 9767746, "hostname": "flow-main", "episodes_total": 4786, "timestamp": 1557229273, "episode_reward_max": 906.2733719304583, "episodes_this_iter": 19, "time_total_s": 6385.977097034454, "time_since_restore": 6385.977097034454}
{"timesteps_since_restore": 9804893, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f1d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f8d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-41-38", "episode_reward_min": 146.06965874702337, "timesteps_this_iter": 37147, "training_iteration": 257, "episode_reward_mean": 796.9281927600882, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 257, "custom_metrics": {"cost2_mean": -21.248769719543205, "outflow_rate_max": 1169.6211012987012, "cost1_mean": 300.61268493355317, "system_level_velocity_mean": 12.389442215614688, "cost2_min": -30.66807441598521, "cost1_max": 348.1638203379268, "cost1_min": 69.93742217629658, "cost2_max": -11.640353263421437, "outflow_rate_mean": 994.8596759102754, "system_level_velocity_min": 9.743238750433985, "outflow_rate_min": 415.0720039894451, "system_level_velocity_max": 15.51071938804107}, "info": {"num_steps_trained": 9804893, "load_time_ms": 11.796, "grad_time_ms": 8406.091, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.537992477416992, "vf_loss": 18.54384422302246, "policy_loss": -0.009722297079861164, "kl": 0.015295196324586868, "vf_explained_var": 0.7007953524589539, "entropy": 1.6853746175765991}, "update_time_ms": 8.1, "num_steps_sampled": 9804893, "sample_time_ms": 16613.535}, "episode_len_mean": 674.8, "time_this_iter_s": 24.95964765548706, "pid": 12036, "timesteps_total": 9804893, "hostname": "flow-main", "episodes_total": 4803, "timestamp": 1557229298, "episode_reward_max": 906.2733719304583, "episodes_this_iter": 17, "time_total_s": 6410.936744689941, "time_since_restore": 6410.936744689941}
{"timesteps_since_restore": 9842020, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f978>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-42-04", "episode_reward_min": 126.08320084898133, "timesteps_this_iter": 37127, "training_iteration": 258, "episode_reward_mean": 780.7654246346316, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 258, "custom_metrics": {"cost2_mean": -21.185729089677622, "outflow_rate_max": 1169.6211012987012, "cost1_mean": 295.82258355984277, "system_level_velocity_mean": 12.33965407809444, "cost2_min": -30.66807441598521, "cost1_max": 347.08751036197225, "cost1_min": 62.033562495591454, "cost2_max": -15.51122819534409, "outflow_rate_mean": 982.5959571243203, "system_level_velocity_min": 9.743238750433985, "outflow_rate_min": 415.0720039894451, "system_level_velocity_max": 16.3848208519994}, "info": {"num_steps_trained": 9842020, "load_time_ms": 11.368, "grad_time_ms": 8386.211, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 23.353084564208984, "vf_loss": 23.359453201293945, "policy_loss": -0.010221950709819794, "kl": 0.015225343406200409, "vf_explained_var": 0.6370192766189575, "entropy": 1.6969537734985352}, "update_time_ms": 8.249, "num_steps_sampled": 9842020, "sample_time_ms": 16624.337}, "episode_len_mean": 667.85, "time_this_iter_s": 25.59640669822693, "pid": 12036, "timesteps_total": 9842020, "hostname": "flow-main", "episodes_total": 4825, "timestamp": 1557229324, "episode_reward_max": 890.9539156537188, "episodes_this_iter": 22, "time_total_s": 6436.533151388168, "time_since_restore": 6436.533151388168}
{"timesteps_since_restore": 9878999, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91f60>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-42-28", "episode_reward_min": 60.46712639130547, "timesteps_this_iter": 36979, "training_iteration": 259, "episode_reward_mean": 771.9318912304262, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 259, "custom_metrics": {"cost2_mean": -21.14196842993738, "outflow_rate_max": 1169.6211012987012, "cost1_mean": 296.34762046714934, "system_level_velocity_mean": 12.482401697483276, "cost2_min": -28.035769915693024, "cost1_max": 347.08751036197225, "cost1_min": 31.848169711302546, "cost2_max": -12.518602306127981, "outflow_rate_mean": 982.1261906962194, "system_level_velocity_min": 10.390628368506196, "outflow_rate_min": 307.4860739527011, "system_level_velocity_max": 16.455653554377722}, "info": {"num_steps_trained": 9878999, "load_time_ms": 11.175, "grad_time_ms": 8365.402, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.20172882080078, "vf_loss": 21.20696258544922, "policy_loss": -0.009236837737262249, "kl": 0.01581232063472271, "vf_explained_var": 0.639909029006958, "entropy": 1.7119379043579102}, "update_time_ms": 8.019, "num_steps_sampled": 9878999, "sample_time_ms": 16583.224}, "episode_len_mean": 663.82, "time_this_iter_s": 24.685803413391113, "pid": 12036, "timesteps_total": 9878999, "hostname": "flow-main", "episodes_total": 4844, "timestamp": 1557229348, "episode_reward_max": 879.9822132541834, "episodes_this_iter": 19, "time_total_s": 6461.218954801559, "time_since_restore": 6461.218954801559}
{"timesteps_since_restore": 9915866, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cb00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c860>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-42-53", "episode_reward_min": 60.46712639130547, "timesteps_this_iter": 36867, "training_iteration": 260, "episode_reward_mean": 770.8892939881003, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 260, "custom_metrics": {"cost2_mean": -21.117671549927394, "outflow_rate_max": 1169.6211012987012, "cost1_mean": 296.9862106791624, "system_level_velocity_mean": 12.520372633735212, "cost2_min": -28.189364810474398, "cost1_max": 347.08751036197225, "cost1_min": 31.848169711302546, "cost2_max": -12.518602306127981, "outflow_rate_mean": 982.0549400165417, "system_level_velocity_min": 10.390628368506196, "outflow_rate_min": 307.4860739527011, "system_level_velocity_max": 16.455653554377722}, "info": {"num_steps_trained": 9915866, "load_time_ms": 10.835, "grad_time_ms": 8373.033, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.260587692260742, "vf_loss": 20.267959594726562, "policy_loss": -0.010948198847472668, "kl": 0.014128725044429302, "vf_explained_var": 0.660595715045929, "entropy": 1.7235475778579712}, "update_time_ms": 7.749, "num_steps_sampled": 9915866, "sample_time_ms": 16497.358}, "episode_len_mean": 663.63, "time_this_iter_s": 24.26404333114624, "pid": 12036, "timesteps_total": 9915866, "hostname": "flow-main", "episodes_total": 4864, "timestamp": 1557229373, "episode_reward_max": 877.9058752696099, "episodes_this_iter": 20, "time_total_s": 6485.482998132706, "time_since_restore": 6485.482998132706}
{"timesteps_since_restore": 9952946, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fb70>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ff98>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-43-17", "episode_reward_min": 60.46712639130547, "timesteps_this_iter": 37080, "training_iteration": 261, "episode_reward_mean": 775.851108832671, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 261, "custom_metrics": {"cost2_mean": -21.040791126613662, "outflow_rate_max": 1169.6211012987012, "cost1_mean": 301.800278271843, "system_level_velocity_mean": 12.634502253035658, "cost2_min": -28.189364810474398, "cost1_max": 347.08751036197225, "cost1_min": 31.848169711302546, "cost2_max": -12.518602306127981, "outflow_rate_mean": 994.9971482758103, "system_level_velocity_min": 10.41764796521381, "outflow_rate_min": 307.4860739527011, "system_level_velocity_max": 16.455653554377722}, "info": {"num_steps_trained": 9952946, "load_time_ms": 10.78, "grad_time_ms": 8358.772, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.20418357849121, "vf_loss": 20.207962036132812, "policy_loss": -0.007207629736512899, "kl": 0.013549087569117546, "vf_explained_var": 0.6466526985168457, "entropy": 1.7277483940124512}, "update_time_ms": 7.877, "num_steps_sampled": 9952946, "sample_time_ms": 16363.178}, "episode_len_mean": 668.75, "time_this_iter_s": 24.150486946105957, "pid": 12036, "timesteps_total": 9952946, "hostname": "flow-main", "episodes_total": 4883, "timestamp": 1557229397, "episode_reward_max": 877.9058752696099, "episodes_this_iter": 19, "time_total_s": 6509.633485078812, "time_since_restore": 6509.633485078812}
{"timesteps_since_restore": 9990526, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb03c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb0d68>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-43-42", "episode_reward_min": 60.46712639130547, "timesteps_this_iter": 37580, "training_iteration": 262, "episode_reward_mean": 764.2164341820176, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 262, "custom_metrics": {"cost2_mean": -20.85772388687228, "outflow_rate_max": 1150.2463896103898, "cost1_mean": 299.5934272103008, "system_level_velocity_mean": 12.73327262511645, "cost2_min": -28.189364810474398, "cost1_max": 342.3609466031744, "cost1_min": 31.848169711302546, "cost2_max": -11.61815433182284, "outflow_rate_mean": 991.4857921126587, "system_level_velocity_min": 10.41764796521381, "outflow_rate_min": 307.4860739527011, "system_level_velocity_max": 16.455653554377722}, "info": {"num_steps_trained": 9990526, "load_time_ms": 10.479, "grad_time_ms": 8391.124, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.546358108520508, "vf_loss": 19.55222511291504, "policy_loss": -0.009338043630123138, "kl": 0.013713397085666656, "vf_explained_var": 0.6641920804977417, "entropy": 1.7403674125671387}, "update_time_ms": 8.019, "num_steps_sampled": 9990526, "sample_time_ms": 16343.666}, "episode_len_mean": 660.79, "time_this_iter_s": 25.31012225151062, "pid": 12036, "timesteps_total": 9990526, "hostname": "flow-main", "episodes_total": 4902, "timestamp": 1557229422, "episode_reward_max": 871.8107662769613, "episodes_this_iter": 19, "time_total_s": 6534.943607330322, "time_since_restore": 6534.943607330322}
{"timesteps_since_restore": 10027382, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91cc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc916d8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-44-07", "episode_reward_min": 41.87748387772612, "timesteps_this_iter": 36856, "training_iteration": 263, "episode_reward_mean": 769.325996349428, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 263, "custom_metrics": {"cost2_mean": -20.554068759866922, "outflow_rate_max": 1154.1514181818181, "cost1_mean": 299.9125628735483, "system_level_velocity_mean": 12.799670489708113, "cost2_min": -28.189364810474398, "cost1_max": 342.3609466031744, "cost1_min": 27.242492274035314, "cost2_max": -11.61815433182284, "outflow_rate_mean": 993.3306941199645, "system_level_velocity_min": 10.41764796521381, "outflow_rate_min": 307.4860739527011, "system_level_velocity_max": 18.374854267830585}, "info": {"num_steps_trained": 10027382, "load_time_ms": 10.515, "grad_time_ms": 8382.8, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.930185317993164, "vf_loss": 21.936567306518555, "policy_loss": -0.010503781959414482, "kl": 0.016285765916109085, "vf_explained_var": 0.6523314118385315, "entropy": 1.7474085092544556}, "update_time_ms": 8.051, "num_steps_sampled": 10027382, "sample_time_ms": 16316.34}, "episode_len_mean": 660.96, "time_this_iter_s": 24.78256583213806, "pid": 12036, "timesteps_total": 10027382, "hostname": "flow-main", "episodes_total": 4923, "timestamp": 1557229447, "episode_reward_max": 874.7849173267749, "episodes_this_iter": 21, "time_total_s": 6559.72617316246, "time_since_restore": 6559.72617316246}
{"timesteps_since_restore": 10064136, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c3c8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-44-33", "episode_reward_min": 41.87748387772612, "timesteps_this_iter": 36754, "training_iteration": 264, "episode_reward_mean": 778.783912821771, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 264, "custom_metrics": {"cost2_mean": -20.649388293511482, "outflow_rate_max": 1192.7397246753249, "cost1_mean": 301.3730877602545, "system_level_velocity_mean": 12.729288217406463, "cost2_min": -28.900112129624734, "cost1_max": 347.7539262403872, "cost1_min": 27.242492274035314, "cost2_max": -11.61815433182284, "outflow_rate_mean": 1002.4294318670259, "system_level_velocity_min": 10.41764796521381, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.374854267830585}, "info": {"num_steps_trained": 10064136, "load_time_ms": 10.145, "grad_time_ms": 8385.062, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.117021560668945, "vf_loss": 22.123292922973633, "policy_loss": -0.01022200658917427, "kl": 0.015607647597789764, "vf_explained_var": 0.6420162916183472, "entropy": 1.7472760677337646}, "update_time_ms": 8.126, "num_steps_sampled": 10064136, "sample_time_ms": 16409.283}, "episode_len_mean": 664.16, "time_this_iter_s": 25.6276912689209, "pid": 12036, "timesteps_total": 10064136, "hostname": "flow-main", "episodes_total": 4943, "timestamp": 1557229473, "episode_reward_max": 897.0445449524445, "episodes_this_iter": 20, "time_total_s": 6585.353864431381, "time_since_restore": 6585.353864431381}
{"timesteps_since_restore": 10101114, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb6a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbb00>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-44-58", "episode_reward_min": 41.87748387772612, "timesteps_this_iter": 36978, "training_iteration": 265, "episode_reward_mean": 787.8244272038643, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 265, "custom_metrics": {"cost2_mean": -20.711582175353495, "outflow_rate_max": 1192.7397246753249, "cost1_mean": 303.193511810433, "system_level_velocity_mean": 12.646060203466307, "cost2_min": -28.900112129624734, "cost1_max": 347.7539262403872, "cost1_min": 27.242492274035314, "cost2_max": -11.61815433182284, "outflow_rate_mean": 1005.5975912236524, "system_level_velocity_min": 10.41764796521381, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.374854267830585}, "info": {"num_steps_trained": 10101114, "load_time_ms": 10.258, "grad_time_ms": 8394.25, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 22.296302795410156, "vf_loss": 22.30185317993164, "policy_loss": -0.009572502225637436, "kl": 0.0158827044069767, "vf_explained_var": 0.5959470272064209, "entropy": 1.78147292137146}, "update_time_ms": 8.102, "num_steps_sampled": 10101114, "sample_time_ms": 16488.741}, "episode_len_mean": 670.54, "time_this_iter_s": 25.08597683906555, "pid": 12036, "timesteps_total": 10101114, "hostname": "flow-main", "episodes_total": 4963, "timestamp": 1557229498, "episode_reward_max": 897.0445449524445, "episodes_this_iter": 20, "time_total_s": 6610.439841270447, "time_since_restore": 6610.439841270447}
{"timesteps_since_restore": 10138933, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cac8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-45-23", "episode_reward_min": 41.87748387772612, "timesteps_this_iter": 37819, "training_iteration": 266, "episode_reward_mean": 789.2777233439581, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 266, "custom_metrics": {"cost2_mean": -20.725345844695877, "outflow_rate_max": 1192.7397246753249, "cost1_mean": 301.8330381155069, "system_level_velocity_mean": 12.546758926129051, "cost2_min": -28.900112129624734, "cost1_max": 347.7539262403872, "cost1_min": 27.242492274035314, "cost2_max": -11.61815433182284, "outflow_rate_mean": 999.3770949114723, "system_level_velocity_min": 10.313134903938254, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.374854267830585}, "info": {"num_steps_trained": 10138933, "load_time_ms": 10.447, "grad_time_ms": 8391.798, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 15.016509056091309, "vf_loss": 15.021963119506836, "policy_loss": -0.00910279992967844, "kl": 0.01441814936697483, "vf_explained_var": 0.7367786765098572, "entropy": 1.8064043521881104}, "update_time_ms": 8.092, "num_steps_sampled": 10138933, "sample_time_ms": 16466.038}, "episode_len_mean": 672.82, "time_this_iter_s": 25.1390700340271, "pid": 12036, "timesteps_total": 10138933, "hostname": "flow-main", "episodes_total": 4977, "timestamp": 1557229523, "episode_reward_max": 897.0445449524445, "episodes_this_iter": 14, "time_total_s": 6635.578911304474, "time_since_restore": 6635.578911304474}
{"timesteps_since_restore": 10176338, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91860>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-45-47", "episode_reward_min": 41.87748387772612, "timesteps_this_iter": 37405, "training_iteration": 267, "episode_reward_mean": 788.3382074035707, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 267, "custom_metrics": {"cost2_mean": -20.98390989998899, "outflow_rate_max": 1192.7397246753249, "cost1_mean": 301.9366076005161, "system_level_velocity_mean": 12.455588546191631, "cost2_min": -28.900112129624734, "cost1_max": 347.7539262403872, "cost1_min": 27.242492274035314, "cost2_max": -14.009927453922533, "outflow_rate_mean": 998.905898892411, "system_level_velocity_min": 10.313134903938254, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.374854267830585}, "info": {"num_steps_trained": 10176338, "load_time_ms": 10.618, "grad_time_ms": 8387.787, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.08366584777832, "vf_loss": 19.08934783935547, "policy_loss": -0.009287213906645775, "kl": 0.014244413003325462, "vf_explained_var": 0.6230857372283936, "entropy": 1.7864739894866943}, "update_time_ms": 7.884, "num_steps_sampled": 10176338, "sample_time_ms": 16430.865}, "episode_len_mean": 676.09, "time_this_iter_s": 24.555747509002686, "pid": 12036, "timesteps_total": 10176338, "hostname": "flow-main", "episodes_total": 4996, "timestamp": 1557229547, "episode_reward_max": 897.0445449524445, "episodes_this_iter": 19, "time_total_s": 6660.134658813477, "time_since_restore": 6660.134658813477}
{"timesteps_since_restore": 10214012, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ce80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c320>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-46-12", "episode_reward_min": 41.87748387772612, "timesteps_this_iter": 37674, "training_iteration": 268, "episode_reward_mean": 780.2941190770753, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 268, "custom_metrics": {"cost2_mean": -21.250983922159904, "outflow_rate_max": 1192.7397246753249, "cost1_mean": 298.2247717068332, "system_level_velocity_mean": 12.407079237241437, "cost2_min": -28.900112129624734, "cost1_max": 347.7539262403872, "cost1_min": 27.242492274035314, "cost2_max": -14.009927453922533, "outflow_rate_mean": 988.4182478763805, "system_level_velocity_min": 10.313134903938254, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 18.374854267830585}, "info": {"num_steps_trained": 10214012, "load_time_ms": 11.08, "grad_time_ms": 8404.111, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 20.06602668762207, "vf_loss": 20.071285247802734, "policy_loss": -0.009184249676764011, "kl": 0.015505657531321049, "vf_explained_var": 0.6382779479026794, "entropy": 1.7851887941360474}, "update_time_ms": 7.791, "num_steps_sampled": 10214012, "sample_time_ms": 16319.927}, "episode_len_mean": 670.57, "time_this_iter_s": 24.636178255081177, "pid": 12036, "timesteps_total": 10214012, "hostname": "flow-main", "episodes_total": 5016, "timestamp": 1557229572, "episode_reward_max": 897.0445449524445, "episodes_this_iter": 20, "time_total_s": 6684.770837068558, "time_since_restore": 6684.770837068558}
{"timesteps_since_restore": 10251050, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbac8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb6a0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-46-37", "episode_reward_min": 148.44189389211388, "timesteps_this_iter": 37038, "training_iteration": 269, "episode_reward_mean": 791.0872293782519, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 269, "custom_metrics": {"cost2_mean": -21.108107862544415, "outflow_rate_max": 1179.8959272727272, "cost1_mean": 302.5236884276063, "system_level_velocity_mean": 12.302257749463955, "cost2_min": -28.466249450094764, "cost1_max": 346.87407356275094, "cost1_min": 65.51314958903804, "cost2_max": -14.329643995412074, "outflow_rate_mean": 995.6054109552456, "system_level_velocity_min": 10.313134903938254, "outflow_rate_min": 410.403604890458, "system_level_velocity_max": 14.023960288036701}, "info": {"num_steps_trained": 10251050, "load_time_ms": 11.181, "grad_time_ms": 8395.224, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.134471893310547, "vf_loss": 20.14031410217285, "policy_loss": -0.009795633144676685, "kl": 0.015618561767041683, "vf_explained_var": 0.65756756067276, "entropy": 1.7794430255889893}, "update_time_ms": 8.046, "num_steps_sampled": 10251050, "sample_time_ms": 16324.534}, "episode_len_mean": 681.78, "time_this_iter_s": 24.66471028327942, "pid": 12036, "timesteps_total": 10251050, "hostname": "flow-main", "episodes_total": 5035, "timestamp": 1557229597, "episode_reward_max": 894.0633620096962, "episodes_this_iter": 19, "time_total_s": 6709.435547351837, "time_since_restore": 6709.435547351837}
{"timesteps_since_restore": 10287646, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c1d0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-47-01", "episode_reward_min": 148.44189389211388, "timesteps_this_iter": 36596, "training_iteration": 270, "episode_reward_mean": 792.6048051817442, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 270, "custom_metrics": {"cost2_mean": -21.33599545729325, "outflow_rate_max": 1179.1724103896104, "cost1_mean": 302.74900856639584, "system_level_velocity_mean": 12.257652555574495, "cost2_min": -28.466249450094764, "cost1_max": 348.4176511356011, "cost1_min": 65.51314958903804, "cost2_max": -14.329643995412074, "outflow_rate_mean": 993.1049300270986, "system_level_velocity_min": 10.313134903938254, "outflow_rate_min": 410.403604890458, "system_level_velocity_max": 14.023960288036701}, "info": {"num_steps_trained": 10287646, "load_time_ms": 11.593, "grad_time_ms": 8386.135, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 19.05315589904785, "vf_loss": 19.058347702026367, "policy_loss": -0.008667867630720139, "kl": 0.013741941191256046, "vf_explained_var": 0.6411165595054626, "entropy": 1.7837245464324951}, "update_time_ms": 8.202, "num_steps_sampled": 10287646, "sample_time_ms": 16369.568}, "episode_len_mean": 685.06, "time_this_iter_s": 24.62542152404785, "pid": 12036, "timesteps_total": 10287646, "hostname": "flow-main", "episodes_total": 5054, "timestamp": 1557229621, "episode_reward_max": 894.0633620096962, "episodes_this_iter": 19, "time_total_s": 6734.060968875885, "time_since_restore": 6734.060968875885}
{"timesteps_since_restore": 10324779, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e80>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-47-27", "episode_reward_min": 136.87862805781788, "timesteps_this_iter": 37133, "training_iteration": 271, "episode_reward_mean": 784.9248936879371, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 271, "custom_metrics": {"cost2_mean": -21.165883449302648, "outflow_rate_max": 1179.1724103896104, "cost1_mean": 301.79751534011893, "system_level_velocity_mean": 12.336471763291366, "cost2_min": -26.43815362321468, "cost1_max": 348.4176511356011, "cost1_min": 61.63921980070825, "cost2_max": -12.902652835437024, "outflow_rate_mean": 993.6496480687326, "system_level_velocity_min": 10.648516363923278, "outflow_rate_min": 410.403604890458, "system_level_velocity_max": 15.140202021287926}, "info": {"num_steps_trained": 10324779, "load_time_ms": 11.615, "grad_time_ms": 8433.506, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.268217086791992, "vf_loss": 19.276058197021484, "policy_loss": -0.011738299392163754, "kl": 0.015396744944155216, "vf_explained_var": 0.6461742520332336, "entropy": 1.7828423976898193}, "update_time_ms": 8.332, "num_steps_sampled": 10324779, "sample_time_ms": 16502.679}, "episode_len_mean": 679.75, "time_this_iter_s": 25.9435932636261, "pid": 12036, "timesteps_total": 10324779, "hostname": "flow-main", "episodes_total": 5074, "timestamp": 1557229647, "episode_reward_max": 894.0633620096962, "episodes_this_iter": 20, "time_total_s": 6760.004562139511, "time_since_restore": 6760.004562139511}
{"timesteps_since_restore": 10362606, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f8d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-47-52", "episode_reward_min": 136.87862805781788, "timesteps_this_iter": 37827, "training_iteration": 272, "episode_reward_mean": 791.7921024389412, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 272, "custom_metrics": {"cost2_mean": -21.051281835811356, "outflow_rate_max": 1179.1724103896104, "cost1_mean": 302.4246960043571, "system_level_velocity_mean": 12.402730563978018, "cost2_min": -27.799967675220223, "cost1_max": 348.4176511356011, "cost1_min": 61.63921980070825, "cost2_max": -12.902652835437024, "outflow_rate_mean": 994.8600077266995, "system_level_velocity_min": 10.648516363923278, "outflow_rate_min": 410.403604890458, "system_level_velocity_max": 15.66493818085373}, "info": {"num_steps_trained": 10362606, "load_time_ms": 11.78, "grad_time_ms": 8389.921, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.646696090698242, "vf_loss": 18.65276336669922, "policy_loss": -0.00960926990956068, "kl": 0.014000602066516876, "vf_explained_var": 0.7172355055809021, "entropy": 1.7894818782806396}, "update_time_ms": 8.408, "num_steps_sampled": 10362606, "sample_time_ms": 16523.753}, "episode_len_mean": 678.64, "time_this_iter_s": 25.09719443321228, "pid": 12036, "timesteps_total": 10362606, "hostname": "flow-main", "episodes_total": 5094, "timestamp": 1557229672, "episode_reward_max": 894.0633620096962, "episodes_this_iter": 20, "time_total_s": 6785.101756572723, "time_since_restore": 6785.101756572723}
{"timesteps_since_restore": 10399454, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbcc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb75c0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-48-17", "episode_reward_min": 136.87862805781788, "timesteps_this_iter": 36848, "training_iteration": 273, "episode_reward_mean": 784.5763441314879, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 273, "custom_metrics": {"cost2_mean": -21.121724898781913, "outflow_rate_max": 1179.1724103896104, "cost1_mean": 299.6238658916555, "system_level_velocity_mean": 12.396139947760203, "cost2_min": -27.799967675220223, "cost1_max": 348.4176511356011, "cost1_min": 61.63921980070825, "cost2_max": -12.902652835437024, "outflow_rate_mean": 989.9422646278476, "system_level_velocity_min": 10.852208721047557, "outflow_rate_min": 410.403604890458, "system_level_velocity_max": 15.66493818085373}, "info": {"num_steps_trained": 10399454, "load_time_ms": 11.714, "grad_time_ms": 8360.107, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.923851013183594, "vf_loss": 18.930240631103516, "policy_loss": -0.01058922428637743, "kl": 0.01659560203552246, "vf_explained_var": 0.650168240070343, "entropy": 1.771164894104004}, "update_time_ms": 8.238, "num_steps_sampled": 10399454, "sample_time_ms": 16562.595}, "episode_len_mean": 671.92, "time_this_iter_s": 24.860636949539185, "pid": 12036, "timesteps_total": 10399454, "hostname": "flow-main", "episodes_total": 5111, "timestamp": 1557229697, "episode_reward_max": 894.0633620096962, "episodes_this_iter": 17, "time_total_s": 6809.962393522263, "time_since_restore": 6809.962393522263}
{"timesteps_since_restore": 10437225, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb70b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb7240>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-48-42", "episode_reward_min": 136.87862805781788, "timesteps_this_iter": 37771, "training_iteration": 274, "episode_reward_mean": 795.789965551164, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 274, "custom_metrics": {"cost2_mean": -21.48364945440539, "outflow_rate_max": 1179.1724103896104, "cost1_mean": 305.67025645900617, "system_level_velocity_mean": 12.53418984881175, "cost2_min": -27.799967675220223, "cost1_max": 357.6874621334521, "cost1_min": 61.63921980070825, "cost2_max": -12.902652835437024, "outflow_rate_mean": 1009.0544262932287, "system_level_velocity_min": 10.601187171376925, "outflow_rate_min": 414.4040670559013, "system_level_velocity_max": 15.66493818085373}, "info": {"num_steps_trained": 10437225, "load_time_ms": 12.114, "grad_time_ms": 8371.051, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.287858963012695, "vf_loss": 18.293724060058594, "policy_loss": -0.009416996501386166, "kl": 0.01403905265033245, "vf_explained_var": 0.6834554672241211, "entropy": 1.7586357593536377}, "update_time_ms": 8.077, "num_steps_sampled": 10437225, "sample_time_ms": 16445.787}, "episode_len_mean": 678.38, "time_this_iter_s": 24.575190544128418, "pid": 12036, "timesteps_total": 10437225, "hostname": "flow-main", "episodes_total": 5131, "timestamp": 1557229722, "episode_reward_max": 877.2378965290259, "episodes_this_iter": 20, "time_total_s": 6834.537584066391, "time_since_restore": 6834.537584066391}
{"timesteps_since_restore": 10474441, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc913c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91198>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-49-07", "episode_reward_min": 136.87862805781788, "timesteps_this_iter": 37216, "training_iteration": 275, "episode_reward_mean": 787.6391751763563, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 275, "custom_metrics": {"cost2_mean": -21.40791294479306, "outflow_rate_max": 1168.8884011988011, "cost1_mean": 301.85014660021346, "system_level_velocity_mean": 12.590621167263551, "cost2_min": -27.799967675220223, "cost1_max": 357.6874621334521, "cost1_min": 61.63921980070825, "cost2_max": -12.902652835437024, "outflow_rate_mean": 1003.9444396659917, "system_level_velocity_min": 10.601187171376925, "outflow_rate_min": 414.4040670559013, "system_level_velocity_max": 15.66493818085373}, "info": {"num_steps_trained": 10474441, "load_time_ms": 12.014, "grad_time_ms": 8432.913, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.74391746520996, "vf_loss": 21.749666213989258, "policy_loss": -0.008932904340326786, "kl": 0.012582301162183285, "vf_explained_var": 0.6549568772315979, "entropy": 1.7951403856277466}, "update_time_ms": 8.023, "num_steps_sampled": 10474441, "sample_time_ms": 16389.906}, "episode_len_mean": 668.53, "time_this_iter_s": 25.139314889907837, "pid": 12036, "timesteps_total": 10474441, "hostname": "flow-main", "episodes_total": 5149, "timestamp": 1557229747, "episode_reward_max": 902.0060485470433, "episodes_this_iter": 18, "time_total_s": 6859.676898956299, "time_since_restore": 6859.676898956299}
{"timesteps_since_restore": 10511878, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcb3908>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-49-32", "episode_reward_min": 136.87862805781788, "timesteps_this_iter": 37437, "training_iteration": 276, "episode_reward_mean": 792.0626827775154, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 276, "custom_metrics": {"cost2_mean": -21.944605296132327, "outflow_rate_max": 1168.8884011988011, "cost1_mean": 302.1091421549089, "system_level_velocity_mean": 12.51324214415034, "cost2_min": -31.2843129108315, "cost1_max": 357.6874621334521, "cost1_min": 61.63921980070825, "cost2_max": -12.902652835437024, "outflow_rate_mean": 1004.4711635707399, "system_level_velocity_min": 10.601187171376925, "outflow_rate_min": 414.4040670559013, "system_level_velocity_max": 15.66493818085373}, "info": {"num_steps_trained": 10511878, "load_time_ms": 11.81, "grad_time_ms": 8399.043, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.449298858642578, "vf_loss": 17.455032348632812, "policy_loss": -0.009392036125063896, "kl": 0.014453045092523098, "vf_explained_var": 0.7249270677566528, "entropy": 1.7952797412872314}, "update_time_ms": 8.136, "num_steps_sampled": 10511878, "sample_time_ms": 16375.208}, "episode_len_mean": 671.76, "time_this_iter_s": 24.667845726013184, "pid": 12036, "timesteps_total": 10511878, "hostname": "flow-main", "episodes_total": 5168, "timestamp": 1557229772, "episode_reward_max": 902.0060485470433, "episodes_this_iter": 19, "time_total_s": 6884.344744682312, "time_since_restore": 6884.344744682312}
{"timesteps_since_restore": 10548936, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca35c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-49-57", "episode_reward_min": 142.01419131388133, "timesteps_this_iter": 37058, "training_iteration": 277, "episode_reward_mean": 799.6074682698536, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 277, "custom_metrics": {"cost2_mean": -22.422898786330247, "outflow_rate_max": 1175.2274393606392, "cost1_mean": 305.9390329049338, "system_level_velocity_mean": 12.551903243244391, "cost2_min": -33.18352655757491, "cost1_max": 357.6874621334521, "cost1_min": 66.89653545040215, "cost2_max": -14.361317606546113, "outflow_rate_mean": 1017.3388622211936, "system_level_velocity_min": 10.595815547407085, "outflow_rate_min": 414.4040670559013, "system_level_velocity_max": 15.66493818085373}, "info": {"num_steps_trained": 10548936, "load_time_ms": 11.845, "grad_time_ms": 8356.065, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 21.516536712646484, "vf_loss": 21.521038055419922, "policy_loss": -0.0080192806199193, "kl": 0.013907038606703281, "vf_explained_var": 0.6418361067771912, "entropy": 1.7987301349639893}, "update_time_ms": 8.285, "num_steps_sampled": 10548936, "sample_time_ms": 16451.774}, "episode_len_mean": 677.6, "time_this_iter_s": 24.891037225723267, "pid": 12036, "timesteps_total": 10548936, "hostname": "flow-main", "episodes_total": 5187, "timestamp": 1557229797, "episode_reward_max": 902.0060485470433, "episodes_this_iter": 19, "time_total_s": 6909.235781908035, "time_since_restore": 6909.235781908035}
{"timesteps_since_restore": 10585911, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c1d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c278>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cd30>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-50-21", "episode_reward_min": 54.544803103634344, "timesteps_this_iter": 36975, "training_iteration": 278, "episode_reward_mean": 801.7464511148557, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 278, "custom_metrics": {"cost2_mean": -22.81065119773949, "outflow_rate_max": 1187.972077922078, "cost1_mean": 307.43131829479114, "system_level_velocity_mean": 12.595127060216306, "cost2_min": -37.75115354618279, "cost1_max": 357.6874621334521, "cost1_min": 29.810549184408785, "cost2_max": -12.865311880804494, "outflow_rate_mean": 1021.1352355506987, "system_level_velocity_min": 10.595815547407085, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.53968479835313}, "info": {"num_steps_trained": 10585911, "load_time_ms": 11.981, "grad_time_ms": 8358.251, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.32320213317871, "vf_loss": 20.32909393310547, "policy_loss": -0.009930812753736973, "kl": 0.015959860756993294, "vf_explained_var": 0.6581988334655762, "entropy": 1.812196969985962}, "update_time_ms": 8.184, "num_steps_sampled": 10585911, "sample_time_ms": 16412.841}, "episode_len_mean": 679.28, "time_this_iter_s": 24.256959438323975, "pid": 12036, "timesteps_total": 10585911, "hostname": "flow-main", "episodes_total": 5207, "timestamp": 1557229821, "episode_reward_max": 902.0060485470433, "episodes_this_iter": 20, "time_total_s": 6933.492741346359, "time_since_restore": 6933.492741346359}
{"timesteps_since_restore": 10623636, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54f98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c7f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb540f0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-50-46", "episode_reward_min": 54.544803103634344, "timesteps_this_iter": 37725, "training_iteration": 279, "episode_reward_mean": 801.444165745916, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 279, "custom_metrics": {"cost2_mean": -23.259965460190273, "outflow_rate_max": 1187.972077922078, "cost1_mean": 306.332436441731, "system_level_velocity_mean": 12.517963333579557, "cost2_min": -37.75115354618279, "cost1_max": 352.7147371108872, "cost1_min": 29.810549184408785, "cost2_max": -12.865311880804494, "outflow_rate_mean": 1015.8237026675821, "system_level_velocity_min": 10.595815547407085, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.53968479835313}, "info": {"num_steps_trained": 10623636, "load_time_ms": 11.832, "grad_time_ms": 8412.362, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 18.395973205566406, "vf_loss": 18.40185546875, "policy_loss": -0.009664741344749928, "kl": 0.014948101714253426, "vf_explained_var": 0.6785487532615662, "entropy": 1.8237091302871704}, "update_time_ms": 7.889, "num_steps_sampled": 10623636, "sample_time_ms": 16366.539}, "episode_len_mean": 679.28, "time_this_iter_s": 24.721105575561523, "pid": 12036, "timesteps_total": 10623636, "hostname": "flow-main", "episodes_total": 5224, "timestamp": 1557229846, "episode_reward_max": 902.0060485470433, "episodes_this_iter": 17, "time_total_s": 6958.213846921921, "time_since_restore": 6958.213846921921}
{"timesteps_since_restore": 10662299, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fdd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f2b0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-51-11", "episode_reward_min": 54.544803103634344, "timesteps_this_iter": 38663, "training_iteration": 280, "episode_reward_mean": 803.4234023715705, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 280, "custom_metrics": {"cost2_mean": -23.61727537023678, "outflow_rate_max": 1192.0146753246754, "cost1_mean": 305.925686693653, "system_level_velocity_mean": 12.487121310281218, "cost2_min": -37.75115354618279, "cost1_max": 347.7316471425054, "cost1_min": 29.810549184408785, "cost2_max": -12.865311880804494, "outflow_rate_mean": 1014.8290153988987, "system_level_velocity_min": 10.595815547407085, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.53968479835313}, "info": {"num_steps_trained": 10662299, "load_time_ms": 11.912, "grad_time_ms": 8480.133, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 14.77685260772705, "vf_loss": 14.782831192016602, "policy_loss": -0.010169588029384613, "kl": 0.016553964465856552, "vf_explained_var": 0.7489333748817444, "entropy": 1.8269473314285278}, "update_time_ms": 7.928, "num_steps_sampled": 10662299, "sample_time_ms": 16321.395}, "episode_len_mean": 679.38, "time_this_iter_s": 24.844448566436768, "pid": 12036, "timesteps_total": 10662299, "hostname": "flow-main", "episodes_total": 5239, "timestamp": 1557229871, "episode_reward_max": 902.0060485470433, "episodes_this_iter": 15, "time_total_s": 6983.0582954883575, "time_since_restore": 6983.0582954883575}
{"timesteps_since_restore": 10700246, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb544a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54550>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-51-35", "episode_reward_min": 54.544803103634344, "timesteps_this_iter": 37947, "training_iteration": 281, "episode_reward_mean": 814.7412651312904, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 281, "custom_metrics": {"cost2_mean": -24.138713344367652, "outflow_rate_max": 1197.1417558441558, "cost1_mean": 309.1966823964236, "system_level_velocity_mean": 12.548015748377475, "cost2_min": -37.75115354618279, "cost1_max": 350.45983196526345, "cost1_min": 29.810549184408785, "cost2_max": -12.865311880804494, "outflow_rate_mean": 1023.946471634524, "system_level_velocity_min": 10.595815547407085, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.53968479835313}, "info": {"num_steps_trained": 10700246, "load_time_ms": 12.053, "grad_time_ms": 8505.001, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.469507217407227, "vf_loss": 20.47562599182129, "policy_loss": -0.010153832845389843, "kl": 0.015942825004458427, "vf_explained_var": 0.6623725891113281, "entropy": 1.821650743484497}, "update_time_ms": 7.552, "num_steps_sampled": 10700246, "sample_time_ms": 16138.978}, "episode_len_mean": 682.07, "time_this_iter_s": 24.370726108551025, "pid": 12036, "timesteps_total": 10700246, "hostname": "flow-main", "episodes_total": 5259, "timestamp": 1557229895, "episode_reward_max": 917.6127710213175, "episodes_this_iter": 20, "time_total_s": 7007.429021596909, "time_since_restore": 7007.429021596909}
{"timesteps_since_restore": 10738051, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb548d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c5f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c6d8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-52-00", "episode_reward_min": 54.544803103634344, "timesteps_this_iter": 37805, "training_iteration": 282, "episode_reward_mean": 823.6948877809964, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 282, "custom_metrics": {"cost2_mean": -24.687102496733534, "outflow_rate_max": 1197.1417558441558, "cost1_mean": 310.93980116952184, "system_level_velocity_mean": 12.618467515317988, "cost2_min": -37.75115354618279, "cost1_max": 350.9232096204466, "cost1_min": 29.810549184408785, "cost2_max": -12.865311880804494, "outflow_rate_mean": 1028.7466905556028, "system_level_velocity_min": 10.783288532694339, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 16.53968479835313}, "info": {"num_steps_trained": 10738051, "load_time_ms": 12.041, "grad_time_ms": 8563.783, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 16.668676376342773, "vf_loss": 16.67382049560547, "policy_loss": -0.0088619664311409, "kl": 0.014688750728964806, "vf_explained_var": 0.7482932209968567, "entropy": 1.8199065923690796}, "update_time_ms": 7.308, "num_steps_sampled": 10738051, "sample_time_ms": 16023.419}, "episode_len_mean": 682.07, "time_this_iter_s": 24.520323753356934, "pid": 12036, "timesteps_total": 10738051, "hostname": "flow-main", "episodes_total": 5277, "timestamp": 1557229920, "episode_reward_max": 917.6127710213175, "episodes_this_iter": 18, "time_total_s": 7031.9493453502655, "time_since_restore": 7031.9493453502655}
{"timesteps_since_restore": 10775829, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb546a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54710>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-52-23", "episode_reward_min": 375.0979666554305, "timesteps_this_iter": 37778, "training_iteration": 283, "episode_reward_mean": 831.4104481772176, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 283, "custom_metrics": {"cost2_mean": -25.47182603078637, "outflow_rate_max": 1197.1417558441558, "cost1_mean": 313.03468152939075, "system_level_velocity_mean": 12.588853017764755, "cost2_min": -37.75115354618279, "cost1_max": 350.9232096204466, "cost1_min": 151.0273638011406, "cost2_max": -13.615627386595976, "outflow_rate_mean": 1033.2956519856505, "system_level_velocity_min": 10.783288532694339, "outflow_rate_min": 726.5969095820693, "system_level_velocity_max": 14.227890730631346}, "info": {"num_steps_trained": 10775829, "load_time_ms": 11.682, "grad_time_ms": 8672.541, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 15.30637264251709, "vf_loss": 15.312189102172852, "policy_loss": -0.009938684292137623, "kl": 0.016295067965984344, "vf_explained_var": 0.801201343536377, "entropy": 1.8464800119400024}, "update_time_ms": 7.339, "num_steps_sampled": 10775829, "sample_time_ms": 15773.412}, "episode_len_mean": 685.3, "time_this_iter_s": 23.45801615715027, "pid": 12036, "timesteps_total": 10775829, "hostname": "flow-main", "episodes_total": 5295, "timestamp": 1557229943, "episode_reward_max": 925.4629392838035, "episodes_this_iter": 18, "time_total_s": 7055.407361507416, "time_since_restore": 7055.407361507416}
{"timesteps_since_restore": 10813135, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f3c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4ff28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4fc50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-52-47", "episode_reward_min": 375.0979666554305, "timesteps_this_iter": 37306, "training_iteration": 284, "episode_reward_mean": 838.1313088805882, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 284, "custom_metrics": {"cost2_mean": -26.14997119950291, "outflow_rate_max": 1212.261433766234, "cost1_mean": 314.1870692562704, "system_level_velocity_mean": 12.56283494060271, "cost2_min": -38.424557902262244, "cost1_max": 355.5065894111599, "cost1_min": 158.432572466981, "cost2_max": -13.615627386595976, "outflow_rate_mean": 1036.0408796222184, "system_level_velocity_min": 10.783288532694339, "outflow_rate_min": 726.5969095820693, "system_level_velocity_max": 14.227890730631346}, "info": {"num_steps_trained": 10813135, "load_time_ms": 11.69, "grad_time_ms": 8766.6, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 19.146190643310547, "vf_loss": 19.151636123657227, "policy_loss": -0.009247484616935253, "kl": 0.015020493417978287, "vf_explained_var": 0.7462992072105408, "entropy": 1.8452754020690918}, "update_time_ms": 7.362, "num_steps_sampled": 10813135, "sample_time_ms": 15646.99}, "episode_len_mean": 687.87, "time_this_iter_s": 24.278939723968506, "pid": 12036, "timesteps_total": 10813135, "hostname": "flow-main", "episodes_total": 5314, "timestamp": 1557229967, "episode_reward_max": 926.8328230623775, "episodes_this_iter": 19, "time_total_s": 7079.686301231384, "time_since_restore": 7079.686301231384}
{"timesteps_since_restore": 10850446, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb547b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54d30>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-53-12", "episode_reward_min": 375.0979666554305, "timesteps_this_iter": 37311, "training_iteration": 285, "episode_reward_mean": 843.6545657599912, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 285, "custom_metrics": {"cost2_mean": -26.413584866470664, "outflow_rate_max": 1254.4449162837163, "cost1_mean": 317.17441388423435, "system_level_velocity_mean": 12.682634470447981, "cost2_min": -38.424557902262244, "cost1_max": 357.46539417808754, "cost1_min": 158.432572466981, "cost2_max": -13.615627386595976, "outflow_rate_mean": 1043.5459037101305, "system_level_velocity_min": 10.783288532694339, "outflow_rate_min": 726.5969095820693, "system_level_velocity_max": 14.33783809581892}, "info": {"num_steps_trained": 10850446, "load_time_ms": 11.298, "grad_time_ms": 8788.354, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 22.665294647216797, "vf_loss": 22.67206382751465, "policy_loss": -0.010515592992305756, "kl": 0.014795985072851181, "vf_explained_var": 0.6716160178184509, "entropy": 1.8395612239837646}, "update_time_ms": 7.635, "num_steps_sampled": 10850446, "sample_time_ms": 15567.502}, "episode_len_mean": 688.49, "time_this_iter_s": 24.588775396347046, "pid": 12036, "timesteps_total": 10850446, "hostname": "flow-main", "episodes_total": 5334, "timestamp": 1557229992, "episode_reward_max": 926.8328230623775, "episodes_this_iter": 20, "time_total_s": 7104.275076627731, "time_since_restore": 7104.275076627731}
{"timesteps_since_restore": 10887845, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fca6a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fc91eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb542e8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-53-36", "episode_reward_min": 50.52737009776148, "timesteps_this_iter": 37399, "training_iteration": 286, "episode_reward_mean": 827.9747450042743, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 286, "custom_metrics": {"cost2_mean": -26.24716240280917, "outflow_rate_max": 1254.4449162837163, "cost1_mean": 311.70975710599276, "system_level_velocity_mean": 12.73950088973556, "cost2_min": -38.424557902262244, "cost1_max": 366.1520311957132, "cost1_min": 28.669733838527712, "cost2_max": -14.3110292164114, "outflow_rate_mean": 1031.149437939501, "system_level_velocity_min": 10.990890141679143, "outflow_rate_min": 334.62201022295307, "system_level_velocity_max": 16.838553027230716}, "info": {"num_steps_trained": 10887845, "load_time_ms": 11.299, "grad_time_ms": 8910.19, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 20.17439842224121, "vf_loss": 20.18124008178711, "policy_loss": -0.01092936098575592, "kl": 0.016144627705216408, "vf_explained_var": 0.7085094451904297, "entropy": 1.8532313108444214}, "update_time_ms": 7.826, "num_steps_sampled": 10887845, "sample_time_ms": 15415.531}, "episode_len_mean": 676.35, "time_this_iter_s": 24.360345363616943, "pid": 12036, "timesteps_total": 10887845, "hostname": "flow-main", "episodes_total": 5354, "timestamp": 1557230016, "episode_reward_max": 926.8328230623775, "episodes_this_iter": 20, "time_total_s": 7128.635421991348, "time_since_restore": 7128.635421991348}
{"timesteps_since_restore": 10925717, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54390>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-54-01", "episode_reward_min": 50.52737009776148, "timesteps_this_iter": 37872, "training_iteration": 287, "episode_reward_mean": 824.8483646568601, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 287, "custom_metrics": {"cost2_mean": -26.30225763711553, "outflow_rate_max": 1254.4449162837163, "cost1_mean": 311.0142861936958, "system_level_velocity_mean": 12.701049466967977, "cost2_min": -38.424557902262244, "cost1_max": 366.1520311957132, "cost1_min": 28.669733838527712, "cost2_max": -14.3110292164114, "outflow_rate_mean": 1031.0969863016412, "system_level_velocity_min": 10.664298453606195, "outflow_rate_min": 334.62201022295307, "system_level_velocity_max": 16.838553027230716}, "info": {"num_steps_trained": 10925717, "load_time_ms": 11.167, "grad_time_ms": 9059.676, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 13.050836563110352, "vf_loss": 13.056896209716797, "policy_loss": -0.009720434434711933, "kl": 0.01446345541626215, "vf_explained_var": 0.8091902732849121, "entropy": 1.860308289527893}, "update_time_ms": 8.086, "num_steps_sampled": 10925717, "sample_time_ms": 15197.092}, "episode_len_mean": 676.64, "time_this_iter_s": 24.21102237701416, "pid": 12036, "timesteps_total": 10925717, "hostname": "flow-main", "episodes_total": 5368, "timestamp": 1557230041, "episode_reward_max": 926.8328230623775, "episodes_this_iter": 14, "time_total_s": 7152.846444368362, "time_since_restore": 7152.846444368362}
{"timesteps_since_restore": 10963565, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f3c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f160>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-54-27", "episode_reward_min": 50.52737009776148, "timesteps_this_iter": 37848, "training_iteration": 288, "episode_reward_mean": 824.2075821502968, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 288, "custom_metrics": {"cost2_mean": -25.801683192850046, "outflow_rate_max": 1254.4449162837163, "cost1_mean": 311.3069272442005, "system_level_velocity_mean": 12.70764357511889, "cost2_min": -38.424557902262244, "cost1_max": 366.1520311957132, "cost1_min": 28.669733838527712, "cost2_max": -14.3110292164114, "outflow_rate_mean": 1031.8760291729066, "system_level_velocity_min": 10.664298453606195, "outflow_rate_min": 334.62201022295307, "system_level_velocity_max": 16.838553027230716}, "info": {"num_steps_trained": 10963565, "load_time_ms": 10.737, "grad_time_ms": 9184.22, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 19.12806510925293, "vf_loss": 19.134761810302734, "policy_loss": -0.010558314621448517, "kl": 0.01525885984301567, "vf_explained_var": 0.7615357041358948, "entropy": 1.8329213857650757}, "update_time_ms": 8.409, "num_steps_sampled": 10963565, "sample_time_ms": 15244.469}, "episode_len_mean": 677.22, "time_this_iter_s": 25.994778394699097, "pid": 12036, "timesteps_total": 10963565, "hostname": "flow-main", "episodes_total": 5389, "timestamp": 1557230067, "episode_reward_max": 926.8328230623775, "episodes_this_iter": 21, "time_total_s": 7178.8412227630615, "time_since_restore": 7178.8412227630615}
{"timesteps_since_restore": 11001161, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54198>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54940>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-54-51", "episode_reward_min": 44.38496507158831, "timesteps_this_iter": 37596, "training_iteration": 289, "episode_reward_mean": 815.2975701551217, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 289, "custom_metrics": {"cost2_mean": -25.466565510430883, "outflow_rate_max": 1254.4449162837163, "cost1_mean": 308.84684406956615, "system_level_velocity_mean": 12.738948074157651, "cost2_min": -36.49652829574964, "cost1_max": 366.1520311957132, "cost1_min": 25.928788567743386, "cost2_max": -12.466491728508373, "outflow_rate_mean": 1025.3758256273384, "system_level_velocity_min": 10.664298453606195, "outflow_rate_min": 334.62201022295307, "system_level_velocity_max": 17.62692614505498}, "info": {"num_steps_trained": 11001161, "load_time_ms": 10.757, "grad_time_ms": 9231.491, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.429107666015625, "vf_loss": 18.43524742126465, "policy_loss": -0.01020605955272913, "kl": 0.016065558418631554, "vf_explained_var": 0.7702839374542236, "entropy": 1.8464463949203491}, "update_time_ms": 8.805, "num_steps_sampled": 11001161, "sample_time_ms": 15177.13}, "episode_len_mean": 672.45, "time_this_iter_s": 24.52576971054077, "pid": 12036, "timesteps_total": 11001161, "hostname": "flow-main", "episodes_total": 5409, "timestamp": 1557230091, "episode_reward_max": 926.8328230623775, "episodes_this_iter": 20, "time_total_s": 7203.366992473602, "time_since_restore": 7203.366992473602}
{"timesteps_since_restore": 11038767, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f94611707b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9461170198>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-55-16", "episode_reward_min": 44.38496507158831, "timesteps_this_iter": 37606, "training_iteration": 290, "episode_reward_mean": 808.4947398004256, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 290, "custom_metrics": {"cost2_mean": -25.52831655624919, "outflow_rate_max": 1208.5088987012987, "cost1_mean": 307.45578162754106, "system_level_velocity_mean": 12.75926261750515, "cost2_min": -40.736519911674925, "cost1_max": 366.1520311957132, "cost1_min": 25.928788567743386, "cost2_max": -12.466491728508373, "outflow_rate_mean": 1023.6944635365844, "system_level_velocity_min": 10.664298453606195, "outflow_rate_min": 334.62201022295307, "system_level_velocity_max": 17.62692614505498}, "info": {"num_steps_trained": 11038767, "load_time_ms": 10.274, "grad_time_ms": 9201.628, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 17.491134643554688, "vf_loss": 17.498083114624023, "policy_loss": -0.010978469625115395, "kl": 0.015917733311653137, "vf_explained_var": 0.7808258533477783, "entropy": 1.8574293851852417}, "update_time_ms": 8.692, "num_steps_sampled": 11038767, "sample_time_ms": 15225.237}, "episode_len_mean": 669.24, "time_this_iter_s": 25.029448986053467, "pid": 12036, "timesteps_total": 11038767, "hostname": "flow-main", "episodes_total": 5428, "timestamp": 1557230116, "episode_reward_max": 918.0377471135273, "episodes_this_iter": 19, "time_total_s": 7228.396441459656, "time_since_restore": 7228.396441459656}
{"timesteps_since_restore": 11076727, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbcf8>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-55-42", "episode_reward_min": 44.38496507158831, "timesteps_this_iter": 37960, "training_iteration": 291, "episode_reward_mean": 812.1559072200325, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 291, "custom_metrics": {"cost2_mean": -25.916109574959293, "outflow_rate_max": 1183.6309142857142, "cost1_mean": 309.2950466166238, "system_level_velocity_mean": 12.733054074894387, "cost2_min": -40.736519911674925, "cost1_max": 360.4434934573859, "cost1_min": 25.928788567743386, "cost2_max": -12.466491728508373, "outflow_rate_mean": 1028.2101821361655, "system_level_velocity_min": 10.664298453606195, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.62692614505498}, "info": {"num_steps_trained": 11076727, "load_time_ms": 10.289, "grad_time_ms": 9147.551, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 18.850688934326172, "vf_loss": 18.855443954467773, "policy_loss": -0.008699130266904831, "kl": 0.015580866485834122, "vf_explained_var": 0.7590429782867432, "entropy": 1.8453171253204346}, "update_time_ms": 9.067, "num_steps_sampled": 11076727, "sample_time_ms": 15403.746}, "episode_len_mean": 673.04, "time_this_iter_s": 25.616803884506226, "pid": 12036, "timesteps_total": 11076727, "hostname": "flow-main", "episodes_total": 5448, "timestamp": 1557230142, "episode_reward_max": 931.1514567332215, "episodes_this_iter": 20, "time_total_s": 7254.013245344162, "time_since_restore": 7254.013245344162}
{"timesteps_since_restore": 11114463, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb5d940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb5deb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb5dd68>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-56-06", "episode_reward_min": 44.38496507158831, "timesteps_this_iter": 37736, "training_iteration": 292, "episode_reward_mean": 817.0435942199874, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 292, "custom_metrics": {"cost2_mean": -26.421134885914086, "outflow_rate_max": 1192.8201194805195, "cost1_mean": 311.67583312516285, "system_level_velocity_mean": 12.77067661640172, "cost2_min": -40.736519911674925, "cost1_max": 363.5857377956104, "cost1_min": 25.928788567743386, "cost2_max": -12.466491728508373, "outflow_rate_mean": 1030.6882149637374, "system_level_velocity_min": 10.58373169947061, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.62692614505498}, "info": {"num_steps_trained": 11114463, "load_time_ms": 10.419, "grad_time_ms": 9156.081, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 14.634672164916992, "vf_loss": 14.64176082611084, "policy_loss": -0.011121419258415699, "kl": 0.015928667038679123, "vf_explained_var": 0.8423741459846497, "entropy": 1.8674935102462769}, "update_time_ms": 9.043, "num_steps_sampled": 11114463, "sample_time_ms": 15338.355}, "episode_len_mean": 675.38, "time_this_iter_s": 23.9566912651062, "pid": 12036, "timesteps_total": 11114463, "hostname": "flow-main", "episodes_total": 5467, "timestamp": 1557230166, "episode_reward_max": 931.1514567332215, "episodes_this_iter": 19, "time_total_s": 7277.969936609268, "time_since_restore": 7277.969936609268}
{"timesteps_since_restore": 11152357, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c160>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-56-31", "episode_reward_min": 44.38496507158831, "timesteps_this_iter": 37894, "training_iteration": 293, "episode_reward_mean": 809.2394941990445, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 293, "custom_metrics": {"cost2_mean": -26.64555229688939, "outflow_rate_max": 1192.8201194805195, "cost1_mean": 309.2407507992, "system_level_velocity_mean": 12.875773543479308, "cost2_min": -40.736519911674925, "cost1_max": 363.5857377956104, "cost1_min": 25.928788567743386, "cost2_max": -12.466491728508373, "outflow_rate_mean": 1029.1134744215244, "system_level_velocity_min": 10.58373169947061, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.62692614505498}, "info": {"num_steps_trained": 11152357, "load_time_ms": 11.055, "grad_time_ms": 9186.076, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.56708526611328, "vf_loss": 16.572479248046875, "policy_loss": -0.00898023508489132, "kl": 0.014176549389958382, "vf_explained_var": 0.8036869168281555, "entropy": 1.8511064052581787}, "update_time_ms": 8.96, "num_steps_sampled": 11152357, "sample_time_ms": 15425.082}, "episode_len_mean": 666.07, "time_this_iter_s": 24.62777352333069, "pid": 12036, "timesteps_total": 11152357, "hostname": "flow-main", "episodes_total": 5485, "timestamp": 1557230191, "episode_reward_max": 931.1514567332215, "episodes_this_iter": 18, "time_total_s": 7302.597710132599, "time_since_restore": 7302.597710132599}
{"timesteps_since_restore": 11189934, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb4e0>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-56-54", "episode_reward_min": 48.5431491432259, "timesteps_this_iter": 37577, "training_iteration": 294, "episode_reward_mean": 808.918639524384, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 294, "custom_metrics": {"cost2_mean": -26.940903348849098, "outflow_rate_max": 1192.8201194805195, "cost1_mean": 308.5403605318464, "system_level_velocity_mean": 12.85965221118795, "cost2_min": -40.736519911674925, "cost1_max": 363.5857377956104, "cost1_min": 31.72440785044837, "cost2_max": -16.2231097462417, "outflow_rate_mean": 1023.8778713682507, "system_level_velocity_min": 10.58373169947061, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70732036626068}, "info": {"num_steps_trained": 11189934, "load_time_ms": 10.977, "grad_time_ms": 9211.745, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.319238662719727, "vf_loss": 16.3255615234375, "policy_loss": -0.010167730040848255, "kl": 0.015194746665656567, "vf_explained_var": 0.8343597650527954, "entropy": 1.8685529232025146}, "update_time_ms": 8.987, "num_steps_sampled": 11189934, "sample_time_ms": 15285.288}, "episode_len_mean": 666.14, "time_this_iter_s": 23.13664484024048, "pid": 12036, "timesteps_total": 11189934, "hostname": "flow-main", "episodes_total": 5504, "timestamp": 1557230214, "episode_reward_max": 931.1514567332215, "episodes_this_iter": 19, "time_total_s": 7325.734354972839, "time_since_restore": 7325.734354972839}
{"timesteps_since_restore": 11228416, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54780>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-57-18", "episode_reward_min": 48.5431491432259, "timesteps_this_iter": 38482, "training_iteration": 295, "episode_reward_mean": 805.9999158512927, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 295, "custom_metrics": {"cost2_mean": -27.173657432474513, "outflow_rate_max": 1192.8201194805195, "cost1_mean": 305.4465080136582, "system_level_velocity_mean": 12.79553604321548, "cost2_min": -41.70009975157878, "cost1_max": 363.5857377956104, "cost1_min": 31.72440785044837, "cost2_max": -14.941492606196103, "outflow_rate_mean": 1012.7414391035977, "system_level_velocity_min": 10.58373169947061, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70732036626068}, "info": {"num_steps_trained": 11228416, "load_time_ms": 11.205, "grad_time_ms": 9216.679, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 14.161992073059082, "vf_loss": 14.166803359985352, "policy_loss": -0.00875732209533453, "kl": 0.015597062185406685, "vf_explained_var": 0.8345516920089722, "entropy": 1.8913472890853882}, "update_time_ms": 9.035, "num_steps_sampled": 11228416, "sample_time_ms": 15247.85}, "episode_len_mean": 663.44, "time_this_iter_s": 24.24807047843933, "pid": 12036, "timesteps_total": 11228416, "hostname": "flow-main", "episodes_total": 5521, "timestamp": 1557230238, "episode_reward_max": 931.1514567332215, "episodes_this_iter": 17, "time_total_s": 7349.982425451279, "time_since_restore": 7349.982425451279}
{"timesteps_since_restore": 11267030, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c3c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4cd30>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-57-43", "episode_reward_min": 48.5431491432259, "timesteps_this_iter": 38614, "training_iteration": 296, "episode_reward_mean": 806.7915477520495, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 296, "custom_metrics": {"cost2_mean": -27.676786594191086, "outflow_rate_max": 1192.8201194805195, "cost1_mean": 304.02825872993014, "system_level_velocity_mean": 12.748028409642323, "cost2_min": -46.705497917508936, "cost1_max": 363.5857377956104, "cost1_min": 31.72440785044837, "cost2_max": -14.941492606196103, "outflow_rate_mean": 1011.078596888362, "system_level_velocity_min": 10.58373169947061, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70732036626068}, "info": {"num_steps_trained": 11267030, "load_time_ms": 11.143, "grad_time_ms": 9194.206, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 17.774337768554688, "vf_loss": 17.778423309326172, "policy_loss": -0.00783274881541729, "kl": 0.01480333786457777, "vf_explained_var": 0.7988327741622925, "entropy": 1.8767645359039307}, "update_time_ms": 9.03, "num_steps_sampled": 11267030, "sample_time_ms": 15343.189}, "episode_len_mean": 662.51, "time_this_iter_s": 25.109338521957397, "pid": 12036, "timesteps_total": 11267030, "hostname": "flow-main", "episodes_total": 5540, "timestamp": 1557230263, "episode_reward_max": 948.6564062379731, "episodes_this_iter": 19, "time_total_s": 7375.091763973236, "time_since_restore": 7375.091763973236}
{"timesteps_since_restore": 11304869, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbb6a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fcbbe48>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-58-08", "episode_reward_min": 48.5431491432259, "timesteps_this_iter": 37839, "training_iteration": 297, "episode_reward_mean": 809.7708481581291, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 297, "custom_metrics": {"cost2_mean": -27.683398977697784, "outflow_rate_max": 1228.347625974026, "cost1_mean": 306.56692313144754, "system_level_velocity_mean": 12.790344143437745, "cost2_min": -46.705497917508936, "cost1_max": 358.5980907513273, "cost1_min": 31.72440785044837, "cost2_max": -14.941492606196103, "outflow_rate_mean": 1018.0175302182154, "system_level_velocity_min": 10.58373169947061, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70732036626068}, "info": {"num_steps_trained": 11304869, "load_time_ms": 11.324, "grad_time_ms": 9140.811, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2531249523162842, "total_loss": 15.463476181030273, "vf_loss": 15.469141006469727, "policy_loss": -0.009281069040298462, "kl": 0.014289416372776031, "vf_explained_var": 0.8334631323814392, "entropy": 1.8578581809997559}, "update_time_ms": 9.023, "num_steps_sampled": 11304869, "sample_time_ms": 15404.476}, "episode_len_mean": 665.46, "time_this_iter_s": 24.28714084625244, "pid": 12036, "timesteps_total": 11304869, "hostname": "flow-main", "episodes_total": 5560, "timestamp": 1557230288, "episode_reward_max": 948.6564062379731, "episodes_this_iter": 20, "time_total_s": 7399.3789048194885, "time_since_restore": 7399.3789048194885}
{"timesteps_since_restore": 11342377, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4f208>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-58-33", "episode_reward_min": 48.5431491432259, "timesteps_this_iter": 37508, "training_iteration": 298, "episode_reward_mean": 818.3411365173495, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 298, "custom_metrics": {"cost2_mean": -28.31594431261619, "outflow_rate_max": 1228.347625974026, "cost1_mean": 309.95172731047353, "system_level_velocity_mean": 12.803799977275265, "cost2_min": -46.705497917508936, "cost1_max": 363.5600514760143, "cost1_min": 31.72440785044837, "cost2_max": -14.941492606196103, "outflow_rate_mean": 1025.1139796664136, "system_level_velocity_min": 10.59013174009387, "outflow_rate_min": 332.7571298140349, "system_level_velocity_max": 17.70732036626068}, "info": {"num_steps_trained": 11342377, "load_time_ms": 11.59, "grad_time_ms": 9056.06, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.49212074279785, "vf_loss": 19.497621536254883, "policy_loss": -0.00945332646369934, "kl": 0.01561671495437622, "vf_explained_var": 0.7403972744941711, "entropy": 1.828989863395691}, "update_time_ms": 9.074, "num_steps_sampled": 11342377, "sample_time_ms": 15422.168}, "episode_len_mean": 671.56, "time_this_iter_s": 25.337712049484253, "pid": 12036, "timesteps_total": 11342377, "hostname": "flow-main", "episodes_total": 5580, "timestamp": 1557230313, "episode_reward_max": 948.6564062379731, "episodes_this_iter": 20, "time_total_s": 7424.716616868973, "time_since_restore": 7424.716616868973}
{"timesteps_since_restore": 11379823, "done": false, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb54c50>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-58-58", "episode_reward_min": 44.380085166418745, "timesteps_this_iter": 37446, "training_iteration": 299, "episode_reward_mean": 816.7318515902684, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 299, "custom_metrics": {"cost2_mean": -28.587447916679285, "outflow_rate_max": 1228.347625974026, "cost1_mean": 310.850317603443, "system_level_velocity_mean": 12.840519822288313, "cost2_min": -46.705497917508936, "cost1_max": 363.5600514760143, "cost1_min": 25.64187144604621, "cost2_max": -11.506096209456128, "outflow_rate_mean": 1028.970838340067, "system_level_velocity_min": 10.9252858917484, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.643409661312592}, "info": {"num_steps_trained": 11379823, "load_time_ms": 11.521, "grad_time_ms": 8989.535, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 19.760976791381836, "vf_loss": 19.767120361328125, "policy_loss": -0.009864810854196548, "kl": 0.014706210233271122, "vf_explained_var": 0.7804610133171082, "entropy": 1.8540624380111694}, "update_time_ms": 9.055, "num_steps_sampled": 11379823, "sample_time_ms": 15561.954}, "episode_len_mean": 671.49, "time_this_iter_s": 25.287281274795532, "pid": 12036, "timesteps_total": 11379823, "hostname": "flow-main", "episodes_total": 5601, "timestamp": 1557230338, "episode_reward_max": 948.6564062379731, "episodes_this_iter": 21, "time_total_s": 7450.003898143768, "time_since_restore": 7450.003898143768}
{"timesteps_since_restore": 11417382, "done": true, "node_ip": "10.138.0.2", "config": {"input": "sampler", "output_compress_columns": ["obs", "new_obs"], "sgd_minibatch_size": 128, "train_batch_size": 30000, "log_level": "INFO", "num_workers": 20, "num_sgd_iter": 10, "lr": 0.0005, "monitor": false, "lr_schedule": null, "compress_observations": false, "straggler_mitigation": false, "input_evaluation": null, "sample_async": false, "lambda": 0.97, "multiagent": {"policy_mapping_fn": null, "policy_graphs": {}, "policies_to_train": null}, "kl_coeff": 0.2, "vf_share_layers": false, "model": {"lstm_use_prev_action_reward": false, "lstm_cell_size": 256, "fcnet_activation": "tanh", "dim": 84, "fcnet_hiddens": [100, 50, 25], "custom_model": null, "channel_major": false, "conv_filters": null, "squash_to_range": false, "conv_activation": "relu", "framestack": true, "grayscale": false, "zero_mean": true, "max_seq_len": 20, "free_log_std": false, "custom_preprocessor": null, "custom_options": {}, "use_lstm": false}, "clip_param": 0.3, "num_cpus_for_driver": 1, "synchronize_filters": true, "num_cpus_per_worker": 1, "vf_clip_param": 1000000.0, "vf_loss_coeff": 1.0, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.3,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 1000,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "output": null, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v01000_[eta1, eta2, eta3]:[1.0, 0.3, 0.0]_t_min:10.0", "batch_mode": "truncate_episodes", "simple_optimizer": false, "sample_batch_size": 200, "collect_metrics_timeout": 180, "clip_rewards": null, "clip_actions": false, "kl_target": 0.01, "observation_filter": "NoFilter", "use_gae": true, "entropy_coeff": 0.0, "callbacks": {"on_train_result": null, "on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f945fb4c438>"}, "gamma": 0.99, "horizon": 1500, "optimizer": {}, "num_gpus_per_worker": 0, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "num_gpus": 0, "tf_session_args": {"intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "log_device_placement": false, "allow_soft_placement": true, "device_count": {"CPU": 1}, "gpu_options": {"allow_growth": true}}}, "date": "2019-05-07_11-59-24", "episode_reward_min": 44.380085166418745, "timesteps_this_iter": 37559, "training_iteration": 300, "episode_reward_mean": 822.9150546482144, "experiment_id": "83dc464e11724eaca1061ebc9c084b90", "policy_reward_mean": {}, "num_metric_batches_dropped": 0, "iterations_since_restore": 300, "custom_metrics": {"cost2_mean": -27.942532162706353, "outflow_rate_max": 1228.347625974026, "cost1_mean": 314.69876820159743, "system_level_velocity_mean": 12.893034109035755, "cost2_min": -46.705497917508936, "cost1_max": 364.91426580117866, "cost1_min": 25.64187144604621, "cost2_max": -11.506096209456128, "outflow_rate_mean": 1040.0142772469221, "system_level_velocity_min": 10.9252858917484, "outflow_rate_min": 340.0431742023662, "system_level_velocity_max": 17.643409661312592}, "info": {"num_steps_trained": 11417382, "load_time_ms": 11.75, "grad_time_ms": 9031.545, "default": {"cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.25312498211860657, "total_loss": 16.681747436523438, "vf_loss": 16.68777084350586, "policy_loss": -0.009704818949103355, "kl": 0.014538688585162163, "vf_explained_var": 0.7779802680015564, "entropy": 1.85701322555542}, "update_time_ms": 9.307, "num_steps_sampled": 11417382, "sample_time_ms": 15574.33}, "episode_len_mean": 676.46, "time_this_iter_s": 25.571189403533936, "pid": 12036, "timesteps_total": 11417382, "hostname": "flow-main", "episodes_total": 5617, "timestamp": 1557230364, "episode_reward_max": 948.6564062379731, "episodes_this_iter": 16, "time_total_s": 7475.575087547302, "time_since_restore": 7475.575087547302}
