{"episode_reward_min": 200.16334906833362, "episode_reward_mean": 252.08526562405353, "time_total_s": 22.332738876342773, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": 0.0, "cost2_max": 0.0, "outflow_rate_max": 705.5107398602356, "system_level_velocity_mean": 7.944307719645896, "cost1_max": 236.4868869904485, "outflow_rate_mean": 620.3306697193337, "outflow_rate_min": 531.2563963265213, "cost2_mean": 0.0, "cost1_min": 170.63732990886183, "cost1_mean": 203.2506899244381, "system_level_velocity_min": 6.661721504981539, "system_level_velocity_max": 9.250095535954554}, "timesteps_this_iter": 39796, "info": {"load_time_ms": 64.756, "update_time_ms": 711.68, "grad_time_ms": 7632.519, "default": {"policy_loss": -0.0027123386971652508, "vf_loss": 1.4642876386642456, "total_loss": 1.4622893333435059, "cur_kl_coeff": 0.20000003278255463, "vf_explained_var": 0.8678448796272278, "entropy": 1.4146828651428223, "kl": 0.0035704965703189373, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13811.495, "num_steps_trained": 39796, "num_steps_sampled": 39796}, "timestamp": 1557100459, "date": "2019-05-05_23-54-19", "episode_len_mean": 700.0, "iterations_since_restore": 1, "done": false, "timesteps_total": 39796, "episode_reward_max": 298.64432216439457, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3154110ba8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3154110be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3154110c18>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 7, "time_this_iter_s": 22.332738876342773, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 7, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 39796, "training_iteration": 1, "time_since_restore": 22.332738876342773}
{"episode_reward_min": 67.81593196393274, "episode_reward_mean": 293.53202593328746, "time_total_s": 43.06240773200989, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.16666666666666666, "cost2_max": 0.0, "outflow_rate_max": 808.5039021314569, "system_level_velocity_mean": 8.20557737682184, "cost1_max": 247.4754937541456, "outflow_rate_mean": 622.7226932052688, "outflow_rate_min": 531.2563963265213, "cost2_mean": -0.006366033895287703, "cost1_min": 31.82982464653775, "cost1_mean": 196.24395825529996, "system_level_velocity_min": 6.661721504981539, "system_level_velocity_max": 18.084937099195134}, "timesteps_this_iter": 38456, "info": {"load_time_ms": 37.093, "update_time_ms": 358.892, "grad_time_ms": 7446.477, "default": {"policy_loss": -0.006643235683441162, "vf_loss": 1.5523954629898071, "total_loss": 1.5477960109710693, "cur_kl_coeff": 0.10000001639127731, "vf_explained_var": 0.9290003180503845, "entropy": 1.4277236461639404, "kl": 0.0204384233802557, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13596.579, "num_steps_trained": 78252, "num_steps_sampled": 78252}, "timestamp": 1557100480, "date": "2019-05-05_23-54-40", "episode_len_mean": 676.75, "iterations_since_restore": 2, "done": false, "timesteps_total": 78252, "episode_reward_max": 450.0831072672155, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2828>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2898>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 21, "time_this_iter_s": 20.729668855667114, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 28, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 78252, "training_iteration": 2, "time_since_restore": 43.06240773200989}
{"episode_reward_min": 67.81593196393274, "episode_reward_mean": 354.548309216984, "time_total_s": 65.56267309188843, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.16666666666666666, "cost2_max": 0.0, "outflow_rate_max": 1126.8016712334852, "system_level_velocity_mean": 8.7825064250639, "cost1_max": 365.46441770933234, "outflow_rate_mean": 685.1361776512773, "outflow_rate_min": 531.2563963265213, "cost2_mean": -0.003874977153653384, "cost1_min": 31.82982464653775, "cost1_mean": 218.0794363435296, "system_level_velocity_min": 6.661721504981539, "system_level_velocity_max": 18.084937099195134}, "timesteps_this_iter": 40531, "info": {"load_time_ms": 27.573, "update_time_ms": 241.285, "grad_time_ms": 7865.426, "default": {"policy_loss": -0.006125850602984428, "vf_loss": 3.270648717880249, "total_loss": 3.266068458557129, "cur_kl_coeff": 0.1499999761581421, "vf_explained_var": 0.930592954158783, "entropy": 1.395155906677246, "kl": 0.010304165072739124, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13633.249, "num_steps_trained": 118783, "num_steps_sampled": 118783}, "timestamp": 1557100503, "date": "2019-05-05_23-55-03", "episode_len_mean": 685.8478260869565, "iterations_since_restore": 3, "done": false, "timesteps_total": 118783, "episode_reward_max": 903.0592293644403, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1748>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc17b8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.50026535987854, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 46, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 118783, "training_iteration": 3, "time_since_restore": 65.56267309188843}
{"episode_reward_min": 67.81593196393274, "episode_reward_mean": 435.572118271854, "time_total_s": 89.65328645706177, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.16666666666666666, "cost2_max": 0.0, "outflow_rate_max": 1126.8016712334852, "system_level_velocity_mean": 9.19078526221776, "cost1_max": 365.46441770933234, "outflow_rate_mean": 737.6233189648702, "outflow_rate_min": 531.2563963265213, "cost2_mean": -0.005383060689383302, "cost1_min": 31.82982464653775, "cost1_mean": 232.46501026552522, "system_level_velocity_min": 6.661721504981539, "system_level_velocity_max": 18.084937099195134}, "timesteps_this_iter": 40781, "info": {"load_time_ms": 22.813, "update_time_ms": 182.452, "grad_time_ms": 7795.545, "default": {"policy_loss": -0.0062761008739471436, "vf_loss": 3.926448345184326, "total_loss": 3.921448230743408, "cur_kl_coeff": 0.14999999105930328, "vf_explained_var": 0.9192562699317932, "entropy": 1.393898606300354, "kl": 0.008502369746565819, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 14329.868, "num_steps_trained": 159564, "num_steps_sampled": 159564}, "timestamp": 1557100527, "date": "2019-05-05_23-55-27", "episode_len_mean": 690.1363636363636, "iterations_since_restore": 4, "done": false, "timesteps_total": 159564, "episode_reward_max": 903.0592293644403, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcb00>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcc18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcdd8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 20, "time_this_iter_s": 24.09061336517334, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 66, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 159564, "training_iteration": 4, "time_since_restore": 89.65328645706177}
{"episode_reward_min": 67.81593196393274, "episode_reward_mean": 486.80368751548616, "time_total_s": 113.21473932266235, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.22872285495829123, "cost2_max": 0.0, "outflow_rate_max": 1126.8016712334852, "system_level_velocity_mean": 9.494444638798983, "cost1_max": 365.46441770933234, "outflow_rate_mean": 771.4399308752697, "outflow_rate_min": 531.2563963265213, "cost2_mean": -0.010177456486060998, "cost1_min": 31.82982464653775, "cost1_mean": 242.43102223764313, "system_level_velocity_min": 6.661721504981539, "system_level_velocity_max": 18.084937099195134}, "timesteps_this_iter": 41295, "info": {"load_time_ms": 19.734, "update_time_ms": 147.169, "grad_time_ms": 7810.923, "default": {"policy_loss": -0.007185973692685366, "vf_loss": 5.028143882751465, "total_loss": 5.022482872009277, "cur_kl_coeff": 0.14999999105930328, "vf_explained_var": 0.9051775932312012, "entropy": 1.3775794506072998, "kl": 0.010168250650167465, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 14584.275, "num_steps_trained": 200859, "num_steps_sampled": 200859}, "timestamp": 1557100550, "date": "2019-05-05_23-55-50", "episode_len_mean": 691.9629629629629, "iterations_since_restore": 5, "done": false, "timesteps_total": 200859, "episode_reward_max": 903.0592293644403, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1d68>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1eb8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 15, "time_this_iter_s": 23.561452865600586, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 81, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 200859, "training_iteration": 5, "time_since_restore": 113.21473932266235}
{"episode_reward_min": 67.81593196393274, "episode_reward_mean": 529.6527918669326, "time_total_s": 136.58131575584412, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8010756932794321, "cost2_max": 0.0, "outflow_rate_max": 1126.8016712334852, "system_level_velocity_mean": 9.741773321787779, "cost1_max": 365.46441770933234, "outflow_rate_mean": 795.3913077585698, "outflow_rate_min": 531.2563963265213, "cost2_mean": -0.01917339195031847, "cost1_min": 31.82982464653775, "cost1_mean": 250.19523381501116, "system_level_velocity_min": 6.661721504981539, "system_level_velocity_max": 18.084937099195134}, "timesteps_this_iter": 43074, "info": {"load_time_ms": 18.194, "update_time_ms": 124.357, "grad_time_ms": 8057.085, "default": {"policy_loss": -0.007327074185013771, "vf_loss": 5.397430419921875, "total_loss": 5.391457557678223, "cur_kl_coeff": 0.1499999761581421, "vf_explained_var": 0.8967063426971436, "entropy": 1.3812905550003052, "kl": 0.009026525542140007, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 14480.131, "num_steps_trained": 243933, "num_steps_sampled": 243933}, "timestamp": 1557100574, "date": "2019-05-05_23-56-14", "episode_len_mean": 693.0744680851063, "iterations_since_restore": 6, "done": false, "timesteps_total": 243933, "episode_reward_max": 1017.3998851204732, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2320>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2908>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 13, "time_this_iter_s": 23.366576433181763, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 94, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 243933, "training_iteration": 6, "time_since_restore": 136.58131575584412}
{"episode_reward_min": 67.81593196393274, "episode_reward_mean": 599.7892364892282, "time_total_s": 160.48961925506592, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8010756932794321, "cost2_max": 0.0, "outflow_rate_max": 1126.8016712334852, "system_level_velocity_mean": 10.156326518970758, "cost1_max": 365.46441770933234, "outflow_rate_mean": 842.6801434684176, "outflow_rate_min": 533.328862649211, "cost2_mean": -0.023526681011706397, "cost1_min": 31.82982464653775, "cost1_mean": 262.3738516358205, "system_level_velocity_min": 6.688799656153733, "system_level_velocity_max": 18.084937099195134}, "timesteps_this_iter": 42516, "info": {"load_time_ms": 16.73, "update_time_ms": 107.761, "grad_time_ms": 8327.379, "default": {"policy_loss": -0.007937747053802013, "vf_loss": 6.810522079467773, "total_loss": 6.803930759429932, "cur_kl_coeff": 0.14999999105930328, "vf_explained_var": 0.8860448002815247, "entropy": 1.375990867614746, "kl": 0.008977527730166912, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 14391.388, "num_steps_trained": 286449, "num_steps_sampled": 286449}, "timestamp": 1557100598, "date": "2019-05-05_23-56-38", "episode_len_mean": 693.49, "iterations_since_restore": 7, "done": false, "timesteps_total": 286449, "episode_reward_max": 1017.3998851204732, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbca90>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbccf8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 19, "time_this_iter_s": 23.9083034992218, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 113, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 286449, "training_iteration": 7, "time_since_restore": 160.48961925506592}
{"episode_reward_min": 310.1567338594423, "episode_reward_mean": 660.6566259434499, "time_total_s": 182.48397421836853, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.5212546055927962, "cost2_max": 0.0, "outflow_rate_max": 1126.8016712334852, "system_level_velocity_mean": 10.44361047131943, "cost1_max": 365.46441770933234, "outflow_rate_mean": 885.3866988949981, "outflow_rate_min": 564.294697326642, "cost2_mean": -0.04330807791613005, "cost1_min": 168.66301071185526, "cost1_mean": 275.098095228841, "system_level_velocity_min": 6.449262717332824, "system_level_velocity_max": 13.728560940888729}, "timesteps_this_iter": 41610, "info": {"load_time_ms": 15.867, "update_time_ms": 95.524, "grad_time_ms": 8492.923, "default": {"policy_loss": -0.01198215875774622, "vf_loss": 6.070456027984619, "total_loss": 6.060940265655518, "cur_kl_coeff": 0.1499999761581421, "vf_explained_var": 0.9074767827987671, "entropy": 1.376558542251587, "kl": 0.01644340716302395, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 14121.07, "num_steps_trained": 328059, "num_steps_sampled": 328059}, "timestamp": 1557100620, "date": "2019-05-05_23-57-00", "episode_len_mean": 700.0, "iterations_since_restore": 8, "done": false, "timesteps_total": 328059, "episode_reward_max": 1017.3998851204732, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc5c0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc3c8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 13, "time_this_iter_s": 21.994354963302612, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 126, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 328059, "training_iteration": 8, "time_since_restore": 182.48397421836853}
{"episode_reward_min": 340.276090384609, "episode_reward_mean": 731.5642086797329, "time_total_s": 205.75404524803162, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.5212546055927962, "cost2_max": 0.0, "outflow_rate_max": 1122.3508029307766, "system_level_velocity_mean": 10.790339476117625, "cost1_max": 370.47785575625295, "outflow_rate_mean": 928.3146597299202, "outflow_rate_min": 598.5361293119901, "cost2_mean": -0.05494316256753444, "cost1_min": 168.66301071185526, "cost1_mean": 285.16326968278304, "system_level_velocity_min": 6.449262717332824, "system_level_velocity_max": 13.857275612725863}, "timesteps_this_iter": 41546, "info": {"load_time_ms": 14.891, "update_time_ms": 85.953, "grad_time_ms": 8670.163, "default": {"policy_loss": -0.012815922498703003, "vf_loss": 7.218774795532227, "total_loss": 7.2083635330200195, "cur_kl_coeff": 0.1499999761581421, "vf_explained_var": 0.8706325888633728, "entropy": 1.3774986267089844, "kl": 0.01602528803050518, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 14005.597, "num_steps_trained": 369605, "num_steps_sampled": 369605}, "timestamp": 1557100643, "date": "2019-05-05_23-57-23", "episode_len_mean": 700.0, "iterations_since_restore": 9, "done": false, "timesteps_total": 369605, "episode_reward_max": 1017.3998851204732, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1f98>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f31540f05c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc6a0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 19, "time_this_iter_s": 23.270071029663086, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 145, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 369605, "training_iteration": 9, "time_since_restore": 205.75404524803162}
{"episode_reward_min": 41.110135716061116, "episode_reward_mean": 757.8489339966302, "time_total_s": 229.12634539604187, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.5212546055927962, "cost2_max": 0.0, "outflow_rate_max": 1122.3508029307766, "system_level_velocity_mean": 11.06857340722112, "cost1_max": 370.47785575625295, "outflow_rate_mean": 948.159793304324, "outflow_rate_min": 482.093396169334, "cost2_mean": -0.05633967907724216, "cost1_min": 16.233542453514474, "cost1_mean": 288.2607294712034, "system_level_velocity_min": 6.449262717332824, "system_level_velocity_max": 18.389889073657912}, "timesteps_this_iter": 40982, "info": {"load_time_ms": 14.147, "update_time_ms": 78.135, "grad_time_ms": 8853.064, "default": {"policy_loss": -0.012225842103362083, "vf_loss": 7.686964988708496, "total_loss": 7.677149772644043, "cur_kl_coeff": 0.14999999105930328, "vf_explained_var": 0.8506165742874146, "entropy": 1.4009040594100952, "kl": 0.01606794260442257, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13882.539, "num_steps_trained": 410587, "num_steps_sampled": 410587}, "timestamp": 1557100666, "date": "2019-05-05_23-57-46", "episode_len_mean": 693.24, "iterations_since_restore": 10, "done": false, "timesteps_total": 410587, "episode_reward_max": 1017.3998851204732, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb27b8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb25c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2908>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 23.372300148010254, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 162, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 410587, "training_iteration": 10, "time_since_restore": 229.12634539604187}
{"episode_reward_min": 41.110135716061116, "episode_reward_mean": 770.5422141893227, "time_total_s": 251.53650832176208, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.5212546055927962, "cost2_max": 0.0, "outflow_rate_max": 1196.2766467147417, "system_level_velocity_mean": 11.185121870796186, "cost1_max": 386.950057815408, "outflow_rate_mean": 959.7408376626361, "outflow_rate_min": 482.093396169334, "cost2_mean": -0.06527806632950442, "cost1_min": 16.233542453514474, "cost1_mean": 291.331883544241, "system_level_velocity_min": 6.449262717332824, "system_level_velocity_max": 18.389889073657912}, "timesteps_this_iter": 40844, "info": {"load_time_ms": 8.514, "update_time_ms": 7.821, "grad_time_ms": 9146.359, "default": {"policy_loss": -0.015789691358804703, "vf_loss": 8.279400825500488, "total_loss": 8.266539573669434, "cur_kl_coeff": 0.1499999761581421, "vf_explained_var": 0.8648709654808044, "entropy": 1.3975403308868408, "kl": 0.019518254324793816, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13676.938, "num_steps_trained": 451431, "num_steps_sampled": 451431}, "timestamp": 1557100689, "date": "2019-05-05_23-58-09", "episode_len_mean": 693.24, "iterations_since_restore": 11, "done": false, "timesteps_total": 451431, "episode_reward_max": 1017.3998851204732, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbca20>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcfd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbce80>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 15, "time_this_iter_s": 22.410162925720215, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 177, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 451431, "training_iteration": 11, "time_since_restore": 251.53650832176208}
{"episode_reward_min": 41.110135716061116, "episode_reward_mean": 766.6715382449339, "time_total_s": 273.5072429180145, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.5212546055927962, "cost2_max": 0.0, "outflow_rate_max": 1197.404122012659, "system_level_velocity_mean": 11.365998121327419, "cost1_max": 417.1092496327891, "outflow_rate_mean": 966.5669819198592, "outflow_rate_min": 482.093396169334, "cost2_mean": -0.058695810248132405, "cost1_min": 16.233542453514474, "cost1_mean": 291.0965064468432, "system_level_velocity_min": 6.449262717332824, "system_level_velocity_max": 18.389889073657912}, "timesteps_this_iter": 40503, "info": {"load_time_ms": 8.467, "update_time_ms": 8.094, "grad_time_ms": 9459.826, "default": {"policy_loss": -0.01567092165350914, "vf_loss": 8.125469207763672, "total_loss": 8.112566947937012, "cur_kl_coeff": 0.1499999761581421, "vf_explained_var": 0.8648418188095093, "entropy": 1.3960269689559937, "kl": 0.01846764050424099, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13484.377, "num_steps_trained": 491934, "num_steps_sampled": 491934}, "timestamp": 1557100711, "date": "2019-05-05_23-58-31", "episode_len_mean": 686.58, "iterations_since_restore": 12, "done": false, "timesteps_total": 491934, "episode_reward_max": 1007.6166816176195, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcda0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc12b0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 21.97073459625244, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 195, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 491934, "training_iteration": 12, "time_since_restore": 273.5072429180145}
{"episode_reward_min": 41.110135716061116, "episode_reward_mean": 784.5581605347802, "time_total_s": 295.95391035079956, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.5212546055927962, "cost2_max": 0.0, "outflow_rate_max": 1222.0408246206678, "system_level_velocity_mean": 11.76309984564789, "cost1_max": 420.34767346121185, "outflow_rate_mean": 989.9983474091424, "outflow_rate_min": 482.093396169334, "cost2_mean": -0.06297493694879588, "cost1_min": 16.233542453514474, "cost1_mean": 300.986910107736, "system_level_velocity_min": 6.449262717332824, "system_level_velocity_max": 18.389889073657912}, "timesteps_this_iter": 39441, "info": {"load_time_ms": 8.431, "update_time_ms": 8.099, "grad_time_ms": 9586.959, "default": {"policy_loss": -0.01762695051729679, "vf_loss": 8.575563430786133, "total_loss": 8.56128215789795, "cur_kl_coeff": 0.14999999105930328, "vf_explained_var": 0.8685706853866577, "entropy": 1.375030279159546, "kl": 0.022307943552732468, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13352.24, "num_steps_trained": 531375, "num_steps_sampled": 531375}, "timestamp": 1557100733, "date": "2019-05-05_23-58-53", "episode_len_mean": 686.58, "iterations_since_restore": 13, "done": false, "timesteps_total": 531375, "episode_reward_max": 1109.6191245495027, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1da0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1a58>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.446667432785034, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 213, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 531375, "training_iteration": 13, "time_since_restore": 295.95391035079956}
{"episode_reward_min": 41.110135716061116, "episode_reward_mean": 788.7522715351124, "time_total_s": 318.6090581417084, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.6363636363636364, "cost2_max": 0.0, "outflow_rate_max": 1222.0408246206678, "system_level_velocity_mean": 11.97746888789704, "cost1_max": 420.34767346121185, "outflow_rate_mean": 999.9537318663175, "outflow_rate_min": 482.093396169334, "cost2_mean": -0.04769780595724204, "cost1_min": 16.233542453514474, "cost1_mean": 306.0474130581353, "system_level_velocity_min": 8.416544686346342, "system_level_velocity_max": 18.389889073657912}, "timesteps_this_iter": 42243, "info": {"load_time_ms": 8.478, "update_time_ms": 8.411, "grad_time_ms": 9873.732, "default": {"policy_loss": -0.0162226352840662, "vf_loss": 9.2067232131958, "total_loss": 9.194175720214844, "cur_kl_coeff": 0.22499999403953552, "vf_explained_var": 0.8635812401771545, "entropy": 1.4148497581481934, "kl": 0.016334932297468185, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12920.889, "num_steps_trained": 573618, "num_steps_sampled": 573618}, "timestamp": 1557100756, "date": "2019-05-05_23-59-16", "episode_len_mean": 686.58, "iterations_since_restore": 14, "done": false, "timesteps_total": 573618, "episode_reward_max": 1109.6191245495027, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb25f8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2e10>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 19, "time_this_iter_s": 22.655147790908813, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 232, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 573618, "training_iteration": 14, "time_since_restore": 318.6090581417084}
{"episode_reward_min": 41.110135716061116, "episode_reward_mean": 773.351258584515, "time_total_s": 341.0128517150879, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.6363636363636364, "cost2_max": 0.0, "outflow_rate_max": 1222.0408246206678, "system_level_velocity_mean": 12.07859476235913, "cost1_max": 420.34767346121185, "outflow_rate_mean": 993.5021499113484, "outflow_rate_min": 482.093396169334, "cost2_mean": -0.04820916790236452, "cost1_min": 16.233542453514474, "cost1_mean": 303.5968024347744, "system_level_velocity_min": 8.454358834072593, "system_level_velocity_max": 18.389889073657912}, "timesteps_this_iter": 41392, "info": {"load_time_ms": 8.601, "update_time_ms": 8.488, "grad_time_ms": 10098.483, "default": {"policy_loss": -0.017450498417019844, "vf_loss": 7.80591344833374, "total_loss": 7.792978763580322, "cur_kl_coeff": 0.22500000894069672, "vf_explained_var": 0.8662216067314148, "entropy": 1.4284982681274414, "kl": 0.020069127902388573, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12580.85, "num_steps_trained": 615010, "num_steps_sampled": 615010}, "timestamp": 1557100779, "date": "2019-05-05_23-59-39", "episode_len_mean": 680.09, "iterations_since_restore": 15, "done": false, "timesteps_total": 615010, "episode_reward_max": 1109.6191245495027, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcef0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbce10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcc88>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 22.403793573379517, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 249, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 615010, "training_iteration": 15, "time_since_restore": 341.0128517150879}
{"episode_reward_min": 52.94378519312875, "episode_reward_mean": 782.2808260952407, "time_total_s": 364.5193340778351, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.9081817037620354, "cost2_max": 0.0, "outflow_rate_max": 1222.0408246206678, "system_level_velocity_mean": 12.187180476744802, "cost1_max": 420.34767346121185, "outflow_rate_mean": 998.2904904222103, "outflow_rate_min": 508.7205907675648, "cost2_mean": -0.05813666881241596, "cost1_min": 22.09324858897201, "cost1_mean": 306.63678964256746, "system_level_velocity_min": 8.887353986728494, "system_level_velocity_max": 18.290607252849526}, "timesteps_this_iter": 41913, "info": {"load_time_ms": 8.422, "update_time_ms": 8.043, "grad_time_ms": 10237.793, "default": {"policy_loss": -0.018134254962205887, "vf_loss": 7.864747047424316, "total_loss": 7.852016448974609, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8717415928840637, "entropy": 1.4060039520263672, "kl": 0.016012176871299744, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12459.336, "num_steps_trained": 656923, "num_steps_sampled": 656923}, "timestamp": 1557100802, "date": "2019-05-06_00-00-02", "episode_len_mean": 680.28, "iterations_since_restore": 16, "done": false, "timesteps_total": 656923, "episode_reward_max": 1109.6191245495027, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc5f8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc0f0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 14, "time_this_iter_s": 23.506482362747192, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 263, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 656923, "training_iteration": 16, "time_since_restore": 364.5193340778351}
{"episode_reward_min": 52.94378519312875, "episode_reward_mean": 785.523485200602, "time_total_s": 387.0472559928894, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.9081817037620354, "cost2_max": 0.0, "outflow_rate_max": 1222.0408246206678, "system_level_velocity_mean": 12.221567151570104, "cost1_max": 420.34767346121185, "outflow_rate_mean": 998.4921347692165, "outflow_rate_min": 508.7205907675648, "cost2_mean": -0.049175310257826815, "cost1_min": 22.09324858897201, "cost1_mean": 307.4384974517141, "system_level_velocity_min": 8.887353986728494, "system_level_velocity_max": 18.290607252849526}, "timesteps_this_iter": 40861, "info": {"load_time_ms": 8.681, "update_time_ms": 7.773, "grad_time_ms": 10265.516, "default": {"policy_loss": -0.016496412456035614, "vf_loss": 8.376317977905273, "total_loss": 8.364984512329102, "cur_kl_coeff": 0.3375000059604645, "vf_explained_var": 0.8705697059631348, "entropy": 1.4092767238616943, "kl": 0.015298467129468918, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12294.149, "num_steps_trained": 697784, "num_steps_sampled": 697784}, "timestamp": 1557100825, "date": "2019-05-06_00-00-25", "episode_len_mean": 680.28, "iterations_since_restore": 17, "done": false, "timesteps_total": 697784, "episode_reward_max": 1109.6191245495027, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2be0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2780>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 16, "time_this_iter_s": 22.52792191505432, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 279, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 697784, "training_iteration": 17, "time_since_restore": 387.0472559928894}
{"episode_reward_min": 63.91118999918878, "episode_reward_mean": 801.5983746235889, "time_total_s": 408.53025102615356, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.9081817037620354, "cost2_max": 0.0, "outflow_rate_max": 1222.0408246206678, "system_level_velocity_mean": 12.194476617025705, "cost1_max": 420.34767346121185, "outflow_rate_mean": 1000.7644116501803, "outflow_rate_min": 531.1739950192131, "cost2_mean": -0.05037781876645736, "cost1_min": 27.8261430455937, "cost1_mean": 311.4400485056566, "system_level_velocity_min": 8.887353986728494, "system_level_velocity_max": 18.290607252849526}, "timesteps_this_iter": 39526, "info": {"load_time_ms": 8.611, "update_time_ms": 7.449, "grad_time_ms": 10305.475, "default": {"policy_loss": -0.018501121550798416, "vf_loss": 9.166681289672852, "total_loss": 9.15297794342041, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8653564453125, "entropy": 1.3918943405151367, "kl": 0.01421449426561594, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12205.074, "num_steps_trained": 737310, "num_steps_sampled": 737310}, "timestamp": 1557100846, "date": "2019-05-06_00-00-46", "episode_len_mean": 686.94, "iterations_since_restore": 18, "done": false, "timesteps_total": 737310, "episode_reward_max": 1109.6191245495027, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc19e8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3154165f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2978>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 21.48299503326416, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 297, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 737310, "training_iteration": 18, "time_since_restore": 408.53025102615356}
{"episode_reward_min": 63.91118999918878, "episode_reward_mean": 800.7888511138673, "time_total_s": 430.9645764827728, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.9081817037620354, "cost2_max": 0.0, "outflow_rate_max": 1174.4227599685057, "system_level_velocity_mean": 12.003879032298519, "cost1_max": 398.63181584081815, "outflow_rate_mean": 989.2585289190602, "outflow_rate_min": 531.1739950192131, "cost2_mean": -0.04774597039806371, "cost1_min": 27.8261430455937, "cost1_mean": 306.81199260740783, "system_level_velocity_min": 8.887353986728494, "system_level_velocity_max": 18.290607252849526}, "timesteps_this_iter": 40416, "info": {"load_time_ms": 9.086, "update_time_ms": 7.195, "grad_time_ms": 10330.296, "default": {"policy_loss": -0.01718769036233425, "vf_loss": 9.123842239379883, "total_loss": 9.111598014831543, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8868210315704346, "entropy": 1.422732949256897, "kl": 0.014647362753748894, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12096.808, "num_steps_trained": 777726, "num_steps_sampled": 777726}, "timestamp": 1557100869, "date": "2019-05-06_00-01-09", "episode_len_mean": 686.94, "iterations_since_restore": 19, "done": false, "timesteps_total": 777726, "episode_reward_max": 1088.180063993633, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca0f0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ccaa90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ccaf60>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.434325456619263, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 315, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 777726, "training_iteration": 19, "time_since_restore": 430.9645764827728}
{"episode_reward_min": 29.727068346834717, "episode_reward_mean": 802.5547511306244, "time_total_s": 452.0525996685028, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.9081817037620354, "cost2_max": 0.0, "outflow_rate_max": 1192.5971710210829, "system_level_velocity_mean": 12.174015973999303, "cost1_max": 407.34407633683065, "outflow_rate_mean": 989.8038778839577, "outflow_rate_min": 454.6304098282526, "cost2_mean": -0.042389903801500844, "cost1_min": 13.125830736677628, "cost1_mean": 307.30230298799, "system_level_velocity_min": 8.887353986728494, "system_level_velocity_max": 18.290607252849526}, "timesteps_this_iter": 38810, "info": {"load_time_ms": 9.194, "update_time_ms": 7.057, "grad_time_ms": 10254.155, "default": {"policy_loss": -0.018992021679878235, "vf_loss": 11.21631145477295, "total_loss": 11.20296573638916, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8523968458175659, "entropy": 1.3796428442001343, "kl": 0.01673278585076332, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 11945.201, "num_steps_trained": 816536, "num_steps_sampled": 816536}, "timestamp": 1557100890, "date": "2019-05-06_00-01-30", "episode_len_mean": 680.14, "iterations_since_restore": 20, "done": false, "timesteps_total": 816536, "episode_reward_max": 1088.180063993633, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc15c0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc16d8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 21.08802318572998, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 333, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 816536, "training_iteration": 20, "time_since_restore": 452.0525996685028}
{"episode_reward_min": 29.727068346834717, "episode_reward_mean": 822.1352613398495, "time_total_s": 473.5835690498352, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.9081817037620354, "cost2_max": 0.0, "outflow_rate_max": 1192.5971710210829, "system_level_velocity_mean": 12.418326904025353, "cost1_max": 407.34407633683065, "outflow_rate_mean": 1001.6228021012397, "outflow_rate_min": 454.6304098282526, "cost2_mean": -0.049699091025305585, "cost1_min": 13.125830736677628, "cost1_mean": 314.14134882963555, "system_level_velocity_min": 9.083093945580316, "system_level_velocity_max": 18.290607252849526}, "timesteps_this_iter": 40337, "info": {"load_time_ms": 9.185, "update_time_ms": 7.095, "grad_time_ms": 10180.219, "default": {"policy_loss": -0.017683465033769608, "vf_loss": 9.421817779541016, "total_loss": 9.409363746643066, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8762577176094055, "entropy": 1.4316933155059814, "kl": 0.015495048835873604, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 11930.577, "num_steps_trained": 856873, "num_steps_sampled": 856873}, "timestamp": 1557100911, "date": "2019-05-06_00-01-51", "episode_len_mean": 680.03, "iterations_since_restore": 21, "done": false, "timesteps_total": 856873, "episode_reward_max": 1088.180063993633, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc19e8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ccad68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca908>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 21.530969381332397, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 350, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 856873, "training_iteration": 21, "time_since_restore": 473.5835690498352}
{"episode_reward_min": 29.727068346834717, "episode_reward_mean": 823.4620124286372, "time_total_s": 495.5063292980194, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.5269194222632396, "cost2_max": 0.0, "outflow_rate_max": 1192.5971710210829, "system_level_velocity_mean": 12.280218608084606, "cost1_max": 430.315244861676, "outflow_rate_mean": 1002.2883372068219, "outflow_rate_min": 454.6304098282526, "cost2_mean": -0.04904043939212606, "cost1_min": 13.125830736677628, "cost1_mean": 314.77837555948366, "system_level_velocity_min": 6.317657147536712, "system_level_velocity_max": 18.059337236302184}, "timesteps_this_iter": 40055, "info": {"load_time_ms": 9.152, "update_time_ms": 7.053, "grad_time_ms": 10081.722, "default": {"policy_loss": -0.018404889851808548, "vf_loss": 11.859321594238281, "total_loss": 11.846548080444336, "cur_kl_coeff": 0.33750006556510925, "vf_explained_var": 0.8559103608131409, "entropy": 1.4156333208084106, "kl": 0.016684774309396744, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12026.407, "num_steps_trained": 896928, "num_steps_sampled": 896928}, "timestamp": 1557100933, "date": "2019-05-06_00-02-13", "episode_len_mean": 686.6, "iterations_since_restore": 22, "done": false, "timesteps_total": 896928, "episode_reward_max": 1088.180063993633, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcef0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc198>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 20, "time_this_iter_s": 21.922760248184204, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 370, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 896928, "training_iteration": 22, "time_since_restore": 495.5063292980194}
{"episode_reward_min": 29.727068346834717, "episode_reward_mean": 828.3034622656855, "time_total_s": 518.4338445663452, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.5269194222632396, "cost2_max": 0.0, "outflow_rate_max": 1216.6710182103398, "system_level_velocity_mean": 12.43600731685108, "cost1_max": 430.315244861676, "outflow_rate_mean": 1010.0693873516273, "outflow_rate_min": 454.6304098282526, "cost2_mean": -0.04796331443537947, "cost1_min": 13.125830736677628, "cost1_mean": 318.9425509954377, "system_level_velocity_min": 6.317657147536712, "system_level_velocity_max": 18.059337236302184}, "timesteps_this_iter": 39128, "info": {"load_time_ms": 9.121, "update_time_ms": 7.127, "grad_time_ms": 10002.151, "default": {"policy_loss": -0.01796414889395237, "vf_loss": 12.419650077819824, "total_loss": 12.407013893127441, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8437222838401794, "entropy": 1.3897560834884644, "kl": 0.01578507572412491, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12154.272, "num_steps_trained": 936056, "num_steps_sampled": 936056}, "timestamp": 1557100956, "date": "2019-05-06_00-02-36", "episode_len_mean": 686.6, "iterations_since_restore": 23, "done": false, "timesteps_total": 936056, "episode_reward_max": 1073.4404305658181, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2cf8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb2ba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cb27f0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 16, "time_this_iter_s": 22.927515268325806, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 386, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 936056, "training_iteration": 23, "time_since_restore": 518.4338445663452}
{"episode_reward_min": 29.727068346834717, "episode_reward_mean": 829.4516323606483, "time_total_s": 541.3176808357239, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8923100408307801, "cost2_max": 0.0, "outflow_rate_max": 1216.6710182103398, "system_level_velocity_mean": 12.63798154928477, "cost1_max": 434.93699758240393, "outflow_rate_mean": 1017.290249821033, "outflow_rate_min": 454.6304098282526, "cost2_mean": -0.056733552586640944, "cost1_min": 13.125830736677628, "cost1_mean": 323.81807180569643, "system_level_velocity_min": 6.317657147536712, "system_level_velocity_max": 18.059337236302184}, "timesteps_this_iter": 40575, "info": {"load_time_ms": 9.104, "update_time_ms": 6.834, "grad_time_ms": 9900.742, "default": {"policy_loss": -0.021431174129247665, "vf_loss": 10.463414192199707, "total_loss": 10.448516845703125, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8869521021842957, "entropy": 1.397802472114563, "kl": 0.019358061254024506, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12276.703, "num_steps_trained": 976631, "num_steps_sampled": 976631}, "timestamp": 1557100979, "date": "2019-05-06_00-02-59", "episode_len_mean": 686.6, "iterations_since_restore": 24, "done": false, "timesteps_total": 976631, "episode_reward_max": 1073.4404305658181, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1ac8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca6a0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 16, "time_this_iter_s": 22.883836269378662, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 402, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 976631, "training_iteration": 24, "time_since_restore": 541.3176808357239}
{"episode_reward_min": 53.47240534602547, "episode_reward_mean": 845.4767744487544, "time_total_s": 564.4244649410248, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8923100408307801, "cost2_max": 0.0, "outflow_rate_max": 1216.6710182103398, "system_level_velocity_mean": 12.790028963583355, "cost1_max": 434.93699758240393, "outflow_rate_mean": 1029.2866533344754, "outflow_rate_min": 523.844002434427, "cost2_mean": -0.05957886017493418, "cost1_min": 26.602221788617996, "cost1_mean": 332.16238968851025, "system_level_velocity_min": 6.317657147536712, "system_level_velocity_max": 18.059337236302184}, "timesteps_this_iter": 38631, "info": {"load_time_ms": 9.024, "update_time_ms": 7.064, "grad_time_ms": 9754.705, "default": {"policy_loss": -0.020764686167240143, "vf_loss": 12.83558464050293, "total_loss": 12.821640968322754, "cur_kl_coeff": 0.33750003576278687, "vf_explained_var": 0.8671513199806213, "entropy": 1.3972257375717163, "kl": 0.020212901756167412, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12490.208, "num_steps_trained": 1015262, "num_steps_sampled": 1015262}, "timestamp": 1557101002, "date": "2019-05-06_00-03-22", "episode_len_mean": 693.4, "iterations_since_restore": 25, "done": false, "timesteps_total": 1015262, "episode_reward_max": 1073.4404305658181, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca080>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ccaf98>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 23.106784105300903, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 420, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1015262, "training_iteration": 25, "time_since_restore": 564.4244649410248}
{"episode_reward_min": 648.31936412196, "episode_reward_mean": 855.1215258451052, "time_total_s": 588.2657153606415, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8923100408307801, "cost2_max": 0.0, "outflow_rate_max": 1216.6710182103398, "system_level_velocity_mean": 12.810251725217176, "cost1_max": 434.93699758240393, "outflow_rate_mean": 1038.8933273617072, "outflow_rate_min": 672.3559013867608, "cost2_mean": -0.05656116353327178, "cost1_min": 160.95010191137467, "cost1_mean": 337.1080562246742, "system_level_velocity_min": 6.317657147536712, "system_level_velocity_max": 17.10889457677527}, "timesteps_this_iter": 39203, "info": {"load_time_ms": 9.221, "update_time_ms": 7.358, "grad_time_ms": 9587.98, "default": {"policy_loss": -0.01984170265495777, "vf_loss": 14.380508422851562, "total_loss": 14.367825508117676, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8659165501594543, "entropy": 1.4290446043014526, "kl": 0.014139249920845032, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12689.38, "num_steps_trained": 1054465, "num_steps_sampled": 1054465}, "timestamp": 1557101026, "date": "2019-05-06_00-03-46", "episode_len_mean": 700.0, "iterations_since_restore": 26, "done": false, "timesteps_total": 1054465, "episode_reward_max": 1071.9095287759944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4cf8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4d68>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 20, "time_this_iter_s": 23.8412504196167, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 440, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1054465, "training_iteration": 26, "time_since_restore": 588.2657153606415}
{"episode_reward_min": 582.1066076984063, "episode_reward_mean": 857.0365775404186, "time_total_s": 611.0060515403748, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8923100408307801, "cost2_max": 0.0, "outflow_rate_max": 1216.6710182103398, "system_level_velocity_mean": 12.87984290645437, "cost1_max": 434.93699758240393, "outflow_rate_mean": 1042.679286997206, "outflow_rate_min": 672.3559013867608, "cost2_mean": -0.04839874458725669, "cost1_min": 160.95010191137467, "cost1_mean": 339.1158650077061, "system_level_velocity_min": 6.317657147536712, "system_level_velocity_max": 17.10889457677527}, "timesteps_this_iter": 39488, "info": {"load_time_ms": 9.001, "update_time_ms": 7.551, "grad_time_ms": 9456.992, "default": {"policy_loss": -0.018598543480038643, "vf_loss": 13.855167388916016, "total_loss": 13.844103813171387, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8469224572181702, "entropy": 1.4422200918197632, "kl": 0.014883719384670258, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12841.969, "num_steps_trained": 1093953, "num_steps_sampled": 1093953}, "timestamp": 1557101049, "date": "2019-05-06_00-04-09", "episode_len_mean": 700.0, "iterations_since_restore": 27, "done": false, "timesteps_total": 1093953, "episode_reward_max": 1071.9095287759944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca978>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ccaf60>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 22.740336179733276, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 457, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1093953, "training_iteration": 27, "time_since_restore": 611.0060515403748}
{"episode_reward_min": 582.1066076984063, "episode_reward_mean": 859.364257725356, "time_total_s": 633.7391064167023, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8923100408307801, "cost2_max": 0.0, "outflow_rate_max": 1216.6710182103398, "system_level_velocity_mean": 12.939168703509162, "cost1_max": 434.93699758240393, "outflow_rate_mean": 1046.2385940326938, "outflow_rate_min": 766.7724000968847, "cost2_mean": -0.043177470734637374, "cost1_min": 225.42092232453027, "cost1_mean": 340.6192932438334, "system_level_velocity_min": 8.587161128558492, "system_level_velocity_max": 17.10889457677527}, "timesteps_this_iter": 39343, "info": {"load_time_ms": 8.841, "update_time_ms": 7.515, "grad_time_ms": 9326.75, "default": {"policy_loss": -0.018233085051178932, "vf_loss": 12.459046363830566, "total_loss": 12.447709083557129, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8639751076698303, "entropy": 1.4428168535232544, "kl": 0.013623475097119808, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13097.931, "num_steps_trained": 1133296, "num_steps_sampled": 1133296}, "timestamp": 1557101072, "date": "2019-05-06_00-04-32", "episode_len_mean": 700.0, "iterations_since_restore": 28, "done": false, "timesteps_total": 1133296, "episode_reward_max": 1071.9095287759944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd69b0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6be0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 16, "time_this_iter_s": 22.733054876327515, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 473, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1133296, "training_iteration": 28, "time_since_restore": 633.7391064167023}
{"episode_reward_min": 582.1066076984063, "episode_reward_mean": 852.3424194069627, "time_total_s": 656.0717632770538, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8923100408307801, "cost2_max": 0.0, "outflow_rate_max": 1174.7234855555562, "system_level_velocity_mean": 12.816131681730075, "cost1_max": 434.93699758240393, "outflow_rate_mean": 1041.2928503642872, "outflow_rate_min": 766.7724000968847, "cost2_mean": -0.04909000980673858, "cost1_min": 233.66833926160606, "cost1_mean": 336.9336732562986, "system_level_velocity_min": 9.020230262251332, "system_level_velocity_max": 17.10889457677527}, "timesteps_this_iter": 40251, "info": {"load_time_ms": 8.368, "update_time_ms": 7.462, "grad_time_ms": 9210.427, "default": {"policy_loss": -0.017220180481672287, "vf_loss": 14.061284065246582, "total_loss": 14.05046272277832, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8443939685821533, "entropy": 1.4375181198120117, "kl": 0.012639542110264301, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13204.979, "num_steps_trained": 1173547, "num_steps_sampled": 1173547}, "timestamp": 1557101094, "date": "2019-05-06_00-04-54", "episode_len_mean": 700.0, "iterations_since_restore": 29, "done": false, "timesteps_total": 1173547, "episode_reward_max": 1071.9095287759944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca240>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ccafd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca860>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 22.332656860351562, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 490, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1173547, "training_iteration": 29, "time_since_restore": 656.0717632770538}
{"episode_reward_min": 42.29506372468923, "episode_reward_mean": 840.5938637693836, "time_total_s": 680.6567118167877, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.5436878115440889, "cost2_max": 0.0, "outflow_rate_max": 1174.7234855555562, "system_level_velocity_mean": 12.775792350728775, "cost1_max": 420.8958403489327, "outflow_rate_mean": 1034.82184219566, "outflow_rate_min": 493.7011947654558, "cost2_mean": -0.03447428433083309, "cost1_min": 18.625901599975865, "cost1_mean": 331.40703473772095, "system_level_velocity_min": 9.020230262251332, "system_level_velocity_max": 18.125217544522204}, "timesteps_this_iter": 40151, "info": {"load_time_ms": 8.302, "update_time_ms": 7.547, "grad_time_ms": 9214.211, "default": {"policy_loss": -0.019308537244796753, "vf_loss": 12.185535430908203, "total_loss": 12.17348575592041, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.862446665763855, "entropy": 1.43262779712677, "kl": 0.014338548295199871, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13550.618, "num_steps_trained": 1213698, "num_steps_sampled": 1213698}, "timestamp": 1557101119, "date": "2019-05-06_00-05-19", "episode_len_mean": 693.28, "iterations_since_restore": 30, "done": false, "timesteps_total": 1213698, "episode_reward_max": 1071.9095287759944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6630>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6518>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 16, "time_this_iter_s": 24.584948539733887, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 506, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1213698, "training_iteration": 30, "time_since_restore": 680.6567118167877}
{"episode_reward_min": 42.29506372468923, "episode_reward_mean": 837.5202690974694, "time_total_s": 703.3969178199768, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.5436878115440889, "cost2_max": 0.0, "outflow_rate_max": 1174.7234855555562, "system_level_velocity_mean": 12.694513198203984, "cost1_max": 405.76777114509514, "outflow_rate_mean": 1032.1454796594999, "outflow_rate_min": 493.7011947654558, "cost2_mean": -0.028166824754812816, "cost1_min": 18.625901599975865, "cost1_mean": 329.18394353210044, "system_level_velocity_min": 9.020230262251332, "system_level_velocity_max": 18.125217544522204}, "timesteps_this_iter": 40206, "info": {"load_time_ms": 8.295, "update_time_ms": 7.365, "grad_time_ms": 9206.861, "default": {"policy_loss": -0.01863277703523636, "vf_loss": 12.044081687927246, "total_loss": 12.03211498260498, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8619664907455444, "entropy": 1.4537053108215332, "kl": 0.0131656713783741, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13678.0, "num_steps_trained": 1253904, "num_steps_sampled": 1253904}, "timestamp": 1557101142, "date": "2019-05-06_00-05-42", "episode_len_mean": 693.28, "iterations_since_restore": 31, "done": false, "timesteps_total": 1253904, "episode_reward_max": 1049.2366408040195, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4c18>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd46d8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 22.740206003189087, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 523, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1253904, "training_iteration": 31, "time_since_restore": 703.3969178199768}
{"episode_reward_min": 42.29506372468923, "episode_reward_mean": 826.1981634986009, "time_total_s": 725.8804965019226, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.5436878115440889, "cost2_max": 0.0, "outflow_rate_max": 1174.7234855555562, "system_level_velocity_mean": 12.533884553137488, "cost1_max": 404.3388952431576, "outflow_rate_mean": 1013.9934081244038, "outflow_rate_min": 493.7011947654558, "cost2_mean": -0.03449140863943193, "cost1_min": 18.625901599975865, "cost1_mean": 322.3576294903227, "system_level_velocity_min": 9.020230262251332, "system_level_velocity_max": 18.125217544522204}, "timesteps_this_iter": 37889, "info": {"load_time_ms": 8.141, "update_time_ms": 7.297, "grad_time_ms": 9189.804, "default": {"policy_loss": -0.017828484997153282, "vf_loss": 14.393269538879395, "total_loss": 14.381747245788574, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8524835705757141, "entropy": 1.4386959075927734, "kl": 0.012458184733986855, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13751.923, "num_steps_trained": 1291793, "num_steps_sampled": 1291793}, "timestamp": 1557101164, "date": "2019-05-06_00-06-04", "episode_len_mean": 689.95, "iterations_since_restore": 32, "done": false, "timesteps_total": 1291793, "episode_reward_max": 1049.2366408040195, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc15c0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1588>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 20, "time_this_iter_s": 22.4835786819458, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 543, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1291793, "training_iteration": 32, "time_since_restore": 725.8804965019226}
{"episode_reward_min": 42.29506372468923, "episode_reward_mean": 829.077868851658, "time_total_s": 747.974701166153, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.42975934689459155, "cost2_max": 0.0, "outflow_rate_max": 1174.7234855555562, "system_level_velocity_mean": 12.662683092702975, "cost1_max": 412.7670036355322, "outflow_rate_mean": 1013.3433612287314, "outflow_rate_min": 493.7011947654558, "cost2_mean": -0.045628281930680165, "cost1_min": 18.625901599975865, "cost1_mean": 325.7335139922968, "system_level_velocity_min": 9.143238001304592, "system_level_velocity_max": 18.125217544522204}, "timesteps_this_iter": 38606, "info": {"load_time_ms": 8.071, "update_time_ms": 7.461, "grad_time_ms": 9241.988, "default": {"policy_loss": -0.01825219951570034, "vf_loss": 14.817429542541504, "total_loss": 14.806196212768555, "cur_kl_coeff": 0.5062499046325684, "vf_explained_var": 0.8474070429801941, "entropy": 1.4657107591629028, "kl": 0.013861997984349728, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13616.199, "num_steps_trained": 1330399, "num_steps_sampled": 1330399}, "timestamp": 1557101186, "date": "2019-05-06_00-06-26", "episode_len_mean": 689.95, "iterations_since_restore": 33, "done": false, "timesteps_total": 1330399, "episode_reward_max": 1007.6918780325107, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6780>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd66a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6f28>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 19, "time_this_iter_s": 22.094204664230347, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 562, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1330399, "training_iteration": 33, "time_since_restore": 747.974701166153}
{"episode_reward_min": 42.29506372468923, "episode_reward_mean": 835.9171828293561, "time_total_s": 770.4221820831299, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.42975934689459155, "cost2_max": 0.0, "outflow_rate_max": 1174.7234855555562, "system_level_velocity_mean": 12.791132978308518, "cost1_max": 412.7670036355322, "outflow_rate_mean": 1017.5599332664813, "outflow_rate_min": 493.7011947654558, "cost2_mean": -0.04848986618127128, "cost1_min": 18.625901599975865, "cost1_mean": 329.3441098183363, "system_level_velocity_min": 9.70007204972362, "system_level_velocity_max": 18.125217544522204}, "timesteps_this_iter": 39099, "info": {"load_time_ms": 8.329, "update_time_ms": 7.754, "grad_time_ms": 9258.93, "default": {"policy_loss": -0.019895557314157486, "vf_loss": 16.035978317260742, "total_loss": 16.02338981628418, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8317094445228577, "entropy": 1.476616382598877, "kl": 0.014429649338126183, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13553.934, "num_steps_trained": 1369498, "num_steps_sampled": 1369498}, "timestamp": 1557101209, "date": "2019-05-06_00-06-49", "episode_len_mean": 689.95, "iterations_since_restore": 34, "done": false, "timesteps_total": 1369498, "episode_reward_max": 1007.6918780325107, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6128>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd63c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6cc0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.44748091697693, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 580, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1369498, "training_iteration": 34, "time_since_restore": 770.4221820831299}
{"episode_reward_min": 469.013802373406, "episode_reward_mean": 844.399796106775, "time_total_s": 793.1057274341583, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.42975934689459155, "cost2_max": 0.0, "outflow_rate_max": 1194.3048802986855, "system_level_velocity_mean": 12.81716816019992, "cost1_max": 422.88890287915035, "outflow_rate_mean": 1021.543684832732, "outflow_rate_min": 846.5498690943361, "cost2_mean": -0.046720894928895494, "cost1_min": 227.84606616521535, "cost1_mean": 334.8318220682838, "system_level_velocity_min": 9.410579554864539, "system_level_velocity_max": 17.128506308624896}, "timesteps_this_iter": 38614, "info": {"load_time_ms": 8.518, "update_time_ms": 7.795, "grad_time_ms": 9357.238, "default": {"policy_loss": -0.019853901118040085, "vf_loss": 15.438654899597168, "total_loss": 15.425832748413086, "cur_kl_coeff": 0.5062499046325684, "vf_explained_var": 0.864323616027832, "entropy": 1.459640383720398, "kl": 0.013888641260564327, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13414.496, "num_steps_trained": 1408112, "num_steps_sampled": 1408112}, "timestamp": 1557101231, "date": "2019-05-06_00-07-11", "episode_len_mean": 696.67, "iterations_since_restore": 35, "done": false, "timesteps_total": 1408112, "episode_reward_max": 1007.6918780325107, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce19e8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce14a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1390>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.683545351028442, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 598, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1408112, "training_iteration": 35, "time_since_restore": 793.1057274341583}
{"episode_reward_min": 469.013802373406, "episode_reward_mean": 847.047788216182, "time_total_s": 815.2178399562836, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.42975934689459155, "cost2_max": 0.0, "outflow_rate_max": 1194.3048802986855, "system_level_velocity_mean": 12.989515571162961, "cost1_max": 443.08606922357285, "outflow_rate_mean": 1025.3815954614415, "outflow_rate_min": 846.5498690943361, "cost2_mean": -0.04554764501374297, "cost1_min": 227.84606616521535, "cost1_mean": 339.3046848498179, "system_level_velocity_min": 9.410579554864539, "system_level_velocity_max": 17.128506308624896}, "timesteps_this_iter": 39086, "info": {"load_time_ms": 8.279, "update_time_ms": 7.827, "grad_time_ms": 9405.827, "default": {"policy_loss": -0.021842781454324722, "vf_loss": 14.664741516113281, "total_loss": 14.650667190551758, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8617287278175354, "entropy": 1.459294319152832, "kl": 0.015344522893428802, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13192.63, "num_steps_trained": 1447198, "num_steps_sampled": 1447198}, "timestamp": 1557101254, "date": "2019-05-06_00-07-34", "episode_len_mean": 696.67, "iterations_since_restore": 36, "done": false, "timesteps_total": 1447198, "episode_reward_max": 1076.0678372338882, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc16a0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4b00>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 22.112112522125244, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 615, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1447198, "training_iteration": 36, "time_since_restore": 815.2178399562836}
{"episode_reward_min": 469.013802373406, "episode_reward_mean": 852.3969241607451, "time_total_s": 838.893435716629, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.42975934689459155, "cost2_max": 0.0, "outflow_rate_max": 1194.3048802986855, "system_level_velocity_mean": 13.109758668977774, "cost1_max": 443.08606922357285, "outflow_rate_mean": 1032.5524587798761, "outflow_rate_min": 846.5498690943361, "cost2_mean": -0.042660219900377265, "cost1_min": 227.84606616521535, "cost1_mean": 342.5694265283811, "system_level_velocity_min": 9.410579554864539, "system_level_velocity_max": 17.128506308624896}, "timesteps_this_iter": 39536, "info": {"load_time_ms": 8.266, "update_time_ms": 8.026, "grad_time_ms": 9512.887, "default": {"policy_loss": -0.017829695716500282, "vf_loss": 13.857704162597656, "total_loss": 13.847053527832031, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8741490840911865, "entropy": 1.4652780294418335, "kl": 0.014182623475790024, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13178.115, "num_steps_trained": 1486734, "num_steps_sampled": 1486734}, "timestamp": 1557101277, "date": "2019-05-06_00-07-57", "episode_len_mean": 696.67, "iterations_since_restore": 37, "done": false, "timesteps_total": 1486734, "episode_reward_max": 1076.0678372338882, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1a90>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1ef0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 16, "time_this_iter_s": 23.67559576034546, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 631, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1486734, "training_iteration": 37, "time_since_restore": 838.893435716629}
{"episode_reward_min": 70.92061258736766, "episode_reward_mean": 848.5405429884521, "time_total_s": 862.4451758861542, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.3970929658827689, "cost2_max": 0.0, "outflow_rate_max": 1210.9372455264033, "system_level_velocity_mean": 13.069833126157938, "cost1_max": 443.08606922357285, "outflow_rate_mean": 1033.33775633726, "outflow_rate_min": 527.8448333181541, "cost2_mean": -0.02449303461530109, "cost1_min": 30.617616674319816, "cost1_mean": 339.4769450375514, "system_level_velocity_min": 9.410579554864539, "system_level_velocity_max": 18.137794325085856}, "timesteps_this_iter": 39094, "info": {"load_time_ms": 8.428, "update_time_ms": 8.191, "grad_time_ms": 9600.97, "default": {"policy_loss": -0.019664645195007324, "vf_loss": 14.192041397094727, "total_loss": 14.179256439208984, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8677794337272644, "entropy": 1.4786834716796875, "kl": 0.013589628972113132, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13171.767, "num_steps_trained": 1525828, "num_steps_sampled": 1525828}, "timestamp": 1557101301, "date": "2019-05-06_00-08-21", "episode_len_mean": 693.46, "iterations_since_restore": 38, "done": false, "timesteps_total": 1525828, "episode_reward_max": 1076.0678372338882, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd67b8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4160>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 19, "time_this_iter_s": 23.551740169525146, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 650, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1525828, "training_iteration": 38, "time_since_restore": 862.4451758861542}
{"episode_reward_min": 70.92061258736766, "episode_reward_mean": 849.8226340364927, "time_total_s": 885.5471017360687, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.1333333333333333, "cost2_max": 0.0, "outflow_rate_max": 1210.9372455264033, "system_level_velocity_mean": 13.114704909666912, "cost1_max": 443.08606922357285, "outflow_rate_mean": 1035.2454179015106, "outflow_rate_min": 527.8448333181541, "cost2_mean": -0.023997045535303563, "cost1_min": 30.617616674319816, "cost1_mean": 340.22713209931425, "system_level_velocity_min": 7.339246751823352, "system_level_velocity_max": 18.137794325085856}, "timesteps_this_iter": 39294, "info": {"load_time_ms": 8.534, "update_time_ms": 8.161, "grad_time_ms": 9793.584, "default": {"policy_loss": -0.020974354818463326, "vf_loss": 13.307123184204102, "total_loss": 13.293716430664062, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8841040134429932, "entropy": 1.4734224081039429, "kl": 0.014946362935006618, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 13055.832, "num_steps_trained": 1565122, "num_steps_sampled": 1565122}, "timestamp": 1557101324, "date": "2019-05-06_00-08-44", "episode_len_mean": 693.46, "iterations_since_restore": 39, "done": false, "timesteps_total": 1565122, "episode_reward_max": 1076.0678372338882, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce17f0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1c50>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 17, "time_this_iter_s": 23.10192584991455, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 667, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1565122, "training_iteration": 39, "time_since_restore": 885.5471017360687}
{"episode_reward_min": 70.92061258736766, "episode_reward_mean": 852.1559604660307, "time_total_s": 907.8702471256256, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.1333333333333333, "cost2_max": 0.0, "outflow_rate_max": 1210.9372455264033, "system_level_velocity_mean": 13.125386797255315, "cost1_max": 443.08606922357285, "outflow_rate_mean": 1035.365240874445, "outflow_rate_min": 527.8448333181541, "cost2_mean": -0.018665644582189726, "cost1_min": 30.617616674319816, "cost1_mean": 340.3786334239474, "system_level_velocity_min": 7.339246751823352, "system_level_velocity_max": 18.137794325085856}, "timesteps_this_iter": 39363, "info": {"load_time_ms": 8.547, "update_time_ms": 8.071, "grad_time_ms": 9767.462, "default": {"policy_loss": -0.019922837615013123, "vf_loss": 14.16024398803711, "total_loss": 14.147653579711914, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8870390057563782, "entropy": 1.4779547452926636, "kl": 0.014483880251646042, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12853.262, "num_steps_trained": 1604485, "num_steps_sampled": 1604485}, "timestamp": 1557101346, "date": "2019-05-06_00-09-06", "episode_len_mean": 693.46, "iterations_since_restore": 40, "done": false, "timesteps_total": 1604485, "episode_reward_max": 1076.0678372338882, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd69b0>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6f60>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.323145389556885, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 685, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1604485, "training_iteration": 40, "time_since_restore": 907.8702471256256}
{"episode_reward_min": 70.92061258736766, "episode_reward_mean": 846.6183119649562, "time_total_s": 929.5770845413208, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.1333333333333333, "cost2_max": 0.0, "outflow_rate_max": 1210.9372455264033, "system_level_velocity_mean": 12.982261416673845, "cost1_max": 443.08606922357285, "outflow_rate_mean": 1029.5791499144384, "outflow_rate_min": 527.8448333181541, "cost2_mean": -0.024557552691980598, "cost1_min": 30.617616674319816, "cost1_mean": 336.07801974556446, "system_level_velocity_min": 7.339246751823352, "system_level_velocity_max": 18.137794325085856}, "timesteps_this_iter": 38916, "info": {"load_time_ms": 8.641, "update_time_ms": 8.061, "grad_time_ms": 9760.351, "default": {"policy_loss": -0.021449686959385872, "vf_loss": 12.715533256530762, "total_loss": 12.701855659484863, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8846765756607056, "entropy": 1.4835662841796875, "kl": 0.015352594666182995, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12757.185, "num_steps_trained": 1643401, "num_steps_sampled": 1643401}, "timestamp": 1557101368, "date": "2019-05-06_00-09-28", "episode_len_mean": 693.46, "iterations_since_restore": 41, "done": false, "timesteps_total": 1643401, "episode_reward_max": 1019.5151232412107, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1eb8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1a90>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 16, "time_this_iter_s": 21.70683741569519, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 701, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1643401, "training_iteration": 41, "time_since_restore": 929.5770845413208}
{"episode_reward_min": 70.92061258736766, "episode_reward_mean": 847.7048398962247, "time_total_s": 951.9169824123383, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.1333333333333333, "cost2_max": 0.0, "outflow_rate_max": 1210.9372455264033, "system_level_velocity_mean": 12.920036024922036, "cost1_max": 433.80195787883054, "outflow_rate_mean": 1027.4298722099861, "outflow_rate_min": 527.8448333181541, "cost2_mean": -0.027367054713629796, "cost1_min": 30.617616674319816, "cost1_mean": 334.439046809771, "system_level_velocity_min": 7.339246751823352, "system_level_velocity_max": 18.137794325085856}, "timesteps_this_iter": 38214, "info": {"load_time_ms": 8.944, "update_time_ms": 8.047, "grad_time_ms": 9769.965, "default": {"policy_loss": -0.02146822027862072, "vf_loss": 16.641843795776367, "total_loss": 16.62812614440918, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8696082234382629, "entropy": 1.4553552865982056, "kl": 0.01530462596565485, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12732.589, "num_steps_trained": 1681615, "num_steps_sampled": 1681615}, "timestamp": 1557101391, "date": "2019-05-06_00-09-51", "episode_len_mean": 693.46, "iterations_since_restore": 42, "done": false, "timesteps_total": 1681615, "episode_reward_max": 1049.7003401451173, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1080>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4a58>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.339897871017456, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 719, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1681615, "training_iteration": 42, "time_since_restore": 951.9169824123383}
{"episode_reward_min": 607.5983783410853, "episode_reward_mean": 862.921643177219, "time_total_s": 974.4420328140259, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -1.1333333333333333, "cost2_max": 0.0, "outflow_rate_max": 1217.2091151245975, "system_level_velocity_mean": 13.140878074613136, "cost1_max": 433.80195787883054, "outflow_rate_mean": 1042.5916254664976, "outflow_rate_min": 735.2203308263131, "cost2_mean": -0.0364295095921101, "cost1_min": 187.5497460598769, "cost1_mean": 344.9009674671475, "system_level_velocity_min": 7.339246751823352, "system_level_velocity_max": 16.288717793278035}, "timesteps_this_iter": 38252, "info": {"load_time_ms": 8.829, "update_time_ms": 7.789, "grad_time_ms": 9744.643, "default": {"policy_loss": -0.02169376239180565, "vf_loss": 18.262767791748047, "total_loss": 18.248672485351562, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8627848029136658, "entropy": 1.4907174110412598, "kl": 0.015007322654128075, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12801.497, "num_steps_trained": 1719867, "num_steps_sampled": 1719867}, "timestamp": 1557101413, "date": "2019-05-06_00-10-13", "episode_len_mean": 700.0, "iterations_since_restore": 43, "done": false, "timesteps_total": 1719867, "episode_reward_max": 1102.7870475299944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd44a8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4898>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 20, "time_this_iter_s": 22.525050401687622, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 739, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1719867, "training_iteration": 43, "time_since_restore": 974.4420328140259}
{"episode_reward_min": 607.5983783410853, "episode_reward_mean": 864.0261262056733, "time_total_s": 997.0001664161682, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.4027222741195714, "cost2_max": 0.0, "outflow_rate_max": 1221.5456366688095, "system_level_velocity_mean": 13.241008767065408, "cost1_max": 444.7253037939859, "outflow_rate_mean": 1047.1305370715809, "outflow_rate_min": 867.0307796980271, "cost2_mean": -0.03517205866658856, "cost1_min": 248.37288021739428, "cost1_mean": 347.8007368288646, "system_level_velocity_min": 9.46640832810181, "system_level_velocity_max": 17.04563352376343}, "timesteps_this_iter": 38050, "info": {"load_time_ms": 8.56, "update_time_ms": 7.516, "grad_time_ms": 9714.264, "default": {"policy_loss": -0.02137734182178974, "vf_loss": 14.342930793762207, "total_loss": 14.32866382598877, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8949581980705261, "entropy": 1.491053581237793, "kl": 0.014049017801880836, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12847.044, "num_steps_trained": 1757917, "num_steps_sampled": 1757917}, "timestamp": 1557101436, "date": "2019-05-06_00-10-36", "episode_len_mean": 700.0, "iterations_since_restore": 44, "done": false, "timesteps_total": 1757917, "episode_reward_max": 1102.7870475299944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6c18>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6a20>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.558133602142334, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 757, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1757917, "training_iteration": 44, "time_since_restore": 997.0001664161682}
{"episode_reward_min": 607.5983783410853, "episode_reward_mean": 857.4137217584317, "time_total_s": 1018.5607368946075, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.5338426804816567, "cost2_max": 0.0, "outflow_rate_max": 1221.5456366688095, "system_level_velocity_mean": 13.253941628616923, "cost1_max": 444.7253037939859, "outflow_rate_mean": 1041.1243690745398, "outflow_rate_min": 867.0307796980271, "cost2_mean": -0.04239327369216364, "cost1_min": 248.37288021739428, "cost1_mean": 348.2383439451576, "system_level_velocity_min": 9.46640832810181, "system_level_velocity_max": 17.04563352376343}, "timesteps_this_iter": 39085, "info": {"load_time_ms": 8.537, "update_time_ms": 7.148, "grad_time_ms": 9723.04, "default": {"policy_loss": -0.01955973543226719, "vf_loss": 16.41759490966797, "total_loss": 16.405061721801758, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8675928115844727, "entropy": 1.5064222812652588, "kl": 0.013881131075322628, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12724.923, "num_steps_trained": 1797002, "num_steps_sampled": 1797002}, "timestamp": 1557101457, "date": "2019-05-06_00-10-57", "episode_len_mean": 700.0, "iterations_since_restore": 45, "done": false, "timesteps_total": 1797002, "episode_reward_max": 1102.7870475299944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4128>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4668>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 21.56057047843933, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 775, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1797002, "training_iteration": 45, "time_since_restore": 1018.5607368946075}
{"episode_reward_min": 607.5983783410853, "episode_reward_mean": 859.3894493401161, "time_total_s": 1041.3219392299652, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8719621901837927, "cost2_max": 0.0, "outflow_rate_max": 1221.5456366688095, "system_level_velocity_mean": 13.379966132838723, "cost1_max": 444.7253037939859, "outflow_rate_mean": 1041.825776649767, "outflow_rate_min": 857.7989292834266, "cost2_mean": -0.04868161954444025, "cost1_min": 249.72221305603432, "cost1_mean": 351.9149226049298, "system_level_velocity_min": 9.778186765410547, "system_level_velocity_max": 17.04563352376343}, "timesteps_this_iter": 38867, "info": {"load_time_ms": 8.652, "update_time_ms": 6.987, "grad_time_ms": 9743.504, "default": {"policy_loss": -0.021487273275852203, "vf_loss": 16.02020835876465, "total_loss": 16.006681442260742, "cur_kl_coeff": 0.5062499046325684, "vf_explained_var": 0.8849231600761414, "entropy": 1.5192065238952637, "kl": 0.015724776312708855, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12768.36, "num_steps_trained": 1835869, "num_steps_sampled": 1835869}, "timestamp": 1557101480, "date": "2019-05-06_00-11-20", "episode_len_mean": 700.0, "iterations_since_restore": 46, "done": false, "timesteps_total": 1835869, "episode_reward_max": 1102.7870475299944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce10b8>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce1b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ce15c0>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 22.761202335357666, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 793, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1835869, "training_iteration": 46, "time_since_restore": 1041.3219392299652}
{"episode_reward_min": 638.8248395799304, "episode_reward_mean": 862.4225487208186, "time_total_s": 1063.2119154930115, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8719621901837927, "cost2_max": 0.0, "outflow_rate_max": 1221.5456366688095, "system_level_velocity_mean": 13.402409789110811, "cost1_max": 444.7253037939859, "outflow_rate_mean": 1039.9619898041778, "outflow_rate_min": 827.2763204456301, "cost2_mean": -0.046609445314722324, "cost1_min": 249.72221305603432, "cost1_mean": 352.93537718574896, "system_level_velocity_min": 9.778186765410547, "system_level_velocity_max": 17.04563352376343}, "timesteps_this_iter": 38415, "info": {"load_time_ms": 8.777, "update_time_ms": 6.7, "grad_time_ms": 9710.956, "default": {"policy_loss": -0.024039750918745995, "vf_loss": 15.742841720581055, "total_loss": 15.727145195007324, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.895987331867218, "entropy": 1.5265259742736816, "kl": 0.016482392325997353, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12622.243, "num_steps_trained": 1874284, "num_steps_sampled": 1874284}, "timestamp": 1557101502, "date": "2019-05-06_00-11-42", "episode_len_mean": 700.0, "iterations_since_restore": 47, "done": false, "timesteps_total": 1874284, "episode_reward_max": 1102.7870475299944, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6f98>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd4c18>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 21.889976263046265, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 811, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1874284, "training_iteration": 47, "time_since_restore": 1063.2119154930115}
{"episode_reward_min": 44.85210306173808, "episode_reward_mean": 855.8591449080271, "time_total_s": 1084.738937139511, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8719621901837927, "cost2_max": 0.0, "outflow_rate_max": 1221.5456366688095, "system_level_velocity_mean": 13.480772675035702, "cost1_max": 444.7253037939859, "outflow_rate_mean": 1031.957265987782, "outflow_rate_min": 501.8032230195665, "cost2_mean": -0.04019778408703566, "cost1_min": 21.00912323190594, "cost1_mean": 349.96924201678434, "system_level_velocity_min": 10.317281184167559, "system_level_velocity_max": 19.07463451275398}, "timesteps_this_iter": 38868, "info": {"load_time_ms": 8.579, "update_time_ms": 6.838, "grad_time_ms": 9737.152, "default": {"policy_loss": -0.021958127617836, "vf_loss": 16.40133285522461, "total_loss": 16.387065887451172, "cur_kl_coeff": 0.5062499046325684, "vf_explained_var": 0.8873935341835022, "entropy": 1.5223973989486694, "kl": 0.015191638842225075, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12392.755, "num_steps_trained": 1913152, "num_steps_sampled": 1913152}, "timestamp": 1557101524, "date": "2019-05-06_00-12-04", "episode_len_mean": 693.32, "iterations_since_restore": 48, "done": false, "timesteps_total": 1913152, "episode_reward_max": 1071.953725335101, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6588>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cd6908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cc1208>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 21.527021646499634, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 829, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1913152, "training_iteration": 48, "time_since_restore": 1084.738937139511}
{"episode_reward_min": 44.85210306173808, "episode_reward_mean": 847.2020612480663, "time_total_s": 1105.9854896068573, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8719621901837927, "cost2_max": 0.0, "outflow_rate_max": 1221.5456366688095, "system_level_velocity_mean": 13.60080058686448, "cost1_max": 434.2073816589027, "outflow_rate_mean": 1022.4449708290564, "outflow_rate_min": 492.9002069337035, "cost2_mean": -0.03526928930809954, "cost1_min": 21.00912323190594, "cost1_mean": 343.3762364685546, "system_level_velocity_min": 10.449168030195874, "system_level_velocity_max": 19.07463451275398}, "timesteps_this_iter": 38070, "info": {"load_time_ms": 8.57, "update_time_ms": 6.85, "grad_time_ms": 9448.869, "default": {"policy_loss": -0.021748973056674004, "vf_loss": 22.66956329345703, "total_loss": 22.656221389770508, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8577011823654175, "entropy": 1.5345001220703125, "kl": 0.016604091972112656, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12496.675, "num_steps_trained": 1951222, "num_steps_sampled": 1951222}, "timestamp": 1557101545, "date": "2019-05-06_00-12-25", "episode_len_mean": 680.05, "iterations_since_restore": 49, "done": false, "timesteps_total": 1951222, "episode_reward_max": 1071.953725335101, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbcd68>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbc2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cbceb8>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 22, "time_this_iter_s": 21.24655246734619, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 851, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1951222, "training_iteration": 49, "time_since_restore": 1105.9854896068573}
{"episode_reward_min": 44.85210306173808, "episode_reward_mean": 848.5390916701853, "time_total_s": 1125.2698743343353, "node_ip": "10.138.0.2", "policy_reward_mean": {}, "custom_metrics": {"cost2_min": -0.8719621901837927, "cost2_max": 0.0, "outflow_rate_max": 1237.3146509770536, "system_level_velocity_mean": 13.74749171933151, "cost1_max": 446.86913499677377, "outflow_rate_mean": 1023.6281598439269, "outflow_rate_min": 492.9002069337035, "cost2_mean": -0.030595357730859005, "cost1_min": 21.00912323190594, "cost1_mean": 346.2339235918544, "system_level_velocity_min": 10.294984893972602, "system_level_velocity_max": 19.07463451275398}, "timesteps_this_iter": 38037, "info": {"load_time_ms": 8.489, "update_time_ms": 6.859, "grad_time_ms": 9318.706, "default": {"policy_loss": -0.020954182371497154, "vf_loss": 16.381404876708984, "total_loss": 16.36829948425293, "cur_kl_coeff": 0.5062499642372131, "vf_explained_var": 0.8952375650405884, "entropy": 1.531792163848877, "kl": 0.015499553643167019, "cur_lr": 0.0005000000237487257}, "sample_time_ms": 12326.898, "num_steps_trained": 1989259, "num_steps_sampled": 1989259}, "timestamp": 1557101564, "date": "2019-05-06_00-12-44", "episode_len_mean": 680.05, "iterations_since_restore": 50, "done": true, "timesteps_total": 1989259, "episode_reward_max": 1071.953725335101, "pid": 56377, "config": {"synchronize_filters": true, "vf_clip_param": 1000000.0, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:1.0", "input": "sampler", "optimizer": {}, "num_gpus_per_worker": 0, "output": null, "vf_loss_coeff": 1.0, "input_evaluation": null, "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f3153ccac18>", "on_train_result": null, "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f3153cca470>"}, "train_batch_size": 30000, "num_cpus_per_worker": 1, "sample_async": false, "output_max_file_size": 67108864, "num_envs_per_worker": 1, "kl_coeff": 0.2, "simple_optimizer": false, "straggler_mitigation": false, "observation_filter": "MeanStdFilter", "horizon": 1500, "sample_batch_size": 200, "lr": 0.0005, "output_compress_columns": ["obs", "new_obs"], "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "lambda": 0.97, "clip_param": 0.3, "gamma": 0.99, "tf_session_args": {"device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false}, "num_gpus": 0, "log_level": "INFO", "sgd_minibatch_size": 128, "model": {"zero_mean": true, "free_log_std": false, "fcnet_activation": "tanh", "custom_options": {}, "custom_preprocessor": null, "squash_to_range": false, "channel_major": false, "grayscale": false, "use_lstm": false, "max_seq_len": 20, "custom_model": null, "conv_filters": null, "lstm_cell_size": 256, "conv_activation": "relu", "lstm_use_prev_action_reward": false, "framestack": true, "fcnet_hiddens": [128, 64, 32], "dim": 84}, "num_sgd_iter": 10, "custom_resources_per_worker": {}, "preprocessor_pref": "deepmind", "monitor": false, "multiagent": {"policy_mapping_fn": null, "policies_to_train": null, "policy_graphs": {}}, "batch_mode": "truncate_episodes", "compress_observations": false, "kl_target": 0.01, "vf_share_layers": false, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "clip_actions": false, "lr_schedule": null, "clip_rewards": null, "entropy_coeff": 0.0, "collect_metrics_timeout": 180, "num_cpus_for_driver": 1, "num_workers": 20, "use_gae": true}, "episodes_this_iter": 18, "time_this_iter_s": 19.284384727478027, "experiment_id": "e9a8016eb74f4412abc73412e93a28e1", "episodes_total": 869, "num_metric_batches_dropped": 0, "hostname": "flow-main", "timesteps_since_restore": 1989259, "training_iteration": 50, "time_since_restore": 1125.2698743343353}
