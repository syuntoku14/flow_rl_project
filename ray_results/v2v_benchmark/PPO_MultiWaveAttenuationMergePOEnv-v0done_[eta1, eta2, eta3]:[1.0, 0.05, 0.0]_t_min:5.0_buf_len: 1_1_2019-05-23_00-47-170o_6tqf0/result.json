{"pid": 18734, "custom_metrics": {"cost1_max": 145.09393540884415, "cost2_max": -13.903327221302611, "cost2_min": -36.04557626611387, "system_level_velocity_max": 11.940130537728898, "outflow_rate_mean": 715.577461616666, "system_level_velocity_mean": 10.041455744962864, "system_level_velocity_min": 7.685414978584259, "outflow_rate_min": 390.40490322580644, "cost2_mean": -24.37043624255891, "outflow_rate_max": 919.1682551594745, "cost1_mean": 120.35869463960982, "cost1_min": 93.47522587325506}, "iterations_since_restore": 1, "done": false, "episodes_total": 40, "time_total_s": 29.85774850845337, "timestamp": 1558572519, "time_since_restore": 29.85774850845337, "episodes_this_iter": 40, "timesteps_since_restore": 41218, "episode_reward_max": 305.2179215100932, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f181c6780>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f181c6748>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f181c6710>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 139.4740844231802, "timesteps_this_iter": 41218, "episode_len_mean": 325.0, "info": {"load_time_ms": 63.821, "default": {"vf_explained_var": 0.9054984450340271, "entropy": 1.4167680740356445, "total_loss": 1.5224608182907104, "kl": 0.002971972106024623, "cur_lr": 0.0005000000237487257, "vf_loss": 1.5236215591430664, "policy_loss": -0.0017551487544551492, "cur_kl_coeff": 0.20000003278255463}, "sample_time_ms": 19081.915, "num_steps_trained": 41218, "update_time_ms": 1035.162, "num_steps_sampled": 41218, "grad_time_ms": 9517.88}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 41218, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 1, "date": "2019-05-23_00-48-39", "time_this_iter_s": 29.85774850845337, "episode_reward_mean": 212.0298906838062, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 161.89917189748826, "cost2_max": -13.903327221302611, "cost2_min": -48.43157496235227, "system_level_velocity_max": 18.427236772385605, "outflow_rate_mean": 768.2514965119083, "system_level_velocity_mean": 10.658222495788989, "system_level_velocity_min": 7.685414978584259, "outflow_rate_min": 390.40490322580644, "cost2_mean": -27.13103780348027, "outflow_rate_max": 1070.5304998788663, "cost1_mean": 125.81104666503079, "cost1_min": 22.711178270538696}, "iterations_since_restore": 2, "done": false, "episodes_total": 81, "time_total_s": 57.16802763938904, "timestamp": 1558572546, "time_since_restore": 57.16802763938904, "episodes_this_iter": 41, "timesteps_since_restore": 83921, "episode_reward_max": 383.36938631707545, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a898>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a860>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a828>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 48.0662575604312, "timesteps_this_iter": 42703, "episode_len_mean": 321.41975308641975, "info": {"load_time_ms": 34.803, "default": {"vf_explained_var": 0.9501615762710571, "entropy": 1.3997628688812256, "total_loss": 1.8203707933425903, "kl": 0.009803900495171547, "cur_lr": 0.0005000000237487257, "vf_loss": 1.8235818147659302, "policy_loss": -0.004191550891846418, "cur_kl_coeff": 0.10000000894069672}, "sample_time_ms": 18617.884, "num_steps_trained": 83921, "update_time_ms": 521.272, "num_steps_sampled": 83921, "grad_time_ms": 9294.341}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 83921, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 2, "date": "2019-05-23_00-49-06", "time_this_iter_s": 27.31027913093567, "episode_reward_mean": 235.31603934164593, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 179.1008188057907, "cost2_max": -14.460626476788846, "cost2_min": -54.509823502217785, "system_level_velocity_max": 18.427236772385605, "outflow_rate_mean": 825.7241930627363, "system_level_velocity_mean": 11.299969433028656, "system_level_velocity_min": 8.627969682011527, "outflow_rate_min": 430.34398671096346, "cost2_mean": -30.54434550926991, "outflow_rate_max": 1127.6648963730577, "cost1_mean": 134.69656319185356, "cost1_min": 22.711178270538696}, "iterations_since_restore": 3, "done": false, "episodes_total": 121, "time_total_s": 88.28475379943848, "timestamp": 1558572577, "time_since_restore": 88.28475379943848, "episodes_this_iter": 40, "timesteps_since_restore": 130512, "episode_reward_max": 455.44154592641485, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166ef0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166eb8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166e80>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 48.0662575604312, "timesteps_this_iter": 46591, "episode_len_mean": 322.1, "info": {"load_time_ms": 25.339, "default": {"vf_explained_var": 0.9312887191772461, "entropy": 1.3836005926132202, "total_loss": 4.364073753356934, "kl": 0.013853892683982849, "cur_lr": 0.0005000000237487257, "vf_loss": 4.367977619171143, "policy_loss": -0.005289295222610235, "cur_kl_coeff": 0.10000001639127731}, "sample_time_ms": 19051.791, "num_steps_trained": 130512, "update_time_ms": 349.786, "num_steps_sampled": 130512, "grad_time_ms": 9894.859}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 130512, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 3, "date": "2019-05-23_00-49-37", "time_this_iter_s": 31.11672616004944, "episode_reward_mean": 276.3930567115954, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 189.7034255786197, "cost2_max": -15.644281765368017, "cost2_min": -59.636896002040814, "system_level_velocity_max": 15.422284939488192, "outflow_rate_mean": 932.4223659951429, "system_level_velocity_mean": 12.602375842585436, "system_level_velocity_min": 9.11135194656326, "outflow_rate_min": 430.34398671096346, "cost2_mean": -39.38558179544113, "outflow_rate_max": 1192.59990820876, "cost1_mean": 153.42866405485856, "cost1_min": 106.91256015271068}, "iterations_since_restore": 4, "done": false, "episodes_total": 181, "time_total_s": 122.48926520347595, "timestamp": 1558572611, "time_since_restore": 122.48926520347595, "episodes_this_iter": 60, "timesteps_since_restore": 176685, "episode_reward_max": 476.17750147621194, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a828>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815ab00>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a898>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 147.16235936457085, "timesteps_this_iter": 46173, "episode_len_mean": 325.0, "info": {"load_time_ms": 20.521, "default": {"vf_explained_var": 0.9310429692268372, "entropy": 1.3589510917663574, "total_loss": 6.966074466705322, "kl": 0.00977400690317154, "cur_lr": 0.0005000000237487257, "vf_loss": 6.96935510635376, "policy_loss": -0.004258423577994108, "cur_kl_coeff": 0.10000000894069672}, "sample_time_ms": 19899.64, "num_steps_trained": 176685, "update_time_ms": 264.233, "num_steps_sampled": 176685, "grad_time_ms": 10337.931}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 176685, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 4, "date": "2019-05-23_00-50-11", "time_this_iter_s": 34.204511404037476, "episode_reward_mean": 361.95802730496257, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 189.7034255786197, "cost2_max": -23.85278402339774, "cost2_min": -62.180053299796285, "system_level_velocity_max": 15.422284939488192, "outflow_rate_mean": 957.9593109854703, "system_level_velocity_mean": 13.016192003644836, "system_level_velocity_min": 9.066478097009275, "outflow_rate_min": 368.36571428571426, "cost2_mean": -45.3537329805351, "outflow_rate_max": 1194.942142857143, "cost1_mean": 158.39262787711115, "cost1_min": 107.02152343628362}, "iterations_since_restore": 5, "done": false, "episodes_total": 221, "time_total_s": 155.59372782707214, "timestamp": 1558572645, "time_since_restore": 155.59372782707214, "episodes_this_iter": 40, "timesteps_since_restore": 226272, "episode_reward_max": 478.70273897580284, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f181663c8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166400>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f181662e8>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 279.0259979100806, "timesteps_this_iter": 49587, "episode_len_mean": 325.0, "info": {"load_time_ms": 17.788, "default": {"vf_explained_var": 0.9398349523544312, "entropy": 1.3655287027359009, "total_loss": 7.117450714111328, "kl": 0.012993309646844864, "cur_lr": 0.0005000000237487257, "vf_loss": 7.120715141296387, "policy_loss": -0.004564468748867512, "cur_kl_coeff": 0.10000000894069672}, "sample_time_ms": 20031.951, "num_steps_trained": 226272, "update_time_ms": 213.092, "num_steps_sampled": 226272, "grad_time_ms": 10757.213}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 226272, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 5, "date": "2019-05-23_00-50-45", "time_this_iter_s": 33.10446262359619, "episode_reward_mean": 391.35296793934447, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 190.9127863627608, "cost2_max": -15.097496892059915, "cost2_min": -62.180053299796285, "system_level_velocity_max": 18.313808512118325, "outflow_rate_mean": 921.6508228906284, "system_level_velocity_mean": 12.910627449638485, "system_level_velocity_min": 9.066478097009275, "outflow_rate_min": 344.4158304297328, "cost2_mean": -48.12341556098354, "outflow_rate_max": 1219.6223767766032, "cost1_mean": 154.6412513218505, "cost1_min": 24.178208904954644}, "iterations_since_restore": 6, "done": false, "episodes_total": 262, "time_total_s": 191.56794333457947, "timestamp": 1558572681, "time_since_restore": 191.56794333457947, "episodes_this_iter": 41, "timesteps_since_restore": 280385, "episode_reward_max": 482.33427953268307, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166c88>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166780>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166be0>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 56.04837152725938, "timesteps_this_iter": 54113, "episode_len_mean": 322.12, "info": {"load_time_ms": 15.95, "default": {"vf_explained_var": 0.9321074485778809, "entropy": 1.3755409717559814, "total_loss": 8.136890411376953, "kl": 0.008209076710045338, "cur_lr": 0.0005000000237487257, "vf_loss": 8.139228820800781, "policy_loss": -0.0031597018241882324, "cur_kl_coeff": 0.10000001639127731}, "sample_time_ms": 20267.164, "num_steps_trained": 280385, "update_time_ms": 178.983, "num_steps_sampled": 280385, "grad_time_ms": 11362.844}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 280385, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 6, "date": "2019-05-23_00-51-21", "time_this_iter_s": 35.974215507507324, "episode_reward_mean": 389.33177945546856, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 190.9127863627608, "cost2_max": -15.097496892059915, "cost2_min": -61.12961525045194, "system_level_velocity_max": 18.313808512118325, "outflow_rate_mean": 753.6455144703461, "system_level_velocity_mean": 11.942570278864583, "system_level_velocity_min": 8.130955243810115, "outflow_rate_min": 339.85285714285715, "cost2_mean": -48.72638110204036, "outflow_rate_max": 1219.6223767766032, "cost1_mean": 141.5858504409808, "cost1_min": 24.178208904954644}, "iterations_since_restore": 7, "done": false, "episodes_total": 322, "time_total_s": 232.84389114379883, "timestamp": 1558572722, "time_since_restore": 232.84389114379883, "episodes_this_iter": 60, "timesteps_since_restore": 341571, "episode_reward_max": 482.33427953268307, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a5f8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a400>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1815a828>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 56.04837152725938, "timesteps_this_iter": 61186, "episode_len_mean": 322.12, "info": {"load_time_ms": 14.725, "default": {"vf_explained_var": 0.9522059559822083, "entropy": 1.3871533870697021, "total_loss": 5.777666091918945, "kl": 0.01101168617606163, "cur_lr": 0.0005000000237487257, "vf_loss": 5.781380653381348, "policy_loss": -0.004816810134798288, "cur_kl_coeff": 0.10000002384185791}, "sample_time_ms": 20697.546, "num_steps_trained": 341571, "update_time_ms": 154.903, "num_steps_sampled": 341571, "grad_time_ms": 12293.431}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 341571, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 7, "date": "2019-05-23_00-52-02", "time_this_iter_s": 41.27594780921936, "episode_reward_mean": 364.9323468422094, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 190.89404367192512, "cost2_max": -31.985137843206306, "cost2_min": -60.70729305330676, "system_level_velocity_max": 15.473965013761221, "outflow_rate_mean": 619.7712923664365, "system_level_velocity_mean": 10.867626943132457, "system_level_velocity_min": 5.3474202883724695, "outflow_rate_min": 67.68, "cost2_mean": -47.537162398675164, "outflow_rate_max": 1216.3801076651127, "cost1_mean": 129.77954623949827, "cost1_min": 61.002274882515984}, "iterations_since_restore": 8, "done": false, "episodes_total": 362, "time_total_s": 272.15170311927795, "timestamp": 1558572761, "time_since_restore": 272.15170311927795, "episodes_this_iter": 40, "timesteps_since_restore": 402110, "episode_reward_max": 478.8927869135082, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166828>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166d68>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f181663c8>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 216.03713615434276, "timesteps_this_iter": 60539, "episode_len_mean": 325.0, "info": {"load_time_ms": 13.967, "default": {"vf_explained_var": 0.951995313167572, "entropy": 1.379759430885315, "total_loss": 5.213504314422607, "kl": 0.00925571471452713, "cur_lr": 0.0005000000237487257, "vf_loss": 5.215946674346924, "policy_loss": -0.0033676843158900738, "cur_kl_coeff": 0.10000001639127731}, "sample_time_ms": 20784.228, "num_steps_trained": 402110, "update_time_ms": 136.557, "num_steps_sampled": 402110, "grad_time_ms": 12981.768}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 402110, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 8, "date": "2019-05-23_00-52-41", "time_this_iter_s": 39.307811975479126, "episode_reward_mean": 344.382337637639, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 190.89404367192512, "cost2_max": -24.794376026898384, "cost2_min": -57.01839163252558, "system_level_velocity_max": 15.473965013761221, "outflow_rate_mean": 557.6617144802367, "system_level_velocity_mean": 10.435262779952657, "system_level_velocity_min": 5.3474202883724695, "outflow_rate_min": 67.68, "cost2_mean": -43.77050442584416, "outflow_rate_max": 1216.3801076651127, "cost1_mean": 124.33596631896609, "cost1_min": 61.002274882515984}, "iterations_since_restore": 9, "done": false, "episodes_total": 402, "time_total_s": 310.72125220298767, "timestamp": 1558572800, "time_since_restore": 310.72125220298767, "episodes_this_iter": 40, "timesteps_since_restore": 463537, "episode_reward_max": 473.69289491217336, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166198>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166ac8>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166630>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 216.03713615434276, "timesteps_this_iter": 61427, "episode_len_mean": 325.0, "info": {"load_time_ms": 13.394, "default": {"vf_explained_var": 0.949325680732727, "entropy": 1.3675376176834106, "total_loss": 4.528661727905273, "kl": 0.009628290310502052, "cur_lr": 0.0005000000237487257, "vf_loss": 4.53225040435791, "policy_loss": -0.004551905207335949, "cur_kl_coeff": 0.10000001639127731}, "sample_time_ms": 20714.226, "num_steps_trained": 463537, "update_time_ms": 122.155, "num_steps_sampled": 463537, "grad_time_ms": 13571.333}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 463537, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 9, "date": "2019-05-23_00-53-20", "time_this_iter_s": 38.56954908370972, "episode_reward_mean": 335.0363149278205, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 172.74848126931755, "cost2_max": -24.794376026898384, "cost2_min": -51.94051942773465, "system_level_velocity_max": 14.200229037818305, "outflow_rate_mean": 473.581633227224, "system_level_velocity_mean": 9.631577578196733, "system_level_velocity_min": 5.723153106282587, "outflow_rate_min": 37.08, "cost2_mean": -36.30397480843536, "outflow_rate_max": 1084.3885861899296, "cost1_mean": 113.7602180167402, "cost1_min": 65.15544002847221}, "iterations_since_restore": 10, "done": false, "episodes_total": 460, "time_total_s": 351.7070927619934, "timestamp": 1558572841, "time_since_restore": 351.7070927619934, "episodes_this_iter": 58, "timesteps_since_restore": 525684, "episode_reward_max": 422.036538418481, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f1816fd30>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166c18>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166278>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 224.670371995027, "timesteps_this_iter": 62147, "episode_len_mean": 325.0, "info": {"load_time_ms": 12.927, "default": {"vf_explained_var": 0.9444887638092041, "entropy": 1.3577989339828491, "total_loss": 4.77618408203125, "kl": 0.008009952493011951, "cur_lr": 0.0005000000237487257, "vf_loss": 4.778629779815674, "policy_loss": -0.003247742773965001, "cur_kl_coeff": 0.10000001639127731}, "sample_time_ms": 20913.558, "num_steps_trained": 525684, "update_time_ms": 110.81, "num_steps_sampled": 525684, "grad_time_ms": 14029.296}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 525684, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 10, "date": "2019-05-23_00-54-01", "time_this_iter_s": 40.98584055900574, "episode_reward_mean": 313.8058035877068, "policy_reward_mean": {}}
{"pid": 18734, "custom_metrics": {"cost1_max": 172.74848126931755, "cost2_max": -24.994951838469667, "cost2_min": -49.59791374036352, "system_level_velocity_max": 14.200229037818305, "outflow_rate_mean": 417.74488701012234, "system_level_velocity_mean": 9.068990952305647, "system_level_velocity_min": 5.629390324974963, "outflow_rate_min": 34.92, "cost2_mean": -34.19016271452921, "outflow_rate_max": 1075.7117164179103, "cost1_mean": 106.28544337977715, "cost1_min": 63.554051672237}, "iterations_since_restore": 11, "done": false, "episodes_total": 502, "time_total_s": 390.5104007720947, "timestamp": 1558572880, "time_since_restore": 390.5104007720947, "episodes_this_iter": 42, "timesteps_since_restore": 587574, "episode_reward_max": 422.036538418481, "node_ip": "10.138.0.2", "config": {"output_compress_columns": ["obs", "new_obs"], "callbacks": {"on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166828>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166cc0>", "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f9f18166710>"}, "vf_loss_coeff": 1.0, "clip_param": 0.3, "collect_metrics_timeout": 180, "vf_share_layers": false, "num_gpus_per_worker": 0, "num_workers": 20, "num_envs_per_worker": 1, "train_batch_size": 15000, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "log_level": "INFO", "synchronize_filters": true, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.05, 0.0]_t_min:5.0_buf_len: 1", "kl_coeff": 0.2, "straggler_mitigation": false, "model": {"grayscale": false, "max_seq_len": 20, "lstm_cell_size": 256, "dim": 84, "zero_mean": true, "custom_options": {}, "framestack": true, "channel_major": false, "conv_activation": "relu", "use_lstm": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "custom_model": null, "squash_to_range": false, "fcnet_hiddens": [128, 64, 32], "free_log_std": false, "conv_filters": null, "custom_preprocessor": null}, "compress_observations": false, "preprocessor_pref": "deepmind", "output": null, "use_gae": true, "simple_optimizer": false, "input": "sampler", "num_cpus_per_worker": 1, "horizon": 750, "vf_clip_param": 1000000.0, "input_evaluation": null, "lr_schedule": null, "sgd_minibatch_size": 128, "entropy_coeff": 0.0, "monitor": false, "optimizer": {}, "num_gpus": 0, "num_sgd_iter": 10, "clip_actions": false, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "gamma": 0.99, "lr": 0.0005, "num_cpus_for_driver": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "intra_op_parallelism_threads": 2}, "output_max_file_size": 67108864, "custom_resources_per_worker": {}, "kl_target": 0.01, "observation_filter": "MeanStdFilter", "batch_mode": "truncate_episodes", "sample_async": false, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}}, "episode_reward_min": 224.670371995027, "timesteps_this_iter": 61890, "episode_len_mean": 325.0, "info": {"load_time_ms": 7.282, "default": {"vf_explained_var": 0.9457221627235413, "entropy": 1.3620585203170776, "total_loss": 4.986825942993164, "kl": 0.009460044093430042, "cur_lr": 0.0005000000237487257, "vf_loss": 4.9892377853393555, "policy_loss": -0.0033574444241821766, "cur_kl_coeff": 0.10000002384185791}, "sample_time_ms": 21253.413, "num_steps_trained": 587574, "update_time_ms": 8.032, "num_steps_sampled": 587574, "grad_time_ms": 14698.843}, "hostname": "flow-main", "num_metric_batches_dropped": 0, "timesteps_total": 587574, "experiment_id": "e44614e017d44a79b16c11f8d8844c55", "training_iteration": 11, "date": "2019-05-23_00-54-40", "time_this_iter_s": 38.80330801010132, "episode_reward_mean": 302.282667015351, "policy_reward_mean": {}}
