{"num_metric_batches_dropped": 0, "episode_reward_max": 283.1527878144173, "date": "2019-05-20_18-06-17", "info": {"grad_time_ms": 10020.723, "update_time_ms": 1090.086, "sample_time_ms": 18808.974, "default": {"kl": 0.005994436331093311, "cur_lr": 0.0005000000237487257, "policy_loss": -0.002768505597487092, "vf_explained_var": 0.8943148255348206, "total_loss": 1.659514307975769, "entropy": 1.4111875295639038, "vf_loss": 1.6610840559005737, "cur_kl_coeff": 0.20000003278255463}, "num_steps_sampled": 41583, "load_time_ms": 75.943, "num_steps_trained": 41583}, "done": false, "episode_reward_mean": 210.79213113271982, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 11.543365961337798, "outflow_rate_min": 383.1, "cost1_min": 94.4918256252579, "system_level_velocity_mean": 10.08828033107776, "outflow_rate_mean": 724.170492071573, "cost1_mean": 120.96374476744475, "cost2_mean": -25.35396884121932, "system_level_velocity_min": 7.659479201196183, "cost2_max": -14.988568667248993, "cost1_max": 139.88928971506402, "outflow_rate_max": 950.4040643365298, "cost2_min": -41.44485583731883}, "episodes_this_iter": 40, "timesteps_since_restore": 41583, "episode_reward_min": 136.62512999439122, "time_since_restore": 30.131009101867676, "time_total_s": 30.131009101867676, "timesteps_this_iter": 41583, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef198>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef128>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef160>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 40, "timestamp": 1558375577, "episode_len_mean": 325.0, "training_iteration": 1, "pid": 266, "timesteps_total": 41583, "policy_reward_mean": {}, "iterations_since_restore": 1, "time_this_iter_s": 30.131009101867676}
{"num_metric_batches_dropped": 0, "episode_reward_max": 362.9316196637786, "date": "2019-05-20_18-06-45", "info": {"grad_time_ms": 10363.693, "update_time_ms": 548.995, "sample_time_ms": 18068.211, "default": {"kl": 0.0049951570108532906, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0018143428023904562, "vf_explained_var": 0.9612917900085449, "total_loss": 1.2722684144973755, "entropy": 1.4091049432754517, "vf_loss": 1.2730836868286133, "cur_kl_coeff": 0.20000001788139343}, "num_steps_sampled": 86868, "load_time_ms": 42.283, "num_steps_trained": 86868}, "done": false, "episode_reward_mean": 229.6910161349922, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 12.837677263663286, "outflow_rate_min": 383.1, "cost1_min": 94.4918256252579, "system_level_velocity_mean": 10.27817188144886, "outflow_rate_mean": 743.5530569458982, "cost1_mean": 123.80085772796019, "cost2_mean": -28.410409905164208, "system_level_velocity_min": 7.659479201196183, "cost2_max": -14.988568667248993, "cost1_max": 157.2174286564335, "outflow_rate_max": 961.2640488866094, "cost2_min": -50.79045660159181}, "episodes_this_iter": 40, "timesteps_since_restore": 86868, "episode_reward_min": 136.62512999439122, "time_since_restore": 58.25967979431152, "time_total_s": 58.25967979431152, "timesteps_this_iter": 45285, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902550>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59024e0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902518>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 80, "timestamp": 1558375605, "episode_len_mean": 325.0, "training_iteration": 2, "pid": 266, "timesteps_total": 86868, "policy_reward_mean": {}, "iterations_since_restore": 2, "time_this_iter_s": 28.128670692443848}
{"num_metric_batches_dropped": 0, "episode_reward_max": 386.24539248091673, "date": "2019-05-20_18-07-14", "info": {"grad_time_ms": 10380.733, "update_time_ms": 368.892, "sample_time_ms": 17968.332, "default": {"kl": 0.01734401471912861, "cur_lr": 0.0005000000237487257, "policy_loss": -0.008670911192893982, "vf_explained_var": 0.9669352173805237, "total_loss": 1.7762953042984009, "entropy": 1.3967950344085693, "vf_loss": 1.7832318544387817, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 133851, "load_time_ms": 30.876, "num_steps_trained": 133851}, "done": false, "episode_reward_mean": 254.83589895499765, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 12.837677263663286, "outflow_rate_min": 552.3, "cost1_min": 94.4918256252579, "system_level_velocity_mean": 10.581597267099358, "outflow_rate_mean": 772.8446258736819, "cost1_mean": 128.2300340646036, "cost2_mean": -30.576341897389376, "system_level_velocity_min": 7.659479201196183, "cost2_max": -17.90865395840411, "cost1_max": 157.2174286564335, "outflow_rate_max": 989.3539285714284, "cost2_min": -50.79045660159181}, "episodes_this_iter": 40, "timesteps_since_restore": 133851, "episode_reward_min": 136.62512999439122, "time_since_restore": 86.54342937469482, "time_total_s": 86.54342937469482, "timesteps_this_iter": 46983, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef940>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efb38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efb70>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 120, "timestamp": 1558375634, "episode_len_mean": 325.0, "training_iteration": 3, "pid": 266, "timesteps_total": 133851, "policy_reward_mean": {}, "iterations_since_restore": 3, "time_this_iter_s": 28.2837495803833}
{"num_metric_batches_dropped": 0, "episode_reward_max": 451.6924666265304, "date": "2019-05-20_18-07-42", "info": {"grad_time_ms": 10074.558, "update_time_ms": 278.651, "sample_time_ms": 18193.388, "default": {"kl": 0.00880350824445486, "cur_lr": 0.0005000000237487257, "policy_loss": -0.004159418400377035, "vf_explained_var": 0.8791888952255249, "total_loss": 8.80086612701416, "entropy": 1.3231558799743652, "vf_loss": 8.804144859313965, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 176803, "load_time_ms": 25.437, "num_steps_trained": 176803}, "done": false, "episode_reward_mean": 333.0350433265101, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 14.698933152850676, "outflow_rate_min": 552.3, "cost1_min": 105.78148734939023, "system_level_velocity_mean": 12.100080989860261, "outflow_rate_mean": 923.7625230539603, "cost1_mean": 148.09212416209434, "cost2_mean": -35.29606185519638, "system_level_velocity_min": 8.853918075382193, "cost2_max": -19.61960317746444, "cost1_max": 181.92202919805737, "outflow_rate_max": 1181.4262344449974, "cost2_min": -54.04960875363854}, "episodes_this_iter": 60, "timesteps_since_restore": 176803, "episode_reward_min": 170.2608463809775, "time_since_restore": 114.66790652275085, "time_total_s": 114.66790652275085, "timesteps_this_iter": 42952, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a4a8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a080>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a2b0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 180, "timestamp": 1558375662, "episode_len_mean": 325.0, "training_iteration": 4, "pid": 266, "timesteps_total": 176803, "policy_reward_mean": {}, "iterations_since_restore": 4, "time_this_iter_s": 28.12447714805603}
{"num_metric_batches_dropped": 0, "episode_reward_max": 473.66317328378886, "date": "2019-05-20_18-08-09", "info": {"grad_time_ms": 9855.609, "update_time_ms": 224.605, "sample_time_ms": 18125.376, "default": {"kl": 0.009338692761957645, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0038049384020268917, "vf_explained_var": 0.8710388541221619, "total_loss": 10.397010803222656, "entropy": 1.3116083145141602, "vf_loss": 10.399882316589355, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 220060, "load_time_ms": 21.242, "num_steps_trained": 220060}, "done": false, "episode_reward_mean": 387.22838712790224, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 15.99167614416182, "outflow_rate_min": 679.5408849557521, "cost1_min": 117.48025931808544, "system_level_velocity_mean": 13.300862272374642, "outflow_rate_mean": 1050.3715937811678, "cost1_mean": 163.3939372229972, "cost2_mean": -40.2830066388249, "system_level_velocity_min": 9.800512335169485, "cost2_max": -20.527019460133534, "cost1_max": 196.23066040623706, "outflow_rate_max": 1258.5304088595735, "cost2_min": -58.4097231189028}, "episodes_this_iter": 40, "timesteps_since_restore": 220060, "episode_reward_min": 212.17464715112925, "time_since_restore": 141.59363102912903, "time_total_s": 141.59363102912903, "timesteps_this_iter": 43257, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efd68>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efdd8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efcf8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 220, "timestamp": 1558375689, "episode_len_mean": 325.0, "training_iteration": 5, "pid": 266, "timesteps_total": 220060, "policy_reward_mean": {}, "iterations_since_restore": 5, "time_this_iter_s": 26.925724506378174}
{"num_metric_batches_dropped": 0, "episode_reward_max": 473.66317328378886, "date": "2019-05-20_18-08-37", "info": {"grad_time_ms": 9879.697, "update_time_ms": 188.335, "sample_time_ms": 18128.376, "default": {"kl": 0.009276000782847404, "cur_lr": 0.0005000000237487257, "policy_loss": -0.004367532208561897, "vf_explained_var": 0.8853766918182373, "total_loss": 10.525742530822754, "entropy": 1.297609567642212, "vf_loss": 10.529183387756348, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 263488, "load_time_ms": 18.981, "num_steps_trained": 263488}, "done": false, "episode_reward_mean": 407.3397104481145, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 16.103675544285366, "outflow_rate_min": 687.5161904761903, "cost1_min": 117.48025931808544, "system_level_velocity_mean": 13.77859972470427, "outflow_rate_mean": 1096.0941495961517, "cost1_mean": 169.33512868654944, "cost2_mean": -43.60089911545183, "system_level_velocity_min": 9.800512335169485, "cost2_max": -22.12111465306314, "cost1_max": 198.26279624953966, "outflow_rate_max": 1258.5304088595735, "cost2_min": -59.88534703454035}, "episodes_this_iter": 40, "timesteps_since_restore": 263488, "episode_reward_min": 212.17464715112925, "time_since_restore": 169.82727909088135, "time_total_s": 169.82727909088135, "timesteps_this_iter": 43428, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59020f0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59029e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902358>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 260, "timestamp": 1558375717, "episode_len_mean": 325.0, "training_iteration": 6, "pid": 266, "timesteps_total": 263488, "policy_reward_mean": {}, "iterations_since_restore": 6, "time_this_iter_s": 28.23364806175232}
{"num_metric_batches_dropped": 0, "episode_reward_max": 488.2150534831239, "date": "2019-05-20_18-09-06", "info": {"grad_time_ms": 9678.371, "update_time_ms": 162.497, "sample_time_ms": 18382.258, "default": {"kl": 0.013119610957801342, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0057358890771865845, "vf_explained_var": 0.8985817432403564, "total_loss": 12.77482795715332, "entropy": 1.3083807229995728, "vf_loss": 12.779252052307129, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 307249, "load_time_ms": 16.815, "num_steps_trained": 307249}, "done": false, "episode_reward_mean": 429.1428980810521, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 16.75610069260313, "outflow_rate_min": 833.4374948240167, "cost1_min": 130.40726503484302, "system_level_velocity_mean": 14.357109851584319, "outflow_rate_mean": 1145.5197192405237, "cost1_mean": 176.58246667717162, "cost2_mean": -46.61019565399154, "system_level_velocity_min": 10.709921835485643, "cost2_max": -31.01241047017921, "cost1_max": 205.635243036649, "outflow_rate_max": 1332.3433408708909, "cost2_min": -67.34138067125778}, "episodes_this_iter": 60, "timesteps_since_restore": 307249, "episode_reward_min": 322.0363016377174, "time_since_restore": 198.28854894638062, "time_total_s": 198.28854894638062, "timesteps_this_iter": 43761, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59023c8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902f98>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902d68>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 320, "timestamp": 1558375746, "episode_len_mean": 325.0, "training_iteration": 7, "pid": 266, "timesteps_total": 307249, "policy_reward_mean": {}, "iterations_since_restore": 7, "time_this_iter_s": 28.461269855499268}
{"num_metric_batches_dropped": 0, "episode_reward_max": 488.2150534831239, "date": "2019-05-20_18-09-36", "info": {"grad_time_ms": 9715.725, "update_time_ms": 143.207, "sample_time_ms": 18641.543, "default": {"kl": 0.007760467939078808, "cur_lr": 0.0005000000237487257, "policy_loss": -0.003991490229964256, "vf_explained_var": 0.9103628993034363, "total_loss": 10.935747146606445, "entropy": 1.2856987714767456, "vf_loss": 10.93896198272705, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 349849, "load_time_ms": 15.675, "num_steps_trained": 349849}, "done": false, "episode_reward_mean": 437.55426770025645, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 16.75610069260313, "outflow_rate_min": 833.4374948240167, "cost1_min": 130.40726503484302, "system_level_velocity_mean": 14.620288160459275, "outflow_rate_mean": 1166.6034093054918, "cost1_mean": 179.87095531802402, "cost2_mean": -47.61466495940388, "system_level_velocity_min": 10.709921835485643, "cost2_max": -32.41064028295883, "cost1_max": 205.635243036649, "outflow_rate_max": 1346.3256762661354, "cost2_min": -67.34138067125778}, "episodes_this_iter": 40, "timesteps_since_restore": 349849, "episode_reward_min": 322.0363016377174, "time_since_restore": 228.8250105381012, "time_total_s": 228.8250105381012, "timesteps_this_iter": 42600, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efa90>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efb38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efdd8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 360, "timestamp": 1558375776, "episode_len_mean": 325.0, "training_iteration": 8, "pid": 266, "timesteps_total": 349849, "policy_reward_mean": {}, "iterations_since_restore": 8, "time_this_iter_s": 30.53646159172058}
{"num_metric_batches_dropped": 0, "episode_reward_max": 493.283933277457, "date": "2019-05-20_18-10-05", "info": {"grad_time_ms": 9814.977, "update_time_ms": 128.135, "sample_time_ms": 18583.105, "default": {"kl": 0.007268866524100304, "cur_lr": 0.0005000000237487257, "policy_loss": -0.002563668414950371, "vf_explained_var": 0.8906205892562866, "total_loss": 14.416648864746094, "entropy": 1.2705405950546265, "vf_loss": 14.418486595153809, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 392134, "load_time_ms": 14.728, "num_steps_trained": 392134}, "done": false, "episode_reward_mean": 447.032844048153, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.017605072695073, "outflow_rate_min": 833.4374948240167, "cost1_min": 130.40726503484302, "system_level_velocity_mean": 15.025863658417215, "outflow_rate_mean": 1200.0556672153277, "cost1_mean": 184.7874765322082, "cost2_mean": -49.35612724672557, "system_level_velocity_min": 10.709921835485643, "cost2_max": -32.93791503404404, "cost1_max": 207.73946970341424, "outflow_rate_max": 1366.8883179346303, "cost2_min": -66.66913056836145}, "episodes_this_iter": 40, "timesteps_since_restore": 392134, "episode_reward_min": 338.1077521496058, "time_since_restore": 257.6419167518616, "time_total_s": 257.6419167518616, "timesteps_this_iter": 42285, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902cc0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902320>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902c18>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 400, "timestamp": 1558375805, "episode_len_mean": 325.0, "training_iteration": 9, "pid": 266, "timesteps_total": 392134, "policy_reward_mean": {}, "iterations_since_restore": 9, "time_this_iter_s": 28.816906213760376}
{"num_metric_batches_dropped": 0, "episode_reward_max": 502.30998686089134, "date": "2019-05-20_18-10-34", "info": {"grad_time_ms": 9735.21, "update_time_ms": 115.998, "sample_time_ms": 18733.728, "default": {"kl": 0.009707913734018803, "cur_lr": 0.0005000000237487257, "policy_loss": -0.004978055600076914, "vf_explained_var": 0.855776846408844, "total_loss": 21.59200668334961, "entropy": 1.284754991531372, "vf_loss": 21.59601402282715, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 434887, "load_time_ms": 13.99, "num_steps_trained": 434887}, "done": false, "episode_reward_mean": 447.76818833138566, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.677519296230518, "outflow_rate_min": 872.2830029568643, "cost1_min": 131.17095475165414, "system_level_velocity_mean": 15.326440774146706, "outflow_rate_mean": 1229.2149273665032, "cost1_mean": 187.70530971381388, "cost2_mean": -54.00848554758148, "system_level_velocity_min": 10.987851636033033, "cost2_max": -40.230878233987795, "cost1_max": 215.41944654269065, "outflow_rate_max": 1394.907634712471, "cost2_min": -69.02656066925567}, "episodes_this_iter": 60, "timesteps_since_restore": 434887, "episode_reward_min": 333.2853743819847, "time_since_restore": 286.8480088710785, "time_total_s": 286.8480088710785, "timesteps_this_iter": 42753, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efa20>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef860>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef9e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 460, "timestamp": 1558375834, "episode_len_mean": 325.0, "training_iteration": 10, "pid": 266, "timesteps_total": 434887, "policy_reward_mean": {}, "iterations_since_restore": 10, "time_this_iter_s": 29.20609211921692}
{"num_metric_batches_dropped": 0, "episode_reward_max": 502.30998686089134, "date": "2019-05-20_18-11-02", "info": {"grad_time_ms": 9669.001, "update_time_ms": 7.835, "sample_time_ms": 18649.496, "default": {"kl": 0.010512164793908596, "cur_lr": 0.0005000000237487257, "policy_loss": -0.00533613096922636, "vf_explained_var": 0.8936380743980408, "total_loss": 14.000804901123047, "entropy": 1.2815052270889282, "vf_loss": 14.00508975982666, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 477241, "load_time_ms": 7.083, "num_steps_trained": 477241}, "done": false, "episode_reward_mean": 437.73026883488376, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.677519296230518, "outflow_rate_min": 887.4928987239251, "cost1_min": 132.5722711504712, "system_level_velocity_mean": 15.11481865575712, "outflow_rate_mean": 1213.1092201200318, "cost1_mean": 184.54072424320674, "cost2_mean": -56.087048833241205, "system_level_velocity_min": 11.09474192689005, "cost2_max": -40.230878233987795, "cost1_max": 215.41944654269065, "outflow_rate_max": 1394.907634712471, "cost2_min": -69.02656066925567}, "episodes_this_iter": 40, "timesteps_since_restore": 477241, "episode_reward_min": 333.2853743819847, "time_since_restore": 314.26857829093933, "time_total_s": 314.26857829093933, "timesteps_this_iter": 42354, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a588>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590af28>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590af60>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 500, "timestamp": 1558375862, "episode_len_mean": 325.0, "training_iteration": 11, "pid": 266, "timesteps_total": 477241, "policy_reward_mean": {}, "iterations_since_restore": 11, "time_this_iter_s": 27.42056941986084}
{"num_metric_batches_dropped": 0, "episode_reward_max": 495.43223092322853, "date": "2019-05-20_18-11-29", "info": {"grad_time_ms": 9575.327, "update_time_ms": 7.807, "sample_time_ms": 18649.681, "default": {"kl": 0.010222440585494041, "cur_lr": 0.0005000000237487257, "policy_loss": -0.004686834290623665, "vf_explained_var": 0.8594591617584229, "total_loss": 18.788488388061523, "entropy": 1.261349081993103, "vf_loss": 18.792150497436523, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 519114, "load_time_ms": 6.748, "num_steps_trained": 519114}, "done": false, "episode_reward_mean": 436.34566964815195, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.72842463691823, "outflow_rate_min": 887.4928987239251, "cost1_min": 132.5722711504712, "system_level_velocity_mean": 15.121626143654176, "outflow_rate_mean": 1210.376191173462, "cost1_mean": 184.37774571296785, "cost2_mean": -55.66059473954133, "system_level_velocity_min": 11.09474192689005, "cost2_max": -41.584483568581405, "cost1_max": 215.58700152548, "outflow_rate_max": 1392.053396407204, "cost2_min": -71.33473451378364}, "episodes_this_iter": 40, "timesteps_since_restore": 519114, "episode_reward_min": 333.2853743819847, "time_since_restore": 341.460476398468, "time_total_s": 341.460476398468, "timesteps_this_iter": 41873, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902a20>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59027f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902940>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 540, "timestamp": 1558375889, "episode_len_mean": 325.0, "training_iteration": 12, "pid": 266, "timesteps_total": 519114, "policy_reward_mean": {}, "iterations_since_restore": 12, "time_this_iter_s": 27.191898107528687}
{"num_metric_batches_dropped": 0, "episode_reward_max": 494.1295591414468, "date": "2019-05-20_18-11-59", "info": {"grad_time_ms": 9576.667, "update_time_ms": 7.675, "sample_time_ms": 18785.602, "default": {"kl": 0.010146956890821457, "cur_lr": 0.0005000000237487257, "policy_loss": -0.005535060539841652, "vf_explained_var": 0.8223319053649902, "total_loss": 24.662607192993164, "entropy": 1.2404956817626953, "vf_loss": 24.667129516601562, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 560945, "load_time_ms": 6.517, "num_steps_trained": 560945}, "done": false, "episode_reward_mean": 438.7813774034355, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.457371176915423, "outflow_rate_min": 805.056930414932, "cost1_min": 84.2554527814525, "system_level_velocity_mean": 15.46341058733958, "outflow_rate_mean": 1222.1039892987312, "cost1_mean": 186.92097841536724, "cost2_mean": -54.0487553123427, "system_level_velocity_min": 11.639210330983042, "cost2_max": -37.032493570674376, "cost1_max": 215.9693121443389, "outflow_rate_max": 1413.9303443337715, "cost2_min": -71.33473451378364}, "episodes_this_iter": 60, "timesteps_since_restore": 560945, "episode_reward_min": 181.6629308769272, "time_since_restore": 371.1101462841034, "time_total_s": 371.1101462841034, "timesteps_this_iter": 41831, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efb70>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef7f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef940>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 600, "timestamp": 1558375919, "episode_len_mean": 323.0, "training_iteration": 13, "pid": 266, "timesteps_total": 560945, "policy_reward_mean": {}, "iterations_since_restore": 13, "time_this_iter_s": 29.649669885635376}
{"num_metric_batches_dropped": 0, "episode_reward_max": 489.99677161607195, "date": "2019-05-20_18-12-26", "info": {"grad_time_ms": 9691.578, "update_time_ms": 7.805, "sample_time_ms": 18567.735, "default": {"kl": 0.0091448575258255, "cur_lr": 0.0005000000237487257, "policy_loss": -0.004216592758893967, "vf_explained_var": 0.8526462912559509, "total_loss": 18.77448844909668, "entropy": 1.2198656797409058, "vf_loss": 18.777790069580078, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 600893, "load_time_ms": 6.111, "num_steps_trained": 600893}, "done": false, "episode_reward_mean": 435.8501014195061, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.457371176915423, "outflow_rate_min": 473.20973104725, "cost1_min": 22.485675784917554, "system_level_velocity_mean": 15.637735710280161, "outflow_rate_mean": 1219.652040589557, "cost1_mean": 186.83698065508804, "cost2_mean": -52.40677974303346, "system_level_velocity_min": 11.634670816381336, "cost2_max": -18.201212118238132, "cost1_max": 216.78045957881048, "outflow_rate_max": 1413.9303443337715, "cost2_min": -72.51418702107253}, "episodes_this_iter": 41, "timesteps_since_restore": 600893, "episode_reward_min": 48.61280590539159, "time_since_restore": 398.1973252296448, "time_total_s": 398.1973252296448, "timesteps_this_iter": 39948, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902eb8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902f98>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902be0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 641, "timestamp": 1558375946, "episode_len_mean": 320.1, "training_iteration": 14, "pid": 266, "timesteps_total": 600893, "policy_reward_mean": {}, "iterations_since_restore": 14, "time_this_iter_s": 27.087178945541382}
{"num_metric_batches_dropped": 0, "episode_reward_max": 489.99677161607195, "date": "2019-05-20_18-12-54", "info": {"grad_time_ms": 9882.158, "update_time_ms": 7.86, "sample_time_ms": 18472.052, "default": {"kl": 0.011100544594228268, "cur_lr": 0.0005000000237487257, "policy_loss": -0.004948994144797325, "vf_explained_var": 0.8446949124336243, "total_loss": 18.706655502319336, "entropy": 1.225719690322876, "vf_loss": 18.710493087768555, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 641477, "load_time_ms": 6.225, "num_steps_trained": 641477}, "done": false, "episode_reward_mean": 438.60102656244084, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.916031960475483, "outflow_rate_min": 473.20973104725, "cost1_min": 22.485675784917554, "system_level_velocity_mean": 15.586013525519252, "outflow_rate_mean": 1222.4301791876105, "cost1_mean": 187.66486121013943, "cost2_mean": -51.301234290368875, "system_level_velocity_min": 11.634670816381336, "cost2_max": -18.201212118238132, "cost1_max": 216.78045957881048, "outflow_rate_max": 1400.876579621096, "cost2_min": -72.51418702107253}, "episodes_this_iter": 41, "timesteps_since_restore": 641477, "episode_reward_min": 48.61280590539159, "time_since_restore": 426.06796169281006, "time_total_s": 426.06796169281006, "timesteps_this_iter": 40584, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efcf8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59021d0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59024e0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 682, "timestamp": 1558375974, "episode_len_mean": 322.1, "training_iteration": 15, "pid": 266, "timesteps_total": 641477, "policy_reward_mean": {}, "iterations_since_restore": 15, "time_this_iter_s": 27.870636463165283}
{"num_metric_batches_dropped": 0, "episode_reward_max": 486.6434827240545, "date": "2019-05-20_18-13-22", "info": {"grad_time_ms": 9996.14, "update_time_ms": 7.949, "sample_time_ms": 18305.257, "default": {"kl": 0.010890951380133629, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0060741170309484005, "vf_explained_var": 0.8551539182662964, "total_loss": 19.356365203857422, "entropy": 1.2194724082946777, "vf_loss": 19.36134910583496, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 682726, "load_time_ms": 6.031, "num_steps_trained": 682726}, "done": false, "episode_reward_mean": 436.7650061133944, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.204219952595366, "outflow_rate_min": 469.45002216272013, "cost1_min": 22.779117613611838, "system_level_velocity_mean": 15.441492410491689, "outflow_rate_mean": 1214.1076296468755, "cost1_mean": 186.2042757157125, "cost2_mean": -50.711682057040996, "system_level_velocity_min": 11.803408189472094, "cost2_max": -16.749418162840243, "cost1_max": 214.16657361037394, "outflow_rate_max": 1384.7414069952304, "cost2_min": -64.49755759166614}, "episodes_this_iter": 41, "timesteps_since_restore": 682726, "episode_reward_min": 50.3380436006197, "time_since_restore": 453.77572321891785, "time_total_s": 453.77572321891785, "timesteps_this_iter": 41249, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efc88>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef9e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efbe0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 723, "timestamp": 1558376002, "episode_len_mean": 322.1, "training_iteration": 16, "pid": 266, "timesteps_total": 682726, "policy_reward_mean": {}, "iterations_since_restore": 16, "time_this_iter_s": 27.707761526107788}
{"num_metric_batches_dropped": 0, "episode_reward_max": 486.6434827240545, "date": "2019-05-20_18-13-50", "info": {"grad_time_ms": 10117.466, "update_time_ms": 8.032, "sample_time_ms": 18195.662, "default": {"kl": 0.011469671502709389, "cur_lr": 0.0005000000237487257, "policy_loss": -0.005819947924464941, "vf_explained_var": 0.8657668828964233, "total_loss": 20.75625991821289, "entropy": 1.2153842449188232, "vf_loss": 20.76093292236328, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 723707, "load_time_ms": 6.179, "num_steps_trained": 723707}, "done": false, "episode_reward_mean": 439.1875385892378, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.204219952595366, "outflow_rate_min": 469.45002216272013, "cost1_min": 22.779117613611838, "system_level_velocity_mean": 15.561806392121737, "outflow_rate_mean": 1218.9435894769404, "cost1_mean": 187.725455344506, "cost2_mean": -52.639660115785375, "system_level_velocity_min": 12.114894803493385, "cost2_max": -16.749418162840243, "cost1_max": 214.35614240322602, "outflow_rate_max": 1384.7414069952304, "cost2_min": -65.96520013783078}, "episodes_this_iter": 59, "timesteps_since_restore": 723707, "episode_reward_min": 50.3380436006197, "time_since_restore": 482.3601951599121, "time_total_s": 482.3601951599121, "timesteps_this_iter": 40981, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a8d0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ac50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a7f0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 782, "timestamp": 1558376030, "episode_len_mean": 322.1, "training_iteration": 17, "pid": 266, "timesteps_total": 723707, "policy_reward_mean": {}, "iterations_since_restore": 17, "time_this_iter_s": 28.584471940994263}
{"num_metric_batches_dropped": 0, "episode_reward_max": 485.5593688844539, "date": "2019-05-20_18-14-17", "info": {"grad_time_ms": 10092.961, "update_time_ms": 8.025, "sample_time_ms": 17880.82, "default": {"kl": 0.011308600194752216, "cur_lr": 0.0005000000237487257, "policy_loss": -0.005706279072910547, "vf_explained_var": 0.8343801498413086, "total_loss": 24.04682731628418, "entropy": 1.197206735610962, "vf_loss": 24.051403045654297, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 763836, "load_time_ms": 6.006, "num_steps_trained": 763836}, "done": false, "episode_reward_mean": 440.249724316156, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.68698381684027, "outflow_rate_min": 504.740621259614, "cost1_min": 23.184775762701403, "system_level_velocity_mean": 15.641154422341156, "outflow_rate_mean": 1225.191782232175, "cost1_mean": 188.473568126306, "cost2_mean": -53.66883745649265, "system_level_velocity_min": 10.602376593916711, "cost2_max": -17.014881823036017, "cost1_max": 215.67265786818393, "outflow_rate_max": 1385.7406027031184, "cost2_min": -65.96520013783078}, "episodes_this_iter": 42, "timesteps_since_restore": 763836, "episode_reward_min": 48.192573173186105, "time_since_restore": 509.486359834671, "time_total_s": 509.486359834671, "timesteps_this_iter": 40129, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590acc0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a908>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a0f0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 824, "timestamp": 1558376057, "episode_len_mean": 322.1, "training_iteration": 18, "pid": 266, "timesteps_total": 763836, "policy_reward_mean": {}, "iterations_since_restore": 18, "time_this_iter_s": 27.12616467475891}
{"num_metric_batches_dropped": 0, "episode_reward_max": 491.0751378842093, "date": "2019-05-20_18-14-44", "info": {"grad_time_ms": 9980.368, "update_time_ms": 7.917, "sample_time_ms": 17763.15, "default": {"kl": 0.011713841930031776, "cur_lr": 0.0005000000237487257, "policy_loss": -0.007052934728562832, "vf_explained_var": 0.879584550857544, "total_loss": 20.294841766357422, "entropy": 1.213979959487915, "vf_loss": 20.300722122192383, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 805722, "load_time_ms": 5.801, "num_steps_trained": 805722}, "done": false, "episode_reward_mean": 440.21843123238665, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.68698381684027, "outflow_rate_min": 504.740621259614, "cost1_min": 23.184775762701403, "system_level_velocity_mean": 15.649088279590393, "outflow_rate_mean": 1228.3907247472682, "cost1_mean": 188.42695509032973, "cost2_mean": -55.144041409992425, "system_level_velocity_min": 10.602376593916711, "cost2_max": -17.014881823036017, "cost1_max": 215.67265786818393, "outflow_rate_max": 1393.0601934713488, "cost2_min": -77.4527433027883}, "episodes_this_iter": 40, "timesteps_since_restore": 805722, "episode_reward_min": 48.192573173186105, "time_since_restore": 536.0073325634003, "time_total_s": 536.0073325634003, "timesteps_this_iter": 41886, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902e48>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902c50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902438>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 864, "timestamp": 1558376084, "episode_len_mean": 322.1, "training_iteration": 19, "pid": 266, "timesteps_total": 805722, "policy_reward_mean": {}, "iterations_since_restore": 19, "time_this_iter_s": 26.520972728729248}
{"num_metric_batches_dropped": 0, "episode_reward_max": 491.0751378842093, "date": "2019-05-20_18-15-13", "info": {"grad_time_ms": 10158.226, "update_time_ms": 7.978, "sample_time_ms": 17588.743, "default": {"kl": 0.010172120295464993, "cur_lr": 0.0005000000237487257, "policy_loss": -0.006067697424441576, "vf_explained_var": 0.8356483578681946, "total_loss": 28.631710052490234, "entropy": 1.1853344440460205, "vf_loss": 28.636756896972656, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 845753, "load_time_ms": 5.671, "num_steps_trained": 845753}, "done": false, "episode_reward_mean": 447.1291227253467, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.76915511056756, "outflow_rate_min": 1008.6941280537847, "cost1_min": 146.12614584019417, "system_level_velocity_mean": 15.7591918041412, "outflow_rate_mean": 1245.3617558483725, "cost1_mean": 191.81010581008766, "cost2_mean": -56.17286070277542, "system_level_velocity_min": 12.040757029028107, "cost2_max": -41.80735774180397, "cost1_max": 214.76707512475582, "outflow_rate_max": 1393.0601934713488, "cost2_min": -77.4527433027883}, "episodes_this_iter": 59, "timesteps_since_restore": 845753, "episode_reward_min": 363.92667860574545, "time_since_restore": 565.2466466426849, "time_total_s": 565.2466466426849, "timesteps_this_iter": 40031, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a710>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590af98>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a748>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 923, "timestamp": 1558376113, "episode_len_mean": 325.0, "training_iteration": 20, "pid": 266, "timesteps_total": 845753, "policy_reward_mean": {}, "iterations_since_restore": 20, "time_this_iter_s": 29.239314079284668}
{"num_metric_batches_dropped": 0, "episode_reward_max": 491.5740153308284, "date": "2019-05-20_18-15-39", "info": {"grad_time_ms": 10121.425, "update_time_ms": 7.865, "sample_time_ms": 17455.288, "default": {"kl": 0.011465759016573429, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0063211978413164616, "vf_explained_var": 0.8486152291297913, "total_loss": 23.2586669921875, "entropy": 1.1854126453399658, "vf_loss": 23.263839721679688, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 885746, "load_time_ms": 5.349, "num_steps_trained": 885746}, "done": false, "episode_reward_mean": 449.52912824916973, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.80745630267515, "outflow_rate_min": 1008.6941280537847, "cost1_min": 146.12614584019417, "system_level_velocity_mean": 15.885695217973435, "outflow_rate_mean": 1254.606759058421, "cost1_mean": 193.45962688789146, "cost2_mean": -55.00949797605976, "system_level_velocity_min": 12.040757029028107, "cost2_max": -41.80735774180397, "cost1_max": 214.76707512475582, "outflow_rate_max": 1387.279974539599, "cost2_min": -71.06940188456588}, "episodes_this_iter": 41, "timesteps_since_restore": 885746, "episode_reward_min": 363.92667860574545, "time_since_restore": 590.9548761844635, "time_total_s": 590.9548761844635, "timesteps_this_iter": 39993, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a898>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aac8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aa20>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 964, "timestamp": 1558376139, "episode_len_mean": 325.0, "training_iteration": 21, "pid": 266, "timesteps_total": 885746, "policy_reward_mean": {}, "iterations_since_restore": 21, "time_this_iter_s": 25.708229541778564}
{"num_metric_batches_dropped": 0, "episode_reward_max": 491.5740153308284, "date": "2019-05-20_18-16-05", "info": {"grad_time_ms": 10067.879, "update_time_ms": 7.817, "sample_time_ms": 17359.677, "default": {"kl": 0.013312469236552715, "cur_lr": 0.0005000000237487257, "policy_loss": -0.006662433501332998, "vf_explained_var": 0.8048436045646667, "total_loss": 26.576793670654297, "entropy": 1.1808480024337769, "vf_loss": 26.582124710083008, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 924615, "load_time_ms": 5.496, "num_steps_trained": 924615}, "done": false, "episode_reward_mean": 448.20997385815366, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.63682007687191, "outflow_rate_min": 492.1092242513756, "cost1_min": 24.47967844896549, "system_level_velocity_mean": 16.176900994086292, "outflow_rate_mean": 1262.6249406119466, "cost1_mean": 194.72903720178692, "cost2_mean": -52.90320324935809, "system_level_velocity_min": 12.417260067111949, "cost2_max": -18.459080015667183, "cost1_max": 214.76707512475582, "outflow_rate_max": 1387.279974539599, "cost2_min": -69.91358060791084}, "episodes_this_iter": 41, "timesteps_since_restore": 924615, "episode_reward_min": 51.102477377515314, "time_since_restore": 616.6456682682037, "time_total_s": 616.6456682682037, "timesteps_this_iter": 38869, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efbe0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efa90>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef9e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1005, "timestamp": 1558376165, "episode_len_mean": 322.12, "training_iteration": 22, "pid": 266, "timesteps_total": 924615, "policy_reward_mean": {}, "iterations_since_restore": 22, "time_this_iter_s": 25.690792083740234}
{"num_metric_batches_dropped": 0, "episode_reward_max": 484.1588726324033, "date": "2019-05-20_18-16-32", "info": {"grad_time_ms": 9929.322, "update_time_ms": 7.857, "sample_time_ms": 17224.423, "default": {"kl": 0.013187476433813572, "cur_lr": 0.0005000000237487257, "policy_loss": -0.007355361245572567, "vf_explained_var": 0.8272182941436768, "total_loss": 31.755338668823242, "entropy": 1.1867921352386475, "vf_loss": 31.761375427246094, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 964106, "load_time_ms": 5.415, "num_steps_trained": 964106}, "done": false, "episode_reward_mean": 444.0874586362046, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.63682007687191, "outflow_rate_min": 492.1092242513756, "cost1_min": 24.47967844896549, "system_level_velocity_mean": 16.12141557720416, "outflow_rate_mean": 1257.4179940848708, "cost1_mean": 193.75385172609174, "cost2_mean": -51.99764737515144, "system_level_velocity_min": 12.108859895266237, "cost2_max": -18.459080015667183, "cost1_max": 215.73548306322186, "outflow_rate_max": 1395.0016582828837, "cost2_min": -68.3904000176057}, "episodes_this_iter": 56, "timesteps_since_restore": 964106, "episode_reward_min": 51.102477377515314, "time_since_restore": 643.5490756034851, "time_total_s": 643.5490756034851, "timesteps_this_iter": 39491, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a7b8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ac50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ab38>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1061, "timestamp": 1558376192, "episode_len_mean": 321.92, "training_iteration": 23, "pid": 266, "timesteps_total": 964106, "policy_reward_mean": {}, "iterations_since_restore": 23, "time_this_iter_s": 26.903407335281372}
{"num_metric_batches_dropped": 0, "episode_reward_max": 490.0441360743488, "date": "2019-05-20_18-16-59", "info": {"grad_time_ms": 9825.419, "update_time_ms": 7.677, "sample_time_ms": 17308.716, "default": {"kl": 0.01596536673605442, "cur_lr": 0.0005000000237487257, "policy_loss": -0.007658892311155796, "vf_explained_var": 0.8052852749824524, "total_loss": 31.381696701049805, "entropy": 1.177122950553894, "vf_loss": 31.38775634765625, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 1002891, "load_time_ms": 5.691, "num_steps_trained": 1002891}, "done": false, "episode_reward_mean": 441.98622832174334, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.316972574413427, "outflow_rate_min": 478.345821268365, "cost1_min": 24.802874610544116, "system_level_velocity_mean": 16.05582911484229, "outflow_rate_mean": 1245.5479644231598, "cost1_mean": 192.96397836125416, "cost2_mean": -51.53525923876563, "system_level_velocity_min": 12.108859895266237, "cost2_max": -20.364300419150904, "cost1_max": 216.50890878341465, "outflow_rate_max": 1395.0016582828837, "cost2_min": -68.3904000176057}, "episodes_this_iter": 44, "timesteps_since_restore": 1002891, "episode_reward_min": 52.829262855420616, "time_since_restore": 670.4334352016449, "time_total_s": 670.4334352016449, "timesteps_this_iter": 38785, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef9b0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a278>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efeb8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1105, "timestamp": 1558376219, "episode_len_mean": 321.93, "training_iteration": 24, "pid": 266, "timesteps_total": 1002891, "policy_reward_mean": {}, "iterations_since_restore": 24, "time_this_iter_s": 26.88435959815979}
{"num_metric_batches_dropped": 0, "episode_reward_max": 490.0441360743488, "date": "2019-05-20_18-17-25", "info": {"grad_time_ms": 9668.287, "update_time_ms": 7.399, "sample_time_ms": 17293.825, "default": {"kl": 0.016895197331905365, "cur_lr": 0.0005000000237487257, "policy_loss": -0.00870142038911581, "vf_explained_var": 0.7867738604545593, "total_loss": 36.525779724121094, "entropy": 1.1881113052368164, "vf_loss": 36.53279113769531, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1042218, "load_time_ms": 5.771, "num_steps_trained": 1042218}, "done": false, "episode_reward_mean": 428.2047025084888, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.32565048607951, "outflow_rate_min": 454.1881787896761, "cost1_min": 17.78928614421546, "system_level_velocity_mean": 16.074268062291107, "outflow_rate_mean": 1215.4550263252174, "cost1_mean": 187.33002122153957, "cost2_mean": -49.52801157295459, "system_level_velocity_min": 12.085710532761926, "cost2_max": -14.439281938201422, "cost1_max": 216.50890878341465, "outflow_rate_max": 1382.1143765782454, "cost2_min": -68.3904000176057}, "episodes_this_iter": 44, "timesteps_since_restore": 1042218, "episode_reward_min": 40.462181435117685, "time_since_restore": 696.5791954994202, "time_total_s": 696.5791954994202, "timesteps_this_iter": 39327, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a048>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ae48>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ac18>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1149, "timestamp": 1558376245, "episode_len_mean": 313.41, "training_iteration": 25, "pid": 266, "timesteps_total": 1042218, "policy_reward_mean": {}, "iterations_since_restore": 25, "time_this_iter_s": 26.14576029777527}
{"num_metric_batches_dropped": 0, "episode_reward_max": 480.1321945085861, "date": "2019-05-20_18-17-53", "info": {"grad_time_ms": 9500.518, "update_time_ms": 7.23, "sample_time_ms": 17485.525, "default": {"kl": 0.016548361629247665, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009445850737392902, "vf_explained_var": 0.8217407464981079, "total_loss": 30.6458797454834, "entropy": 1.215635895729065, "vf_loss": 30.653671264648438, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1082610, "load_time_ms": 5.845, "num_steps_trained": 1082610}, "done": false, "episode_reward_mean": 425.2131747901832, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.32565048607951, "outflow_rate_min": 454.1881787896761, "cost1_min": 17.78928614421546, "system_level_velocity_mean": 15.84085462905246, "outflow_rate_mean": 1202.0781196653425, "cost1_mean": 186.43665114816042, "cost2_mean": -48.990762663771456, "system_level_velocity_min": 12.085710532761926, "cost2_max": -14.439281938201422, "cost1_max": 217.21929796833425, "outflow_rate_max": 1388.5365945165947, "cost2_min": -64.334124898838}, "episodes_this_iter": 52, "timesteps_since_restore": 1082610, "episode_reward_min": 40.462181435117685, "time_since_restore": 724.5281443595886, "time_total_s": 724.5281443595886, "timesteps_this_iter": 40392, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911160>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59110f0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911128>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1201, "timestamp": 1558376273, "episode_len_mean": 316.28, "training_iteration": 26, "pid": 266, "timesteps_total": 1082610, "policy_reward_mean": {}, "iterations_since_restore": 26, "time_this_iter_s": 27.948948860168457}
{"num_metric_batches_dropped": 0, "episode_reward_max": 480.01301560901453, "date": "2019-05-20_18-18-20", "info": {"grad_time_ms": 9420.817, "update_time_ms": 7.169, "sample_time_ms": 17382.033, "default": {"kl": 0.015526524744927883, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009010041132569313, "vf_explained_var": 0.8042815923690796, "total_loss": 30.872526168823242, "entropy": 1.1909540891647339, "vf_loss": 30.87998390197754, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1121124, "load_time_ms": 6.169, "num_steps_trained": 1121124}, "done": false, "episode_reward_mean": 431.13616183606115, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.637648186352237, "outflow_rate_min": 491.80005929373294, "cost1_min": 25.770214686729926, "system_level_velocity_mean": 15.730010403999, "outflow_rate_mean": 1208.8390879009576, "cost1_mean": 188.9572828540249, "cost2_mean": -48.64645391978076, "system_level_velocity_min": 12.208074589108568, "cost2_max": -19.0174197041404, "cost1_max": 217.21929796833425, "outflow_rate_max": 1388.5365945165947, "cost2_min": -59.51518492803387}, "episodes_this_iter": 48, "timesteps_since_restore": 1121124, "episode_reward_min": 53.343042529412, "time_since_restore": 751.2856132984161, "time_total_s": 751.2856132984161, "timesteps_this_iter": 38514, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efa20>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5941668>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5941630>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1249, "timestamp": 1558376300, "episode_len_mean": 322.14, "training_iteration": 27, "pid": 266, "timesteps_total": 1121124, "policy_reward_mean": {}, "iterations_since_restore": 27, "time_this_iter_s": 26.757468938827515}
{"num_metric_batches_dropped": 0, "episode_reward_max": 484.2770890756917, "date": "2019-05-20_18-18-47", "info": {"grad_time_ms": 9391.446, "update_time_ms": 7.12, "sample_time_ms": 17403.922, "default": {"kl": 0.01670207642018795, "cur_lr": 0.0005000000237487257, "policy_loss": -0.00954026635736227, "vf_explained_var": 0.8294529318809509, "total_loss": 26.864803314208984, "entropy": 1.217785358428955, "vf_loss": 26.872676849365234, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1160551, "load_time_ms": 6.346, "num_steps_trained": 1160551}, "done": false, "episode_reward_mean": 430.09286020834895, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.637648186352237, "outflow_rate_min": 491.80005929373294, "cost1_min": 25.770214686729926, "system_level_velocity_mean": 15.711093420465762, "outflow_rate_mean": 1207.3478696032905, "cost1_mean": 188.6505338596732, "cost2_mean": -48.01197801127422, "system_level_velocity_min": 12.208074589108568, "cost2_max": -19.0174197041404, "cost1_max": 218.1420257832084, "outflow_rate_max": 1397.792144798314, "cost2_min": -59.09135122828821}, "episodes_this_iter": 41, "timesteps_since_restore": 1160551, "episode_reward_min": 53.343042529412, "time_since_restore": 778.3489897251129, "time_total_s": 778.3489897251129, "timesteps_this_iter": 39427, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913630>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913668>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913240>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1290, "timestamp": 1558376327, "episode_len_mean": 322.14, "training_iteration": 28, "pid": 266, "timesteps_total": 1160551, "policy_reward_mean": {}, "iterations_since_restore": 28, "time_this_iter_s": 27.063376426696777}
{"num_metric_batches_dropped": 0, "episode_reward_max": 484.2770890756917, "date": "2019-05-20_18-19-12", "info": {"grad_time_ms": 9401.021, "update_time_ms": 7.315, "sample_time_ms": 17295.937, "default": {"kl": 0.017860593274235725, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009525111876428127, "vf_explained_var": 0.8245692849159241, "total_loss": 27.01485252380371, "entropy": 1.2021119594573975, "vf_loss": 27.02259063720703, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1199848, "load_time_ms": 6.54, "num_steps_trained": 1199848}, "done": false, "episode_reward_mean": 432.40818316997536, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.113908093023166, "outflow_rate_min": 961.4112664147318, "cost1_min": 149.82070364558302, "system_level_velocity_mean": 15.68200560014056, "outflow_rate_mean": 1211.7167392865058, "cost1_mean": 190.27204776913527, "cost2_mean": -47.55915792070671, "system_level_velocity_min": 12.317972524265118, "cost2_max": -28.699714696145335, "cost1_max": 218.1420257832084, "outflow_rate_max": 1397.792144798314, "cost2_min": -62.40765771109825}, "episodes_this_iter": 40, "timesteps_since_restore": 1199848, "episode_reward_min": 371.2285763960289, "time_since_restore": 803.8919041156769, "time_total_s": 803.8919041156769, "timesteps_this_iter": 39297, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59110b8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59117b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911f98>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1330, "timestamp": 1558376352, "episode_len_mean": 325.0, "training_iteration": 29, "pid": 266, "timesteps_total": 1199848, "policy_reward_mean": {}, "iterations_since_restore": 29, "time_this_iter_s": 25.542914390563965}
{"num_metric_batches_dropped": 0, "episode_reward_max": 467.7537739689032, "date": "2019-05-20_18-19-40", "info": {"grad_time_ms": 9218.123, "update_time_ms": 7.345, "sample_time_ms": 17300.589, "default": {"kl": 0.018613586202263832, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010162862949073315, "vf_explained_var": 0.7190514802932739, "total_loss": 41.546077728271484, "entropy": 1.1891467571258545, "vf_loss": 41.554378509521484, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1237823, "load_time_ms": 6.585, "num_steps_trained": 1237823}, "done": false, "episode_reward_mean": 422.0453839578412, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.89923561562016, "outflow_rate_min": 501.18235983296785, "cost1_min": 24.682955161791334, "system_level_velocity_mean": 15.54772949183109, "outflow_rate_mean": 1188.248210718793, "cost1_mean": 186.52311172232285, "cost2_mean": -46.091504408541724, "system_level_velocity_min": 12.317972524265118, "cost2_max": -19.240155363652445, "cost1_max": 216.94401535582165, "outflow_rate_max": 1366.0016075388028, "cost2_min": -62.40765771109825}, "episodes_this_iter": 60, "timesteps_since_restore": 1237823, "episode_reward_min": 49.84971288663626, "time_since_restore": 831.3372921943665, "time_total_s": 831.3372921943665, "timesteps_this_iter": 37975, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590acc0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a4a8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ad68>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1390, "timestamp": 1558376380, "episode_len_mean": 322.12, "training_iteration": 30, "pid": 266, "timesteps_total": 1237823, "policy_reward_mean": {}, "iterations_since_restore": 30, "time_this_iter_s": 27.445388078689575}
{"num_metric_batches_dropped": 0, "episode_reward_max": 467.1327564076449, "date": "2019-05-20_18-20-04", "info": {"grad_time_ms": 9183.808, "update_time_ms": 7.338, "sample_time_ms": 17152.611, "default": {"kl": 0.01806483045220375, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009929361753165722, "vf_explained_var": 0.6709762215614319, "total_loss": 37.40852737426758, "entropy": 1.1570868492126465, "vf_loss": 37.416648864746094, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1274298, "load_time_ms": 6.836, "num_steps_trained": 1274298}, "done": false, "episode_reward_mean": 420.75744534742097, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.89923561562016, "outflow_rate_min": 501.18235983296785, "cost1_min": 24.682955161791334, "system_level_velocity_mean": 15.681072869633049, "outflow_rate_mean": 1185.8291017779054, "cost1_mean": 188.04498738337864, "cost2_mean": -42.92027647230893, "system_level_velocity_min": 12.691307949325394, "cost2_max": -19.240155363652445, "cost1_max": 215.87267456508758, "outflow_rate_max": 1344.5043207837464, "cost2_min": -59.199334142744995}, "episodes_this_iter": 41, "timesteps_since_restore": 1274298, "episode_reward_min": 49.84971288663626, "time_since_restore": 855.2258634567261, "time_total_s": 855.2258634567261, "timesteps_this_iter": 36475, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913128>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913438>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913320>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1431, "timestamp": 1558376404, "episode_len_mean": 322.12, "training_iteration": 31, "pid": 266, "timesteps_total": 1274298, "policy_reward_mean": {}, "iterations_since_restore": 31, "time_this_iter_s": 23.88857126235962}
{"num_metric_batches_dropped": 0, "episode_reward_max": 467.1327564076449, "date": "2019-05-20_18-20-29", "info": {"grad_time_ms": 9172.468, "update_time_ms": 7.411, "sample_time_ms": 17086.831, "default": {"kl": 0.019552841782569885, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009708654135465622, "vf_explained_var": 0.6976009011268616, "total_loss": 38.60708236694336, "entropy": 1.1651220321655273, "vf_loss": 38.61483383178711, "cur_kl_coeff": 0.10000000149011612}, "num_steps_sampled": 1311082, "load_time_ms": 6.725, "num_steps_trained": 1311082}, "done": false, "episode_reward_mean": 427.12326499815424, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.87947542834559, "outflow_rate_min": 967.3098308668077, "cost1_min": 146.9670208786951, "system_level_velocity_mean": 15.86412524481643, "outflow_rate_mean": 1195.9816772582533, "cost1_mean": 192.13480668961046, "cost2_mean": -39.69432117098518, "system_level_velocity_min": 12.100213498067545, "cost2_max": -25.20365919998568, "cost1_max": 214.6106623760228, "outflow_rate_max": 1344.5043207837464, "cost2_min": -58.57051767228114}, "episodes_this_iter": 40, "timesteps_since_restore": 1311082, "episode_reward_min": 353.37375775139, "time_since_restore": 880.1544744968414, "time_total_s": 880.1544744968414, "timesteps_this_iter": 36784, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911780>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59113c8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911898>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1471, "timestamp": 1558376429, "episode_len_mean": 325.0, "training_iteration": 32, "pid": 266, "timesteps_total": 1311082, "policy_reward_mean": {}, "iterations_since_restore": 32, "time_this_iter_s": 24.928611040115356}
{"num_metric_batches_dropped": 0, "episode_reward_max": 462.6347306770701, "date": "2019-05-20_18-20-56", "info": {"grad_time_ms": 9265.527, "update_time_ms": 7.586, "sample_time_ms": 16986.642, "default": {"kl": 0.01793125830590725, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010358357802033424, "vf_explained_var": 0.707474946975708, "total_loss": 46.04157638549805, "entropy": 1.1797924041748047, "vf_loss": 46.05014419555664, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1348092, "load_time_ms": 7.078, "num_steps_trained": 1348092}, "done": false, "episode_reward_mean": 430.49443845441186, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.885071051567618, "outflow_rate_min": 967.3098308668077, "cost1_min": 144.31524405391562, "system_level_velocity_mean": 16.032394109197806, "outflow_rate_mean": 1201.810539040158, "cost1_mean": 194.26574709820596, "cost2_mean": -37.200610141749365, "system_level_velocity_min": 11.714691593453026, "cost2_max": -25.20365919998568, "cost1_max": 214.5266005124991, "outflow_rate_max": 1318.3906520597855, "cost2_min": -50.94013338380536}, "episodes_this_iter": 58, "timesteps_since_restore": 1348092, "episode_reward_min": 353.37375775139, "time_since_restore": 906.9970271587372, "time_total_s": 906.9970271587372, "timesteps_this_iter": 37010, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911a90>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911cf8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59116d8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1529, "timestamp": 1558376456, "episode_len_mean": 325.0, "training_iteration": 33, "pid": 266, "timesteps_total": 1348092, "policy_reward_mean": {}, "iterations_since_restore": 33, "time_this_iter_s": 26.842552661895752}
{"num_metric_batches_dropped": 0, "episode_reward_max": 467.038411865413, "date": "2019-05-20_18-21-21", "info": {"grad_time_ms": 9266.857, "update_time_ms": 7.707, "sample_time_ms": 16806.349, "default": {"kl": 0.019072718918323517, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010311161167919636, "vf_explained_var": 0.7825925946235657, "total_loss": 31.053415298461914, "entropy": 1.1663082838058472, "vf_loss": 31.061819076538086, "cur_kl_coeff": 0.10000000149011612}, "num_steps_sampled": 1384864, "load_time_ms": 6.785, "num_steps_trained": 1384864}, "done": false, "episode_reward_mean": 432.46588098661965, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.885071051567618, "outflow_rate_min": 1006.9155982331478, "cost1_min": 144.31524405391562, "system_level_velocity_mean": 16.079150175180516, "outflow_rate_mean": 1204.6335663834184, "cost1_mean": 194.882065326107, "cost2_mean": -36.60554392490283, "system_level_velocity_min": 11.714691593453026, "cost2_max": -24.893390777355933, "cost1_max": 215.69657775743232, "outflow_rate_max": 1314.1705798653968, "cost2_min": -50.94013338380536}, "episodes_this_iter": 41, "timesteps_since_restore": 1384864, "episode_reward_min": 377.3648710869189, "time_since_restore": 932.0958371162415, "time_total_s": 932.0958371162415, "timesteps_this_iter": 36772, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59134a8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913198>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913a90>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1570, "timestamp": 1558376481, "episode_len_mean": 325.0, "training_iteration": 34, "pid": 266, "timesteps_total": 1384864, "policy_reward_mean": {}, "iterations_since_restore": 34, "time_this_iter_s": 25.098809957504272}
{"num_metric_batches_dropped": 0, "episode_reward_max": 467.038411865413, "date": "2019-05-20_18-21-46", "info": {"grad_time_ms": 9230.117, "update_time_ms": 7.88, "sample_time_ms": 16730.507, "default": {"kl": 0.01754380576312542, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009762986563146114, "vf_explained_var": 0.7742598652839661, "total_loss": 33.963375091552734, "entropy": 1.1658220291137695, "vf_loss": 33.97138214111328, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1421932, "load_time_ms": 6.669, "num_steps_trained": 1421932}, "done": false, "episode_reward_mean": 433.86591963845785, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.885071051567618, "outflow_rate_min": 1006.9155982331478, "cost1_min": 154.75284203876578, "system_level_velocity_mean": 16.041196862975745, "outflow_rate_mean": 1203.8735489484234, "cost1_mean": 194.54277886510963, "cost2_mean": -36.70557331110319, "system_level_velocity_min": 12.516125453358722, "cost2_max": -24.459778073865813, "cost1_max": 215.69657775743232, "outflow_rate_max": 1317.1676845570628, "cost2_min": -50.20784401345023}, "episodes_this_iter": 41, "timesteps_since_restore": 1421932, "episode_reward_min": 376.847773585675, "time_since_restore": 957.1195809841156, "time_total_s": 957.1195809841156, "timesteps_this_iter": 37068, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913f98>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59139b0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1611, "timestamp": 1558376506, "episode_len_mean": 325.0, "training_iteration": 35, "pid": 266, "timesteps_total": 1421932, "policy_reward_mean": {}, "iterations_since_restore": 35, "time_this_iter_s": 25.023743867874146}
{"num_metric_batches_dropped": 0, "episode_reward_max": 467.038411865413, "date": "2019-05-20_18-22-13", "info": {"grad_time_ms": 9305.658, "update_time_ms": 8.196, "sample_time_ms": 16533.836, "default": {"kl": 0.018748853355646133, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009497041814029217, "vf_explained_var": 0.7236227989196777, "total_loss": 44.90380859375, "entropy": 1.1774367094039917, "vf_loss": 44.91143035888672, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1459025, "load_time_ms": 6.442, "num_steps_trained": 1459025}, "done": false, "episode_reward_mean": 436.402139024067, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.893173618882233, "outflow_rate_min": 1018.0523285285605, "cost1_min": 154.75284203876578, "system_level_velocity_mean": 16.138428793760497, "outflow_rate_mean": 1207.833893653724, "cost1_mean": 195.83701917967977, "cost2_mean": -35.748513005643034, "system_level_velocity_min": 12.516125453358722, "cost2_max": -20.848085187554776, "cost1_max": 215.69657775743232, "outflow_rate_max": 1317.1676845570628, "cost2_min": -50.28111402169706}, "episodes_this_iter": 52, "timesteps_since_restore": 1459025, "episode_reward_min": 376.52735242942407, "time_since_restore": 983.8636260032654, "time_total_s": 983.8636260032654, "timesteps_this_iter": 37093, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913f28>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590abe0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913f60>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1663, "timestamp": 1558376533, "episode_len_mean": 325.0, "training_iteration": 36, "pid": 266, "timesteps_total": 1459025, "policy_reward_mean": {}, "iterations_since_restore": 36, "time_this_iter_s": 26.74404501914978}
{"num_metric_batches_dropped": 0, "episode_reward_max": 463.5512550372108, "date": "2019-05-20_18-22-40", "info": {"grad_time_ms": 9409.278, "update_time_ms": 8.511, "sample_time_ms": 16515.351, "default": {"kl": 0.018329421058297157, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009367579594254494, "vf_explained_var": 0.6932549476623535, "total_loss": 41.892757415771484, "entropy": 1.169799566268921, "vf_loss": 41.90029525756836, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1495188, "load_time_ms": 6.153, "num_steps_trained": 1495188}, "done": false, "episode_reward_mean": 433.8240309508185, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.563216299068642, "outflow_rate_min": 460.0173194654063, "cost1_min": 23.186489982039845, "system_level_velocity_mean": 16.25367970621015, "outflow_rate_mean": 1203.7641563448828, "cost1_mean": 195.20162664956806, "cost2_mean": -34.638552937792845, "system_level_velocity_min": 12.720344366434992, "cost2_max": -16.13762103077362, "cost1_max": 214.84940415293843, "outflow_rate_max": 1292.1570513804838, "cost2_min": -50.28111402169706}, "episodes_this_iter": 48, "timesteps_since_restore": 1495188, "episode_reward_min": 52.18799102398064, "time_since_restore": 1011.4686498641968, "time_total_s": 1011.4686498641968, "timesteps_this_iter": 36163, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913080>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913940>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913438>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1711, "timestamp": 1558376560, "episode_len_mean": 322.1, "training_iteration": 37, "pid": 266, "timesteps_total": 1495188, "policy_reward_mean": {}, "iterations_since_restore": 37, "time_this_iter_s": 27.605023860931396}
{"num_metric_batches_dropped": 0, "episode_reward_max": 464.0180494898661, "date": "2019-05-20_18-23-05", "info": {"grad_time_ms": 9366.025, "update_time_ms": 8.555, "sample_time_ms": 16269.504, "default": {"kl": 0.01987587660551071, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010555760934948921, "vf_explained_var": 0.7335567474365234, "total_loss": 40.16516876220703, "entropy": 1.1785577535629272, "vf_loss": 40.17374038696289, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1532148, "load_time_ms": 6.269, "num_steps_trained": 1532148}, "done": false, "episode_reward_mean": 430.0154604539009, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.563216299068642, "outflow_rate_min": 460.0173194654063, "cost1_min": 23.186489982039845, "system_level_velocity_mean": 16.10591326747501, "outflow_rate_mean": 1192.6069175397852, "cost1_mean": 193.61651090559528, "cost2_mean": -34.29803788588397, "system_level_velocity_min": 12.773984041410731, "cost2_max": -16.13762103077362, "cost1_max": 214.01011233958906, "outflow_rate_max": 1282.1136427309223, "cost2_min": -50.20265678991643}, "episodes_this_iter": 41, "timesteps_since_restore": 1532148, "episode_reward_min": 52.18799102398064, "time_since_restore": 1035.6611366271973, "time_total_s": 1035.6611366271973, "timesteps_this_iter": 36960, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59136a0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913978>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913c88>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1752, "timestamp": 1558376585, "episode_len_mean": 322.1, "training_iteration": 38, "pid": 266, "timesteps_total": 1532148, "policy_reward_mean": {}, "iterations_since_restore": 38, "time_this_iter_s": 24.19248676300049}
{"num_metric_batches_dropped": 0, "episode_reward_max": 468.54524676688976, "date": "2019-05-20_18-23-31", "info": {"grad_time_ms": 9415.381, "update_time_ms": 8.51, "sample_time_ms": 16316.059, "default": {"kl": 0.02074558474123478, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010987953282892704, "vf_explained_var": 0.708154022693634, "total_loss": 47.78089141845703, "entropy": 1.1743839979171753, "vf_loss": 47.78980255126953, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1569202, "load_time_ms": 6.292, "num_steps_trained": 1569202}, "done": false, "episode_reward_mean": 431.4274639576741, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.819223493568625, "outflow_rate_min": 1017.5455166217433, "cost1_min": 145.86108662449558, "system_level_velocity_mean": 15.956328074182313, "outflow_rate_mean": 1191.0376155878405, "cost1_mean": 193.9171728973952, "cost2_mean": -33.91524954560527, "system_level_velocity_min": 11.907519381915083, "cost2_max": -22.596910606487278, "cost1_max": 214.83826151522328, "outflow_rate_max": 1282.1136427309223, "cost2_min": -48.232462009747614}, "episodes_this_iter": 51, "timesteps_since_restore": 1569202, "episode_reward_min": 376.94204642193546, "time_since_restore": 1062.1509079933167, "time_total_s": 1062.1509079933167, "timesteps_this_iter": 37054, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913860>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913780>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913898>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1803, "timestamp": 1558376611, "episode_len_mean": 325.0, "training_iteration": 39, "pid": 266, "timesteps_total": 1569202, "policy_reward_mean": {}, "iterations_since_restore": 39, "time_this_iter_s": 26.489771366119385}
{"num_metric_batches_dropped": 0, "episode_reward_max": 468.54524676688976, "date": "2019-05-20_18-23-59", "info": {"grad_time_ms": 9528.32, "update_time_ms": 8.591, "sample_time_ms": 16243.808, "default": {"kl": 0.016660340130329132, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010693513788282871, "vf_explained_var": 0.753767728805542, "total_loss": 40.55885696411133, "entropy": 1.166034460067749, "vf_loss": 40.56705093383789, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1606159, "load_time_ms": 6.21, "num_steps_trained": 1606159}, "done": false, "episode_reward_mean": 422.66569704789583, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.571799635131246, "outflow_rate_min": 474.89702013611384, "cost1_min": 22.94623066548885, "system_level_velocity_mean": 15.914045514316486, "outflow_rate_mean": 1171.193065147114, "cost1_mean": 189.33296515473873, "cost2_mean": -33.97446769903097, "system_level_velocity_min": 11.907519381915083, "cost2_max": -12.430039983668246, "cost1_max": 216.54400233205274, "outflow_rate_max": 1281.2791342708213, "cost2_min": -48.232462009747614}, "episodes_this_iter": 49, "timesteps_since_restore": 1606159, "episode_reward_min": 49.95633203552926, "time_since_restore": 1090.008686542511, "time_total_s": 1090.008686542511, "timesteps_this_iter": 36957, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913e80>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913160>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59132e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1852, "timestamp": 1558376639, "episode_len_mean": 319.2, "training_iteration": 40, "pid": 266, "timesteps_total": 1606159, "policy_reward_mean": {}, "iterations_since_restore": 40, "time_this_iter_s": 27.857778549194336}
{"num_metric_batches_dropped": 0, "episode_reward_max": 465.0126792328797, "date": "2019-05-20_18-24-23", "info": {"grad_time_ms": 9530.78, "update_time_ms": 8.626, "sample_time_ms": 16251.84, "default": {"kl": 0.018223218619823456, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011389118619263172, "vf_explained_var": 0.7170305848121643, "total_loss": 42.56199645996094, "entropy": 1.1454404592514038, "vf_loss": 42.570648193359375, "cur_kl_coeff": 0.1499999761581421}, "num_steps_sampled": 1642147, "load_time_ms": 6.046, "num_steps_trained": 1642147}, "done": false, "episode_reward_mean": 425.7436958911899, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.571799635131246, "outflow_rate_min": 474.89702013611384, "cost1_min": 22.94623066548885, "system_level_velocity_mean": 16.1819677355922, "outflow_rate_mean": 1179.0034904539905, "cost1_mean": 192.23728899931982, "cost2_mean": -32.932612958070806, "system_level_velocity_min": 12.295084230828486, "cost2_max": -12.430039983668246, "cost1_max": 219.19210124745607, "outflow_rate_max": 1317.840706339913, "cost2_min": -46.108211116723055}, "episodes_this_iter": 42, "timesteps_since_restore": 1642147, "episode_reward_min": 49.95633203552926, "time_since_restore": 1113.9954817295074, "time_total_s": 1113.9954817295074, "timesteps_this_iter": 35988, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59138d0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59136a0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913d68>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1894, "timestamp": 1558376663, "episode_len_mean": 319.2, "training_iteration": 41, "pid": 266, "timesteps_total": 1642147, "policy_reward_mean": {}, "iterations_since_restore": 41, "time_this_iter_s": 23.98679518699646}
{"num_metric_batches_dropped": 0, "episode_reward_max": 469.1440706254033, "date": "2019-05-20_18-24-47", "info": {"grad_time_ms": 9509.562, "update_time_ms": 8.795, "sample_time_ms": 16208.734, "default": {"kl": 0.018248017877340317, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011861877515912056, "vf_explained_var": 0.7209915518760681, "total_loss": 40.067413330078125, "entropy": 1.174879550933838, "vf_loss": 40.0765380859375, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1679041, "load_time_ms": 6.528, "num_steps_trained": 1679041}, "done": false, "episode_reward_mean": 434.41556037842116, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.379447187681397, "outflow_rate_min": 989.8412720156556, "cost1_min": 149.60559749318273, "system_level_velocity_mean": 16.209613851814574, "outflow_rate_mean": 1198.3412439568046, "cost1_mean": 196.49260569770715, "cost2_mean": -33.14562266582492, "system_level_velocity_min": 12.295084230828486, "cost2_max": -20.844454877730605, "cost1_max": 220.9697591542714, "outflow_rate_max": 1318.2834594927162, "cost2_min": -46.108211116723055}, "episodes_this_iter": 40, "timesteps_since_restore": 1679041, "episode_reward_min": 365.12206995221084, "time_since_restore": 1138.2910029888153, "time_total_s": 1138.2910029888153, "timesteps_this_iter": 36894, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911c50>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911e48>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1934, "timestamp": 1558376687, "episode_len_mean": 325.0, "training_iteration": 42, "pid": 266, "timesteps_total": 1679041, "policy_reward_mean": {}, "iterations_since_restore": 42, "time_this_iter_s": 24.29552125930786}
{"num_metric_batches_dropped": 0, "episode_reward_max": 469.1440706254033, "date": "2019-05-20_18-25-13", "info": {"grad_time_ms": 9397.153, "update_time_ms": 8.704, "sample_time_ms": 16192.327, "default": {"kl": 0.016593828797340393, "cur_lr": 0.0005000000237487257, "policy_loss": -0.01105322502553463, "vf_explained_var": 0.7602267861366272, "total_loss": 46.68012237548828, "entropy": 1.1607139110565186, "vf_loss": 46.688682556152344, "cur_kl_coeff": 0.1499999761581421}, "num_steps_sampled": 1715488, "load_time_ms": 6.223, "num_steps_trained": 1715488}, "done": false, "episode_reward_mean": 433.4953503105713, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.379447187681397, "outflow_rate_min": 1011.9735320076999, "cost1_min": 154.09916175518714, "system_level_velocity_mean": 16.13403004677994, "outflow_rate_mean": 1198.7751211239934, "cost1_mean": 195.85324114927448, "cost2_mean": -33.47481187983875, "system_level_velocity_min": 12.632409295162176, "cost2_max": -20.844454877730605, "cost1_max": 220.9697591542714, "outflow_rate_max": 1318.2834594927162, "cost2_min": -47.65742870629104}, "episodes_this_iter": 58, "timesteps_since_restore": 1715488, "episode_reward_min": 378.8869952109082, "time_since_restore": 1163.8516767024994, "time_total_s": 1163.8516767024994, "timesteps_this_iter": 36447, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a518>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902e80>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59022e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 1992, "timestamp": 1558376713, "episode_len_mean": 325.0, "training_iteration": 43, "pid": 266, "timesteps_total": 1715488, "policy_reward_mean": {}, "iterations_since_restore": 43, "time_this_iter_s": 25.560673713684082}
{"num_metric_batches_dropped": 0, "episode_reward_max": 476.46125086360655, "date": "2019-05-20_18-25-39", "info": {"grad_time_ms": 9399.549, "update_time_ms": 8.555, "sample_time_ms": 16284.014, "default": {"kl": 0.01884150318801403, "cur_lr": 0.0005000000237487257, "policy_loss": -0.00806290004402399, "vf_explained_var": 0.7343387603759766, "total_loss": 43.03997802734375, "entropy": 1.143329381942749, "vf_loss": 43.04521560668945, "cur_kl_coeff": 0.1499999761581421}, "num_steps_sampled": 1751458, "load_time_ms": 6.361, "num_steps_trained": 1751458}, "done": false, "episode_reward_mean": 435.6760291162955, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.378514077811992, "outflow_rate_min": 1011.9735320076999, "cost1_min": 145.09586053379877, "system_level_velocity_mean": 16.2620638965806, "outflow_rate_mean": 1204.8386598175043, "cost1_mean": 196.7334252982092, "cost2_mean": -33.14449600038001, "system_level_velocity_min": 12.632409295162176, "cost2_max": -19.931371528381565, "cost1_max": 220.07756437734264, "outflow_rate_max": 1301.043252194733, "cost2_min": -47.70512211019627}, "episodes_this_iter": 41, "timesteps_since_restore": 1751458, "episode_reward_min": 303.7444263368786, "time_since_restore": 1189.8888013362885, "time_total_s": 1189.8888013362885, "timesteps_this_iter": 35970, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59139b0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913b38>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59136a0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2033, "timestamp": 1558376739, "episode_len_mean": 323.9, "training_iteration": 44, "pid": 266, "timesteps_total": 1751458, "policy_reward_mean": {}, "iterations_since_restore": 44, "time_this_iter_s": 26.037124633789062}
{"num_metric_batches_dropped": 0, "episode_reward_max": 476.46125086360655, "date": "2019-05-20_18-26-05", "info": {"grad_time_ms": 9493.518, "update_time_ms": 8.499, "sample_time_ms": 16259.155, "default": {"kl": 0.020419679582118988, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009786000475287437, "vf_explained_var": 0.6719657182693481, "total_loss": 54.473106384277344, "entropy": 1.1695951223373413, "vf_loss": 54.479827880859375, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1787751, "load_time_ms": 6.425, "num_steps_trained": 1787751}, "done": false, "episode_reward_mean": 439.471539760483, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.43076573533222, "outflow_rate_min": 1006.6379575892856, "cost1_min": 145.09586053379877, "system_level_velocity_mean": 16.412266549449875, "outflow_rate_mean": 1216.905345726281, "cost1_mean": 198.3336885588864, "cost2_mean": -32.70823407885097, "system_level_velocity_min": 12.562098550210433, "cost2_max": -19.931371528381565, "cost1_max": 221.43725413499004, "outflow_rate_max": 1314.74096873084, "cost2_min": -47.70512211019627}, "episodes_this_iter": 42, "timesteps_since_restore": 1787751, "episode_reward_min": 303.7444263368786, "time_since_restore": 1215.6030688285828, "time_total_s": 1215.6030688285828, "timesteps_this_iter": 36293, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911358>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911908>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59114e0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2075, "timestamp": 1558376765, "episode_len_mean": 323.72, "training_iteration": 45, "pid": 266, "timesteps_total": 1787751, "policy_reward_mean": {}, "iterations_since_restore": 45, "time_this_iter_s": 25.71426749229431}
{"num_metric_batches_dropped": 0, "episode_reward_max": 476.66389353001756, "date": "2019-05-20_18-26-32", "info": {"grad_time_ms": 9339.968, "update_time_ms": 8.327, "sample_time_ms": 16436.863, "default": {"kl": 0.015580966137349606, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010252558626234531, "vf_explained_var": 0.7119322419166565, "total_loss": 57.52946472167969, "entropy": 1.1671626567840576, "vf_loss": 57.53620910644531, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 1824745, "load_time_ms": 6.599, "num_steps_trained": 1824745}, "done": false, "episode_reward_mean": 435.7238855025586, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.59923726637059, "outflow_rate_min": 466.74083028559994, "cost1_min": 23.151125405494444, "system_level_velocity_mean": 16.267646441281997, "outflow_rate_mean": 1206.7783640664645, "cost1_mean": 195.38507024102285, "cost2_mean": -33.55201540718485, "system_level_velocity_min": 12.562098550210433, "cost2_max": -15.983048627944914, "cost1_max": 221.43725413499004, "outflow_rate_max": 1317.2402735879014, "cost2_min": -49.98848417171472}, "episodes_this_iter": 57, "timesteps_since_restore": 1824745, "episode_reward_min": 50.851942682721464, "time_since_restore": 1242.596190214157, "time_total_s": 1242.596190214157, "timesteps_this_iter": 36994, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913630>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59134a8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59139e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2132, "timestamp": 1558376792, "episode_len_mean": 321.92, "training_iteration": 46, "pid": 266, "timesteps_total": 1824745, "policy_reward_mean": {}, "iterations_since_restore": 46, "time_this_iter_s": 26.99312138557434}
{"num_metric_batches_dropped": 0, "episode_reward_max": 476.66389353001756, "date": "2019-05-20_18-26-57", "info": {"grad_time_ms": 9216.989, "update_time_ms": 8.055, "sample_time_ms": 16308.712, "default": {"kl": 0.015353024005889893, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010629664175212383, "vf_explained_var": 0.7192829847335815, "total_loss": 46.14967727661133, "entropy": 1.1684480905532837, "vf_loss": 46.15685272216797, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 1860854, "load_time_ms": 6.65, "num_steps_trained": 1860854}, "done": false, "episode_reward_mean": 430.71246094187467, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.59923726637059, "outflow_rate_min": 450.30776755767187, "cost1_min": 18.076737813914754, "system_level_velocity_mean": 16.363348640798517, "outflow_rate_mean": 1199.4254612922525, "cost1_mean": 193.89774793498356, "cost2_mean": -33.93098905067106, "system_level_velocity_min": 12.693241988579965, "cost2_max": -15.693928503241597, "cost1_max": 221.0818855478191, "outflow_rate_max": 1326.2826711154535, "cost2_min": -57.47767127164197}, "episodes_this_iter": 43, "timesteps_since_restore": 1860854, "episode_reward_min": 40.367350242855835, "time_since_restore": 1267.6903533935547, "time_total_s": 1267.6903533935547, "timesteps_this_iter": 36109, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913b70>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913208>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913a90>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2175, "timestamp": 1558376817, "episode_len_mean": 318.02, "training_iteration": 47, "pid": 266, "timesteps_total": 1860854, "policy_reward_mean": {}, "iterations_since_restore": 47, "time_this_iter_s": 25.094163179397583}
{"num_metric_batches_dropped": 0, "episode_reward_max": 476.66389353001756, "date": "2019-05-20_18-27-23", "info": {"grad_time_ms": 9214.064, "update_time_ms": 8.005, "sample_time_ms": 16448.224, "default": {"kl": 0.016376951709389687, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010563491843640804, "vf_explained_var": 0.7319790720939636, "total_loss": 47.37718963623047, "entropy": 1.1854383945465088, "vf_loss": 47.38407516479492, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 1897747, "load_time_ms": 6.362, "num_steps_trained": 1897747}, "done": false, "episode_reward_mean": 431.76165269518856, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.872002580761375, "outflow_rate_min": 450.30776755767187, "cost1_min": 18.076737813914754, "system_level_velocity_mean": 16.344107805894694, "outflow_rate_mean": 1202.0574455920507, "cost1_mean": 193.66115012626094, "cost2_mean": -33.846497352655504, "system_level_velocity_min": 12.184949408940534, "cost2_max": -15.155507217476705, "cost1_max": 221.5656364260179, "outflow_rate_max": 1326.2826711154535, "cost2_min": -57.47767127164197}, "episodes_this_iter": 44, "timesteps_since_restore": 1897747, "episode_reward_min": 40.367350242855835, "time_since_restore": 1293.2184677124023, "time_total_s": 1293.2184677124023, "timesteps_this_iter": 36893, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911c50>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911a90>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911080>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2219, "timestamp": 1558376843, "episode_len_mean": 318.02, "training_iteration": 48, "pid": 266, "timesteps_total": 1897747, "policy_reward_mean": {}, "iterations_since_restore": 48, "time_this_iter_s": 25.528114318847656}
{"num_metric_batches_dropped": 0, "episode_reward_max": 475.1962301309814, "date": "2019-05-20_18-27-48", "info": {"grad_time_ms": 9083.738, "update_time_ms": 7.961, "sample_time_ms": 16496.516, "default": {"kl": 0.016564995050430298, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011091324500739574, "vf_explained_var": 0.7293494343757629, "total_loss": 49.60407638549805, "entropy": 1.1946170330047607, "vf_loss": 49.61144256591797, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 1935064, "load_time_ms": 6.276, "num_steps_trained": 1935064}, "done": false, "episode_reward_mean": 435.3545735276707, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.872002580761375, "outflow_rate_min": 507.0466195759959, "cost1_min": 23.284902285811686, "system_level_velocity_mean": 16.074307246537696, "outflow_rate_mean": 1199.2105984685288, "cost1_mean": 193.42247820272513, "cost2_mean": -33.51948488969648, "system_level_velocity_min": 12.184949408940534, "cost2_max": -15.155507217476705, "cost1_max": 222.00783657608372, "outflow_rate_max": 1326.2162300199798, "cost2_min": -50.190774361721}, "episodes_this_iter": 50, "timesteps_since_restore": 1935064, "episode_reward_min": 48.168692826271496, "time_since_restore": 1318.8957102298737, "time_total_s": 1318.8957102298737, "timesteps_this_iter": 37317, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913048>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913630>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59130f0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2269, "timestamp": 1558376868, "episode_len_mean": 322.1, "training_iteration": 49, "pid": 266, "timesteps_total": 1935064, "policy_reward_mean": {}, "iterations_since_restore": 49, "time_this_iter_s": 25.677242517471313}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.9946197343234, "date": "2019-05-20_18-28-15", "info": {"grad_time_ms": 9060.256, "update_time_ms": 7.926, "sample_time_ms": 16353.525, "default": {"kl": 0.0158019308000803, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010570536367595196, "vf_explained_var": 0.768614649772644, "total_loss": 39.58586883544922, "entropy": 1.1814329624176025, "vf_loss": 39.5928840637207, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 1971273, "load_time_ms": 6.267, "num_steps_trained": 1971273}, "done": false, "episode_reward_mean": 437.9576828777757, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.473526559785036, "outflow_rate_min": 434.44599691538906, "cost1_min": 18.046555470879756, "system_level_velocity_mean": 16.169964224158186, "outflow_rate_mean": 1200.422756121879, "cost1_mean": 194.82866547873996, "cost2_mean": -32.35025461622859, "system_level_velocity_min": 12.610695347065608, "cost2_max": -15.89701845805895, "cost1_max": 222.00783657608372, "outflow_rate_max": 1326.2162300199798, "cost2_min": -49.21803803340414}, "episodes_this_iter": 48, "timesteps_since_restore": 1971273, "episode_reward_min": 40.822693451829714, "time_since_restore": 1345.0792965888977, "time_total_s": 1345.0792965888977, "timesteps_this_iter": 36209, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911e80>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a390>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a630>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2317, "timestamp": 1558376895, "episode_len_mean": 322.02, "training_iteration": 50, "pid": 266, "timesteps_total": 1971273, "policy_reward_mean": {}, "iterations_since_restore": 50, "time_this_iter_s": 26.183586359024048}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.9946197343234, "date": "2019-05-20_18-28-39", "info": {"grad_time_ms": 9078.568, "update_time_ms": 7.905, "sample_time_ms": 16427.725, "default": {"kl": 0.015033692121505737, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010120624676346779, "vf_explained_var": 0.7501897811889648, "total_loss": 42.83429718017578, "entropy": 1.1831434965133667, "vf_loss": 42.841033935546875, "cur_kl_coeff": 0.2250000387430191}, "num_steps_sampled": 2008009, "load_time_ms": 6.453, "num_steps_trained": 2008009}, "done": false, "episode_reward_mean": 440.52610658300034, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.549317737845744, "outflow_rate_min": 434.44599691538906, "cost1_min": 18.046555470879756, "system_level_velocity_mean": 16.285962161355734, "outflow_rate_mean": 1205.0714038891604, "cost1_mean": 196.17958151984746, "cost2_mean": -31.65101144680083, "system_level_velocity_min": 12.08464663017552, "cost2_max": -15.89701845805895, "cost1_max": 222.78047252611117, "outflow_rate_max": 1308.6222164384517, "cost2_min": -52.09407172117347}, "episodes_this_iter": 41, "timesteps_since_restore": 2008009, "episode_reward_min": 40.822693451829714, "time_since_restore": 1369.9975311756134, "time_total_s": 1369.9975311756134, "timesteps_this_iter": 36736, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e748>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e2b0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ec50>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2358, "timestamp": 1558376919, "episode_len_mean": 321.82, "training_iteration": 51, "pid": 266, "timesteps_total": 2008009, "policy_reward_mean": {}, "iterations_since_restore": 51, "time_this_iter_s": 24.9182345867157}
{"num_metric_batches_dropped": 0, "episode_reward_max": 476.0230236079585, "date": "2019-05-20_18-29-06", "info": {"grad_time_ms": 9175.331, "update_time_ms": 7.646, "sample_time_ms": 16535.216, "default": {"kl": 0.016580281779170036, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011110872030258179, "vf_explained_var": 0.7541239261627197, "total_loss": 46.928409576416016, "entropy": 1.191161870956421, "vf_loss": 46.935787200927734, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2044990, "load_time_ms": 5.892, "num_steps_trained": 2044990}, "done": false, "episode_reward_mean": 444.7763621170823, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.549317737845744, "outflow_rate_min": 1007.1697531439215, "cost1_min": 147.5347600340058, "system_level_velocity_mean": 16.363262059096392, "outflow_rate_mean": 1214.3477030776041, "cost1_mean": 198.88653185983748, "cost2_mean": -31.5305696723067, "system_level_velocity_min": 12.08464663017552, "cost2_max": -19.220464621298422, "cost1_max": 222.78047252611117, "outflow_rate_max": 1312.1426048431538, "cost2_min": -52.09407172117347}, "episodes_this_iter": 50, "timesteps_since_restore": 2044990, "episode_reward_min": 375.4933792129336, "time_since_restore": 1396.335175037384, "time_total_s": 1396.335175037384, "timesteps_this_iter": 36981, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efc18>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef9e8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efdd8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2408, "timestamp": 1558376946, "episode_len_mean": 324.6, "training_iteration": 52, "pid": 266, "timesteps_total": 2044990, "policy_reward_mean": {}, "iterations_since_restore": 52, "time_this_iter_s": 26.33764386177063}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.96011447175033, "date": "2019-05-20_18-29-32", "info": {"grad_time_ms": 9293.316, "update_time_ms": 7.59, "sample_time_ms": 16486.729, "default": {"kl": 0.018147645518183708, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012431048788130283, "vf_explained_var": 0.7787590026855469, "total_loss": 43.333251953125, "entropy": 1.1955859661102295, "vf_loss": 43.34160232543945, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2082121, "load_time_ms": 6.005, "num_steps_trained": 2082121}, "done": false, "episode_reward_mean": 441.25754783928454, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.29715971866706, "outflow_rate_min": 1046.0877424529206, "cost1_min": 156.26112964473072, "system_level_velocity_mean": 16.175703781698726, "outflow_rate_mean": 1207.109269212056, "cost1_mean": 196.8690939708392, "cost2_mean": -32.59073330000893, "system_level_velocity_min": 12.818857392187391, "cost2_max": -19.291562448823345, "cost1_max": 220.43657911207643, "outflow_rate_max": 1312.1426048431538, "cost2_min": -53.74746463229492}, "episodes_this_iter": 48, "timesteps_since_restore": 2082121, "episode_reward_min": 385.30511879508646, "time_since_restore": 1422.604783296585, "time_total_s": 1422.604783296585, "timesteps_this_iter": 37131, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913978>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913cc0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913a90>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2456, "timestamp": 1558376972, "episode_len_mean": 324.8, "training_iteration": 53, "pid": 266, "timesteps_total": 2082121, "policy_reward_mean": {}, "iterations_since_restore": 53, "time_this_iter_s": 26.26960825920105}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.96011447175033, "date": "2019-05-20_18-29-58", "info": {"grad_time_ms": 9361.369, "update_time_ms": 7.892, "sample_time_ms": 16401.144, "default": {"kl": 0.017274191603064537, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010926284827291965, "vf_explained_var": 0.8043704032897949, "total_loss": 35.22319412231445, "entropy": 1.2076847553253174, "vf_loss": 35.23023223876953, "cur_kl_coeff": 0.2250000387430191}, "num_steps_sampled": 2118909, "load_time_ms": 5.917, "num_steps_trained": 2118909}, "done": false, "episode_reward_mean": 442.140093504009, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.21780314976421, "outflow_rate_min": 966.343636363636, "cost1_min": 147.6644659209427, "system_level_velocity_mean": 16.167263745479556, "outflow_rate_mean": 1205.5445339605355, "cost1_mean": 197.0239561663833, "cost2_mean": -32.458059057039215, "system_level_velocity_min": 12.002905105429054, "cost2_max": -19.291562448823345, "cost1_max": 219.21553303443358, "outflow_rate_max": 1311.2204751791096, "cost2_min": -56.17335080350999}, "episodes_this_iter": 41, "timesteps_since_restore": 2118909, "episode_reward_min": 363.6422084663327, "time_since_restore": 1448.4712266921997, "time_total_s": 1448.4712266921997, "timesteps_this_iter": 36788, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59021d0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902438>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902e10>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2497, "timestamp": 1558376998, "episode_len_mean": 325.0, "training_iteration": 54, "pid": 266, "timesteps_total": 2118909, "policy_reward_mean": {}, "iterations_since_restore": 54, "time_this_iter_s": 25.866443395614624}
{"num_metric_batches_dropped": 0, "episode_reward_max": 472.65526984120896, "date": "2019-05-20_18-30-24", "info": {"grad_time_ms": 9390.223, "update_time_ms": 8.056, "sample_time_ms": 16369.307, "default": {"kl": 0.016108611598610878, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009998941794037819, "vf_explained_var": 0.7723583579063416, "total_loss": 42.12853240966797, "entropy": 1.211472511291504, "vf_loss": 42.13490676879883, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2155787, "load_time_ms": 6.313, "num_steps_trained": 2155787}, "done": false, "episode_reward_mean": 442.76400999167925, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.13652970230007, "outflow_rate_min": 966.343636363636, "cost1_min": 147.6644659209427, "system_level_velocity_mean": 16.102285787383256, "outflow_rate_mean": 1203.4873213097956, "cost1_mean": 196.51044807084253, "cost2_mean": -31.41602044857651, "system_level_velocity_min": 12.002905105429054, "cost2_max": -19.152514015145837, "cost1_max": 218.45451434571322, "outflow_rate_max": 1311.2204751791096, "cost2_min": -56.17335080350999}, "episodes_this_iter": 43, "timesteps_since_restore": 2155787, "episode_reward_min": 363.6422084663327, "time_since_restore": 1474.1627728939056, "time_total_s": 1474.1627728939056, "timesteps_this_iter": 36878, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef828>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef940>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efa90>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2540, "timestamp": 1558377024, "episode_len_mean": 325.0, "training_iteration": 55, "pid": 266, "timesteps_total": 2155787, "policy_reward_mean": {}, "iterations_since_restore": 55, "time_this_iter_s": 25.691546201705933}
{"num_metric_batches_dropped": 0, "episode_reward_max": 477.8295615562796, "date": "2019-05-20_18-30-53", "info": {"grad_time_ms": 9536.536, "update_time_ms": 8.106, "sample_time_ms": 16396.988, "default": {"kl": 0.016211172565817833, "cur_lr": 0.0005000000237487257, "policy_loss": -0.00994917843490839, "vf_explained_var": 0.7892295718193054, "total_loss": 47.177486419677734, "entropy": 1.2202718257904053, "vf_loss": 47.18378829956055, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2192298, "load_time_ms": 6.449, "num_steps_trained": 2192298}, "done": false, "episode_reward_mean": 442.3480639035419, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.16028132750458, "outflow_rate_min": 472.1787989315163, "cost1_min": 17.92081732309214, "system_level_velocity_mean": 16.295353834147555, "outflow_rate_mean": 1202.832464153449, "cost1_mean": 196.74794312510593, "cost2_mean": -29.80514399508071, "system_level_velocity_min": 12.066136343434449, "cost2_max": -13.297114492845584, "cost1_max": 219.08231452101893, "outflow_rate_max": 1296.0882376299137, "cost2_min": -53.40496233721592}, "episodes_this_iter": 57, "timesteps_since_restore": 2192298, "episode_reward_min": 39.85658530158062, "time_since_restore": 1502.8826191425323, "time_total_s": 1502.8826191425323, "timesteps_this_iter": 36511, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59136a0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913be0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59130b8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2597, "timestamp": 1558377053, "episode_len_mean": 322.02, "training_iteration": 56, "pid": 266, "timesteps_total": 2192298, "policy_reward_mean": {}, "iterations_since_restore": 56, "time_this_iter_s": 28.71984624862671}
{"num_metric_batches_dropped": 0, "episode_reward_max": 477.8295615562796, "date": "2019-05-20_18-31-17", "info": {"grad_time_ms": 9564.042, "update_time_ms": 8.169, "sample_time_ms": 16271.857, "default": {"kl": 0.01588580757379532, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010240891017019749, "vf_explained_var": 0.757621169090271, "total_loss": 46.505470275878906, "entropy": 1.219618797302246, "vf_loss": 46.51213836669922, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2228443, "load_time_ms": 6.327, "num_steps_trained": 2228443}, "done": false, "episode_reward_mean": 444.2887647334501, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.179852524166307, "outflow_rate_min": 472.1787989315163, "cost1_min": 17.92081732309214, "system_level_velocity_mean": 16.434328082585452, "outflow_rate_mean": 1205.6147631469032, "cost1_mean": 198.32650810443556, "cost2_mean": -29.375615754900274, "system_level_velocity_min": 12.066136343434449, "cost2_max": -13.297114492845584, "cost1_max": 219.63873437195474, "outflow_rate_max": 1296.0882376299137, "cost2_min": -53.40496233721592}, "episodes_this_iter": 41, "timesteps_since_restore": 2228443, "episode_reward_min": 39.85658530158062, "time_since_restore": 1526.9927070140839, "time_total_s": 1526.9927070140839, "timesteps_this_iter": 36145, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59023c8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902780>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2638, "timestamp": 1558377077, "episode_len_mean": 322.02, "training_iteration": 57, "pid": 266, "timesteps_total": 2228443, "policy_reward_mean": {}, "iterations_since_restore": 57, "time_this_iter_s": 24.110087871551514}
{"num_metric_batches_dropped": 0, "episode_reward_max": 477.75806162541556, "date": "2019-05-20_18-31-43", "info": {"grad_time_ms": 9667.437, "update_time_ms": 8.186, "sample_time_ms": 16183.28, "default": {"kl": 0.01493076141923666, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009641364216804504, "vf_explained_var": 0.7823293805122375, "total_loss": 43.16618347167969, "entropy": 1.239298701286316, "vf_loss": 43.17247009277344, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2265496, "load_time_ms": 6.384, "num_steps_trained": 2265496}, "done": false, "episode_reward_mean": 448.0819219678313, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.179852524166307, "outflow_rate_min": 994.6092576827241, "cost1_min": 155.0015966336514, "system_level_velocity_mean": 16.439454640204485, "outflow_rate_mean": 1211.3934378924737, "cost1_mean": 200.45591939188415, "cost2_mean": -28.814527484568707, "system_level_velocity_min": 12.802840263893701, "cost2_max": -17.682377222532143, "cost1_max": 219.63873437195474, "outflow_rate_max": 1296.0882376299137, "cost2_min": -41.458094573079265}, "episodes_this_iter": 43, "timesteps_since_restore": 2265496, "episode_reward_min": 373.1667019275001, "time_since_restore": 1552.6764357089996, "time_total_s": 1552.6764357089996, "timesteps_this_iter": 37053, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a518>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a780>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aba8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2681, "timestamp": 1558377103, "episode_len_mean": 325.0, "training_iteration": 58, "pid": 266, "timesteps_total": 2265496, "policy_reward_mean": {}, "iterations_since_restore": 58, "time_this_iter_s": 25.68372869491577}
{"num_metric_batches_dropped": 0, "episode_reward_max": 475.5050141343937, "date": "2019-05-20_18-32-09", "info": {"grad_time_ms": 9780.816, "update_time_ms": 8.298, "sample_time_ms": 16128.836, "default": {"kl": 0.015428809449076653, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010470185428857803, "vf_explained_var": 0.775996208190918, "total_loss": 48.25136184692383, "entropy": 1.2219395637512207, "vf_loss": 48.258358001708984, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2302119, "load_time_ms": 6.492, "num_steps_trained": 2302119}, "done": false, "episode_reward_mean": 444.13188578304994, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.96157666279214, "outflow_rate_min": 1026.356298222191, "cost1_min": 157.75075419623522, "system_level_velocity_mean": 16.113673927618954, "outflow_rate_mean": 1200.9749967149921, "cost1_mean": 196.82271006257182, "cost2_mean": -29.48471538072569, "system_level_velocity_min": 12.778386240765707, "cost2_max": -18.013530261463043, "cost1_max": 217.3430357592117, "outflow_rate_max": 1290.139582029783, "cost2_min": -38.13883068327404}, "episodes_this_iter": 55, "timesteps_since_restore": 2302119, "episode_reward_min": 385.8872852871163, "time_since_restore": 1578.9291820526123, "time_total_s": 1578.9291820526123, "timesteps_this_iter": 36623, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913160>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913940>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913da0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2736, "timestamp": 1558377129, "episode_len_mean": 325.0, "training_iteration": 59, "pid": 266, "timesteps_total": 2302119, "policy_reward_mean": {}, "iterations_since_restore": 59, "time_this_iter_s": 26.25274634361267}
{"num_metric_batches_dropped": 0, "episode_reward_max": 474.1702915848218, "date": "2019-05-20_18-32-33", "info": {"grad_time_ms": 9642.075, "update_time_ms": 8.19, "sample_time_ms": 16096.088, "default": {"kl": 0.018399322405457497, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012653457932174206, "vf_explained_var": 0.8017038702964783, "total_loss": 38.59284591674805, "entropy": 1.2155531644821167, "vf_loss": 38.601356506347656, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2338502, "load_time_ms": 6.443, "num_steps_trained": 2338502}, "done": false, "episode_reward_mean": 443.90265788855993, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.90434804915122, "outflow_rate_min": 1026.356298222191, "cost1_min": 157.75075419623522, "system_level_velocity_mean": 16.171968990140346, "outflow_rate_mean": 1203.8041412951645, "cost1_mean": 197.36808142608766, "cost2_mean": -29.254664368560032, "system_level_velocity_min": 12.778386240765707, "cost2_max": -18.806783336946104, "cost1_max": 217.69677700111626, "outflow_rate_max": 1290.139582029783, "cost2_min": -42.33228878725061}, "episodes_this_iter": 42, "timesteps_since_restore": 2338502, "episode_reward_min": 387.2812351802838, "time_since_restore": 1603.4037578105927, "time_total_s": 1603.4037578105927, "timesteps_this_iter": 36383, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911208>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902320>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5902b70>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2778, "timestamp": 1558377153, "episode_len_mean": 325.0, "training_iteration": 60, "pid": 266, "timesteps_total": 2338502, "policy_reward_mean": {}, "iterations_since_restore": 60, "time_this_iter_s": 24.474575757980347}
{"num_metric_batches_dropped": 0, "episode_reward_max": 474.1702915848218, "date": "2019-05-20_18-32-57", "info": {"grad_time_ms": 9632.042, "update_time_ms": 8.235, "sample_time_ms": 16025.862, "default": {"kl": 0.017367729917168617, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010631443001329899, "vf_explained_var": 0.7750825881958008, "total_loss": 42.0262336730957, "entropy": 1.225549340248108, "vf_loss": 42.032958984375, "cur_kl_coeff": 0.2250000387430191}, "num_steps_sampled": 2375245, "load_time_ms": 6.352, "num_steps_trained": 2375245}, "done": false, "episode_reward_mean": 446.75707548216815, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.03195339566829, "outflow_rate_min": 1050.080836236934, "cost1_min": 162.8006827971804, "system_level_velocity_mean": 16.39453554510696, "outflow_rate_mean": 1211.7938230108705, "cost1_mean": 199.910506580507, "cost2_mean": -28.517965192347177, "system_level_velocity_min": 13.273266521920721, "cost2_max": -18.806783336946104, "cost1_max": 217.95802044874603, "outflow_rate_max": 1290.139582029783, "cost2_min": -42.33228878725061}, "episodes_this_iter": 43, "timesteps_since_restore": 2375245, "episode_reward_min": 387.2812351802838, "time_since_restore": 1627.5223424434662, "time_total_s": 1627.5223424434662, "timesteps_this_iter": 36743, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913eb8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913ba8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913550>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2821, "timestamp": 1558377177, "episode_len_mean": 325.0, "training_iteration": 61, "pid": 266, "timesteps_total": 2375245, "policy_reward_mean": {}, "iterations_since_restore": 61, "time_this_iter_s": 24.118584632873535}
{"num_metric_batches_dropped": 0, "episode_reward_max": 476.19018525076217, "date": "2019-05-20_18-33-24", "info": {"grad_time_ms": 9641.356, "update_time_ms": 8.28, "sample_time_ms": 16009.055, "default": {"kl": 0.016121771186590195, "cur_lr": 0.0005000000237487257, "policy_loss": -0.00952637754380703, "vf_explained_var": 0.8082075715065002, "total_loss": 42.1050910949707, "entropy": 1.2198867797851562, "vf_loss": 42.11098861694336, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2412441, "load_time_ms": 6.444, "num_steps_trained": 2412441}, "done": false, "episode_reward_mean": 443.8864720040694, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.03195339566829, "outflow_rate_min": 1022.9604325032764, "cost1_min": 158.88935188067856, "system_level_velocity_mean": 16.09497342276957, "outflow_rate_mean": 1204.2611457667613, "cost1_mean": 196.57121059162353, "cost2_mean": -30.37213272895558, "system_level_velocity_min": 12.919809633647212, "cost2_max": -19.69602674158353, "cost1_max": 217.95802044874603, "outflow_rate_max": 1286.5844535132485, "cost2_min": -40.82918250868104}, "episodes_this_iter": 48, "timesteps_since_restore": 2412441, "episode_reward_min": 382.95869678994836, "time_since_restore": 1653.772835969925, "time_total_s": 1653.772835969925, "timesteps_this_iter": 37196, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913208>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913a20>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913f28>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2869, "timestamp": 1558377204, "episode_len_mean": 325.0, "training_iteration": 62, "pid": 266, "timesteps_total": 2412441, "policy_reward_mean": {}, "iterations_since_restore": 62, "time_this_iter_s": 26.25049352645874}
{"num_metric_batches_dropped": 0, "episode_reward_max": 479.6481387422989, "date": "2019-05-20_18-33-51", "info": {"grad_time_ms": 9723.567, "update_time_ms": 8.333, "sample_time_ms": 16064.396, "default": {"kl": 0.019420292228460312, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011643419973552227, "vf_explained_var": 0.834045946598053, "total_loss": 35.88450241088867, "entropy": 1.206154227256775, "vf_loss": 35.89177703857422, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2449858, "load_time_ms": 6.503, "num_steps_trained": 2449858}, "done": false, "episode_reward_mean": 444.6398076688145, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.97744191947669, "outflow_rate_min": 1022.4911206812336, "cost1_min": 158.24081086675642, "system_level_velocity_mean": 16.004687732511798, "outflow_rate_mean": 1202.4337135601534, "cost1_mean": 195.6610778788549, "cost2_mean": -31.06608541405258, "system_level_velocity_min": 12.70552072190632, "cost2_max": -19.779025223657882, "cost1_max": 217.58414486508997, "outflow_rate_max": 1289.4181020474487, "cost2_min": -42.15714939108844}, "episodes_this_iter": 49, "timesteps_since_restore": 2449858, "episode_reward_min": 382.95869678994836, "time_since_restore": 1681.399908542633, "time_total_s": 1681.399908542633, "timesteps_this_iter": 37417, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590af60>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a710>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a518>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2918, "timestamp": 1558377231, "episode_len_mean": 325.0, "training_iteration": 63, "pid": 266, "timesteps_total": 2449858, "policy_reward_mean": {}, "iterations_since_restore": 63, "time_this_iter_s": 27.62707257270813}
{"num_metric_batches_dropped": 0, "episode_reward_max": 479.6481387422989, "date": "2019-05-20_18-34-16", "info": {"grad_time_ms": 9592.687, "update_time_ms": 8.219, "sample_time_ms": 16033.851, "default": {"kl": 0.017404505982995033, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0107300765812397, "vf_explained_var": 0.8436057567596436, "total_loss": 31.196117401123047, "entropy": 1.2020602226257324, "vf_loss": 31.202932357788086, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2486851, "load_time_ms": 6.479, "num_steps_trained": 2486851}, "done": false, "episode_reward_mean": 447.2026278689055, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.98694422782566, "outflow_rate_min": 1022.4911206812336, "cost1_min": 155.71449757452604, "system_level_velocity_mean": 16.175516478008024, "outflow_rate_mean": 1210.211708317444, "cost1_mean": 197.50220902944483, "cost2_mean": -30.598932068226187, "system_level_velocity_min": 12.70552072190632, "cost2_max": -19.85153254753509, "cost1_max": 217.56656263088746, "outflow_rate_max": 1293.4836501239113, "cost2_min": -44.73006974061848}, "episodes_this_iter": 42, "timesteps_since_restore": 2486851, "episode_reward_min": 387.01345671126813, "time_since_restore": 1705.6529393196106, "time_total_s": 1705.6529393196106, "timesteps_this_iter": 36993, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59132b0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59134a8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913470>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 2960, "timestamp": 1558377256, "episode_len_mean": 325.0, "training_iteration": 64, "pid": 266, "timesteps_total": 2486851, "policy_reward_mean": {}, "iterations_since_restore": 64, "time_this_iter_s": 24.25303077697754}
{"num_metric_batches_dropped": 0, "episode_reward_max": 479.6481387422989, "date": "2019-05-20_18-34-41", "info": {"grad_time_ms": 9441.439, "update_time_ms": 8.069, "sample_time_ms": 16145.057, "default": {"kl": 0.016705460846424103, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010700026527047157, "vf_explained_var": 0.8442986607551575, "total_loss": 35.71204376220703, "entropy": 1.209614872932434, "vf_loss": 35.71898651123047, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2523995, "load_time_ms": 6.089, "num_steps_trained": 2523995}, "done": false, "episode_reward_mean": 447.7134922787956, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.113680396599122, "outflow_rate_min": 1046.2274831973298, "cost1_min": 155.71449757452604, "system_level_velocity_mean": 16.267764522094204, "outflow_rate_mean": 1216.3128244943023, "cost1_mean": 198.52065340120637, "cost2_mean": -30.69725201838178, "system_level_velocity_min": 12.70552072190632, "cost2_max": -18.966593665685707, "cost1_max": 219.75227786753211, "outflow_rate_max": 1298.3331594093602, "cost2_min": -44.73006974061848}, "episodes_this_iter": 49, "timesteps_since_restore": 2523995, "episode_reward_min": 393.19774840919615, "time_since_restore": 1730.935661315918, "time_total_s": 1730.935661315918, "timesteps_this_iter": 37144, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590acf8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913630>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59136a0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3009, "timestamp": 1558377281, "episode_len_mean": 325.0, "training_iteration": 65, "pid": 266, "timesteps_total": 2523995, "policy_reward_mean": {}, "iterations_since_restore": 65, "time_this_iter_s": 25.282721996307373}
{"num_metric_batches_dropped": 0, "episode_reward_max": 483.43882566468125, "date": "2019-05-20_18-35-06", "info": {"grad_time_ms": 9314.404, "update_time_ms": 7.983, "sample_time_ms": 15904.314, "default": {"kl": 0.0184759683907032, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009578459896147251, "vf_explained_var": 0.8195571899414062, "total_loss": 42.265777587890625, "entropy": 1.2156219482421875, "vf_loss": 42.27119445800781, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2560951, "load_time_ms": 5.812, "num_steps_trained": 2560951}, "done": false, "episode_reward_mean": 446.2627197167526, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.113680396599122, "outflow_rate_min": 1046.2274831973298, "cost1_min": 155.71449757452604, "system_level_velocity_mean": 16.18032850919267, "outflow_rate_mean": 1215.8341997353557, "cost1_mean": 197.5670246541925, "cost2_mean": -30.884397545306893, "system_level_velocity_min": 12.744127854894932, "cost2_max": -18.966593665685707, "cost1_max": 219.75227786753211, "outflow_rate_max": 1299.1327527337082, "cost2_min": -41.613816197960595}, "episodes_this_iter": 48, "timesteps_since_restore": 2560951, "episode_reward_min": 394.0727579830234, "time_since_restore": 1755.9659526348114, "time_total_s": 1755.9659526348114, "timesteps_this_iter": 36956, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a978>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aa90>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aba8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3057, "timestamp": 1558377306, "episode_len_mean": 325.0, "training_iteration": 66, "pid": 266, "timesteps_total": 2560951, "policy_reward_mean": {}, "iterations_since_restore": 66, "time_this_iter_s": 25.030291318893433}
{"num_metric_batches_dropped": 0, "episode_reward_max": 483.43882566468125, "date": "2019-05-20_18-35-30", "info": {"grad_time_ms": 9310.946, "update_time_ms": 7.945, "sample_time_ms": 15923.98, "default": {"kl": 0.01926490291953087, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011317324824631214, "vf_explained_var": 0.8200399875640869, "total_loss": 40.320220947265625, "entropy": 1.2002452611923218, "vf_loss": 40.327205657958984, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2598437, "load_time_ms": 5.89, "num_steps_trained": 2598437}, "done": false, "episode_reward_mean": 444.52544796625705, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.040465398056742, "outflow_rate_min": 1032.4968633540377, "cost1_min": 155.05074471397407, "system_level_velocity_mean": 16.090892099604513, "outflow_rate_mean": 1210.7355405012956, "cost1_mean": 196.50309389882955, "cost2_mean": -30.916552246958858, "system_level_velocity_min": 12.620688081009337, "cost2_max": -19.642647009309446, "cost1_max": 218.00417700434036, "outflow_rate_max": 1299.1327527337082, "cost2_min": -49.185448383647575}, "episodes_this_iter": 41, "timesteps_since_restore": 2598437, "episode_reward_min": 381.69524557638226, "time_since_restore": 1780.2402362823486, "time_total_s": 1780.2402362823486, "timesteps_this_iter": 37486, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59139b0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59134a8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59132b0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3098, "timestamp": 1558377330, "episode_len_mean": 325.0, "training_iteration": 67, "pid": 266, "timesteps_total": 2598437, "policy_reward_mean": {}, "iterations_since_restore": 67, "time_this_iter_s": 24.27428364753723}
{"num_metric_batches_dropped": 0, "episode_reward_max": 481.1075810166381, "date": "2019-05-20_18-35-58", "info": {"grad_time_ms": 9305.074, "update_time_ms": 8.104, "sample_time_ms": 16131.683, "default": {"kl": 0.015872571617364883, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012030106969177723, "vf_explained_var": 0.7801945209503174, "total_loss": 45.72299575805664, "entropy": 1.2095063924789429, "vf_loss": 45.73145294189453, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2635463, "load_time_ms": 5.897, "num_steps_trained": 2635463}, "done": false, "episode_reward_mean": 441.0925979169172, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.298687804938886, "outflow_rate_min": 476.16837092108835, "cost1_min": 17.962586239475794, "system_level_velocity_mean": 16.24707904582512, "outflow_rate_mean": 1201.5438287606607, "cost1_mean": 196.1286947334608, "cost2_mean": -29.787168405095475, "system_level_velocity_min": 11.55852214373193, "cost2_max": -11.800336085017786, "cost1_max": 221.2839535946912, "outflow_rate_max": 1306.0061686186082, "cost2_min": -49.185448383647575}, "episodes_this_iter": 44, "timesteps_since_restore": 2635463, "episode_reward_min": 41.01932559127165, "time_since_restore": 1807.940143108368, "time_total_s": 1807.940143108368, "timesteps_this_iter": 37026, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef860>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efcc0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58ef9e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3142, "timestamp": 1558377358, "episode_len_mean": 322.02, "training_iteration": 68, "pid": 266, "timesteps_total": 2635463, "policy_reward_mean": {}, "iterations_since_restore": 68, "time_this_iter_s": 27.699906826019287}
{"num_metric_batches_dropped": 0, "episode_reward_max": 479.27951725719106, "date": "2019-05-20_18-36-25", "info": {"grad_time_ms": 9198.916, "update_time_ms": 7.97, "sample_time_ms": 16295.465, "default": {"kl": 0.01778346300125122, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012710236944258213, "vf_explained_var": 0.8217537999153137, "total_loss": 46.056121826171875, "entropy": 1.2252020835876465, "vf_loss": 46.06482696533203, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2673217, "load_time_ms": 5.664, "num_steps_trained": 2673217}, "done": false, "episode_reward_mean": 434.1632167079874, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.68797554217145, "outflow_rate_min": 476.16837092108835, "cost1_min": 17.962586239475794, "system_level_velocity_mean": 16.00071320847748, "outflow_rate_mean": 1183.1381902190174, "cost1_mean": 191.3174137552473, "cost2_mean": -30.71462778375484, "system_level_velocity_min": 11.55852214373193, "cost2_max": -11.800336085017786, "cost1_max": 221.2839535946912, "outflow_rate_max": 1306.0061686186082, "cost2_min": -48.832961976044714}, "episodes_this_iter": 57, "timesteps_since_restore": 2673217, "episode_reward_min": 41.01932559127165, "time_since_restore": 1834.7713105678558, "time_total_s": 1834.7713105678558, "timesteps_this_iter": 37754, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aa90>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911438>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59117f0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3199, "timestamp": 1558377385, "episode_len_mean": 319.14, "training_iteration": 69, "pid": 266, "timesteps_total": 2673217, "policy_reward_mean": {}, "iterations_since_restore": 69, "time_this_iter_s": 26.831167459487915}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.7539127538073, "date": "2019-05-20_18-36-49", "info": {"grad_time_ms": 9217.577, "update_time_ms": 8.051, "sample_time_ms": 16249.874, "default": {"kl": 0.01795365661382675, "cur_lr": 0.0005000000237487257, "policy_loss": -0.01162228174507618, "vf_explained_var": 0.8190869688987732, "total_loss": 39.71645736694336, "entropy": 1.2178205251693726, "vf_loss": 39.72404098510742, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2710099, "load_time_ms": 5.772, "num_steps_trained": 2710099}, "done": false, "episode_reward_mean": 439.1216731189057, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.68797554217145, "outflow_rate_min": 480.0221201667994, "cost1_min": 24.405187887741107, "system_level_velocity_mean": 16.067709395900962, "outflow_rate_mean": 1194.6816607375051, "cost1_mean": 193.98330446446414, "cost2_mean": -30.826498808306646, "system_level_velocity_min": 12.762470903956928, "cost2_max": -15.686400741944444, "cost1_max": 220.97142959966754, "outflow_rate_max": 1298.2102747034826, "cost2_min": -42.58884247070758}, "episodes_this_iter": 41, "timesteps_since_restore": 2710099, "episode_reward_min": 52.8174701427241, "time_since_restore": 1858.968240737915, "time_total_s": 1858.968240737915, "timesteps_this_iter": 36882, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911240>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911860>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59117b8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3240, "timestamp": 1558377409, "episode_len_mean": 321.84, "training_iteration": 70, "pid": 266, "timesteps_total": 2710099, "policy_reward_mean": {}, "iterations_since_restore": 70, "time_this_iter_s": 24.196930170059204}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.7539127538073, "date": "2019-05-20_18-37-14", "info": {"grad_time_ms": 9240.739, "update_time_ms": 7.975, "sample_time_ms": 16313.154, "default": {"kl": 0.017201008275151253, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012476623989641666, "vf_explained_var": 0.824340283870697, "total_loss": 39.62781524658203, "entropy": 1.2208317518234253, "vf_loss": 39.63642501831055, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2747449, "load_time_ms": 5.796, "num_steps_trained": 2747449}, "done": false, "episode_reward_mean": 443.22424017291434, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.20730296641781, "outflow_rate_min": 989.4727654395532, "cost1_min": 142.2134401057471, "system_level_velocity_mean": 16.078479534760913, "outflow_rate_mean": 1200.6987115195107, "cost1_mean": 196.0794291081277, "cost2_mean": -30.100671056859415, "system_level_velocity_min": 11.611172453600867, "cost2_max": -19.301107116648, "cost1_max": 219.01899892584484, "outflow_rate_max": 1298.2102747034826, "cost2_min": -42.58884247070758}, "episodes_this_iter": 43, "timesteps_since_restore": 2747449, "episode_reward_min": 373.76925618409587, "time_since_restore": 1883.9421174526215, "time_total_s": 1883.9421174526215, "timesteps_this_iter": 37350, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ae48>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efc50>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58efc18>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3283, "timestamp": 1558377434, "episode_len_mean": 324.72, "training_iteration": 71, "pid": 266, "timesteps_total": 2747449, "policy_reward_mean": {}, "iterations_since_restore": 71, "time_this_iter_s": 24.97387671470642}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.9263390795561, "date": "2019-05-20_18-37-41", "info": {"grad_time_ms": 9202.824, "update_time_ms": 7.896, "sample_time_ms": 16349.907, "default": {"kl": 0.0175106730312109, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011282452382147312, "vf_explained_var": 0.8115110397338867, "total_loss": 48.08246612548828, "entropy": 1.214111566543579, "vf_loss": 48.08980941772461, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2784793, "load_time_ms": 5.637, "num_steps_trained": 2784793}, "done": false, "episode_reward_mean": 444.6316431969477, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.109390781295147, "outflow_rate_min": 989.4727654395532, "cost1_min": 142.2134401057471, "system_level_velocity_mean": 16.10512324221074, "outflow_rate_mean": 1199.1676363287693, "cost1_mean": 196.60299800091826, "cost2_mean": -29.754463496320287, "system_level_velocity_min": 11.611172453600867, "cost2_max": -19.301107116648, "cost1_max": 218.9693221884195, "outflow_rate_max": 1290.8344178014606, "cost2_min": -44.760002788308284}, "episodes_this_iter": 55, "timesteps_since_restore": 2784793, "episode_reward_min": 373.76925618409587, "time_since_restore": 1910.1784026622772, "time_total_s": 1910.1784026622772, "timesteps_this_iter": 37344, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590acf8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590af60>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a860>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3338, "timestamp": 1558377461, "episode_len_mean": 325.0, "training_iteration": 72, "pid": 266, "timesteps_total": 2784793, "policy_reward_mean": {}, "iterations_since_restore": 72, "time_this_iter_s": 26.23628520965576}
{"num_metric_batches_dropped": 0, "episode_reward_max": 486.1749417873315, "date": "2019-05-20_18-38-04", "info": {"grad_time_ms": 8942.975, "update_time_ms": 7.802, "sample_time_ms": 16202.705, "default": {"kl": 0.023249175399541855, "cur_lr": 0.0005000000237487257, "policy_loss": -0.008935161866247654, "vf_explained_var": 0.8372510075569153, "total_loss": 36.594093322753906, "entropy": 1.2087178230285645, "vf_loss": 36.59779739379883, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2821425, "load_time_ms": 5.472, "num_steps_trained": 2821425}, "done": false, "episode_reward_mean": 448.5952444774419, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.109390781295147, "outflow_rate_min": 969.0179777185384, "cost1_min": 149.67503512009807, "system_level_velocity_mean": 16.28387081643698, "outflow_rate_mean": 1207.8763992437462, "cost1_mean": 198.74460185450837, "cost2_mean": -29.466381488815582, "system_level_velocity_min": 12.350045264658373, "cost2_max": -18.19304024083991, "cost1_max": 218.9693221884195, "outflow_rate_max": 1293.248837019645, "cost2_min": -44.760002788308284}, "episodes_this_iter": 42, "timesteps_since_restore": 2821425, "episode_reward_min": 365.26319824524774, "time_since_restore": 1933.7230632305145, "time_total_s": 1933.7230632305145, "timesteps_this_iter": 36632, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e278>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e0b8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e5c0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3380, "timestamp": 1558377484, "episode_len_mean": 325.0, "training_iteration": 73, "pid": 266, "timesteps_total": 2821425, "policy_reward_mean": {}, "iterations_since_restore": 73, "time_this_iter_s": 23.544660568237305}
{"num_metric_batches_dropped": 0, "episode_reward_max": 486.1749417873315, "date": "2019-05-20_18-38-29", "info": {"grad_time_ms": 8960.241, "update_time_ms": 7.693, "sample_time_ms": 16243.176, "default": {"kl": 0.014936157502233982, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012491650879383087, "vf_explained_var": 0.8729317784309387, "total_loss": 33.458396911621094, "entropy": 1.2184295654296875, "vf_loss": 33.465850830078125, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 2858935, "load_time_ms": 5.495, "num_steps_trained": 2858935}, "done": false, "episode_reward_mean": 445.76844166198816, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.00131576783559, "outflow_rate_min": 969.0179777185384, "cost1_min": 149.67503512009807, "system_level_velocity_mean": 16.14678070703769, "outflow_rate_mean": 1200.0437566791063, "cost1_mean": 197.18159422886802, "cost2_mean": -30.132255967433135, "system_level_velocity_min": 12.350045264658373, "cost2_max": -18.19304024083991, "cost1_max": 218.02751337926708, "outflow_rate_max": 1293.248837019645, "cost2_min": -40.46168020249007}, "episodes_this_iter": 43, "timesteps_since_restore": 2858935, "episode_reward_min": 365.26319824524774, "time_since_restore": 1958.5458166599274, "time_total_s": 1958.5458166599274, "timesteps_this_iter": 37510, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e400>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e358>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e240>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3423, "timestamp": 1558377509, "episode_len_mean": 325.0, "training_iteration": 74, "pid": 266, "timesteps_total": 2858935, "policy_reward_mean": {}, "iterations_since_restore": 74, "time_this_iter_s": 24.822753429412842}
{"num_metric_batches_dropped": 0, "episode_reward_max": 486.1749417873315, "date": "2019-05-20_18-38-55", "info": {"grad_time_ms": 9102.078, "update_time_ms": 7.76, "sample_time_ms": 16205.904, "default": {"kl": 0.013593577779829502, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011647849343717098, "vf_explained_var": 0.8189406991004944, "total_loss": 46.08306884765625, "entropy": 1.2026472091674805, "vf_loss": 46.09013366699219, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 2895403, "load_time_ms": 5.428, "num_steps_trained": 2895403}, "done": false, "episode_reward_mean": 448.11867289660603, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.102854666351043, "outflow_rate_min": 1008.4187942274825, "cost1_min": 153.13139918519747, "system_level_velocity_mean": 16.35630415621323, "outflow_rate_mean": 1207.4977926594568, "cost1_mean": 199.5461995222544, "cost2_mean": -29.38442937749946, "system_level_velocity_min": 12.564008932686397, "cost2_max": -18.76306926070355, "cost1_max": 218.3750165778419, "outflow_rate_max": 1293.248837019645, "cost2_min": -42.98026126892317}, "episodes_this_iter": 48, "timesteps_since_restore": 2895403, "episode_reward_min": 373.65314296676434, "time_since_restore": 1984.8732206821442, "time_total_s": 1984.8732206821442, "timesteps_this_iter": 36468, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ae10>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590abe0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ae80>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3471, "timestamp": 1558377535, "episode_len_mean": 324.82, "training_iteration": 75, "pid": 266, "timesteps_total": 2895403, "policy_reward_mean": {}, "iterations_since_restore": 75, "time_this_iter_s": 26.327404022216797}
{"num_metric_batches_dropped": 0, "episode_reward_max": 477.5566705096969, "date": "2019-05-20_18-39-20", "info": {"grad_time_ms": 9106.072, "update_time_ms": 7.875, "sample_time_ms": 16162.948, "default": {"kl": 0.014375805854797363, "cur_lr": 0.0005000000237487257, "policy_loss": -0.01159761380404234, "vf_explained_var": 0.8189228177070618, "total_loss": 46.06437301635742, "entropy": 1.2164591550827026, "vf_loss": 46.07112121582031, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 2932493, "load_time_ms": 5.568, "num_steps_trained": 2932493}, "done": false, "episode_reward_mean": 443.9607096653563, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.91352131830619, "outflow_rate_min": 515.4180655611638, "cost1_min": 24.61617487679689, "system_level_velocity_mean": 16.36530220427457, "outflow_rate_mean": 1198.5657940952292, "cost1_mean": 197.38404255289234, "cost2_mean": -28.73077727499801, "system_level_velocity_min": 10.01389256265939, "cost2_max": -14.672919787062007, "cost1_max": 218.3750165778419, "outflow_rate_max": 1285.7025403690238, "cost2_min": -42.98026126892317}, "episodes_this_iter": 50, "timesteps_since_restore": 2932493, "episode_reward_min": 50.28714544426651, "time_since_restore": 2009.5264887809753, "time_total_s": 2009.5264887809753, "timesteps_this_iter": 37090, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911470>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911048>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911940>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3521, "timestamp": 1558377560, "episode_len_mean": 321.94, "training_iteration": 76, "pid": 266, "timesteps_total": 2932493, "policy_reward_mean": {}, "iterations_since_restore": 76, "time_this_iter_s": 24.653268098831177}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.4699136505296, "date": "2019-05-20_18-39-45", "info": {"grad_time_ms": 9093.0, "update_time_ms": 7.896, "sample_time_ms": 16185.926, "default": {"kl": 0.013790011405944824, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010730519890785217, "vf_explained_var": 0.8165616989135742, "total_loss": 39.93148422241211, "entropy": 1.2145286798477173, "vf_loss": 39.937564849853516, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 2969733, "load_time_ms": 5.574, "num_steps_trained": 2969733}, "done": false, "episode_reward_mean": 438.2502752915945, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.91352131830619, "outflow_rate_min": 491.61637924011427, "cost1_min": 22.831489167849934, "system_level_velocity_mean": 16.23740906741504, "outflow_rate_mean": 1185.189876738276, "cost1_mean": 194.01004018907696, "cost2_mean": -29.20081321876259, "system_level_velocity_min": 10.01389256265939, "cost2_max": -10.865243063697724, "cost1_max": 218.2429731228323, "outflow_rate_max": 1301.1515540154828, "cost2_min": -41.01181994248678}, "episodes_this_iter": 41, "timesteps_since_restore": 2969733, "episode_reward_min": 50.28714544426651, "time_since_restore": 2033.9231913089752, "time_total_s": 2033.9231913089752, "timesteps_this_iter": 37240, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aac8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a160>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590afd0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3562, "timestamp": 1558377585, "episode_len_mean": 319.22, "training_iteration": 77, "pid": 266, "timesteps_total": 2969733, "policy_reward_mean": {}, "iterations_since_restore": 77, "time_this_iter_s": 24.396702527999878}
{"num_metric_batches_dropped": 0, "episode_reward_max": 478.4699136505296, "date": "2019-05-20_18-40-12", "info": {"grad_time_ms": 8991.597, "update_time_ms": 7.897, "sample_time_ms": 16235.83, "default": {"kl": 0.013387101702392101, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011502818204462528, "vf_explained_var": 0.8253997564315796, "total_loss": 42.74580383300781, "entropy": 1.240479588508606, "vf_loss": 42.752784729003906, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 3008212, "load_time_ms": 5.509, "num_steps_trained": 3008212}, "done": false, "episode_reward_mean": 438.6794025986486, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.431501060543287, "outflow_rate_min": 491.61637924011427, "cost1_min": 22.831489167849934, "system_level_velocity_mean": 15.97961041214629, "outflow_rate_mean": 1182.348882422638, "cost1_mean": 193.38309252608485, "cost2_mean": -30.00530680098465, "system_level_velocity_min": 10.01389256265939, "cost2_max": -10.865243063697724, "cost1_max": 218.17973697115755, "outflow_rate_max": 1301.1515540154828, "cost2_min": -41.01181994248678}, "episodes_this_iter": 49, "timesteps_since_restore": 3008212, "episode_reward_min": 51.91378803880919, "time_since_restore": 2061.101125717163, "time_total_s": 2061.101125717163, "timesteps_this_iter": 38479, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e0f0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e550>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e198>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3611, "timestamp": 1558377612, "episode_len_mean": 322.1, "training_iteration": 78, "pid": 266, "timesteps_total": 3008212, "policy_reward_mean": {}, "iterations_since_restore": 78, "time_this_iter_s": 27.177934408187866}
{"num_metric_batches_dropped": 0, "episode_reward_max": 479.30819408520375, "date": "2019-05-20_18-40-37", "info": {"grad_time_ms": 8974.607, "update_time_ms": 7.865, "sample_time_ms": 16071.92, "default": {"kl": 0.01490475982427597, "cur_lr": 0.0005000000237487257, "policy_loss": -0.013232246041297913, "vf_explained_var": 0.8516259789466858, "total_loss": 36.647098541259766, "entropy": 1.2131487131118774, "vf_loss": 36.655303955078125, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3045243, "load_time_ms": 5.662, "num_steps_trained": 3045243}, "done": false, "episode_reward_mean": 440.8334324203494, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.91237519678241, "outflow_rate_min": 971.1537789040226, "cost1_min": 147.5533044544357, "system_level_velocity_mean": 15.789271942833174, "outflow_rate_mean": 1180.6968856033106, "cost1_mean": 193.3717702730519, "cost2_mean": -30.05827752776331, "system_level_velocity_min": 11.986923721633202, "cost2_max": -18.26960355338938, "cost1_max": 217.62976065698655, "outflow_rate_max": 1271.95924832743, "cost2_min": -39.920808207437375}, "episodes_this_iter": 50, "timesteps_since_restore": 3045243, "episode_reward_min": 361.6771955372857, "time_since_restore": 2086.1225237846375, "time_total_s": 2086.1225237846375, "timesteps_this_iter": 37031, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911ef0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59116d8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59119e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3661, "timestamp": 1558377637, "episode_len_mean": 325.0, "training_iteration": 79, "pid": 266, "timesteps_total": 3045243, "policy_reward_mean": {}, "iterations_since_restore": 79, "time_this_iter_s": 25.021398067474365}
{"num_metric_batches_dropped": 0, "episode_reward_max": 482.42263749401, "date": "2019-05-20_18-41-02", "info": {"grad_time_ms": 9083.722, "update_time_ms": 7.749, "sample_time_ms": 16052.657, "default": {"kl": 0.014290527440607548, "cur_lr": 0.0005000000237487257, "policy_loss": -0.01008783932775259, "vf_explained_var": 0.8474068641662598, "total_loss": 36.496795654296875, "entropy": 1.223608136177063, "vf_loss": 36.50205993652344, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3082679, "load_time_ms": 5.721, "num_steps_trained": 3082679}, "done": false, "episode_reward_mean": 445.1719177715373, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.9066164253788, "outflow_rate_min": 998.5936702220669, "cost1_min": 147.5533044544357, "system_level_velocity_mean": 15.98587119897108, "outflow_rate_mean": 1188.822149202649, "cost1_mean": 195.56312679683998, "cost2_mean": -28.68909161410517, "system_level_velocity_min": 11.986923721633202, "cost2_max": -19.106562601965777, "cost1_max": 217.53299934594412, "outflow_rate_max": 1286.7834581709703, "cost2_min": -42.647977719732665}, "episodes_this_iter": 41, "timesteps_since_restore": 3082679, "episode_reward_min": 386.23657284347917, "time_since_restore": 2111.228898048401, "time_total_s": 2111.228898048401, "timesteps_this_iter": 37436, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a4e0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590af98>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590ab38>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3702, "timestamp": 1558377662, "episode_len_mean": 324.8, "training_iteration": 80, "pid": 266, "timesteps_total": 3082679, "policy_reward_mean": {}, "iterations_since_restore": 80, "time_this_iter_s": 25.106374263763428}
{"num_metric_batches_dropped": 0, "episode_reward_max": 487.0112017421727, "date": "2019-05-20_18-41-28", "info": {"grad_time_ms": 9128.594, "update_time_ms": 7.744, "sample_time_ms": 16097.906, "default": {"kl": 0.014727376401424408, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011748388409614563, "vf_explained_var": 0.8260853290557861, "total_loss": 43.5830192565918, "entropy": 1.2491962909698486, "vf_loss": 43.58979034423828, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 3121151, "load_time_ms": 5.732, "num_steps_trained": 3121151}, "done": false, "episode_reward_mean": 448.4070274795628, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.9066164253788, "outflow_rate_min": 1017.2339285714286, "cost1_min": 152.41484216680175, "system_level_velocity_mean": 16.046920067879753, "outflow_rate_mean": 1193.1738891551886, "cost1_mean": 196.56478083534313, "cost2_mean": -27.715926434168555, "system_level_velocity_min": 12.525689493271589, "cost2_max": -17.317020841638232, "cost1_max": 217.53299934594412, "outflow_rate_max": 1286.7834581709703, "cost2_min": -42.647977719732665}, "episodes_this_iter": 44, "timesteps_since_restore": 3121151, "episode_reward_min": 386.23657284347917, "time_since_restore": 2137.105792760849, "time_total_s": 2137.105792760849, "timesteps_this_iter": 38472, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e630>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e588>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e860>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3746, "timestamp": 1558377688, "episode_len_mean": 324.8, "training_iteration": 81, "pid": 266, "timesteps_total": 3121151, "policy_reward_mean": {}, "iterations_since_restore": 81, "time_this_iter_s": 25.87689471244812}
{"num_metric_batches_dropped": 0, "episode_reward_max": 487.0112017421727, "date": "2019-05-20_18-41-54", "info": {"grad_time_ms": 9048.668, "update_time_ms": 7.783, "sample_time_ms": 16167.63, "default": {"kl": 0.01486899796873331, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010544590651988983, "vf_explained_var": 0.8200784921646118, "total_loss": 47.393497467041016, "entropy": 1.2367688417434692, "vf_loss": 47.399024963378906, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 3158308, "load_time_ms": 5.968, "num_steps_trained": 3158308}, "done": false, "episode_reward_mean": 449.3868264926912, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.581271847170015, "outflow_rate_min": 1011.8648407061686, "cost1_min": 149.0588745390533, "system_level_velocity_mean": 15.933461991240042, "outflow_rate_mean": 1189.6469192552393, "cost1_mean": 195.69635106272534, "cost2_mean": -26.517041774911604, "system_level_velocity_min": 12.251727115029022, "cost2_max": -17.317020841638232, "cost1_max": 215.46761071266565, "outflow_rate_max": 1277.8458844593733, "cost2_min": -38.080338572124575}, "episodes_this_iter": 55, "timesteps_since_restore": 3158308, "episode_reward_min": 380.95260995706747, "time_since_restore": 2163.242951631546, "time_total_s": 2163.242951631546, "timesteps_this_iter": 37157, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911048>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911358>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911e80>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3801, "timestamp": 1558377714, "episode_len_mean": 325.0, "training_iteration": 82, "pid": 266, "timesteps_total": 3158308, "policy_reward_mean": {}, "iterations_since_restore": 82, "time_this_iter_s": 26.13715887069702}
{"num_metric_batches_dropped": 0, "episode_reward_max": 484.89838815174767, "date": "2019-05-20_18-42-19", "info": {"grad_time_ms": 9093.449, "update_time_ms": 7.709, "sample_time_ms": 16201.732, "default": {"kl": 0.014784987084567547, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011332390829920769, "vf_explained_var": 0.8290523886680603, "total_loss": 41.45128631591797, "entropy": 1.2401869297027588, "vf_loss": 41.45763397216797, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3195232, "load_time_ms": 5.955, "num_steps_trained": 3195232}, "done": false, "episode_reward_mean": 453.91726804415936, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.627106193770267, "outflow_rate_min": 1011.8648407061686, "cost1_min": 149.0588745390533, "system_level_velocity_mean": 16.18399652686099, "outflow_rate_mean": 1200.8265662743675, "cost1_mean": 198.6868118069848, "cost2_mean": -25.206654437567714, "system_level_velocity_min": 12.251727115029022, "cost2_max": -16.63627403963647, "cost1_max": 215.23065254925206, "outflow_rate_max": 1277.8458844593733, "cost2_min": -37.51075819843477}, "episodes_this_iter": 41, "timesteps_since_restore": 3195232, "episode_reward_min": 380.95260995706747, "time_since_restore": 2187.57799077034, "time_total_s": 2187.57799077034, "timesteps_this_iter": 36924, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913198>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ef28>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59137b8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3842, "timestamp": 1558377739, "episode_len_mean": 325.0, "training_iteration": 83, "pid": 266, "timesteps_total": 3195232, "policy_reward_mean": {}, "iterations_since_restore": 83, "time_this_iter_s": 24.335039138793945}
{"num_metric_batches_dropped": 0, "episode_reward_max": 483.55584590464065, "date": "2019-05-20_18-42-43", "info": {"grad_time_ms": 9082.732, "update_time_ms": 7.954, "sample_time_ms": 16174.845, "default": {"kl": 0.013749645091593266, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011405137367546558, "vf_explained_var": 0.8616503477096558, "total_loss": 36.43506622314453, "entropy": 1.2643088102340698, "vf_loss": 36.44183349609375, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3232658, "load_time_ms": 5.982, "num_steps_trained": 3232658}, "done": false, "episode_reward_mean": 454.264525006189, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.627106193770267, "outflow_rate_min": 1059.4346494404215, "cost1_min": 161.51387924906655, "system_level_velocity_mean": 16.24179794457724, "outflow_rate_mean": 1201.1162520995158, "cost1_mean": 199.46000100097453, "cost2_mean": -25.11509189252217, "system_level_velocity_min": 12.983816240129515, "cost2_max": -16.63627403963647, "cost1_max": 215.23065254925206, "outflow_rate_max": 1276.6281057708852, "cost2_min": -37.51075819843477}, "episodes_this_iter": 43, "timesteps_since_restore": 3232658, "episode_reward_min": 399.3623334602898, "time_since_restore": 2212.0297679901123, "time_total_s": 2212.0297679901123, "timesteps_this_iter": 37426, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591eb38>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e4e0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ed68>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3885, "timestamp": 1558377763, "episode_len_mean": 325.0, "training_iteration": 84, "pid": 266, "timesteps_total": 3232658, "policy_reward_mean": {}, "iterations_since_restore": 84, "time_this_iter_s": 24.45177721977234}
{"num_metric_batches_dropped": 0, "episode_reward_max": 483.12672018065274, "date": "2019-05-20_18-43-08", "info": {"grad_time_ms": 8986.681, "update_time_ms": 7.865, "sample_time_ms": 16166.46, "default": {"kl": 0.014572578482329845, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011203793808817863, "vf_explained_var": 0.8660412430763245, "total_loss": 41.24876022338867, "entropy": 1.273594617843628, "vf_loss": 41.25504684448242, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3270672, "load_time_ms": 6.132, "num_steps_trained": 3270672}, "done": false, "episode_reward_mean": 450.15227987916495, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.56637316154077, "outflow_rate_min": 1050.3943312608442, "cost1_min": 160.4051593131794, "system_level_velocity_mean": 15.990593424831873, "outflow_rate_mean": 1190.1747948295883, "cost1_mean": 196.49923286010358, "cost2_mean": -25.94849917779248, "system_level_velocity_min": 12.983816240129515, "cost2_max": -16.6106117017799, "cost1_max": 215.03315491618014, "outflow_rate_max": 1269.8329129531883, "cost2_min": -37.426827656658816}, "episodes_this_iter": 55, "timesteps_since_restore": 3270672, "episode_reward_min": 399.3623334602898, "time_since_restore": 2237.3156015872955, "time_total_s": 2237.3156015872955, "timesteps_this_iter": 38014, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911048>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e5f8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591efd0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3940, "timestamp": 1558377788, "episode_len_mean": 325.0, "training_iteration": 85, "pid": 266, "timesteps_total": 3270672, "policy_reward_mean": {}, "iterations_since_restore": 85, "time_this_iter_s": 25.285833597183228}
{"num_metric_batches_dropped": 0, "episode_reward_max": 485.208800411063, "date": "2019-05-20_18-43-33", "info": {"grad_time_ms": 8968.566, "update_time_ms": 7.745, "sample_time_ms": 16208.662, "default": {"kl": 0.014551577158272266, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011489036493003368, "vf_explained_var": 0.8560174703598022, "total_loss": 39.15058517456055, "entropy": 1.2735624313354492, "vf_loss": 39.157161712646484, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3308029, "load_time_ms": 6.019, "num_steps_trained": 3308029}, "done": false, "episode_reward_mean": 450.19867881676225, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.513619214499595, "outflow_rate_min": 1022.1044969915946, "cost1_min": 155.4167828594293, "system_level_velocity_mean": 15.924797640229691, "outflow_rate_mean": 1189.3959171810386, "cost1_mean": 195.7075930003744, "cost2_mean": -25.674278514161518, "system_level_velocity_min": 12.560204605525811, "cost2_max": -16.01983431260559, "cost1_max": 213.690536776412, "outflow_rate_max": 1270.3524643107285, "cost2_min": -35.92740673724415}, "episodes_this_iter": 42, "timesteps_since_restore": 3308029, "episode_reward_min": 395.3850821759885, "time_since_restore": 2262.1912512779236, "time_total_s": 2262.1912512779236, "timesteps_this_iter": 37357, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59136d8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913fd0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59139b0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 3982, "timestamp": 1558377813, "episode_len_mean": 325.0, "training_iteration": 86, "pid": 266, "timesteps_total": 3308029, "policy_reward_mean": {}, "iterations_since_restore": 86, "time_this_iter_s": 24.87564969062805}
{"num_metric_batches_dropped": 0, "episode_reward_max": 485.3683358117731, "date": "2019-05-20_18-43-58", "info": {"grad_time_ms": 8994.4, "update_time_ms": 7.549, "sample_time_ms": 16244.765, "default": {"kl": 0.013790465891361237, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009924788028001785, "vf_explained_var": 0.8679255247116089, "total_loss": 36.9136962890625, "entropy": 1.276340126991272, "vf_loss": 36.91897201538086, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 3346460, "load_time_ms": 6.176, "num_steps_trained": 3346460}, "done": false, "episode_reward_mean": 449.936594084438, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.392301978643445, "outflow_rate_min": 957.2940378917125, "cost1_min": 146.6887740772805, "system_level_velocity_mean": 15.927499751756239, "outflow_rate_mean": 1183.0640688156557, "cost1_mean": 195.69569428689437, "cost2_mean": -25.378125311164048, "system_level_velocity_min": 11.96957403236868, "cost2_max": -16.01983431260559, "cost1_max": 212.87772165324338, "outflow_rate_max": 1270.3524643107285, "cost2_min": -42.11997176027009}, "episodes_this_iter": 43, "timesteps_since_restore": 3346460, "episode_reward_min": 373.4030323406201, "time_since_restore": 2287.1817281246185, "time_total_s": 2287.1817281246185, "timesteps_this_iter": 38431, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ea90>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e780>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ecc0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4025, "timestamp": 1558377838, "episode_len_mean": 325.0, "training_iteration": 87, "pid": 266, "timesteps_total": 3346460, "policy_reward_mean": {}, "iterations_since_restore": 87, "time_this_iter_s": 24.990476846694946}
{"num_metric_batches_dropped": 0, "episode_reward_max": 485.3683358117731, "date": "2019-05-20_18-44-25", "info": {"grad_time_ms": 9014.773, "update_time_ms": 7.334, "sample_time_ms": 16144.428, "default": {"kl": 0.015295241959393024, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011691281571984291, "vf_explained_var": 0.8563265800476074, "total_loss": 42.80498504638672, "entropy": 1.2790417671203613, "vf_loss": 42.81151580810547, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3385123, "load_time_ms": 6.394, "num_steps_trained": 3385123}, "done": false, "episode_reward_mean": 449.06761340373026, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.504799692261805, "outflow_rate_min": 957.2940378917125, "cost1_min": 146.6887740772805, "system_level_velocity_mean": 15.797614847256831, "outflow_rate_mean": 1181.4746768313298, "cost1_mean": 194.17492542160068, "cost2_mean": -25.889108670436954, "system_level_velocity_min": 11.96957403236868, "cost2_max": -16.01983431260559, "cost1_max": 213.48435576014552, "outflow_rate_max": 1270.3524643107285, "cost2_min": -42.11997176027009}, "episodes_this_iter": 48, "timesteps_since_restore": 3385123, "episode_reward_min": 373.4030323406201, "time_since_restore": 2313.5718142986298, "time_total_s": 2313.5718142986298, "timesteps_this_iter": 38663, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591eda0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e5f8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ebe0>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4073, "timestamp": 1558377865, "episode_len_mean": 325.0, "training_iteration": 88, "pid": 266, "timesteps_total": 3385123, "policy_reward_mean": {}, "iterations_since_restore": 88, "time_this_iter_s": 26.39008617401123}
{"num_metric_batches_dropped": 0, "episode_reward_max": 483.6294713874044, "date": "2019-05-20_18-44-49", "info": {"grad_time_ms": 9020.868, "update_time_ms": 7.465, "sample_time_ms": 16107.045, "default": {"kl": 0.01445266604423523, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011903492733836174, "vf_explained_var": 0.8232811689376831, "total_loss": 44.94264221191406, "entropy": 1.2582899332046509, "vf_loss": 44.94966506958008, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3422092, "load_time_ms": 6.418, "num_steps_trained": 3422092}, "done": false, "episode_reward_mean": 451.29355872587223, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.65156633450061, "outflow_rate_min": 1013.113511649951, "cost1_min": 152.74216877081568, "system_level_velocity_mean": 15.911224001437008, "outflow_rate_mean": 1189.8585457816143, "cost1_mean": 195.33429150398183, "cost2_mean": -25.681890129234873, "system_level_velocity_min": 12.48941948819066, "cost2_max": -16.76691376883958, "cost1_max": 215.76659616012785, "outflow_rate_max": 1273.31721961319, "cost2_min": -38.16572924400914}, "episodes_this_iter": 49, "timesteps_since_restore": 3422092, "episode_reward_min": 389.21274896994356, "time_since_restore": 2338.2762036323547, "time_total_s": 2338.2762036323547, "timesteps_this_iter": 36969, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913dd8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59135c0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913f98>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4122, "timestamp": 1558377889, "episode_len_mean": 324.8, "training_iteration": 89, "pid": 266, "timesteps_total": 3422092, "policy_reward_mean": {}, "iterations_since_restore": 89, "time_this_iter_s": 24.704389333724976}
{"num_metric_batches_dropped": 0, "episode_reward_max": 483.7479444005633, "date": "2019-05-20_18-45-13", "info": {"grad_time_ms": 8951.855, "update_time_ms": 7.484, "sample_time_ms": 16057.272, "default": {"kl": 0.01414799876511097, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011119016446173191, "vf_explained_var": 0.813843846321106, "total_loss": 45.13364791870117, "entropy": 1.2608410120010376, "vf_loss": 45.13999557495117, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3459552, "load_time_ms": 6.393, "num_steps_trained": 3459552}, "done": false, "episode_reward_mean": 454.1732849693561, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.65156633450061, "outflow_rate_min": 1009.725675146771, "cost1_min": 152.74216877081568, "system_level_velocity_mean": 16.127852672002223, "outflow_rate_mean": 1196.463443226077, "cost1_mean": 197.79559954811387, "cost2_mean": -24.98272112374245, "system_level_velocity_min": 12.48941948819066, "cost2_max": -16.76691376883958, "cost1_max": 215.76659616012785, "outflow_rate_max": 1277.4194653319325, "cost2_min": -38.16572924400914}, "episodes_this_iter": 40, "timesteps_since_restore": 3459552, "episode_reward_min": 382.1242796374451, "time_since_restore": 2362.1913051605225, "time_total_s": 2362.1913051605225, "timesteps_this_iter": 37460, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e8d0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e4e0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e630>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4162, "timestamp": 1558377913, "episode_len_mean": 324.8, "training_iteration": 90, "pid": 266, "timesteps_total": 3459552, "policy_reward_mean": {}, "iterations_since_restore": 90, "time_this_iter_s": 23.915101528167725}
{"num_metric_batches_dropped": 0, "episode_reward_max": 484.78188826936946, "date": "2019-05-20_18-45-39", "info": {"grad_time_ms": 8927.547, "update_time_ms": 7.513, "sample_time_ms": 16072.765, "default": {"kl": 0.014948779717087746, "cur_lr": 0.0005000000237487257, "policy_loss": -0.01172897219657898, "vf_explained_var": 0.8377437591552734, "total_loss": 44.13119888305664, "entropy": 1.2582647800445557, "vf_loss": 44.137882232666016, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3496981, "load_time_ms": 6.207, "num_steps_trained": 3496981}, "done": false, "episode_reward_mean": 454.80558674946224, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.65092955584051, "outflow_rate_min": 983.3827805193373, "cost1_min": 152.55719502108425, "system_level_velocity_mean": 16.185855726791388, "outflow_rate_mean": 1198.3872317698722, "cost1_mean": 198.60335079746525, "cost2_mean": -24.946055944020692, "system_level_velocity_min": 12.338092462919507, "cost2_max": -16.161746201026734, "cost1_max": 215.58580940346178, "outflow_rate_max": 1277.4194653319325, "cost2_min": -37.64110019592729}, "episodes_this_iter": 49, "timesteps_since_restore": 3496981, "episode_reward_min": 378.2115769439025, "time_since_restore": 2387.978793144226, "time_total_s": 2387.978793144226, "timesteps_this_iter": 37429, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a4e0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911780>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aac8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4211, "timestamp": 1558377939, "episode_len_mean": 325.0, "training_iteration": 91, "pid": 266, "timesteps_total": 3496981, "policy_reward_mean": {}, "iterations_since_restore": 91, "time_this_iter_s": 25.787487983703613}
{"num_metric_batches_dropped": 0, "episode_reward_max": 484.78188826936946, "date": "2019-05-20_18-46-05", "info": {"grad_time_ms": 8944.017, "update_time_ms": 7.55, "sample_time_ms": 16045.084, "default": {"kl": 0.014777915552258492, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011326837353408337, "vf_explained_var": 0.824498176574707, "total_loss": 48.871768951416016, "entropy": 1.2634987831115723, "vf_loss": 48.87810134887695, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 3534200, "load_time_ms": 6.01, "num_steps_trained": 3534200}, "done": false, "episode_reward_mean": 453.0148230814146, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.65092955584051, "outflow_rate_min": 983.3827805193373, "cost1_min": 152.55719502108425, "system_level_velocity_mean": 16.160362700194423, "outflow_rate_mean": 1195.2362198814392, "cost1_mean": 198.29057750586776, "cost2_mean": -25.14686149219018, "system_level_velocity_min": 12.338092462919507, "cost2_max": -16.161746201026734, "cost1_max": 215.38857371598823, "outflow_rate_max": 1271.5120703673417, "cost2_min": -37.64110019592729}, "episodes_this_iter": 50, "timesteps_since_restore": 3534200, "episode_reward_min": 378.2115769439025, "time_since_restore": 2413.9961547851562, "time_total_s": 2413.9961547851562, "timesteps_this_iter": 37219, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ed30>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913b70>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e358>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4261, "timestamp": 1558377965, "episode_len_mean": 325.0, "training_iteration": 92, "pid": 266, "timesteps_total": 3534200, "policy_reward_mean": {}, "iterations_since_restore": 92, "time_this_iter_s": 26.017361640930176}
{"num_metric_batches_dropped": 0, "episode_reward_max": 484.78188826936946, "date": "2019-05-20_18-46-30", "info": {"grad_time_ms": 8973.689, "update_time_ms": 7.605, "sample_time_ms": 16071.224, "default": {"kl": 0.013401639647781849, "cur_lr": 0.0005000000237487257, "policy_loss": -0.009686104953289032, "vf_explained_var": 0.841260552406311, "total_loss": 39.185943603515625, "entropy": 1.2684221267700195, "vf_loss": 39.19111251831055, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3571468, "load_time_ms": 6.044, "num_steps_trained": 3571468}, "done": false, "episode_reward_mean": 452.3856976063788, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.59610479983341, "outflow_rate_min": 1015.8697402597402, "cost1_min": 156.15765154299208, "system_level_velocity_mean": 16.112412094505533, "outflow_rate_mean": 1195.062559872233, "cost1_mean": 197.75789964572724, "cost2_mean": -25.129447787230102, "system_level_velocity_min": 12.686727148456795, "cost2_max": -15.82009700178051, "cost1_max": 214.45200296875993, "outflow_rate_max": 1277.655236737603, "cost2_min": -39.327398888040534}, "episodes_this_iter": 41, "timesteps_since_restore": 3571468, "episode_reward_min": 390.10192048496305, "time_since_restore": 2438.886545419693, "time_total_s": 2438.886545419693, "timesteps_this_iter": 37268, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e4a8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591edd8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e550>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4302, "timestamp": 1558377990, "episode_len_mean": 325.0, "training_iteration": 93, "pid": 266, "timesteps_total": 3571468, "policy_reward_mean": {}, "iterations_since_restore": 93, "time_this_iter_s": 24.890390634536743}
{"num_metric_batches_dropped": 0, "episode_reward_max": 482.8401776586025, "date": "2019-05-20_18-46-56", "info": {"grad_time_ms": 8962.399, "update_time_ms": 7.434, "sample_time_ms": 16225.786, "default": {"kl": 0.014040560461580753, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0105593241751194, "vf_explained_var": 0.814017653465271, "total_loss": 48.1441764831543, "entropy": 1.2716615200042725, "vf_loss": 48.14999771118164, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3608579, "load_time_ms": 6.288, "num_steps_trained": 3608579}, "done": false, "episode_reward_mean": 450.77269326915297, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.935393142475647, "outflow_rate_min": 489.4590272212256, "cost1_min": 27.09635000873177, "system_level_velocity_mean": 16.257996627607668, "outflow_rate_mean": 1195.7412999342737, "cost1_mean": 197.60230912115418, "cost2_mean": -24.990760859792957, "system_level_velocity_min": 12.686727148456795, "cost2_max": -14.583107819370895, "cost1_max": 214.48610499705651, "outflow_rate_max": 1282.62906323185, "cost2_min": -39.327398888040534}, "episodes_this_iter": 45, "timesteps_since_restore": 3608579, "episode_reward_min": 59.48911835851859, "time_since_restore": 2464.788640499115, "time_total_s": 2464.788640499115, "timesteps_this_iter": 37111, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911358>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911ef0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5911e80>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4347, "timestamp": 1558378016, "episode_len_mean": 322.17, "training_iteration": 94, "pid": 266, "timesteps_total": 3608579, "policy_reward_mean": {}, "iterations_since_restore": 94, "time_this_iter_s": 25.902095079421997}
{"num_metric_batches_dropped": 0, "episode_reward_max": 482.19455421469166, "date": "2019-05-20_18-47-22", "info": {"grad_time_ms": 8933.289, "update_time_ms": 7.499, "sample_time_ms": 16340.196, "default": {"kl": 0.01425436232239008, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011711370199918747, "vf_explained_var": 0.8720231652259827, "total_loss": 40.96538543701172, "entropy": 1.2722982168197632, "vf_loss": 40.97228240966797, "cur_kl_coeff": 0.3375000059604645}, "num_steps_sampled": 3646338, "load_time_ms": 6.438, "num_steps_trained": 3646338}, "done": false, "episode_reward_mean": 448.05882807621157, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.935393142475647, "outflow_rate_min": 489.4590272212256, "cost1_min": 27.09635000873177, "system_level_velocity_mean": 16.15719427263394, "outflow_rate_mean": 1189.5658103505657, "cost1_mean": 196.35931956573495, "cost2_mean": -25.75966141962465, "system_level_velocity_min": 12.600809348333334, "cost2_max": -14.503982448540224, "cost1_max": 214.92252895829915, "outflow_rate_max": 1282.62906323185, "cost2_min": -37.57398846560284}, "episodes_this_iter": 55, "timesteps_since_restore": 3646338, "episode_reward_min": 59.48911835851859, "time_since_restore": 2490.9356722831726, "time_total_s": 2490.9356722831726, "timesteps_this_iter": 37759, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913a20>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913e10>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59132e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4402, "timestamp": 1558378042, "episode_len_mean": 322.17, "training_iteration": 95, "pid": 266, "timesteps_total": 3646338, "policy_reward_mean": {}, "iterations_since_restore": 95, "time_this_iter_s": 26.147031784057617}
{"num_metric_batches_dropped": 0, "episode_reward_max": 481.24599486799474, "date": "2019-05-20_18-47-47", "info": {"grad_time_ms": 8935.035, "update_time_ms": 7.55, "sample_time_ms": 16269.729, "default": {"kl": 0.014183703809976578, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012415600940585136, "vf_explained_var": 0.8557291030883789, "total_loss": 38.58483123779297, "entropy": 1.2678282260894775, "vf_loss": 38.59246063232422, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3683203, "load_time_ms": 6.373, "num_steps_trained": 3683203}, "done": false, "episode_reward_mean": 450.06888802041794, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.62261982359304, "outflow_rate_min": 1002.9785382059802, "cost1_min": 153.26312538854955, "system_level_velocity_mean": 16.13485613342126, "outflow_rate_mean": 1191.0037946899924, "cost1_mean": 197.89266540403491, "cost2_mean": -25.79669952212371, "system_level_velocity_min": 12.600809348333334, "cost2_max": -14.503982448540224, "cost1_max": 214.92252895829915, "outflow_rate_max": 1272.881373912817, "cost2_min": -37.57398846560284}, "episodes_this_iter": 41, "timesteps_since_restore": 3683203, "episode_reward_min": 387.9235665475776, "time_since_restore": 2515.127390384674, "time_total_s": 2515.127390384674, "timesteps_this_iter": 36865, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e4a8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e630>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e828>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4443, "timestamp": 1558378067, "episode_len_mean": 325.0, "training_iteration": 96, "pid": 266, "timesteps_total": 3683203, "policy_reward_mean": {}, "iterations_since_restore": 96, "time_this_iter_s": 24.191718101501465}
{"num_metric_batches_dropped": 0, "episode_reward_max": 481.0306960886954, "date": "2019-05-20_18-48-12", "info": {"grad_time_ms": 8918.281, "update_time_ms": 7.555, "sample_time_ms": 16277.985, "default": {"kl": 0.014632312580943108, "cur_lr": 0.0005000000237487257, "policy_loss": -0.011251821182668209, "vf_explained_var": 0.8655349612236023, "total_loss": 40.53727722167969, "entropy": 1.27931547164917, "vf_loss": 40.5435905456543, "cur_kl_coeff": 0.3375000059604645}, "num_steps_sampled": 3720920, "load_time_ms": 6.26, "num_steps_trained": 3720920}, "done": false, "episode_reward_mean": 447.6017233303834, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.617344187621168, "outflow_rate_min": 971.0578249607809, "cost1_min": 147.12120071786774, "system_level_velocity_mean": 16.131532184849302, "outflow_rate_mean": 1188.245084327103, "cost1_mean": 197.69953971287202, "cost2_mean": -26.067497689567002, "system_level_velocity_min": 12.11119074156125, "cost2_max": -18.191210727278296, "cost1_max": 214.82210390241312, "outflow_rate_max": 1270.7537334414521, "cost2_min": -39.20636192843908}, "episodes_this_iter": 42, "timesteps_since_restore": 3720920, "episode_reward_min": 376.36455882900174, "time_since_restore": 2540.0380008220673, "time_total_s": 2540.0380008220673, "timesteps_this_iter": 37717, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a080>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590aac8>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee590a7b8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4485, "timestamp": 1558378092, "episode_len_mean": 325.0, "training_iteration": 97, "pid": 266, "timesteps_total": 3720920, "policy_reward_mean": {}, "iterations_since_restore": 97, "time_this_iter_s": 24.91061043739319}
{"num_metric_batches_dropped": 0, "episode_reward_max": 487.1040814392003, "date": "2019-05-20_18-48-37", "info": {"grad_time_ms": 8884.974, "update_time_ms": 7.62, "sample_time_ms": 16194.635, "default": {"kl": 0.014875182881951332, "cur_lr": 0.0005000000237487257, "policy_loss": -0.010965235531330109, "vf_explained_var": 0.8344984650611877, "total_loss": 49.426910400390625, "entropy": 1.2680729627609253, "vf_loss": 49.43285369873047, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3758522, "load_time_ms": 5.958, "num_steps_trained": 3758522}, "done": false, "episode_reward_mean": 445.8806997748991, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 17.799043548611348, "outflow_rate_min": 971.0578249607809, "cost1_min": 147.06716879378132, "system_level_velocity_mean": 16.0091698632044, "outflow_rate_mean": 1185.8503271779487, "cost1_mean": 196.08303020965857, "cost2_mean": -26.90043523059965, "system_level_velocity_min": 12.10575956305029, "cost2_max": -18.79199545951693, "cost1_max": 216.35531857826263, "outflow_rate_max": 1284.0929241897713, "cost2_min": -39.20636192843908}, "episodes_this_iter": 56, "timesteps_since_restore": 3758522, "episode_reward_min": 376.36455882900174, "time_since_restore": 2565.2610471248627, "time_total_s": 2565.2610471248627, "timesteps_this_iter": 37602, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913fd0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee5913b70>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee59132e8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4541, "timestamp": 1558378117, "episode_len_mean": 325.0, "training_iteration": 98, "pid": 266, "timesteps_total": 3758522, "policy_reward_mean": {}, "iterations_since_restore": 98, "time_this_iter_s": 25.22304630279541}
{"num_metric_batches_dropped": 0, "episode_reward_max": 487.1040814392003, "date": "2019-05-20_18-49-03", "info": {"grad_time_ms": 8930.463, "update_time_ms": 7.503, "sample_time_ms": 16244.199, "default": {"kl": 0.014521491713821888, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012134318239986897, "vf_explained_var": 0.8357140421867371, "total_loss": 47.395408630371094, "entropy": 1.2639942169189453, "vf_loss": 47.402645111083984, "cur_kl_coeff": 0.3375000059604645}, "num_steps_sampled": 3796268, "load_time_ms": 5.817, "num_steps_trained": 3796268}, "done": false, "episode_reward_mean": 444.343477065015, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.14926487801291, "outflow_rate_min": 483.10588561624917, "cost1_min": 25.84946167395436, "system_level_velocity_mean": 16.000828466854617, "outflow_rate_mean": 1179.7338795759613, "cost1_mean": 194.06052432004748, "cost2_mean": -26.79069574783583, "system_level_velocity_min": 10.54857234865038, "cost2_max": -13.638842760827744, "cost1_max": 216.67041156674037, "outflow_rate_max": 1284.0929241897713, "cost2_min": -43.96670862158635}, "episodes_this_iter": 43, "timesteps_since_restore": 3796268, "episode_reward_min": 56.7245852589347, "time_since_restore": 2590.930517435074, "time_total_s": 2590.930517435074, "timesteps_this_iter": 37746, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591e978>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ed68>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee591ecf8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4584, "timestamp": 1558378143, "episode_len_mean": 322.15, "training_iteration": 99, "pid": 266, "timesteps_total": 3796268, "policy_reward_mean": {}, "iterations_since_restore": 99, "time_this_iter_s": 25.66947031021118}
{"num_metric_batches_dropped": 0, "episode_reward_max": 481.53174569943224, "date": "2019-05-20_18-49-25", "info": {"grad_time_ms": 8720.614, "update_time_ms": 7.681, "sample_time_ms": 16338.707, "default": {"kl": 0.015173993073403835, "cur_lr": 0.0005000000237487257, "policy_loss": -0.012122796848416328, "vf_explained_var": 0.8274722099304199, "total_loss": 46.58988952636719, "entropy": 1.2746851444244385, "vf_loss": 46.59688949584961, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 3834118, "load_time_ms": 5.616, "num_steps_trained": 3834118}, "done": true, "episode_reward_mean": 439.4021969711944, "hostname": "flow-main", "custom_metrics": {"system_level_velocity_max": 18.14926487801291, "outflow_rate_min": 454.1881787896761, "cost1_min": 17.629689225553076, "system_level_velocity_mean": 15.973025764237805, "outflow_rate_mean": 1170.5835805094034, "cost1_mean": 191.83839889876205, "cost2_mean": -26.58638374595187, "system_level_velocity_min": 10.54857234865038, "cost2_max": -13.371392477167541, "cost1_max": 216.67041156674037, "outflow_rate_max": 1284.0929241897713, "cost2_min": -43.96670862158635}, "episodes_this_iter": 43, "timesteps_since_restore": 3834118, "episode_reward_min": 40.39176633666588, "time_since_restore": 2613.680666446686, "time_total_s": 2613.680666446686, "timesteps_this_iter": 37850, "node_ip": "10.138.0.2", "config": {"input": "sampler", "kl_coeff": 0.2, "kl_target": 0.01, "log_level": "INFO", "batch_mode": "truncate_episodes", "model": {"grayscale": false, "dim": 84, "zero_mean": true, "custom_preprocessor": null, "custom_model": null, "squash_to_range": false, "free_log_std": false, "lstm_cell_size": 256, "channel_major": false, "lstm_use_prev_action_reward": false, "fcnet_activation": "tanh", "conv_filters": null, "framestack": true, "fcnet_hiddens": [128, 64, 32], "use_lstm": false, "custom_options": {}, "max_seq_len": 20, "conv_activation": "relu"}, "preprocessor_pref": "deepmind", "lr_schedule": null, "num_sgd_iter": 10, "num_cpus_for_driver": 1, "clip_actions": false, "use_gae": true, "clip_rewards": null, "lambda": 0.97, "input_evaluation": null, "observation_filter": "MeanStdFilter", "num_workers": 20, "train_batch_size": 15000, "straggler_mitigation": false, "synchronize_filters": true, "compress_observations": false, "num_envs_per_worker": 1, "tf_session_args": {"inter_op_parallelism_threads": 2, "allow_soft_placement": true, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}}, "vf_loss_coeff": 1.0, "output_max_file_size": 67108864, "num_cpus_per_worker": 1, "clip_param": 0.3, "optimizer": {}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "multiagent": {"policies_to_train": null, "policy_graphs": {}, "policy_mapping_fn": null}, "simple_optimizer": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58d7d68>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58d7da0>", "on_sample_end": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7fdee58d7ac8>"}, "collect_metrics_timeout": 180, "num_gpus": 0, "env": "MultiWaveAttenuationMergePOEnv-v0outflow_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_gpus_per_worker": 0, "vf_share_layers": false, "sample_batch_size": 750, "output": null, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "horizon": 750, "lr": 0.0005, "vf_clip_param": 1000000.0, "custom_resources_per_worker": {}, "sgd_minibatch_size": 128, "monitor": false, "sample_async": false, "entropy_coeff": 0.0}, "experiment_id": "4ca5d85e832943acb272543d21c63528", "episodes_total": 4627, "timestamp": 1558378165, "episode_len_mean": 319.17, "training_iteration": 100, "pid": 266, "timesteps_total": 3834118, "policy_reward_mean": {}, "iterations_since_restore": 100, "time_this_iter_s": 22.75014901161194}
