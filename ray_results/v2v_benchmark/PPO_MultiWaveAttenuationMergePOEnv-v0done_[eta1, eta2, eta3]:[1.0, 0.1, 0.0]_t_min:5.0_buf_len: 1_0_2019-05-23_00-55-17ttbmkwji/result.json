{"episodes_total": 40, "info": {"grad_time_ms": 9619.42, "update_time_ms": 753.056, "load_time_ms": 47.994, "num_steps_sampled": 41564, "sample_time_ms": 20925.563, "num_steps_trained": 41564, "default": {"kl": 0.004504653625190258, "entropy": 1.4222476482391357, "vf_loss": 1.8235206604003906, "cur_kl_coeff": 0.20000003278255463, "policy_loss": -0.0029453481547534466, "vf_explained_var": 0.883898138999939, "cur_lr": 0.0005000000237487257, "total_loss": 1.8214759826660156}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_00-56-39", "time_total_s": 31.486421585083008, "episode_len_mean": 325.0, "episodes_this_iter": 40, "training_iteration": 1, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 696.7584810245323, "cost2_min": -39.90864684735828, "cost2_mean": -24.562300381985864, "system_level_velocity_max": 11.763566384491542, "cost1_max": 143.35521126247102, "outflow_rate_min": 63.72, "cost1_min": 56.53101202179114, "system_level_velocity_min": 4.63404492158383, "cost2_max": -14.00430829712735, "system_level_velocity_mean": 10.108022810686972, "outflow_rate_max": 885.0932351360068, "cost1_mean": 121.24659751468376}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b689e8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b689b0>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b68a20>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 336.82344507634264, "episode_reward_mean": 211.6220227541199, "timesteps_this_iter": 41564, "timesteps_since_restore": 41564, "episode_reward_min": 145.55042897502327, "policy_reward_mean": {}, "timestamp": 1558572999, "time_this_iter_s": 31.486421585083008, "node_ip": "10.138.0.2", "iterations_since_restore": 1, "time_since_restore": 31.486421585083008, "done": false, "timesteps_total": 41564}
{"episodes_total": 80, "info": {"grad_time_ms": 9810.138, "update_time_ms": 380.248, "load_time_ms": 26.198, "num_steps_sampled": 86293, "sample_time_ms": 19505.007, "num_steps_trained": 86293, "default": {"kl": 0.016990942880511284, "entropy": 1.415866732597351, "vf_loss": 1.7605642080307007, "cur_kl_coeff": 0.10000002384185791, "policy_loss": -0.0053652264177799225, "vf_explained_var": 0.9448578953742981, "cur_lr": 0.0005000000237487257, "total_loss": 1.756898045539856}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_00-57-08", "time_total_s": 59.667197942733765, "episode_len_mean": 325.0, "episodes_this_iter": 40, "training_iteration": 2, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 756.3564341251893, "cost2_min": -48.80985449494921, "cost2_mean": -27.667231096120766, "system_level_velocity_max": 14.046262263042115, "cost1_max": 173.48257151068927, "outflow_rate_min": 63.72, "cost1_min": 56.53101202179114, "system_level_velocity_min": 4.63404492158383, "cost2_max": -14.00430829712735, "system_level_velocity_mean": 10.541487157718484, "outflow_rate_max": 1093.959529261182, "cost1_mean": 127.35956555839}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b066a0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b06668>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b066d8>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 409.90695008157695, "episode_reward_mean": 245.24074506654105, "timesteps_this_iter": 44729, "timesteps_since_restore": 86293, "episode_reward_min": 145.55042897502327, "policy_reward_mean": {}, "timestamp": 1558573028, "time_this_iter_s": 28.180776357650757, "node_ip": "10.138.0.2", "iterations_since_restore": 2, "time_since_restore": 59.667197942733765, "done": false, "timesteps_total": 86293}
{"episodes_total": 121, "info": {"grad_time_ms": 10495.996, "update_time_ms": 256.596, "load_time_ms": 19.824, "num_steps_sampled": 135196, "sample_time_ms": 19635.763, "num_steps_trained": 135196, "default": {"kl": 0.007736071012914181, "entropy": 1.4081405401229858, "vf_loss": 4.511768341064453, "cur_kl_coeff": 0.10000000894069672, "policy_loss": -0.002813095925375819, "vf_explained_var": 0.925089418888092, "cur_lr": 0.0005000000237487257, "total_loss": 4.50972843170166}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_00-57-39", "time_total_s": 91.55584073066711, "episode_len_mean": 322.1, "episodes_this_iter": 41, "training_iteration": 3, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 835.2624939108232, "cost2_min": -58.852324855325335, "cost2_mean": -32.86350495817627, "system_level_velocity_max": 18.316251884555562, "cost1_max": 182.2849365298752, "outflow_rate_min": 63.72, "cost1_min": 22.628515073352638, "system_level_velocity_min": 4.63404492158383, "cost2_max": -13.003773400178062, "system_level_velocity_mean": 11.444845587229986, "outflow_rate_max": 1138.2390337636107, "cost1_mean": 137.15535399370702}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778afd3c8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778afd438>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778afdc88>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 432.40596802349694, "episode_reward_mean": 293.4874121728098, "timesteps_this_iter": 48903, "timesteps_since_restore": 135196, "episode_reward_min": 46.60216679600663, "policy_reward_mean": {}, "timestamp": 1558573059, "time_this_iter_s": 31.88864278793335, "node_ip": "10.138.0.2", "iterations_since_restore": 3, "time_since_restore": 91.55584073066711, "done": false, "timesteps_total": 135196}
{"episodes_total": 181, "info": {"grad_time_ms": 10777.74, "update_time_ms": 194.983, "load_time_ms": 16.283, "num_steps_sampled": 181936, "sample_time_ms": 19965.044, "num_steps_trained": 181936, "default": {"kl": 0.007327529136091471, "entropy": 1.3873555660247803, "vf_loss": 7.413215160369873, "cur_kl_coeff": 0.10000002384185791, "policy_loss": -0.003036957234144211, "vf_explained_var": 0.9280238151550293, "cur_lr": 0.0005000000237487257, "total_loss": 7.410910606384277}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_00-58-12", "time_total_s": 124.22927522659302, "episode_len_mean": 322.1, "episodes_this_iter": 60, "training_iteration": 4, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 967.5329587738916, "cost2_min": -64.03274387377397, "cost2_mean": -42.2992368302019, "system_level_velocity_max": 18.316251884555562, "cost1_max": 186.25311246575998, "outflow_rate_min": 511.17688865063195, "cost1_min": 22.628515073352638, "system_level_velocity_min": 9.244014979775434, "cost2_max": -13.003773400178062, "system_level_velocity_mean": 12.87005354485194, "outflow_rate_max": 1164.3945779714622, "cost1_mean": 155.28591436059858}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d518>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d358>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d0f0>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 447.60871172267014, "episode_reward_mean": 370.96319221017546, "timesteps_this_iter": 46740, "timesteps_since_restore": 181936, "episode_reward_min": 46.60216679600663, "policy_reward_mean": {}, "timestamp": 1558573092, "time_this_iter_s": 32.6734344959259, "node_ip": "10.138.0.2", "iterations_since_restore": 4, "time_since_restore": 124.22927522659302, "done": false, "timesteps_total": 181936}
{"episodes_total": 221, "info": {"grad_time_ms": 11190.857, "update_time_ms": 157.676, "load_time_ms": 13.945, "num_steps_sampled": 228706, "sample_time_ms": 19668.476, "num_steps_trained": 228706, "default": {"kl": 0.00845877081155777, "entropy": 1.3702698945999146, "vf_loss": 7.7582526206970215, "cur_kl_coeff": 0.10000002384185791, "policy_loss": -0.002593101467937231, "vf_explained_var": 0.9331128001213074, "cur_lr": 0.0005000000237487257, "total_loss": 7.756505489349365}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_00-58-44", "time_total_s": 155.65850186347961, "episode_len_mean": 325.0, "episodes_this_iter": 40, "training_iteration": 5, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 1025.3852384857928, "cost2_min": -71.43360702063471, "cost2_mean": -47.587586595244154, "system_level_velocity_max": 16.14330167387404, "cost1_max": 199.84457273035932, "outflow_rate_min": 687.7611670020119, "cost1_min": 119.01267896014222, "system_level_velocity_min": 9.929282463873795, "cost2_max": -25.854311437351768, "system_level_velocity_mean": 13.321911437683166, "outflow_rate_max": 1273.7336112932142, "cost1_mean": 162.76054317539246}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0de80>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d320>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0dbe0>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 481.45722481342955, "episode_reward_mean": 394.2479250363691, "timesteps_this_iter": 46770, "timesteps_since_restore": 228706, "episode_reward_min": 297.2171261214011, "policy_reward_mean": {}, "timestamp": 1558573124, "time_this_iter_s": 31.429226636886597, "node_ip": "10.138.0.2", "iterations_since_restore": 5, "time_since_restore": 155.65850186347961, "done": false, "timesteps_total": 228706}
{"episodes_total": 262, "info": {"grad_time_ms": 11526.122, "update_time_ms": 132.831, "load_time_ms": 12.54, "num_steps_sampled": 273896, "sample_time_ms": 19404.49, "num_steps_trained": 273896, "default": {"kl": 0.010498283430933952, "entropy": 1.372843861579895, "vf_loss": 10.826415061950684, "cur_kl_coeff": 0.10000000894069672, "policy_loss": -0.005229758098721504, "vf_explained_var": 0.9181789755821228, "cur_lr": 0.0005000000237487257, "total_loss": 10.822236061096191}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_00-59-15", "time_total_s": 187.0489785671234, "episode_len_mean": 322.1, "episodes_this_iter": 41, "training_iteration": 6, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 1052.735108467383, "cost2_min": -71.43360702063471, "cost2_mean": -48.72350355222556, "system_level_velocity_max": 18.570254003962436, "cost1_max": 199.84457273035932, "outflow_rate_min": 500.8146235931583, "cost1_min": 23.139317460419722, "system_level_velocity_min": 10.148572475152882, "cost2_max": -16.236830333737142, "system_level_velocity_mean": 13.60847357128719, "outflow_rate_max": 1280.3567416559758, "cost1_mean": 163.8603179056918}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d1d0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d630>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0dfd0>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 481.45722481342955, "episode_reward_mean": 392.2350085706312, "timesteps_this_iter": 45190, "timesteps_since_restore": 273896, "episode_reward_min": 48.1981566672239, "policy_reward_mean": {}, "timestamp": 1558573155, "time_this_iter_s": 31.3904767036438, "node_ip": "10.138.0.2", "iterations_since_restore": 6, "time_since_restore": 187.0489785671234, "done": false, "timesteps_total": 273896}
{"episodes_total": 322, "info": {"grad_time_ms": 11609.709, "update_time_ms": 115.051, "load_time_ms": 11.48, "num_steps_sampled": 314586, "sample_time_ms": 19237.273, "num_steps_trained": 314586, "default": {"kl": 0.009924477897584438, "entropy": 1.3324602842330933, "vf_loss": 19.339763641357422, "cur_kl_coeff": 0.10000001639127731, "policy_loss": -0.004770396742969751, "vf_explained_var": 0.8485896587371826, "cur_lr": 0.0005000000237487257, "total_loss": 19.33598518371582}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_00-59-46", "time_total_s": 217.49652791023254, "episode_len_mean": 322.1, "episodes_this_iter": 60, "training_iteration": 7, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 1120.4162672498958, "cost2_min": -62.46826516121122, "cost2_mean": -43.39326267579118, "system_level_velocity_max": 18.570254003962436, "cost1_max": 202.11565293326544, "outflow_rate_min": 500.8146235931583, "cost1_min": 23.139317460419722, "system_level_velocity_min": 10.148572475152882, "cost2_max": -16.236830333737142, "system_level_velocity_mean": 14.425603556243335, "outflow_rate_max": 1324.0806380534673, "cost1_mean": 174.37332134948826}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0de10>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d898>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0de48>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 474.667524704376, "episode_reward_mean": 409.12707874151425, "timesteps_this_iter": 40690, "timesteps_since_restore": 314586, "episode_reward_min": 48.1981566672239, "policy_reward_mean": {}, "timestamp": 1558573186, "time_this_iter_s": 30.44754934310913, "node_ip": "10.138.0.2", "iterations_since_restore": 7, "time_since_restore": 217.49652791023254, "done": false, "timesteps_total": 314586}
{"episodes_total": 362, "info": {"grad_time_ms": 11942.962, "update_time_ms": 101.641, "load_time_ms": 10.556, "num_steps_sampled": 354819, "sample_time_ms": 18936.552, "num_steps_trained": 354819, "default": {"kl": 0.008175650611519814, "entropy": 1.31918203830719, "vf_loss": 16.185773849487305, "cur_kl_coeff": 0.10000001639127731, "policy_loss": -0.004570777527987957, "vf_explained_var": 0.8705477118492126, "cur_lr": 0.0005000000237487257, "total_loss": 16.18202018737793}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_01-00-17", "time_total_s": 248.69195938110352, "episode_len_mean": 325.0, "episodes_this_iter": 40, "training_iteration": 8, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 1155.469856424277, "cost2_min": -60.607746909830226, "cost2_mean": -40.28072120480334, "system_level_velocity_max": 16.75836811245524, "cost1_max": 204.72647322696375, "outflow_rate_min": 850.7160550887019, "cost1_min": 122.93568516102222, "system_level_velocity_min": 10.201979428208402, "cost2_max": -26.08108142400463, "system_level_velocity_mean": 14.849540742881299, "outflow_rate_max": 1324.0806380534673, "cost1_mean": 181.86733179527363}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0dda0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0d940>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b0da20>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 480.81524579217864, "episode_reward_mean": 424.51308462229576, "timesteps_this_iter": 40233, "timesteps_since_restore": 354819, "episode_reward_min": 313.20279144348984, "policy_reward_mean": {}, "timestamp": 1558573217, "time_this_iter_s": 31.19543147087097, "node_ip": "10.138.0.2", "iterations_since_restore": 8, "time_since_restore": 248.69195938110352, "done": false, "timesteps_total": 354819}
{"episodes_total": 403, "info": {"grad_time_ms": 11786.915, "update_time_ms": 91.324, "load_time_ms": 10.103, "num_steps_sampled": 396395, "sample_time_ms": 18738.57, "num_steps_trained": 396395, "default": {"kl": 0.009809385053813457, "entropy": 1.3310524225234985, "vf_loss": 16.38400650024414, "cur_kl_coeff": 0.10000001639127731, "policy_loss": -0.004029402043670416, "vf_explained_var": 0.877215564250946, "cur_lr": 0.0005000000237487257, "total_loss": 16.380956649780273}}, "experiment_id": "20eb8dac8314438080673a95b498a682", "date": "2019-05-23_01-00-45", "time_total_s": 276.4864549636841, "episode_len_mean": 322.12, "episodes_this_iter": 41, "training_iteration": 9, "pid": 27940, "num_metric_batches_dropped": 0, "hostname": "flow-main", "custom_metrics": {"outflow_rate_mean": 1141.9440663820756, "cost2_min": -55.92016877247216, "cost2_mean": -39.81578816372661, "system_level_velocity_max": 18.23363165604772, "cost1_max": 210.32709457954118, "outflow_rate_min": 486.1420725724921, "cost1_min": 24.07205649779885, "system_level_velocity_min": 10.201979428208402, "cost2_max": -15.535161847854802, "system_level_velocity_mean": 14.705212275125382, "outflow_rate_max": 1343.9312351697247, "cost1_mean": 177.67393560701734}, "config": {"kl_coeff": 0.2, "lambda": 0.97, "local_evaluator_tf_session_args": {"inter_op_parallelism_threads": 8, "intra_op_parallelism_threads": 8}, "num_cpus_for_driver": 1, "num_gpus_per_worker": 0, "batch_mode": "truncate_episodes", "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.0,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 5.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 750,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "kl_target": 0.01, "vf_loss_coeff": 1.0, "log_level": "INFO", "sample_async": false, "observation_filter": "MeanStdFilter", "clip_actions": false, "callbacks": {"on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b06da0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b067f0>", "on_train_result": null, "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f0778b06be0>", "on_sample_end": null}, "simple_optimizer": false, "synchronize_filters": true, "preprocessor_pref": "deepmind", "clip_rewards": null, "sample_batch_size": 750, "lr_schedule": null, "model": {"conv_activation": "relu", "fcnet_activation": "tanh", "zero_mean": true, "channel_major": false, "fcnet_hiddens": [128, 64, 32], "custom_options": {}, "squash_to_range": false, "framestack": true, "lstm_cell_size": 256, "custom_preprocessor": null, "dim": 84, "custom_model": null, "use_lstm": false, "max_seq_len": 20, "free_log_std": false, "grayscale": false, "lstm_use_prev_action_reward": false, "conv_filters": null}, "collect_metrics_timeout": 180, "custom_resources_per_worker": {}, "lr": 0.0005, "vf_clip_param": 1000000.0, "use_gae": true, "optimizer": {}, "output_max_file_size": 67108864, "sgd_minibatch_size": 128, "num_sgd_iter": 10, "compress_observations": false, "train_batch_size": 15000, "input": "sampler", "clip_param": 0.3, "num_envs_per_worker": 1, "gamma": 0.99, "output_compress_columns": ["obs", "new_obs"], "monitor": false, "env": "MultiWaveAttenuationMergePOEnv-v0done_[eta1, eta2, eta3]:[1.0, 0.1, 0.0]_t_min:5.0_buf_len: 1", "tf_session_args": {"inter_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "log_device_placement": false}, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "entropy_coeff": 0.0, "vf_share_layers": false, "num_cpus_per_worker": 1, "horizon": 750, "output": null, "straggler_mitigation": false, "num_gpus": 0, "input_evaluation": null, "num_workers": 20}, "episode_reward_max": 480.81524579217864, "episode_reward_mean": 416.39242600368743, "timesteps_this_iter": 41576, "timesteps_since_restore": 396395, "episode_reward_min": 53.803847509669026, "policy_reward_mean": {}, "timestamp": 1558573245, "time_this_iter_s": 27.794495582580566, "node_ip": "10.138.0.2", "iterations_since_restore": 9, "time_since_restore": 276.4864549636841, "done": false, "timesteps_total": 396395}
