{"date": "2019-05-09_11-24-46", "episode_reward_mean": 375.79751483267034, "episode_reward_min": 246.94021032872266, "done": false, "episode_len_mean": 750.0, "timestamp": 1557401086, "training_iteration": 1, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 148974, "pid": 25325, "episodes_this_iter": 30, "info": {"sample_time_ms": 31057.814, "grad_time_ms": 35451.794, "update_time_ms": 465.759, "num_steps_sampled": 148974, "default": {"vf_explained_var": 0.9361279606819153, "cur_kl_coeff": 0.20000003278255463, "vf_loss": 0.5623716711997986, "policy_loss": -0.0015106350183486938, "cur_lr": 0.0005000000237487257, "kl": 0.0029283289331942797, "total_loss": 0.5614467859268188, "entropy": 1.4170962572097778}, "load_time_ms": 115.389, "num_steps_trained": 148974}, "node_ip": "10.138.0.2", "timesteps_since_restore": 148974, "iterations_since_restore": 1, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896bbef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896bb710>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896bb7f0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 483.1888400159763, "time_this_iter_s": 67.39739775657654, "time_total_s": 67.39739775657654, "time_since_restore": 67.39739775657654, "timesteps_this_iter": 148974, "custom_metrics": {"cost1_mean": 135.48912900906322, "system_level_velocity_mean": 4.721250824456434, "cost2_max": -50.413048806134334, "system_level_velocity_min": 3.1531087740949335, "outflow_rate_max": 580.7582545449636, "outflow_rate_min": 223.71764550922052, "system_level_velocity_max": 6.777098012766989, "cost2_min": -100.90531091773404, "cost1_max": 197.13126873291517, "outflow_rate_mean": 395.7675396499886, "cost1_min": 88.2526864561705, "cost2_mean": -72.42841173128343}, "episodes_total": 30}
{"date": "2019-05-09_11-25-57", "episode_reward_mean": 388.8865909687934, "episode_reward_min": 171.18476095105768, "done": false, "episode_len_mean": 750.6153846153846, "timestamp": 1557401157, "training_iteration": 2, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 303732, "pid": 25325, "episodes_this_iter": 48, "info": {"sample_time_ms": 32133.243, "grad_time_ms": 36712.762, "update_time_ms": 237.048, "num_steps_sampled": 303732, "default": {"vf_explained_var": 0.978859543800354, "cur_kl_coeff": 0.10000001639127731, "vf_loss": 0.5438814163208008, "policy_loss": -0.0035585607402026653, "cur_lr": 0.0005000000237487257, "kl": 0.008713115938007832, "total_loss": 0.5411942005157471, "entropy": 1.411658525466919}, "load_time_ms": 98.479, "num_steps_trained": 303732}, "node_ip": "10.138.0.2", "timesteps_since_restore": 303732, "iterations_since_restore": 2, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498a9029e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902390>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a9029b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 535.2621463645681, "time_this_iter_s": 71.58948564529419, "time_total_s": 138.98688340187073, "time_since_restore": 138.98688340187073, "timesteps_this_iter": 154758, "custom_metrics": {"cost1_mean": 145.57781501331203, "system_level_velocity_mean": 5.064262817717258, "cost2_max": -36.03945585410351, "system_level_velocity_min": 2.4605975212700995, "outflow_rate_max": 668.6354879670145, "outflow_rate_min": 217.88673730971757, "system_level_velocity_max": 7.490529630059358, "cost2_min": -106.67284361552908, "cost1_max": 217.75047230968653, "outflow_rate_mean": 438.6152598123309, "cost1_min": 67.6424363378809, "cost2_mean": -71.1364714095064}, "episodes_total": 78}
{"date": "2019-05-09_11-27-04", "episode_reward_mean": 444.0386116684003, "episode_reward_min": 171.18476095105768, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401224, "training_iteration": 3, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 451505, "pid": 25325, "episodes_this_iter": 57, "info": {"sample_time_ms": 32349.168, "grad_time_ms": 35811.693, "update_time_ms": 160.626, "num_steps_sampled": 451505, "default": {"vf_explained_var": 0.9784626364707947, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 0.9701513648033142, "policy_loss": -0.006663152016699314, "cur_lr": 0.0005000000237487257, "kl": 0.015271905809640884, "total_loss": 0.9650153517723083, "entropy": 1.407338261604309}, "load_time_ms": 89.48, "num_steps_trained": 451505}, "node_ip": "10.138.0.2", "timesteps_since_restore": 451505, "iterations_since_restore": 3, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6048>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6438>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 619.7011414406317, "time_this_iter_s": 67.14120054244995, "time_total_s": 206.12808394432068, "time_since_restore": 206.12808394432068, "timesteps_this_iter": 147773, "custom_metrics": {"cost1_mean": 168.93891827668563, "system_level_velocity_mean": 5.854169256602997, "cost2_max": -45.001265322752054, "system_level_velocity_min": 2.4605975212700995, "outflow_rate_max": 716.0849788207065, "outflow_rate_min": 216.0447958423708, "system_level_velocity_max": 8.13235190766292, "cost2_min": -116.71557128780302, "cost1_max": 237.44416412957776, "outflow_rate_mean": 511.349042070545, "cost1_min": 67.6424363378809, "cost2_mean": -73.90456529788433}, "episodes_total": 135}
{"date": "2019-05-09_11-28-15", "episode_reward_mean": 535.8577872833962, "episode_reward_min": 346.90205310607985, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401295, "training_iteration": 4, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 603037, "pid": 25325, "episodes_this_iter": 54, "info": {"sample_time_ms": 32597.377, "grad_time_ms": 35995.232, "update_time_ms": 123.002, "num_steps_sampled": 603037, "default": {"vf_explained_var": 0.9862052202224731, "cur_kl_coeff": 0.10000001639127731, "vf_loss": 0.957337498664856, "policy_loss": -0.006399719975888729, "cur_lr": 0.0005000000237487257, "kl": 0.016049304977059364, "total_loss": 0.9525427222251892, "entropy": 1.4316462278366089}, "load_time_ms": 75.102, "num_steps_trained": 603037}, "node_ip": "10.138.0.2", "timesteps_since_restore": 603037, "iterations_since_restore": 4, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896ca828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896ca048>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896cada0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 763.1691839627496, "time_this_iter_s": 70.19630718231201, "time_total_s": 276.3243911266327, "time_since_restore": 276.3243911266327, "timesteps_this_iter": 151532, "custom_metrics": {"cost1_mean": 203.67793649554147, "system_level_velocity_mean": 7.020937433564871, "cost2_max": -45.97010964935503, "system_level_velocity_min": 4.199853754412747, "outflow_rate_max": 836.6261038864615, "outflow_rate_min": 383.4051139086148, "system_level_velocity_max": 9.24926720002751, "cost2_min": -116.93033059602527, "cost1_max": 270.05177628007715, "outflow_rate_mean": 613.8855567877815, "cost1_min": 119.24134457069093, "cost2_mean": -83.25284502355971}, "episodes_total": 189}
{"date": "2019-05-09_11-29-23", "episode_reward_mean": 618.1107208922772, "episode_reward_min": 471.8738127968688, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401363, "training_iteration": 5, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 751750, "pid": 25325, "episodes_this_iter": 56, "info": {"sample_time_ms": 32615.845, "grad_time_ms": 35779.75, "update_time_ms": 99.95, "num_steps_sampled": 751750, "default": {"vf_explained_var": 0.9795663356781006, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 1.4553029537200928, "policy_loss": -0.008340360596776009, "cur_lr": 0.0005000000237487257, "kl": 0.019346432760357857, "total_loss": 1.448897123336792, "entropy": 1.3999282121658325}, "load_time_ms": 66.528, "num_steps_trained": 751750}, "node_ip": "10.138.0.2", "timesteps_since_restore": 751750, "iterations_since_restore": 5, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902240>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a9026a0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 842.8701859680077, "time_this_iter_s": 67.93108606338501, "time_total_s": 344.2554771900177, "time_since_restore": 344.2554771900177, "timesteps_this_iter": 148713, "custom_metrics": {"cost1_mean": 231.21512660570522, "system_level_velocity_mean": 7.94980832522917, "cost2_max": -48.70212900607638, "system_level_velocity_min": 5.773100321305226, "outflow_rate_max": 901.6013112679242, "outflow_rate_min": 412.7772129622656, "system_level_velocity_max": 10.015766186011339, "cost2_min": -125.15948195982374, "cost1_max": 293.4792491556104, "outflow_rate_mean": 702.5565244830955, "cost1_min": 167.01717336002045, "cost2_mean": -93.41913867203083}, "episodes_total": 245}
{"date": "2019-05-09_11-30-30", "episode_reward_mean": 672.933577581535, "episode_reward_min": 484.05608018438676, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401430, "training_iteration": 6, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 899370, "pid": 25325, "episodes_this_iter": 56, "info": {"sample_time_ms": 32526.787, "grad_time_ms": 35657.047, "update_time_ms": 84.559, "num_steps_sampled": 899370, "default": {"vf_explained_var": 0.9747189283370972, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 1.7420939207077026, "policy_loss": -0.00826011411845684, "cur_lr": 0.0005000000237487257, "kl": 0.014574102126061916, "total_loss": 1.7352914810180664, "entropy": 1.379534125328064}, "load_time_ms": 67.044, "num_steps_trained": 899370}, "node_ip": "10.138.0.2", "timesteps_since_restore": 899370, "iterations_since_restore": 6, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d64a8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6e48>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 842.8701859680077, "time_this_iter_s": 67.44802665710449, "time_total_s": 411.7035038471222, "time_since_restore": 411.7035038471222, "timesteps_this_iter": 147620, "custom_metrics": {"cost1_mean": 242.02971076886809, "system_level_velocity_mean": 8.300660639798274, "cost2_max": -70.21942584970094, "system_level_velocity_min": 6.2617593589024665, "outflow_rate_max": 901.6013112679242, "outflow_rate_min": 492.9952627825225, "system_level_velocity_max": 10.015766186011339, "cost2_min": -125.15948195982374, "cost1_max": 293.4792491556104, "outflow_rate_mean": 742.0575442281437, "cost1_min": 180.92075522527296, "cost2_mean": -96.26534779341844}, "episodes_total": 301}
{"date": "2019-05-09_11-31-37", "episode_reward_mean": 704.6154509202909, "episode_reward_min": 484.0210346511483, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401497, "training_iteration": 7, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 1045162, "pid": 25325, "episodes_this_iter": 56, "info": {"sample_time_ms": 32322.845, "grad_time_ms": 35622.107, "update_time_ms": 73.732, "num_steps_sampled": 1045162, "default": {"vf_explained_var": 0.9579504728317261, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 2.8538169860839844, "policy_loss": -0.008370624855160713, "cur_lr": 0.0005000000237487257, "kl": 0.014526085928082466, "total_loss": 2.8468992710113525, "entropy": 1.3776201009750366}, "load_time_ms": 66.564, "num_steps_trained": 1045162}, "node_ip": "10.138.0.2", "timesteps_since_restore": 1045162, "iterations_since_restore": 7, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896ca630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896ca8d0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896ca6a0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 848.033517018888, "time_this_iter_s": 66.84607887268066, "time_total_s": 478.54958271980286, "time_since_restore": 478.54958271980286, "timesteps_this_iter": 145792, "custom_metrics": {"cost1_mean": 245.95057491314947, "system_level_velocity_mean": 8.427681915363248, "cost2_max": -70.21942584970094, "system_level_velocity_min": 6.4830025052226325, "outflow_rate_max": 866.6164890355449, "outflow_rate_min": 463.9204163027874, "system_level_velocity_max": 9.871020144601909, "cost2_min": -120.1707224506995, "cost1_max": 289.7561795383267, "outflow_rate_mean": 748.1160080689168, "cost1_min": 186.71432720021832, "cost2_mean": -92.24812579271229}, "episodes_total": 357}
{"date": "2019-05-09_11-32-43", "episode_reward_mean": 711.1132499314448, "episode_reward_min": 484.0210346511483, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401563, "training_iteration": 8, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 1191186, "pid": 25325, "episodes_this_iter": 55, "info": {"sample_time_ms": 32048.445, "grad_time_ms": 35588.059, "update_time_ms": 65.58, "num_steps_sampled": 1191186, "default": {"vf_explained_var": 0.9575045108795166, "cur_kl_coeff": 0.10000001639127731, "vf_loss": 2.934149742126465, "policy_loss": -0.00795950647443533, "cur_lr": 0.0005000000237487257, "kl": 0.01568455807864666, "total_loss": 2.9277586936950684, "entropy": 1.3917369842529297}, "load_time_ms": 66.089, "num_steps_trained": 1191186}, "node_ip": "10.138.0.2", "timesteps_since_restore": 1191186, "iterations_since_restore": 8, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896cafd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902390>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902588>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 860.8523002666108, "time_this_iter_s": 65.78626990318298, "time_total_s": 544.3358526229858, "time_since_restore": 544.3358526229858, "timesteps_this_iter": 146024, "custom_metrics": {"cost1_mean": 243.66019454025002, "system_level_velocity_mean": 8.356501583102038, "cost2_max": -67.89778149660495, "system_level_velocity_min": 6.4830025052226325, "outflow_rate_max": 863.6252904930327, "outflow_rate_min": 463.9204163027874, "system_level_velocity_max": 9.871020144601909, "cost2_min": -114.91721941507694, "cost1_max": 289.7561795383267, "outflow_rate_mean": 731.4380455938591, "cost1_min": 186.71432720021832, "cost2_mean": -88.97330022676749}, "episodes_total": 412}
{"date": "2019-05-09_11-33-50", "episode_reward_mean": 727.8702999469522, "episode_reward_min": 543.8876006788412, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401630, "training_iteration": 9, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 1339466, "pid": 25325, "episodes_this_iter": 55, "info": {"sample_time_ms": 31796.673, "grad_time_ms": 35752.565, "update_time_ms": 59.248, "num_steps_sampled": 1339466, "default": {"vf_explained_var": 0.9512300491333008, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 3.340101480484009, "policy_loss": -0.0077888574451208115, "cur_lr": 0.0005000000237487257, "kl": 0.016589736565947533, "total_loss": 3.3339712619781494, "entropy": 1.3957551717758179}, "load_time_ms": 65.177, "num_steps_trained": 1339466}, "node_ip": "10.138.0.2", "timesteps_since_restore": 1339466, "iterations_since_restore": 9, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6550>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6390>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 860.8523002666108, "time_this_iter_s": 67.14761972427368, "time_total_s": 611.4834723472595, "time_since_restore": 611.4834723472595, "timesteps_this_iter": 148280, "custom_metrics": {"cost1_mean": 244.98055057398878, "system_level_velocity_mean": 8.40705356210496, "cost2_max": -67.89778149660495, "system_level_velocity_min": 6.751514383860147, "outflow_rate_max": 863.6252904930327, "outflow_rate_min": 546.1510176351525, "system_level_velocity_max": 9.797034436937295, "cost2_min": -116.2070926444524, "cost1_max": 287.2339341774296, "outflow_rate_mean": 731.634224349754, "cost1_min": 194.76573765417098, "cost2_mean": -90.90178015393244}, "episodes_total": 467}
{"date": "2019-05-09_11-34-56", "episode_reward_mean": 739.6595669409298, "episode_reward_min": 597.3101030020645, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401696, "training_iteration": 10, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 1485907, "pid": 25325, "episodes_this_iter": 55, "info": {"sample_time_ms": 31576.704, "grad_time_ms": 35799.372, "update_time_ms": 54.339, "num_steps_sampled": 1485907, "default": {"vf_explained_var": 0.9538499712944031, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 3.1992058753967285, "policy_loss": -0.009104788303375244, "cur_lr": 0.0005000000237487257, "kl": 0.01770835556089878, "total_loss": 3.1918718814849854, "entropy": 1.3929940462112427}, "load_time_ms": 62.096, "num_steps_trained": 1485907}, "node_ip": "10.138.0.2", "timesteps_since_restore": 1485907, "iterations_since_restore": 10, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dce80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5b70>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5cf8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 822.3118035720058, "time_this_iter_s": 66.12138962745667, "time_total_s": 677.6048619747162, "time_since_restore": 677.6048619747162, "timesteps_this_iter": 146441, "custom_metrics": {"cost1_mean": 248.2313100386147, "system_level_velocity_mean": 8.528504496690521, "cost2_max": -75.03983075599834, "system_level_velocity_min": 7.146258672176292, "outflow_rate_max": 813.3422096792635, "outflow_rate_min": 570.4971702854089, "system_level_velocity_max": 9.189765578388329, "cost2_min": -116.2070926444524, "cost1_max": 268.5313402088033, "outflow_rate_mean": 742.143759345844, "cost1_min": 206.58018573742623, "cost2_mean": -95.66095351859596}, "episodes_total": 522}
{"date": "2019-05-09_11-36-04", "episode_reward_mean": 758.4709534983286, "episode_reward_min": 597.3101030020645, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401764, "training_iteration": 11, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 1633262, "pid": 25325, "episodes_this_iter": 56, "info": {"sample_time_ms": 31528.177, "grad_time_ms": 35963.764, "update_time_ms": 8.761, "num_steps_sampled": 1633262, "default": {"vf_explained_var": 0.9503289461135864, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 3.4294168949127197, "policy_loss": -0.009050524793565273, "cur_lr": 0.0005000000237487257, "kl": 0.01690172404050827, "total_loss": 3.4220566749572754, "entropy": 1.3869810104370117}, "load_time_ms": 56.501, "num_steps_trained": 1633262}, "node_ip": "10.138.0.2", "timesteps_since_restore": 1633262, "iterations_since_restore": 11, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc6a0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dccc0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 822.3118035720058, "time_this_iter_s": 67.97373676300049, "time_total_s": 745.5785987377167, "time_since_restore": 745.5785987377167, "timesteps_this_iter": 147355, "custom_metrics": {"cost1_mean": 256.4887302108087, "system_level_velocity_mean": 8.812583439902014, "cost2_max": -80.4769778243416, "system_level_velocity_min": 7.1877787380733595, "outflow_rate_max": 819.1633392915937, "outflow_rate_min": 623.8498967625594, "system_level_velocity_max": 9.296514093669103, "cost2_min": -114.55035628048908, "cost1_max": 270.6655795712033, "outflow_rate_mean": 770.8913169490853, "cost1_min": 206.93773262987196, "cost2_mean": -97.75766562147977}, "episodes_total": 578}
{"date": "2019-05-09_11-37-10", "episode_reward_mean": 779.1012054925976, "episode_reward_min": 715.5703730842938, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401830, "training_iteration": 12, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 1778225, "pid": 25325, "episodes_this_iter": 56, "info": {"sample_time_ms": 31334.394, "grad_time_ms": 35607.155, "update_time_ms": 8.914, "num_steps_sampled": 1778225, "default": {"vf_explained_var": 0.9415138959884644, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 3.88169264793396, "policy_loss": -0.009077855385839939, "cur_lr": 0.0005000000237487257, "kl": 0.016922438517212868, "total_loss": 3.874307155609131, "entropy": 1.3720449209213257}, "load_time_ms": 54.52, "num_steps_trained": 1778225}, "node_ip": "10.138.0.2", "timesteps_since_restore": 1778225, "iterations_since_restore": 12, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8eafd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8ea898>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8eaa20>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 813.6315706040543, "time_this_iter_s": 66.03563165664673, "time_total_s": 811.6142303943634, "time_since_restore": 811.6142303943634, "timesteps_this_iter": 144963, "custom_metrics": {"cost1_mean": 262.37481879178466, "system_level_velocity_mean": 9.004779163278371, "cost2_max": -81.0350880310294, "system_level_velocity_min": 8.469844620656167, "outflow_rate_max": 835.413065536428, "outflow_rate_min": 733.0061832474032, "system_level_velocity_max": 9.469759935536175, "cost2_min": -116.65507961440554, "cost1_max": 276.1478277860468, "outflow_rate_mean": 788.2629003582763, "cost1_min": 245.476235223796, "cost2_mean": -97.4660214555077}, "episodes_total": 634}
{"date": "2019-05-09_11-38-18", "episode_reward_mean": 791.6305899734126, "episode_reward_min": 726.802474073505, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401898, "training_iteration": 13, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 1922046, "pid": 25325, "episodes_this_iter": 56, "info": {"sample_time_ms": 31285.704, "grad_time_ms": 35691.711, "update_time_ms": 8.944, "num_steps_sampled": 1922046, "default": {"vf_explained_var": 0.9375659823417664, "cur_kl_coeff": 0.10000001639127731, "vf_loss": 4.3066887855529785, "policy_loss": -0.01016327552497387, "cur_lr": 0.0005000000237487257, "kl": 0.01811671443283558, "total_loss": 4.298337459564209, "entropy": 1.3725208044052124}, "load_time_ms": 53.206, "num_steps_trained": 1922046}, "node_ip": "10.138.0.2", "timesteps_since_restore": 1922046, "iterations_since_restore": 13, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c54e0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5b38>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 843.8243097685954, "time_this_iter_s": 67.48726010322571, "time_total_s": 879.1014904975891, "time_since_restore": 879.1014904975891, "timesteps_this_iter": 143821, "custom_metrics": {"cost1_mean": 264.81828481202535, "system_level_velocity_mean": 9.08194330194903, "cost2_max": -78.39699815993418, "system_level_velocity_min": 8.565628608089268, "outflow_rate_max": 850.2348810477582, "outflow_rate_min": 736.214908904735, "system_level_velocity_max": 9.645308676593745, "cost2_min": -115.8915741515251, "cost1_max": 283.2409330324625, "outflow_rate_mean": 793.985979152778, "cost1_min": 249.78208474196634, "cost2_mean": -94.23048748300569}, "episodes_total": 690}
{"date": "2019-05-09_11-39-25", "episode_reward_mean": 801.6659717846279, "episode_reward_min": 761.4409507991492, "done": false, "episode_len_mean": 751.0, "timestamp": 1557401965, "training_iteration": 14, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 2063598, "pid": 25325, "episodes_this_iter": 56, "info": {"sample_time_ms": 31248.862, "grad_time_ms": 35382.256, "update_time_ms": 8.868, "num_steps_sampled": 2063598, "default": {"vf_explained_var": 0.9405868649482727, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 4.4014668464660645, "policy_loss": -0.009983247146010399, "cur_lr": 0.0005000000237487257, "kl": 0.017523150891065598, "total_loss": 4.393235683441162, "entropy": 1.357912540435791}, "load_time_ms": 56.124, "num_steps_trained": 2063598}, "node_ip": "10.138.0.2", "timesteps_since_restore": 2063598, "iterations_since_restore": 14, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcc18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcb38>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc2e8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 888.297366539523, "time_this_iter_s": 66.79366731643677, "time_total_s": 945.8951578140259, "time_since_restore": 945.8951578140259, "timesteps_this_iter": 141552, "custom_metrics": {"cost1_mean": 268.19678485262074, "system_level_velocity_mean": 9.197366305859395, "cost2_max": -76.57175619519997, "system_level_velocity_min": 8.565628608089268, "outflow_rate_max": 871.9929025866576, "outflow_rate_min": 737.1360152825224, "system_level_velocity_max": 10.285387800567689, "cost2_min": -113.0266847559349, "cost1_max": 300.15087340654287, "outflow_rate_mean": 802.4355996585062, "cost1_min": 249.78208474196634, "cost2_mean": -92.72158503556032}, "episodes_total": 746}
{"date": "2019-05-09_11-40-31", "episode_reward_mean": 818.412965415625, "episode_reward_min": 756.6887711334499, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402031, "training_iteration": 15, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 2205115, "pid": 25325, "episodes_this_iter": 57, "info": {"sample_time_ms": 31347.758, "grad_time_ms": 35115.156, "update_time_ms": 9.233, "num_steps_sampled": 2205115, "default": {"vf_explained_var": 0.9385837316513062, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 4.770297050476074, "policy_loss": -0.010397412814199924, "cur_lr": 0.0005000000237487257, "kl": 0.01928720250725746, "total_loss": 4.761828422546387, "entropy": 1.3409284353256226}, "load_time_ms": 57.176, "num_steps_trained": 2205115}, "node_ip": "10.138.0.2", "timesteps_since_restore": 2205115, "iterations_since_restore": 15, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c94e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c50>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9550>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 891.7803421368073, "time_this_iter_s": 66.20794558525085, "time_total_s": 1012.1031033992767, "time_since_restore": 1012.1031033992767, "timesteps_this_iter": 141517, "custom_metrics": {"cost1_mean": 275.56289213679304, "system_level_velocity_mean": 9.44716347931376, "cost2_max": -76.57175619519997, "system_level_velocity_min": 8.715372334345084, "outflow_rate_max": 926.2608090764774, "outflow_rate_min": 741.2638527985732, "system_level_velocity_max": 10.620711055766948, "cost2_min": -113.0266847559349, "cost1_max": 311.87563912905, "outflow_rate_mean": 823.9395526901484, "cost1_min": 255.0183553085229, "cost2_mean": -94.78540562369781}, "episodes_total": 803}
{"date": "2019-05-09_11-41-38", "episode_reward_mean": 837.122189926324, "episode_reward_min": 747.9616956518743, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402098, "training_iteration": 16, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 2345718, "pid": 25325, "episodes_this_iter": 57, "info": {"sample_time_ms": 31727.594, "grad_time_ms": 34710.603, "update_time_ms": 9.267, "num_steps_sampled": 2345718, "default": {"vf_explained_var": 0.9548068642616272, "cur_kl_coeff": 0.10000000894069672, "vf_loss": 4.127972602844238, "policy_loss": -0.012302704155445099, "cur_lr": 0.0005000000237487257, "kl": 0.021189721301198006, "total_loss": 4.117788791656494, "entropy": 1.3431804180145264}, "load_time_ms": 55.704, "num_steps_trained": 2345718}, "node_ip": "10.138.0.2", "timesteps_since_restore": 2345718, "iterations_since_restore": 16, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8ea710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8ea748>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8eaac8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 918.4834271413041, "time_this_iter_s": 67.17345547676086, "time_total_s": 1079.2765588760376, "time_since_restore": 1079.2765588760376, "timesteps_this_iter": 140603, "custom_metrics": {"cost1_mean": 285.4513053862104, "system_level_velocity_mean": 9.780101680388244, "cost2_max": -80.37392366772973, "system_level_velocity_min": 8.77604747211341, "outflow_rate_max": 936.8475053452477, "outflow_rate_min": 741.2638527985732, "system_level_velocity_max": 10.843611414847608, "cost2_min": -115.25043917654018, "cost1_max": 317.5597887431595, "outflow_rate_mean": 853.2792234069965, "cost1_min": 255.0183553085229, "cost2_mean": -99.40130030436498}, "episodes_total": 860}
{"date": "2019-05-09_11-42-45", "episode_reward_mean": 841.1590619865269, "episode_reward_min": 717.9027308833714, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402165, "training_iteration": 17, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 2487447, "pid": 25325, "episodes_this_iter": 58, "info": {"sample_time_ms": 32042.498, "grad_time_ms": 34363.05, "update_time_ms": 9.118, "num_steps_sampled": 2487447, "default": {"vf_explained_var": 0.9530848860740662, "cur_kl_coeff": 0.14999999105930328, "vf_loss": 4.734642505645752, "policy_loss": -0.012016911059617996, "cur_lr": 0.0005000000237487257, "kl": 0.018011687323451042, "total_loss": 4.725327491760254, "entropy": 1.3401381969451904}, "load_time_ms": 54.944, "num_steps_trained": 2487447}, "node_ip": "10.138.0.2", "timesteps_since_restore": 2487447, "iterations_since_restore": 17, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcb38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc940>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcf98>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 949.4537030080636, "time_this_iter_s": 66.47029209136963, "time_total_s": 1145.7468509674072, "time_since_restore": 1145.7468509674072, "timesteps_this_iter": 141729, "custom_metrics": {"cost1_mean": 292.16538999016126, "system_level_velocity_mean": 10.018735776390354, "cost2_max": -81.35883702639694, "system_level_velocity_min": 8.788694694638977, "outflow_rate_max": 961.2988378942695, "outflow_rate_min": 783.736232025034, "system_level_velocity_max": 11.177733082078419, "cost2_min": -119.55933259389039, "cost1_max": 327.3343623996028, "outflow_rate_mean": 872.620523074203, "cost1_min": 254.55474916932457, "cost2_mean": -101.23709733382606}, "episodes_total": 918}
{"date": "2019-05-09_11-43-49", "episode_reward_mean": 835.2576082049371, "episode_reward_min": 706.6106701293346, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402229, "training_iteration": 18, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 2627929, "pid": 25325, "episodes_this_iter": 58, "info": {"sample_time_ms": 32358.897, "grad_time_ms": 33861.519, "update_time_ms": 9.227, "num_steps_sampled": 2627929, "default": {"vf_explained_var": 0.9463405609130859, "cur_kl_coeff": 0.14999999105930328, "vf_loss": 5.063460826873779, "policy_loss": -0.014175808057188988, "cur_lr": 0.0005000000237487257, "kl": 0.018920721486210823, "total_loss": 5.052123069763184, "entropy": 1.322515606880188}, "load_time_ms": 51.99, "num_steps_trained": 2627929}, "node_ip": "10.138.0.2", "timesteps_since_restore": 2627929, "iterations_since_restore": 18, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c90b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c88>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9208>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 949.4537030080636, "time_this_iter_s": 63.886032581329346, "time_total_s": 1209.6328835487366, "time_since_restore": 1209.6328835487366, "timesteps_this_iter": 140482, "custom_metrics": {"cost1_mean": 293.491635313705, "system_level_velocity_mean": 10.075992205128143, "cost2_max": -80.65226834289832, "system_level_velocity_min": 8.788694694638977, "outflow_rate_max": 961.2988378942695, "outflow_rate_min": 783.736232025034, "system_level_velocity_max": 11.177733082078419, "cost2_min": -117.15361987230534, "cost1_max": 327.3343623996028, "outflow_rate_mean": 876.1252337997116, "cost1_min": 254.55474916932457, "cost2_mean": -100.1267793898701}, "episodes_total": 976}
{"date": "2019-05-09_11-44-51", "episode_reward_mean": 844.7307583676368, "episode_reward_min": 739.1730739217822, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402291, "training_iteration": 19, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 2766571, "pid": 25325, "episodes_this_iter": 58, "info": {"sample_time_ms": 32587.419, "grad_time_ms": 33114.646, "update_time_ms": 9.09, "num_steps_sampled": 2766571, "default": {"vf_explained_var": 0.9364835619926453, "cur_kl_coeff": 0.1499999761581421, "vf_loss": 6.005469799041748, "policy_loss": -0.013630286790430546, "cur_lr": 0.0005000000237487257, "kl": 0.020039835944771767, "total_loss": 5.994845390319824, "entropy": 1.3149889707565308}, "load_time_ms": 49.19, "num_steps_trained": 2766571}, "node_ip": "10.138.0.2", "timesteps_since_restore": 2766571, "iterations_since_restore": 19, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6588>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d65f8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 938.8976626055041, "time_this_iter_s": 61.94878816604614, "time_total_s": 1271.5816717147827, "time_since_restore": 1271.5816717147827, "timesteps_this_iter": 138642, "custom_metrics": {"cost1_mean": 295.24708030921397, "system_level_velocity_mean": 10.129509492181095, "cost2_max": -84.31441154729637, "system_level_velocity_min": 9.006210325564236, "outflow_rate_max": 945.6073563264414, "outflow_rate_min": 789.8930638926315, "system_level_velocity_max": 10.942456080500852, "cost2_min": -115.95981631299216, "cost1_max": 320.6331197176155, "outflow_rate_mean": 878.8820609531131, "cost1_min": 261.461859702372, "cost2_mean": -100.37735818887373}, "episodes_total": 1034}
{"date": "2019-05-09_11-45-55", "episode_reward_mean": 846.0489625057951, "episode_reward_min": 739.1730739217822, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402355, "training_iteration": 20, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 2904492, "pid": 25325, "episodes_this_iter": 58, "info": {"sample_time_ms": 32776.483, "grad_time_ms": 32778.03, "update_time_ms": 9.03, "num_steps_sampled": 2904492, "default": {"vf_explained_var": 0.9321690201759338, "cur_kl_coeff": 0.22500000894069672, "vf_loss": 6.467329025268555, "policy_loss": -0.01335135567933321, "cur_lr": 0.0005000000237487257, "kl": 0.016314037144184113, "total_loss": 6.457648754119873, "entropy": 1.3083209991455078}, "load_time_ms": 51.815, "num_steps_trained": 2904492}, "node_ip": "10.138.0.2", "timesteps_since_restore": 2904492, "iterations_since_restore": 20, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcba8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc048>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 932.794910655076, "time_this_iter_s": 64.63413763046265, "time_total_s": 1336.2158093452454, "time_since_restore": 1336.2158093452454, "timesteps_this_iter": 137921, "custom_metrics": {"cost1_mean": 294.94569988155195, "system_level_velocity_mean": 10.117064136855243, "cost2_max": -84.66219298802639, "system_level_velocity_min": 9.087255155632104, "outflow_rate_max": 955.1702534671228, "outflow_rate_min": 783.4060992306582, "system_level_velocity_max": 11.048431892798744, "cost2_min": -115.3828794515312, "cost1_max": 322.83165394820514, "outflow_rate_mean": 877.3605284939426, "cost1_min": 265.28442554360237, "cost2_mean": -100.58384841347572}, "episodes_total": 1092}
{"date": "2019-05-09_11-46-58", "episode_reward_mean": 847.3126955683671, "episode_reward_min": 731.8926579472503, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402418, "training_iteration": 21, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3042567, "pid": 25325, "episodes_this_iter": 59, "info": {"sample_time_ms": 32877.223, "grad_time_ms": 32153.166, "update_time_ms": 8.815, "num_steps_sampled": 3042567, "default": {"vf_explained_var": 0.9400400519371033, "cur_kl_coeff": 0.2250000238418579, "vf_loss": 5.918814182281494, "policy_loss": -0.013832014054059982, "cur_lr": 0.0005000000237487257, "kl": 0.0178108811378479, "total_loss": 5.9089884757995605, "entropy": 1.3022838830947876}, "load_time_ms": 51.792, "num_steps_trained": 3042567}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3042567, "iterations_since_restore": 21, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9208>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9518>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 932.794910655076, "time_this_iter_s": 62.71375489234924, "time_total_s": 1398.9295642375946, "time_since_restore": 1398.9295642375946, "timesteps_this_iter": 138075, "custom_metrics": {"cost1_mean": 297.6143997549423, "system_level_velocity_mean": 10.216680884419931, "cost2_max": -79.97858518356716, "system_level_velocity_min": 8.851772017047557, "outflow_rate_max": 949.3646026089359, "outflow_rate_min": 765.767940102423, "system_level_velocity_max": 11.02504250002745, "cost2_min": -115.50921471898837, "cost1_max": 321.66789880295164, "outflow_rate_mean": 883.325489922157, "cost1_min": 257.4721758378507, "cost2_mean": -100.44676266011038}, "episodes_total": 1151}
{"date": "2019-05-09_11-48-00", "episode_reward_mean": 853.8307237128313, "episode_reward_min": 719.3814453661707, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402480, "training_iteration": 22, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3179470, "pid": 25325, "episodes_this_iter": 59, "info": {"sample_time_ms": 32762.731, "grad_time_ms": 31821.349, "update_time_ms": 8.638, "num_steps_sampled": 3179470, "default": {"vf_explained_var": 0.9283578395843506, "cur_kl_coeff": 0.22499999403953552, "vf_loss": 7.193720817565918, "policy_loss": -0.01328524574637413, "cur_lr": 0.0005000000237487257, "kl": 0.016860181465744972, "total_loss": 7.184228897094727, "entropy": 1.2929714918136597}, "load_time_ms": 51.067, "num_steps_trained": 3179470}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3179470, "iterations_since_restore": 22, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8ea0f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8ea710>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8eaa90>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 954.3034725117357, "time_this_iter_s": 61.487390995025635, "time_total_s": 1460.4169552326202, "time_since_restore": 1460.4169552326202, "timesteps_this_iter": 136903, "custom_metrics": {"cost1_mean": 302.972109706994, "system_level_velocity_mean": 10.405008363129605, "cost2_max": -79.97858518356716, "system_level_velocity_min": 8.851772017047557, "outflow_rate_max": 955.0773477032003, "outflow_rate_min": 765.767940102423, "system_level_velocity_max": 11.298811840002259, "cost2_min": -118.0013150168181, "cost1_max": 330.0609862005107, "outflow_rate_mean": 894.3320540803991, "cost1_min": 257.4721758378507, "cost2_mean": -101.25870280184544}, "episodes_total": 1210}
{"date": "2019-05-09_11-49-01", "episode_reward_mean": 855.4830397944468, "episode_reward_min": 719.3814453661707, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402541, "training_iteration": 23, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3316263, "pid": 25325, "episodes_this_iter": 59, "info": {"sample_time_ms": 32459.966, "grad_time_ms": 31538.852, "update_time_ms": 8.599, "num_steps_sampled": 3316263, "default": {"vf_explained_var": 0.9363630414009094, "cur_kl_coeff": 0.22499999403953552, "vf_loss": 6.5635762214660645, "policy_loss": -0.013664445839822292, "cur_lr": 0.0005000000237487257, "kl": 0.016969623044133186, "total_loss": 6.553730010986328, "entropy": 1.2908488512039185}, "load_time_ms": 48.702, "num_steps_trained": 3316263}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3316263, "iterations_since_restore": 23, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcd30>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc400>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 954.3034725117357, "time_this_iter_s": 61.54556369781494, "time_total_s": 1521.9625189304352, "time_since_restore": 1521.9625189304352, "timesteps_this_iter": 136793, "custom_metrics": {"cost1_mean": 305.1251622851083, "system_level_velocity_mean": 10.485695339881335, "cost2_max": -76.62578256580258, "system_level_velocity_min": 8.759171746649844, "outflow_rate_max": 955.0773477032003, "outflow_rate_min": 773.5176653348424, "system_level_velocity_max": 11.298811840002259, "cost2_min": -118.0013150168181, "cost1_max": 330.0609862005107, "outflow_rate_mean": 897.3350744665844, "cost1_min": 255.4857652885461, "cost2_mean": -101.13115225155676}, "episodes_total": 1269}
{"date": "2019-05-09_11-50-02", "episode_reward_mean": 862.2929185582885, "episode_reward_min": 750.5386255284427, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402602, "training_iteration": 24, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3449804, "pid": 25325, "episodes_this_iter": 59, "info": {"sample_time_ms": 31965.642, "grad_time_ms": 31419.983, "update_time_ms": 8.376, "num_steps_sampled": 3449804, "default": {"vf_explained_var": 0.9298522472381592, "cur_kl_coeff": 0.22499997913837433, "vf_loss": 7.188886642456055, "policy_loss": -0.013705980964004993, "cur_lr": 0.0005000000237487257, "kl": 0.017896387726068497, "total_loss": 7.1792073249816895, "entropy": 1.2594059705734253}, "load_time_ms": 47.773, "num_steps_trained": 3449804}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3449804, "iterations_since_restore": 24, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8eaa20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a8eac50>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a95d898>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 949.8452592709541, "time_this_iter_s": 60.55712914466858, "time_total_s": 1582.5196480751038, "time_since_restore": 1582.5196480751038, "timesteps_this_iter": 133541, "custom_metrics": {"cost1_mean": 309.0040610696158, "system_level_velocity_mean": 10.62150684164259, "cost2_max": -76.62578256580258, "system_level_velocity_min": 8.759171746649844, "outflow_rate_max": 991.6799885639323, "outflow_rate_min": 773.5176653348424, "system_level_velocity_max": 11.606828515833175, "cost2_min": -121.09023200683086, "cost1_max": 339.7773011818204, "outflow_rate_mean": 909.0629892413058, "cost1_min": 255.4857652885461, "cost2_mean": -102.37921153754829}, "episodes_total": 1328}
{"date": "2019-05-09_11-51-03", "episode_reward_mean": 873.1814856818171, "episode_reward_min": 761.8814853894722, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402663, "training_iteration": 25, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3584138, "pid": 25325, "episodes_this_iter": 60, "info": {"sample_time_ms": 31376.621, "grad_time_ms": 31485.647, "update_time_ms": 7.901, "num_steps_sampled": 3584138, "default": {"vf_explained_var": 0.925155520439148, "cur_kl_coeff": 0.22499997913837433, "vf_loss": 7.997987270355225, "policy_loss": -0.013899064622819424, "cur_lr": 0.0005000000237487257, "kl": 0.017279861494898796, "total_loss": 7.98797607421875, "entropy": 1.2556694746017456}, "load_time_ms": 49.861, "num_steps_trained": 3584138}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3584138, "iterations_since_restore": 25, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902f60>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498a902d30>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 970.5508718564347, "time_this_iter_s": 60.98238825798035, "time_total_s": 1643.502036333084, "time_since_restore": 1643.502036333084, "timesteps_this_iter": 134334, "custom_metrics": {"cost1_mean": 315.7823395953287, "system_level_velocity_mean": 10.858075668849681, "cost2_max": -87.42620308349004, "system_level_velocity_min": 9.446030494020121, "outflow_rate_max": 1004.5986070597622, "outflow_rate_min": 806.8142881933778, "system_level_velocity_max": 11.929050988274875, "cost2_min": -121.09023200683086, "cost1_max": 347.8485833173287, "outflow_rate_mean": 923.6213188951812, "cost1_min": 273.5302366658698, "cost2_mean": -102.95012118584783}, "episodes_total": 1388}
{"date": "2019-05-09_11-52-03", "episode_reward_mean": 878.2368808001672, "episode_reward_min": 772.7462874007252, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402723, "training_iteration": 26, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3717884, "pid": 25325, "episodes_this_iter": 60, "info": {"sample_time_ms": 30619.688, "grad_time_ms": 31575.71, "update_time_ms": 7.859, "num_steps_sampled": 3717884, "default": {"vf_explained_var": 0.9232884645462036, "cur_kl_coeff": 0.22499997913837433, "vf_loss": 8.277641296386719, "policy_loss": -0.01433398388326168, "cur_lr": 0.0005000000237487257, "kl": 0.018560897558927536, "total_loss": 8.267483711242676, "entropy": 1.252561330795288}, "load_time_ms": 47.1, "num_steps_trained": 3717884}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3717884, "iterations_since_restore": 26, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dccc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dce10>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dca90>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 982.6662249216669, "time_this_iter_s": 60.461631774902344, "time_total_s": 1703.9636681079865, "time_since_restore": 1703.9636681079865, "timesteps_this_iter": 133746, "custom_metrics": {"cost1_mean": 320.59496809706985, "system_level_velocity_mean": 11.02924308669703, "cost2_max": -86.18697352855122, "system_level_velocity_min": 9.620753558625097, "outflow_rate_max": 1018.8835566614246, "outflow_rate_min": 818.2683238994456, "system_level_velocity_max": 12.181661057307455, "cost2_min": -117.85635725643439, "cost1_max": 355.46846939787486, "outflow_rate_mean": 933.5582440647026, "cost1_min": 280.0449670866698, "cost2_mean": -101.81325016389012}, "episodes_total": 1448}
{"date": "2019-05-09_11-53-03", "episode_reward_mean": 877.2519204736741, "episode_reward_min": 781.014361448534, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402783, "training_iteration": 27, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3851759, "pid": 25325, "episodes_this_iter": 60, "info": {"sample_time_ms": 29956.369, "grad_time_ms": 31570.238, "update_time_ms": 7.903, "num_steps_sampled": 3851759, "default": {"vf_explained_var": 0.9316182136535645, "cur_kl_coeff": 0.22499996423721313, "vf_loss": 7.665138244628906, "policy_loss": -0.014280233532190323, "cur_lr": 0.0005000000237487257, "kl": 0.01774173229932785, "total_loss": 7.654849529266357, "entropy": 1.2587451934814453}, "load_time_ms": 46.531, "num_steps_trained": 3851759}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3851759, "iterations_since_restore": 27, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dce48>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc978>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 982.6662249216669, "time_this_iter_s": 59.806647300720215, "time_total_s": 1763.7703154087067, "time_since_restore": 1763.7703154087067, "timesteps_this_iter": 133875, "custom_metrics": {"cost1_mean": 321.1797403065179, "system_level_velocity_mean": 11.055258494610857, "cost2_max": -86.18697352855122, "system_level_velocity_min": 9.868203249580745, "outflow_rate_max": 1018.8835566614246, "outflow_rate_min": 818.2683238994456, "system_level_velocity_max": 12.181661057307455, "cost2_min": -118.46139556154262, "cost1_max": 355.46846939787486, "outflow_rate_mean": 933.4420722739675, "cost1_min": 285.5817054332192, "cost2_mean": -103.38104071870463}, "episodes_total": 1508}
{"date": "2019-05-09_11-54-03", "episode_reward_mean": 873.4209229819296, "episode_reward_min": 763.4915097324897, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402843, "training_iteration": 28, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 3984488, "pid": 25325, "episodes_this_iter": 60, "info": {"sample_time_ms": 29386.889, "grad_time_ms": 31724.696, "update_time_ms": 7.695, "num_steps_sampled": 3984488, "default": {"vf_explained_var": 0.9265549182891846, "cur_kl_coeff": 0.22499997913837433, "vf_loss": 8.05490779876709, "policy_loss": -0.014514795504510403, "cur_lr": 0.0005000000237487257, "kl": 0.01869879476726055, "total_loss": 8.044600486755371, "entropy": 1.2513738870620728}, "load_time_ms": 46.15, "num_steps_trained": 3984488}, "node_ip": "10.138.0.2", "timesteps_since_restore": 3984488, "iterations_since_restore": 28, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4278>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4080>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 983.6505371628881, "time_this_iter_s": 59.73728322982788, "time_total_s": 1823.5075986385345, "time_since_restore": 1823.5075986385345, "timesteps_this_iter": 132729, "custom_metrics": {"cost1_mean": 321.9057999269529, "system_level_velocity_mean": 11.080748812173226, "cost2_max": -88.6935058848448, "system_level_velocity_min": 10.04129649845405, "outflow_rate_max": 1019.3956852159198, "outflow_rate_min": 825.264745539709, "system_level_velocity_max": 12.279327595362407, "cost2_min": -120.37290750918896, "cost1_max": 358.10680499475257, "outflow_rate_mean": 935.1441580174151, "cost1_min": 289.6353198909922, "cost2_mean": -104.44772004238011}, "episodes_total": 1568}
{"date": "2019-05-09_11-55-13", "episode_reward_mean": 880.4927343361563, "episode_reward_min": 744.9298989346397, "done": false, "episode_len_mean": 751.0, "timestamp": 1557402913, "training_iteration": 29, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 4117929, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 29803.105, "grad_time_ms": 32143.136, "update_time_ms": 7.892, "num_steps_sampled": 4117929, "default": {"vf_explained_var": 0.9248324632644653, "cur_kl_coeff": 0.22499997913837433, "vf_loss": 8.62718677520752, "policy_loss": -0.015613947995007038, "cur_lr": 0.0005000000237487257, "kl": 0.018688440322875977, "total_loss": 8.615777969360352, "entropy": 1.2480366230010986}, "load_time_ms": 48.722, "num_steps_trained": 4117929}, "node_ip": "10.138.0.2", "timesteps_since_restore": 4117929, "iterations_since_restore": 29, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc9b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcdd8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 977.3299605699978, "time_this_iter_s": 70.321209192276, "time_total_s": 1893.8288078308105, "time_since_restore": 1893.8288078308105, "timesteps_this_iter": 133441, "custom_metrics": {"cost1_mean": 326.53890772126493, "system_level_velocity_mean": 11.24305268710384, "cost2_max": -88.6935058848448, "system_level_velocity_min": 9.861426307187388, "outflow_rate_max": 1041.6056321865315, "outflow_rate_min": 808.793260810454, "system_level_velocity_max": 12.348075301831523, "cost2_min": -120.9571862982752, "cost1_max": 359.64235987280375, "outflow_rate_mean": 945.8677775835959, "cost1_min": 283.597038501345, "cost2_mean": -105.23510339721392}, "episodes_total": 1629}
{"date": "2019-05-09_11-56-24", "episode_reward_mean": 876.6364748013638, "episode_reward_min": 68.67083443854693, "done": false, "episode_len_mean": 744.77, "timestamp": 1557402984, "training_iteration": 30, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 4250326, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 30557.849, "grad_time_ms": 31955.333, "update_time_ms": 7.629, "num_steps_sampled": 4250326, "default": {"vf_explained_var": 0.9318805932998657, "cur_kl_coeff": 0.22499996423721313, "vf_loss": 8.084179878234863, "policy_loss": -0.01526412833482027, "cur_lr": 0.0005000000237487257, "kl": 0.01963607408106327, "total_loss": 8.073333740234375, "entropy": 1.2400455474853516}, "load_time_ms": 48.197, "num_steps_trained": 4250326}, "node_ip": "10.138.0.2", "timesteps_since_restore": 4250326, "iterations_since_restore": 30, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5cf8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5b70>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 982.2121535014545, "time_this_iter_s": 70.28873825073242, "time_total_s": 1964.117546081543, "time_since_restore": 1964.117546081543, "timesteps_this_iter": 132397, "custom_metrics": {"cost1_mean": 327.13275375411274, "system_level_velocity_mean": 11.355684080649729, "cost2_max": -43.726988344272314, "system_level_velocity_min": 9.170714376085975, "outflow_rate_max": 1041.6056321865315, "outflow_rate_min": 254.23111705178346, "system_level_velocity_max": 12.396704013572792, "cost2_min": -127.37673715922458, "cost1_max": 361.2852012604716, "outflow_rate_mean": 946.1036339845342, "cost1_min": 49.63448828841379, "cost2_mean": -107.09094022238283}, "episodes_total": 1691}
{"date": "2019-05-09_11-57-35", "episode_reward_mean": 886.056884628195, "episode_reward_min": 732.5742306424579, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403055, "training_iteration": 31, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 4383331, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 31410.035, "grad_time_ms": 31926.495, "update_time_ms": 7.717, "num_steps_sampled": 4383331, "default": {"vf_explained_var": 0.9444072246551514, "cur_kl_coeff": 0.22499996423721313, "vf_loss": 6.987509727478027, "policy_loss": -0.014330956153571606, "cur_lr": 0.0005000000237487257, "kl": 0.019370080903172493, "total_loss": 6.977536201477051, "entropy": 1.2512892484664917}, "load_time_ms": 47.918, "num_steps_trained": 4383331}, "node_ip": "10.138.0.2", "timesteps_since_restore": 4383331, "iterations_since_restore": 31, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e42b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4080>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e40f0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 985.1004349245356, "time_this_iter_s": 70.9337465763092, "time_total_s": 2035.0512926578522, "time_since_restore": 2035.0512926578522, "timesteps_this_iter": 133005, "custom_metrics": {"cost1_mean": 330.81422746710325, "system_level_velocity_mean": 11.401404365937287, "cost2_max": -84.6303284773249, "system_level_velocity_min": 9.170714376085975, "outflow_rate_max": 1039.5881540520513, "outflow_rate_min": 806.1878709143558, "system_level_velocity_max": 12.455797698236152, "cost2_min": -127.37673715922458, "cost1_max": 362.0977667441704, "outflow_rate_mean": 956.229339610085, "cost1_min": 264.96250636437605, "cost2_mean": -107.5749477619429}, "episodes_total": 1752}
{"date": "2019-05-09_11-58-47", "episode_reward_mean": 893.7714724010671, "episode_reward_min": 711.8794960892368, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403127, "training_iteration": 32, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 4516137, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 32550.852, "grad_time_ms": 31809.18, "update_time_ms": 7.591, "num_steps_sampled": 4516137, "default": {"vf_explained_var": 0.9474374651908875, "cur_kl_coeff": 0.22499996423721313, "vf_loss": 6.876723766326904, "policy_loss": -0.015675896778702736, "cur_lr": 0.0005000000237487257, "kl": 0.019164254888892174, "total_loss": 6.865359783172607, "entropy": 1.258386254310608}, "load_time_ms": 47.326, "num_steps_trained": 4516137}, "node_ip": "10.138.0.2", "timesteps_since_restore": 4516137, "iterations_since_restore": 32, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dccc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc208>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dce48>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 994.4193634952782, "time_this_iter_s": 71.72444486618042, "time_total_s": 2106.7757375240326, "time_since_restore": 2106.7757375240326, "timesteps_this_iter": 132806, "custom_metrics": {"cost1_mean": 335.47193107634087, "system_level_velocity_mean": 11.558513606403974, "cost2_max": -86.98659864072067, "system_level_velocity_min": 9.757747208444943, "outflow_rate_max": 1043.1792150086264, "outflow_rate_min": 790.956570110741, "system_level_velocity_max": 12.639150449344829, "cost2_min": -128.97654809293476, "cost1_max": 368.20640777972017, "outflow_rate_mean": 968.8476576716549, "cost1_min": 281.52784579417903, "cost2_mean": -107.77552482722429}, "episodes_total": 1813}
{"date": "2019-05-09_11-59-59", "episode_reward_mean": 889.9932032693227, "episode_reward_min": 711.8794960892368, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403199, "training_iteration": 33, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 4647049, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 33669.547, "grad_time_ms": 31744.396, "update_time_ms": 7.833, "num_steps_sampled": 4647049, "default": {"vf_explained_var": 0.9425329566001892, "cur_kl_coeff": 0.22499996423721313, "vf_loss": 7.705476760864258, "policy_loss": -0.015284130349755287, "cur_lr": 0.0005000000237487257, "kl": 0.020326979458332062, "total_loss": 7.694766044616699, "entropy": 1.2440600395202637}, "load_time_ms": 48.625, "num_steps_trained": 4647049}, "node_ip": "10.138.0.2", "timesteps_since_restore": 4647049, "iterations_since_restore": 33, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc5f8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcd30>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1003.2465854923844, "time_this_iter_s": 72.11577606201172, "time_total_s": 2178.8915135860443, "time_since_restore": 2178.8915135860443, "timesteps_this_iter": 130912, "custom_metrics": {"cost1_mean": 335.49406212208027, "system_level_velocity_mean": 11.561076378427536, "cost2_max": -83.64028736958647, "system_level_velocity_min": 9.407177079785136, "outflow_rate_max": 1041.7502966640673, "outflow_rate_min": 796.7788713998001, "system_level_velocity_max": 12.639150449344829, "cost2_min": -123.86523435641283, "cost1_max": 368.20640777972017, "outflow_rate_mean": 967.9450164828476, "cost1_min": 275.08950651024765, "cost2_mean": -107.20670900410977}, "episodes_total": 1874}
{"date": "2019-05-09_12-01-09", "episode_reward_mean": 896.5998312127293, "episode_reward_min": 762.6859439985861, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403269, "training_iteration": 34, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 4777946, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 34710.083, "grad_time_ms": 31707.966, "update_time_ms": 7.918, "num_steps_sampled": 4777946, "default": {"vf_explained_var": 0.9415135383605957, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 7.763121128082275, "policy_loss": -0.015217660926282406, "cur_lr": 0.0005000000237487257, "kl": 0.015727387741208076, "total_loss": 7.753210544586182, "entropy": 1.226086974143982}, "load_time_ms": 46.804, "num_steps_trained": 4777946}, "node_ip": "10.138.0.2", "timesteps_since_restore": 4777946, "iterations_since_restore": 34, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4438>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e40f0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1005.0848445389912, "time_this_iter_s": 70.596524477005, "time_total_s": 2249.4880380630493, "time_since_restore": 2249.4880380630493, "timesteps_this_iter": 130897, "custom_metrics": {"cost1_mean": 339.4033633293179, "system_level_velocity_mean": 11.697765400707748, "cost2_max": -83.64028736958647, "system_level_velocity_min": 9.407177079785136, "outflow_rate_max": 1049.415923858348, "outflow_rate_min": 814.7278891955131, "system_level_velocity_max": 12.72474024098357, "cost2_min": -122.48296102714508, "cost1_max": 369.43174766975704, "outflow_rate_mean": 978.7880004351141, "cost1_min": 275.08950651024765, "cost2_mean": -108.42037164917546}, "episodes_total": 1935}
{"date": "2019-05-09_12-02-21", "episode_reward_mean": 885.8436780030197, "episode_reward_min": 214.61594499002624, "done": false, "episode_len_mean": 745.71, "timestamp": 1557403341, "training_iteration": 35, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 4909958, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 35729.75, "grad_time_ms": 31726.894, "update_time_ms": 8.356, "num_steps_sampled": 4909958, "default": {"vf_explained_var": 0.9535008072853088, "cur_kl_coeff": 0.33750009536743164, "vf_loss": 6.820009708404541, "policy_loss": -0.014232203364372253, "cur_lr": 0.0005000000237487257, "kl": 0.016140291467308998, "total_loss": 6.811224937438965, "entropy": 1.2690342664718628}, "load_time_ms": 43.554, "num_steps_trained": 4909958}, "node_ip": "10.138.0.2", "timesteps_since_restore": 4909958, "iterations_since_restore": 35, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e47b8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4470>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1005.0848445389912, "time_this_iter_s": 71.34580492973328, "time_total_s": 2320.8338429927826, "time_since_restore": 2320.8338429927826, "timesteps_this_iter": 132012, "custom_metrics": {"cost1_mean": 337.05741326570256, "system_level_velocity_mean": 11.710061686806846, "cost2_max": -56.33138665850385, "system_level_velocity_min": 10.037293590994024, "outflow_rate_max": 1048.142494106151, "outflow_rate_min": 416.9003900749621, "system_level_velocity_max": 13.046437382616922, "cost2_min": -125.45937104869775, "cost1_max": 369.43174766975704, "outflow_rate_mean": 974.7285129635754, "cost1_min": 108.60463711765135, "cost2_mean": -107.58588873401126}, "episodes_total": 1997}
{"date": "2019-05-09_12-03-30", "episode_reward_mean": 876.8498490605059, "episode_reward_min": 214.61594499002624, "done": false, "episode_len_mean": 745.71, "timestamp": 1557403410, "training_iteration": 36, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5041437, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 36523.795, "grad_time_ms": 31847.481, "update_time_ms": 8.603, "num_steps_sampled": 5041437, "default": {"vf_explained_var": 0.9569756388664246, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 6.185246467590332, "policy_loss": -0.01516816858202219, "cur_lr": 0.0005000000237487257, "kl": 0.015332045033574104, "total_loss": 6.175252437591553, "entropy": 1.2540582418441772}, "load_time_ms": 46.394, "num_steps_trained": 5041437}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5041437, "iterations_since_restore": 36, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4550>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4978>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1000.991273265018, "time_this_iter_s": 69.66067218780518, "time_total_s": 2390.4945151805878, "time_since_restore": 2390.4945151805878, "timesteps_this_iter": 131479, "custom_metrics": {"cost1_mean": 335.5350827908895, "system_level_velocity_mean": 11.662811289483258, "cost2_max": -56.33138665850385, "system_level_velocity_min": 10.036806715996585, "outflow_rate_max": 1050.1427063175456, "outflow_rate_min": 416.9003900749621, "system_level_velocity_max": 13.046437382616922, "cost2_min": -122.34616819515364, "cost1_max": 367.35926995629643, "outflow_rate_mean": 972.7518095069576, "cost1_min": 108.60463711765135, "cost2_mean": -106.36933698428858}, "episodes_total": 2058}
{"date": "2019-05-09_12-04-37", "episode_reward_mean": 879.166011924961, "episode_reward_min": 210.2354437502538, "done": false, "episode_len_mean": 745.67, "timestamp": 1557403477, "training_iteration": 37, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5172405, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 37516.559, "grad_time_ms": 31522.747, "update_time_ms": 8.599, "num_steps_sampled": 5172405, "default": {"vf_explained_var": 0.9524834752082825, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 7.095839500427246, "policy_loss": -0.014139183796942234, "cur_lr": 0.0005000000237487257, "kl": 0.015508504584431648, "total_loss": 7.086934566497803, "entropy": 1.2614188194274902}, "load_time_ms": 47.021, "num_steps_trained": 5172405}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5172405, "iterations_since_restore": 37, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4be0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4d30>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1000.991273265018, "time_this_iter_s": 66.48925518989563, "time_total_s": 2456.9837703704834, "time_since_restore": 2456.9837703704834, "timesteps_this_iter": 130968, "custom_metrics": {"cost1_mean": 334.46577036715695, "system_level_velocity_mean": 11.62262224748954, "cost2_max": -56.611482184901575, "system_level_velocity_min": 10.036806715996585, "outflow_rate_max": 1041.6540085362499, "outflow_rate_min": 401.0307383688396, "system_level_velocity_max": 12.714229245328466, "cost2_min": -122.34616819515364, "cost1_max": 367.35926995629643, "outflow_rate_mean": 967.3512169246632, "cost1_min": 105.56332168586178, "cost2_mean": -106.95138136343076}, "episodes_total": 2120}
{"date": "2019-05-09_12-05-46", "episode_reward_mean": 874.2261722901587, "episode_reward_min": 210.2354437502538, "done": false, "episode_len_mean": 745.67, "timestamp": 1557403546, "training_iteration": 38, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5304054, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 38501.325, "grad_time_ms": 31425.149, "update_time_ms": 8.696, "num_steps_sampled": 5304054, "default": {"vf_explained_var": 0.953789234161377, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 6.97625732421875, "policy_loss": -0.014851811341941357, "cur_lr": 0.0005000000237487257, "kl": 0.015925148501992226, "total_loss": 6.966780662536621, "entropy": 1.265065312385559}, "load_time_ms": 50.569, "num_steps_trained": 5304054}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5304054, "iterations_since_restore": 38, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4978>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4dd8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.9255970285241, "time_this_iter_s": 68.67963004112244, "time_total_s": 2525.663400411606, "time_since_restore": 2525.663400411606, "timesteps_this_iter": 131649, "custom_metrics": {"cost1_mean": 333.81270915708234, "system_level_velocity_mean": 11.6004262948163, "cost2_max": -56.611482184901575, "system_level_velocity_min": 9.902384037209385, "outflow_rate_max": 1054.77750349095, "outflow_rate_min": 401.0307383688396, "system_level_velocity_max": 12.761849273315995, "cost2_min": -121.89936668796713, "cost1_max": 371.98887122530897, "outflow_rate_mean": 966.0601145223252, "cost1_min": 105.56332168586178, "cost2_mean": -105.53931234539026}, "episodes_total": 2181}
{"date": "2019-05-09_12-06-57", "episode_reward_mean": 870.0111376934948, "episode_reward_min": 227.13947940869156, "done": false, "episode_len_mean": 745.82, "timestamp": 1557403617, "training_iteration": 39, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5435721, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 38682.237, "grad_time_ms": 31316.316, "update_time_ms": 8.62, "num_steps_sampled": 5435721, "default": {"vf_explained_var": 0.9479081034660339, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 7.725069999694824, "policy_loss": -0.014737807214260101, "cur_lr": 0.0005000000237487257, "kl": 0.015858983621001244, "total_loss": 7.715684413909912, "entropy": 1.2728544473648071}, "load_time_ms": 48.941, "num_steps_trained": 5435721}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5435721, "iterations_since_restore": 39, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4eb8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4550>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.9255970285241, "time_this_iter_s": 71.05085062980652, "time_total_s": 2596.7142510414124, "time_since_restore": 2596.7142510414124, "timesteps_this_iter": 131667, "custom_metrics": {"cost1_mean": 332.2714334489888, "system_level_velocity_mean": 11.55651684032255, "cost2_max": -56.75307805273225, "system_level_velocity_min": 9.872529669849765, "outflow_rate_max": 1058.3454067694868, "outflow_rate_min": 433.5448756686235, "system_level_velocity_max": 13.121512951673097, "cost2_min": -126.0000698644258, "cost1_max": 371.98887122530897, "outflow_rate_mean": 961.412063356353, "cost1_min": 114.77665620090016, "cost2_mean": -105.46058105804838}, "episodes_total": 2243}
{"date": "2019-05-09_12-08-04", "episode_reward_mean": 865.7684173111885, "episode_reward_min": 226.33844540837111, "done": false, "episode_len_mean": 740.64, "timestamp": 1557403684, "training_iteration": 40, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5567271, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 38597.824, "grad_time_ms": 31124.612, "update_time_ms": 8.751, "num_steps_sampled": 5567271, "default": {"vf_explained_var": 0.9443778991699219, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 8.200108528137207, "policy_loss": -0.015290296636521816, "cur_lr": 0.0005000000237487257, "kl": 0.016346504911780357, "total_loss": 8.190335273742676, "entropy": 1.2785292863845825}, "load_time_ms": 48.869, "num_steps_trained": 5567271}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5567271, "iterations_since_restore": 40, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4c18>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4588>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1003.3136055077285, "time_this_iter_s": 67.55154943466187, "time_total_s": 2664.265800476074, "time_since_restore": 2664.265800476074, "timesteps_this_iter": 131550, "custom_metrics": {"cost1_mean": 329.25467359747955, "system_level_velocity_mean": 11.540052611864496, "cost2_max": -56.55110507891918, "system_level_velocity_min": 10.133759129651581, "outflow_rate_max": 1054.631598703621, "outflow_rate_min": 433.5448756686235, "system_level_velocity_max": 13.121512951673097, "cost2_min": -126.0000698644258, "cost1_max": 366.6346070459085, "outflow_rate_mean": 953.2239933025367, "cost1_min": 114.39595074358381, "cost2_mean": -105.47414908578057}, "episodes_total": 2305}
{"date": "2019-05-09_12-09-13", "episode_reward_mean": 864.5304903572286, "episode_reward_min": 754.8808257081554, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403753, "training_iteration": 41, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5699690, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 38407.926, "grad_time_ms": 31052.503, "update_time_ms": 8.762, "num_steps_sampled": 5699690, "default": {"vf_explained_var": 0.9395663738250732, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 8.67219066619873, "policy_loss": -0.015979718416929245, "cur_lr": 0.0005000000237487257, "kl": 0.01645277999341488, "total_loss": 8.661765098571777, "entropy": 1.292176604270935}, "load_time_ms": 48.811, "num_steps_trained": 5699690}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5699690, "iterations_since_restore": 41, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf60>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b2b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 994.0352046690268, "time_this_iter_s": 68.32772135734558, "time_total_s": 2732.59352183342, "time_since_restore": 2732.59352183342, "timesteps_this_iter": 132419, "custom_metrics": {"cost1_mean": 328.3056453152256, "system_level_velocity_mean": 11.32776946426742, "cost2_max": -87.70205213640615, "system_level_velocity_min": 9.581285605931361, "outflow_rate_max": 1044.201155379994, "outflow_rate_min": 810.6637367379573, "system_level_velocity_max": 12.608588875745655, "cost2_min": -121.41837054465176, "cost1_max": 367.5288532623101, "outflow_rate_mean": 950.3318053681548, "cost1_min": 277.66865168792486, "cost2_mean": -104.49472865351379}, "episodes_total": 2366}
{"date": "2019-05-09_12-10-22", "episode_reward_mean": 870.5222153826714, "episode_reward_min": 738.9628980515805, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403822, "training_iteration": 42, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5830615, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 38102.664, "grad_time_ms": 31116.933, "update_time_ms": 8.81, "num_steps_sampled": 5830615, "default": {"vf_explained_var": 0.9416424036026001, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 8.33635425567627, "policy_loss": -0.015724485740065575, "cur_lr": 0.0005000000237487257, "kl": 0.016546661034226418, "total_loss": 8.326212882995605, "entropy": 1.276017189025879}, "load_time_ms": 49.362, "num_steps_trained": 5830615}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5830615, "iterations_since_restore": 42, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4ef0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4ba8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1004.353997390379, "time_this_iter_s": 69.3127851486206, "time_total_s": 2801.9063069820404, "time_since_restore": 2801.9063069820404, "timesteps_this_iter": 130925, "custom_metrics": {"cost1_mean": 329.705084469206, "system_level_velocity_mean": 11.372697416914807, "cost2_max": -85.48036910931813, "system_level_velocity_min": 9.570008041317509, "outflow_rate_max": 1033.728973323508, "outflow_rate_min": 795.040667362001, "system_level_velocity_max": 12.622909722838713, "cost2_min": -121.46258040615272, "cost1_max": 367.6895474717312, "outflow_rate_mean": 952.6118701676162, "cost1_min": 275.25736669709426, "cost2_mean": -105.32095180074923}, "episodes_total": 2427}
{"date": "2019-05-09_12-11-32", "episode_reward_mean": 874.0972050830643, "episode_reward_min": 738.9628980515805, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403892, "training_iteration": 43, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 5961262, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 37963.917, "grad_time_ms": 31017.35, "update_time_ms": 8.801, "num_steps_sampled": 5961262, "default": {"vf_explained_var": 0.9377173185348511, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 8.659396171569824, "policy_loss": -0.015588788315653801, "cur_lr": 0.0005000000237487257, "kl": 0.016149768605828285, "total_loss": 8.64925765991211, "entropy": 1.2795802354812622}, "load_time_ms": 50.835, "num_steps_trained": 5961262}, "node_ip": "10.138.0.2", "timesteps_since_restore": 5961262, "iterations_since_restore": 43, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c94e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c88>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896caf98>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1008.9816941601281, "time_this_iter_s": 69.75923776626587, "time_total_s": 2871.6655447483063, "time_since_restore": 2871.6655447483063, "timesteps_this_iter": 130647, "custom_metrics": {"cost1_mean": 330.4358159171868, "system_level_velocity_mean": 11.393543657281402, "cost2_max": -85.48036910931813, "system_level_velocity_min": 9.570008041317509, "outflow_rate_max": 1042.0931423793922, "outflow_rate_min": 795.040667362001, "system_level_velocity_max": 12.635537905088158, "cost2_min": -127.32088961943259, "cost1_max": 368.1675703526199, "outflow_rate_mean": 953.6489316248133, "cost1_min": 275.25736669709426, "cost2_mean": -105.95089163116019}, "episodes_total": 2488}
{"date": "2019-05-09_12-12-42", "episode_reward_mean": 878.4933187165065, "episode_reward_min": 779.1754823906277, "done": false, "episode_len_mean": 751.0, "timestamp": 1557403962, "training_iteration": 44, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 6093347, "pid": 25325, "episodes_this_iter": 61, "info": {"sample_time_ms": 38089.688, "grad_time_ms": 30807.612, "update_time_ms": 8.745, "num_steps_sampled": 6093347, "default": {"vf_explained_var": 0.9453198909759521, "cur_kl_coeff": 0.33750009536743164, "vf_loss": 8.104293823242188, "policy_loss": -0.01593276485800743, "cur_lr": 0.0005000000237487257, "kl": 0.01651020161807537, "total_loss": 8.093934059143066, "entropy": 1.3103859424591064}, "load_time_ms": 52.863, "num_steps_trained": 6093347}, "node_ip": "10.138.0.2", "timesteps_since_restore": 6093347, "iterations_since_restore": 44, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e42b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4a90>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1008.9816941601281, "time_this_iter_s": 69.7694411277771, "time_total_s": 2941.4349858760834, "time_since_restore": 2941.4349858760834, "timesteps_this_iter": 132085, "custom_metrics": {"cost1_mean": 332.0613570988697, "system_level_velocity_mean": 11.442931553346657, "cost2_max": -90.0793111860036, "system_level_velocity_min": 10.180169308006162, "outflow_rate_max": 1042.0931423793922, "outflow_rate_min": 818.417664012549, "system_level_velocity_max": 12.67777548897673, "cost2_min": -127.32088961943259, "cost1_max": 368.95384234030644, "outflow_rate_mean": 958.3881016327355, "cost1_min": 292.1390558408046, "cost2_mean": -106.53279530451566}, "episodes_total": 2549}
{"date": "2019-05-09_12-13-52", "episode_reward_mean": 881.7557074446879, "episode_reward_min": 779.1754823906277, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404032, "training_iteration": 45, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 6225878, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 38224.219, "grad_time_ms": 30600.429, "update_time_ms": 8.411, "num_steps_sampled": 6225878, "default": {"vf_explained_var": 0.9405880570411682, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 8.385427474975586, "policy_loss": -0.01617533154785633, "cur_lr": 0.0005000000237487257, "kl": 0.01695244386792183, "total_loss": 8.374972343444824, "entropy": 1.2896124124526978}, "load_time_ms": 55.035, "num_steps_trained": 6225878}, "node_ip": "10.138.0.2", "timesteps_since_restore": 6225878, "iterations_since_restore": 45, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b0b8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bcf8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1008.0814442128499, "time_this_iter_s": 70.62230587005615, "time_total_s": 3012.0572917461395, "time_since_restore": 3012.0572917461395, "timesteps_this_iter": 132531, "custom_metrics": {"cost1_mean": 333.52141296672517, "system_level_velocity_mean": 11.488743326424304, "cost2_max": -92.68056929640491, "system_level_velocity_min": 9.909844768279264, "outflow_rate_max": 1043.766559034577, "outflow_rate_min": 836.2086014902803, "system_level_velocity_max": 12.775212160407191, "cost2_min": -125.15548405400102, "cost1_max": 370.9885921048667, "outflow_rate_mean": 961.660578076845, "cost1_min": 288.9060115717848, "cost2_mean": -107.17135382110514}, "episodes_total": 2611}
{"date": "2019-05-09_12-15-02", "episode_reward_mean": 882.4370647941727, "episode_reward_min": 222.175241198114, "done": false, "episode_len_mean": 745.77, "timestamp": 1557404102, "training_iteration": 46, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 6356817, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 38613.476, "grad_time_ms": 30225.003, "update_time_ms": 8.319, "num_steps_sampled": 6356817, "default": {"vf_explained_var": 0.9292517900466919, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 10.376744270324707, "policy_loss": -0.016276361420750618, "cur_lr": 0.0005000000237487257, "kl": 0.016350409016013145, "total_loss": 10.365985870361328, "entropy": 1.2803821563720703}, "load_time_ms": 55.141, "num_steps_trained": 6356817}, "node_ip": "10.138.0.2", "timesteps_since_restore": 6356817, "iterations_since_restore": 46, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b400>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ba90>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1008.0814442128499, "time_this_iter_s": 69.7709231376648, "time_total_s": 3081.8282148838043, "time_since_restore": 3081.8282148838043, "timesteps_this_iter": 130939, "custom_metrics": {"cost1_mean": 332.80715784306807, "system_level_velocity_mean": 11.554023311718714, "cost2_max": -58.17426640389206, "system_level_velocity_min": 9.693620517787439, "outflow_rate_max": 1045.1883650478312, "outflow_rate_min": 424.2179729089269, "system_level_velocity_max": 13.095046476798645, "cost2_min": -124.36138986892023, "cost1_max": 371.2548505923505, "outflow_rate_mean": 958.433042080151, "cost1_min": 112.52782368302086, "cost2_mean": -107.80914164712483}, "episodes_total": 2674}
{"date": "2019-05-09_12-16-11", "episode_reward_mean": 881.9453568173341, "episode_reward_min": 222.175241198114, "done": false, "episode_len_mean": 745.77, "timestamp": 1557404171, "training_iteration": 47, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 6488025, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 38923.044, "grad_time_ms": 30136.294, "update_time_ms": 8.339, "num_steps_sampled": 6488025, "default": {"vf_explained_var": 0.936346173286438, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 9.190532684326172, "policy_loss": -0.016242559999227524, "cur_lr": 0.0005000000237487257, "kl": 0.016744785010814667, "total_loss": 9.17994213104248, "entropy": 1.2884925603866577}, "load_time_ms": 55.222, "num_steps_trained": 6488025}, "node_ip": "10.138.0.2", "timesteps_since_restore": 6488025, "iterations_since_restore": 47, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4eb8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4ef0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 993.4361708953174, "time_this_iter_s": 68.69291114807129, "time_total_s": 3150.5211260318756, "time_since_restore": 3150.5211260318756, "timesteps_this_iter": 131208, "custom_metrics": {"cost1_mean": 335.1257478613983, "system_level_velocity_mean": 11.638363953125115, "cost2_max": -58.17426640389206, "system_level_velocity_min": 10.223505999372254, "outflow_rate_max": 1048.9407342916008, "outflow_rate_min": 424.2179729089269, "system_level_velocity_max": 13.095046476798645, "cost2_min": -125.27814105641767, "cost1_max": 371.2548505923505, "outflow_rate_mean": 965.4080767129941, "cost1_min": 112.52782368302086, "cost2_mean": -108.49192960581213}, "episodes_total": 2736}
{"date": "2019-05-09_12-17-22", "episode_reward_mean": 888.2315360904034, "episode_reward_min": 762.1331726732566, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404242, "training_iteration": 48, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 6617350, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 39191.138, "grad_time_ms": 30071.294, "update_time_ms": 8.402, "num_steps_sampled": 6617350, "default": {"vf_explained_var": 0.9262925982475281, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 11.023898124694824, "policy_loss": -0.015565303154289722, "cur_lr": 0.0005000000237487257, "kl": 0.017230387777090073, "total_loss": 11.01414966583252, "entropy": 1.2823152542114258}, "load_time_ms": 53.929, "num_steps_trained": 6617350}, "node_ip": "10.138.0.2", "timesteps_since_restore": 6617350, "iterations_since_restore": 48, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bcf8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bdd8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1009.1923040437251, "time_this_iter_s": 70.64874124526978, "time_total_s": 3221.1698672771454, "time_since_restore": 3221.1698672771454, "timesteps_this_iter": 129325, "custom_metrics": {"cost1_mean": 338.57786575928037, "system_level_velocity_mean": 11.675161576795396, "cost2_max": -92.43014634470437, "system_level_velocity_min": 9.156464011290593, "outflow_rate_max": 1065.0863875451616, "outflow_rate_min": 805.7011973636041, "system_level_velocity_max": 12.92977601765472, "cost2_min": -125.27814105641767, "cost1_max": 374.0836002588326, "outflow_rate_mean": 970.731808134759, "cost1_min": 266.1548899022624, "cost2_mean": -108.61335575582969}, "episodes_total": 2798}
{"date": "2019-05-09_12-18-31", "episode_reward_mean": 892.423996591507, "episode_reward_min": 762.1331726732566, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404311, "training_iteration": 49, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 6747159, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 39462.981, "grad_time_ms": 29586.475, "update_time_ms": 8.535, "num_steps_sampled": 6747159, "default": {"vf_explained_var": 0.9370937943458557, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 9.779623985290527, "policy_loss": -0.015530670993030071, "cur_lr": 0.0005000000237487257, "kl": 0.016975436359643936, "total_loss": 9.76982307434082, "entropy": 1.2915953397750854}, "load_time_ms": 55.204, "num_steps_trained": 6747159}, "node_ip": "10.138.0.2", "timesteps_since_restore": 6747159, "iterations_since_restore": 49, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b0f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b860>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bc50>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1000.0738387655131, "time_this_iter_s": 68.87685799598694, "time_total_s": 3290.0467252731323, "time_since_restore": 3290.0467252731323, "timesteps_this_iter": 129809, "custom_metrics": {"cost1_mean": 342.08163958885007, "system_level_velocity_mean": 11.803223740206938, "cost2_max": -91.67450159572303, "system_level_velocity_min": 9.156464011290593, "outflow_rate_max": 1065.0863875451616, "outflow_rate_min": 805.7011973636041, "system_level_velocity_max": 13.196013753927822, "cost2_min": -121.40568541090462, "cost1_max": 381.73149509322155, "outflow_rate_mean": 977.9511577638207, "cost1_min": 266.1548899022624, "cost2_mean": -108.20167223471319}, "episodes_total": 2860}
{"date": "2019-05-09_12-19-41", "episode_reward_mean": 881.9750100840197, "episode_reward_min": 742.1409174908026, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404381, "training_iteration": 50, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 6876829, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 39748.709, "grad_time_ms": 29600.739, "update_time_ms": 8.543, "num_steps_sampled": 6876829, "default": {"vf_explained_var": 0.9360248446464539, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 9.93608283996582, "policy_loss": -0.016464661806821823, "cur_lr": 0.0005000000237487257, "kl": 0.017079170793294907, "total_loss": 9.925382614135742, "entropy": 1.2851989269256592}, "load_time_ms": 55.085, "num_steps_trained": 6876829}, "node_ip": "10.138.0.2", "timesteps_since_restore": 6876829, "iterations_since_restore": 50, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ba20>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b9b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 998.5925601782849, "time_this_iter_s": 70.53668594360352, "time_total_s": 3360.583411216736, "time_since_restore": 3360.583411216736, "timesteps_this_iter": 129670, "custom_metrics": {"cost1_mean": 336.8634183023307, "system_level_velocity_mean": 11.629479198325209, "cost2_max": -91.67450159572303, "system_level_velocity_min": 9.810538656680839, "outflow_rate_max": 1055.2131956869787, "outflow_rate_min": 812.7283004219918, "system_level_velocity_max": 12.93954635373256, "cost2_min": -126.63144869928293, "cost1_max": 374.91413049194955, "outflow_rate_mean": 965.9929374465933, "cost1_min": 281.2799053634936, "cost2_mean": -107.6407367015261}, "episodes_total": 2922}
{"date": "2019-05-09_12-20-52", "episode_reward_mean": 891.2022158452486, "episode_reward_min": 753.426140888299, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404452, "training_iteration": 51, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7006170, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 40012.53, "grad_time_ms": 29573.549, "update_time_ms": 8.37, "num_steps_sampled": 7006170, "default": {"vf_explained_var": 0.9416876435279846, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 9.47007942199707, "policy_loss": -0.015986569225788116, "cur_lr": 0.0005000000237487257, "kl": 0.016746601089835167, "total_loss": 9.459744453430176, "entropy": 1.2868123054504395}, "load_time_ms": 54.248, "num_steps_trained": 7006170}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7006170, "iterations_since_restore": 51, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bdd8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598beb8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 999.418096504423, "time_this_iter_s": 70.69844722747803, "time_total_s": 3431.281858444214, "time_since_restore": 3431.281858444214, "timesteps_this_iter": 129341, "custom_metrics": {"cost1_mean": 342.0931680969122, "system_level_velocity_mean": 11.810051005579382, "cost2_max": -92.7987333944492, "system_level_velocity_min": 10.010265972054292, "outflow_rate_max": 1056.1783475168597, "outflow_rate_min": 814.8260504785336, "system_level_velocity_max": 12.895783305804487, "cost2_min": -120.06884114546054, "cost1_max": 373.4162088371961, "outflow_rate_mean": 980.0190212222556, "cost1_min": 286.6221453771099, "cost2_mean": -108.63265140016169}, "episodes_total": 2984}
{"date": "2019-05-09_12-22-03", "episode_reward_mean": 886.1578303101522, "episode_reward_min": 738.8793445207849, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404523, "training_iteration": 52, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7136536, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 40301.278, "grad_time_ms": 29462.542, "update_time_ms": 8.495, "num_steps_sampled": 7136536, "default": {"vf_explained_var": 0.9350773096084595, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 10.293962478637695, "policy_loss": -0.016209430992603302, "cur_lr": 0.0005000000237487257, "kl": 0.016818445175886154, "total_loss": 10.283429145812988, "entropy": 1.2955578565597534}, "load_time_ms": 54.01, "num_steps_trained": 7136536}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7136536, "iterations_since_restore": 52, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b2e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ba90>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bcc0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 987.9554587470425, "time_this_iter_s": 71.1067304611206, "time_total_s": 3502.3885889053345, "time_since_restore": 3502.3885889053345, "timesteps_this_iter": 130366, "custom_metrics": {"cost1_mean": 340.50333737495885, "system_level_velocity_mean": 11.755339872351126, "cost2_max": -92.7987333944492, "system_level_velocity_min": 9.681549068056349, "outflow_rate_max": 1056.1783475168597, "outflow_rate_min": 829.7170589746444, "system_level_velocity_max": 12.895783305804487, "cost2_min": -134.95923541290088, "cost1_max": 373.4162088371961, "outflow_rate_mean": 976.2636546217924, "cost1_min": 279.63120782918725, "cost2_mean": -109.22340067754425}, "episodes_total": 3046}
{"date": "2019-05-09_12-23-14", "episode_reward_mean": 887.6928149112464, "episode_reward_min": 738.8793445207849, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404594, "training_iteration": 53, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7265441, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 40531.59, "grad_time_ms": 29384.985, "update_time_ms": 8.298, "num_steps_sampled": 7265441, "default": {"vf_explained_var": 0.9330886006355286, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 10.46430492401123, "policy_loss": -0.015902817249298096, "cur_lr": 0.0005000000237487257, "kl": 0.016765661537647247, "total_loss": 10.454061508178711, "entropy": 1.271756649017334}, "load_time_ms": 50.406, "num_steps_trained": 7265441}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7265441, "iterations_since_restore": 53, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4710>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4080>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.8487799505295, "time_this_iter_s": 71.21535420417786, "time_total_s": 3573.6039431095123, "time_since_restore": 3573.6039431095123, "timesteps_this_iter": 128905, "custom_metrics": {"cost1_mean": 340.29942875037983, "system_level_velocity_mean": 11.741840615507204, "cost2_max": -92.9157401420124, "system_level_velocity_min": 9.681549068056349, "outflow_rate_max": 1056.7476346366268, "outflow_rate_min": 829.7170589746444, "system_level_velocity_max": 12.858111764235446, "cost2_min": -134.95923541290088, "cost1_max": 372.5288307132944, "outflow_rate_mean": 975.8039138236388, "cost1_min": 279.63120782918725, "cost2_mean": -110.16328145492356}, "episodes_total": 3108}
{"date": "2019-05-09_12-24-25", "episode_reward_mean": 891.1429743083966, "episode_reward_min": 772.9228371807213, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404665, "training_iteration": 54, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7394773, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 40653.302, "grad_time_ms": 29364.198, "update_time_ms": 8.394, "num_steps_sampled": 7394773, "default": {"vf_explained_var": 0.9355814456939697, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 10.50093936920166, "policy_loss": -0.016221823170781136, "cur_lr": 0.0005000000237487257, "kl": 0.01735738106071949, "total_loss": 10.490574836730957, "entropy": 1.282752275466919}, "load_time_ms": 49.663, "num_steps_trained": 7394773}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7394773, "iterations_since_restore": 54, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598be48>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b240>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1011.0610558400352, "time_this_iter_s": 70.79704236984253, "time_total_s": 3644.400985479355, "time_since_restore": 3644.400985479355, "timesteps_this_iter": 129332, "custom_metrics": {"cost1_mean": 341.53560878247083, "system_level_velocity_mean": 11.784287200850857, "cost2_max": -89.4508174502158, "system_level_velocity_min": 10.134431201869102, "outflow_rate_max": 1056.7476346366268, "outflow_rate_min": 839.7784686514626, "system_level_velocity_max": 12.818203473656823, "cost2_min": -122.95108091313418, "cost1_max": 372.5288307132944, "outflow_rate_mean": 977.8364752935548, "cost1_min": 291.1103614401188, "cost2_mean": -109.18209774148902}, "episodes_total": 3170}
{"date": "2019-05-09_12-25-36", "episode_reward_mean": 891.8393833236911, "episode_reward_min": 732.7174069458863, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404736, "training_iteration": 55, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7523420, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 40742.405, "grad_time_ms": 29243.612, "update_time_ms": 8.425, "num_steps_sampled": 7523420, "default": {"vf_explained_var": 0.9402426481246948, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 10.087661743164062, "policy_loss": -0.016444995999336243, "cur_lr": 0.0005000000237487257, "kl": 0.017635473981499672, "total_loss": 10.077167510986328, "entropy": 1.2878694534301758}, "load_time_ms": 49.231, "num_steps_trained": 7523420}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7523420, "iterations_since_restore": 55, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d64e0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf60>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1012.9470032658, "time_this_iter_s": 70.3000955581665, "time_total_s": 3714.7010810375214, "time_since_restore": 3714.7010810375214, "timesteps_this_iter": 128647, "custom_metrics": {"cost1_mean": 343.07622324745665, "system_level_velocity_mean": 11.841300347222298, "cost2_max": -89.4508174502158, "system_level_velocity_min": 10.055852358451906, "outflow_rate_max": 1062.0424260310863, "outflow_rate_min": 809.7780268067648, "system_level_velocity_max": 13.31974890796131, "cost2_min": -121.33888679778669, "cost1_max": 385.6533071300073, "outflow_rate_mean": 980.9178546408801, "cost1_min": 289.16050347151395, "cost2_mean": -107.92639717125024}, "episodes_total": 3232}
{"date": "2019-05-09_12-26-47", "episode_reward_mean": 891.2455032984257, "episode_reward_min": 69.49206731625048, "done": false, "episode_len_mean": 744.77, "timestamp": 1557404807, "training_iteration": 56, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7653172, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 40830.966, "grad_time_ms": 29273.441, "update_time_ms": 8.189, "num_steps_sampled": 7653172, "default": {"vf_explained_var": 0.9320030212402344, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 11.489835739135742, "policy_loss": -0.01680229976773262, "cur_lr": 0.0005000000237487257, "kl": 0.017550423741340637, "total_loss": 11.478955268859863, "entropy": 1.2787063121795654}, "load_time_ms": 48.377, "num_steps_trained": 7653172}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7653172, "iterations_since_restore": 56, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e49e8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e47b8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1012.9470032658, "time_this_iter_s": 70.93568801879883, "time_total_s": 3785.63676905632, "time_since_restore": 3785.63676905632, "timesteps_this_iter": 129752, "custom_metrics": {"cost1_mean": 344.20377936261366, "system_level_velocity_mean": 11.967638234284243, "cost2_max": -48.028298189886904, "system_level_velocity_min": 10.645433996166362, "outflow_rate_max": 1062.0424260310863, "outflow_rate_min": 250.71478868762952, "system_level_velocity_max": 13.31974890796131, "cost2_min": -122.88806833450741, "cost1_max": 385.6533071300073, "outflow_rate_mean": 984.6482537891881, "cost1_min": 50.619516802825146, "cost2_mean": -107.85675103647898}, "episodes_total": 3296}
{"date": "2019-05-09_12-27-58", "episode_reward_mean": 878.1841909037158, "episode_reward_min": 69.49206731625048, "done": false, "episode_len_mean": 739.64, "timestamp": 1557404878, "training_iteration": 57, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7783503, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 40905.719, "grad_time_ms": 29478.917, "update_time_ms": 8.156, "num_steps_sampled": 7783503, "default": {"vf_explained_var": 0.9306578040122986, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 12.069631576538086, "policy_loss": -0.01698782853782177, "cur_lr": 0.0005000000237487257, "kl": 0.017793141305446625, "total_loss": 12.058648109436035, "entropy": 1.296913504600525}, "load_time_ms": 47.516, "num_steps_trained": 7783503}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7783503, "iterations_since_restore": 57, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b710>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b2e8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1000.5267895996466, "time_this_iter_s": 71.48267936706543, "time_total_s": 3857.1194484233856, "time_since_restore": 3857.1194484233856, "timesteps_this_iter": 130331, "custom_metrics": {"cost1_mean": 340.16617272533773, "system_level_velocity_mean": 11.925264433267758, "cost2_max": -48.028298189886904, "system_level_velocity_min": 10.645433996166362, "outflow_rate_max": 1060.9369537070756, "outflow_rate_min": 250.71478868762952, "system_level_velocity_max": 13.263428097177114, "cost2_min": -123.69290791306396, "cost1_max": 378.6974951205185, "outflow_rate_mean": 973.4880704745472, "cost1_min": 50.619516802825146, "cost2_mean": -106.19937591257393}, "episodes_total": 3360}
{"date": "2019-05-09_12-29-09", "episode_reward_mean": 890.8198534958505, "episode_reward_min": 798.008999610478, "done": false, "episode_len_mean": 751.0, "timestamp": 1557404949, "training_iteration": 58, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 7911401, "pid": 25325, "episodes_this_iter": 62, "info": {"sample_time_ms": 40935.456, "grad_time_ms": 29434.859, "update_time_ms": 7.937, "num_steps_sampled": 7911401, "default": {"vf_explained_var": 0.9205468893051147, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 13.14256477355957, "policy_loss": -0.01631871797144413, "cur_lr": 0.0005000000237487257, "kl": 0.017578154802322388, "total_loss": 13.132179260253906, "entropy": 1.2895275354385376}, "load_time_ms": 47.587, "num_steps_trained": 7911401}, "node_ip": "10.138.0.2", "timesteps_since_restore": 7911401, "iterations_since_restore": 58, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598be10>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c55c0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 995.304216908784, "time_this_iter_s": 70.52770042419434, "time_total_s": 3927.64714884758, "time_since_restore": 3927.64714884758, "timesteps_this_iter": 127898, "custom_metrics": {"cost1_mean": 343.7576457764433, "system_level_velocity_mean": 11.870780823371248, "cost2_max": -89.98715610633784, "system_level_velocity_min": 10.574679413648735, "outflow_rate_max": 1060.9369537070756, "outflow_rate_min": 861.5547132102417, "system_level_velocity_max": 13.096739999579116, "cost2_min": -122.28484776922389, "cost1_max": 378.6974951205185, "outflow_rate_mean": 981.324969539924, "cost1_min": 305.37383637354975, "cost2_mean": -107.59152928020244}, "episodes_total": 3422}
{"date": "2019-05-09_12-30-21", "episode_reward_mean": 888.7555102682797, "episode_reward_min": 809.3976657291553, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405021, "training_iteration": 59, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8040815, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 40935.283, "grad_time_ms": 29760.948, "update_time_ms": 7.939, "num_steps_sampled": 8040815, "default": {"vf_explained_var": 0.9234091639518738, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 12.798744201660156, "policy_loss": -0.016549360007047653, "cur_lr": 0.0005000000237487257, "kl": 0.01757347211241722, "total_loss": 12.788126945495605, "entropy": 1.2899188995361328}, "load_time_ms": 47.735, "num_steps_trained": 8040815}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8040815, "iterations_since_restore": 59, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc320>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4f60>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 991.7931338266352, "time_this_iter_s": 72.16764831542969, "time_total_s": 3999.8147971630096, "time_since_restore": 3999.8147971630096, "timesteps_this_iter": 129414, "custom_metrics": {"cost1_mean": 344.7926543471778, "system_level_velocity_mean": 11.916436945867645, "cost2_max": -93.08292214501911, "system_level_velocity_min": 10.768338593512217, "outflow_rate_max": 1060.1761315076026, "outflow_rate_min": 869.5323678439594, "system_level_velocity_max": 13.011336004761542, "cost2_min": -125.83649794283855, "cost1_max": 377.6082521462942, "outflow_rate_mean": 984.3320680250368, "cost1_min": 309.5812492729674, "cost2_mean": -107.58745667829649}, "episodes_total": 3485}
{"date": "2019-05-09_12-31-33", "episode_reward_mean": 887.5286835191641, "episode_reward_min": 763.8143888524278, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405093, "training_iteration": 60, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8169739, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 40817.886, "grad_time_ms": 30069.54, "update_time_ms": 8.123, "num_steps_sampled": 8169739, "default": {"vf_explained_var": 0.915712296962738, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 13.850847244262695, "policy_loss": -0.016650600358843803, "cur_lr": 0.0005000000237487257, "kl": 0.017917605116963387, "total_loss": 13.84024429321289, "entropy": 1.2773104906082153}, "load_time_ms": 45.311, "num_steps_trained": 8169739}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8169739, "iterations_since_restore": 60, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bb00>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b9e8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.087960103711, "time_this_iter_s": 72.47810292243958, "time_total_s": 4072.292900085449, "time_since_restore": 4072.292900085449, "timesteps_this_iter": 128924, "custom_metrics": {"cost1_mean": 344.7286731167743, "system_level_velocity_mean": 11.909500369836856, "cost2_max": -92.31798573603416, "system_level_velocity_min": 10.213301677965685, "outflow_rate_max": 1062.8304216163258, "outflow_rate_min": 836.1727927813686, "system_level_velocity_max": 12.974053545993064, "cost2_min": -122.26521013615834, "cost1_max": 375.39166133398686, "outflow_rate_mean": 982.2339504832044, "cost1_min": 294.1022965871958, "cost2_mean": -107.34729052553882}, "episodes_total": 3548}
{"date": "2019-05-09_12-32-44", "episode_reward_mean": 893.1384137568024, "episode_reward_min": 769.6460264855983, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405164, "training_iteration": 61, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8297560, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 40565.277, "grad_time_ms": 30332.72, "update_time_ms": 8.657, "num_steps_sampled": 8297560, "default": {"vf_explained_var": 0.9186114072799683, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 12.973649978637695, "policy_loss": -0.01646505855023861, "cur_lr": 0.0005000000237487257, "kl": 0.01729143038392067, "total_loss": 12.963021278381348, "entropy": 1.2694475650787354}, "load_time_ms": 45.543, "num_steps_trained": 8297560}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8297560, "iterations_since_restore": 61, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4128>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4b00>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.087960103711, "time_this_iter_s": 70.79708456993103, "time_total_s": 4143.08998465538, "time_since_restore": 4143.08998465538, "timesteps_this_iter": 127821, "custom_metrics": {"cost1_mean": 346.393850751225, "system_level_velocity_mean": 11.959809216611832, "cost2_max": -90.76597023406941, "system_level_velocity_min": 10.252146072218586, "outflow_rate_max": 1062.8304216163258, "outflow_rate_min": 836.1727927813686, "system_level_velocity_max": 13.400187617999842, "cost2_min": -126.72827715751725, "cost1_max": 384.54407930608494, "outflow_rate_mean": 985.2690879590132, "cost1_min": 295.40622217316576, "cost2_mean": -107.07411523335482}, "episodes_total": 3611}
{"date": "2019-05-09_12-33-54", "episode_reward_mean": 893.6993610882381, "episode_reward_min": 779.6525779760144, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405234, "training_iteration": 62, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8425806, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 40329.882, "grad_time_ms": 30409.447, "update_time_ms": 9.02, "num_steps_sampled": 8425806, "default": {"vf_explained_var": 0.9172635078430176, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 13.064130783081055, "policy_loss": -0.016306977719068527, "cur_lr": 0.0005000000237487257, "kl": 0.018237510696053505, "total_loss": 13.05397891998291, "entropy": 1.2841130495071411}, "load_time_ms": 45.499, "num_steps_trained": 8425806}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8425806, "iterations_since_restore": 62, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcb00>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc860>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 986.9603103093292, "time_this_iter_s": 69.587229013443, "time_total_s": 4212.677213668823, "time_since_restore": 4212.677213668823, "timesteps_this_iter": 128246, "custom_metrics": {"cost1_mean": 348.4716220893748, "system_level_velocity_mean": 12.032993760146082, "cost2_max": -85.87794365680645, "system_level_velocity_min": 10.571521475650634, "outflow_rate_max": 1061.8614335995264, "outflow_rate_min": 855.0069582447863, "system_level_velocity_max": 13.400187617999842, "cost2_min": -126.72827715751725, "cost1_max": 384.54407930608494, "outflow_rate_mean": 990.1647401006925, "cost1_min": 304.36670734999814, "cost2_mean": -106.08824118879338}, "episodes_total": 3674}
{"date": "2019-05-09_12-35-03", "episode_reward_mean": 892.6286728023576, "episode_reward_min": 779.6525779760144, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405303, "training_iteration": 63, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8553308, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 40061.371, "grad_time_ms": 30490.062, "update_time_ms": 9.139, "num_steps_sampled": 8553308, "default": {"vf_explained_var": 0.9198984503746033, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 12.83175277709961, "policy_loss": -0.01586354710161686, "cur_lr": 0.0005000000237487257, "kl": 0.01685207337141037, "total_loss": 12.821577072143555, "entropy": 1.2774688005447388}, "load_time_ms": 47.568, "num_steps_trained": 8553308}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8553308, "iterations_since_restore": 63, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bc18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b710>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b9e8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1000.5986519594547, "time_this_iter_s": 69.40890169143677, "time_total_s": 4282.08611536026, "time_since_restore": 4282.08611536026, "timesteps_this_iter": 127502, "custom_metrics": {"cost1_mean": 347.49314505306893, "system_level_velocity_mean": 12.003904672361477, "cost2_max": -85.87794365680645, "system_level_velocity_min": 10.298301805827709, "outflow_rate_max": 1069.6441918844373, "outflow_rate_min": 855.0069582447863, "system_level_velocity_max": 13.261163003236401, "cost2_min": -128.0961049397054, "cost1_max": 384.42839201220335, "outflow_rate_mean": 986.9054423673638, "cost1_min": 299.83145697606227, "cost2_mean": -105.44375366310453}, "episodes_total": 3737}
{"date": "2019-05-09_12-36-14", "episode_reward_mean": 894.6119023317098, "episode_reward_min": 795.3897946811849, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405374, "training_iteration": 64, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8680396, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 39857.341, "grad_time_ms": 30628.169, "update_time_ms": 9.183, "num_steps_sampled": 8680396, "default": {"vf_explained_var": 0.9141371846199036, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 13.690980911254883, "policy_loss": -0.01640058122575283, "cur_lr": 0.0005000000237487257, "kl": 0.01773761585354805, "total_loss": 13.680566787719727, "entropy": 1.2680219411849976}, "load_time_ms": 48.011, "num_steps_trained": 8680396}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8680396, "iterations_since_restore": 64, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b8d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b940>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598be10>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.8626247043529, "time_this_iter_s": 70.1989233493805, "time_total_s": 4352.2850387096405, "time_since_restore": 4352.2850387096405, "timesteps_this_iter": 127088, "custom_metrics": {"cost1_mean": 349.35592126863565, "system_level_velocity_mean": 12.073662955481907, "cost2_max": -90.25586987999543, "system_level_velocity_min": 10.49893762984442, "outflow_rate_max": 1060.3289900285497, "outflow_rate_min": 903.7248520817161, "system_level_velocity_max": 13.195178871394472, "cost2_min": -127.12251013822669, "cost1_max": 380.96584354673945, "outflow_rate_mean": 991.8881229055398, "cost1_min": 304.49363876142, "cost2_mean": -105.9632509793856}, "episodes_total": 3800}
{"date": "2019-05-09_12-37-23", "episode_reward_mean": 878.9071729753423, "episode_reward_min": 221.03542135430897, "done": false, "episode_len_mean": 742.23, "timestamp": 1557405443, "training_iteration": 65, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8808982, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 39670.805, "grad_time_ms": 30745.932, "update_time_ms": 9.321, "num_steps_sampled": 8808982, "default": {"vf_explained_var": 0.9158059358596802, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 14.537800788879395, "policy_loss": -0.016788305714726448, "cur_lr": 0.0005000000237487257, "kl": 0.018653521314263344, "total_loss": 14.527308464050293, "entropy": 1.28340744972229}, "load_time_ms": 48.336, "num_steps_trained": 8808982}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8808982, "iterations_since_restore": 65, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc828>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc8d0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 995.5677277287394, "time_this_iter_s": 69.6429557800293, "time_total_s": 4421.92799448967, "time_since_restore": 4421.92799448967, "timesteps_this_iter": 128586, "custom_metrics": {"cost1_mean": 345.22357713704315, "system_level_velocity_mean": 12.090711599535908, "cost2_max": -58.1316752318848, "system_level_velocity_min": 10.49893762984442, "outflow_rate_max": 1057.353444092224, "outflow_rate_min": 427.9163573959263, "system_level_velocity_max": 13.32270988665035, "cost2_min": -127.12251013822669, "cost1_max": 374.26127854772255, "outflow_rate_mean": 982.2583514639133, "cost1_min": 113.55226679534579, "cost2_mean": -106.33568714146213}, "episodes_total": 3866}
{"date": "2019-05-09_12-38-34", "episode_reward_mean": 879.3688715699298, "episode_reward_min": 463.0334411601274, "done": false, "episode_len_mean": 747.47, "timestamp": 1557405514, "training_iteration": 66, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 8937262, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 39480.348, "grad_time_ms": 30906.218, "update_time_ms": 9.748, "num_steps_sampled": 8937262, "default": {"vf_explained_var": 0.9229550361633301, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 13.088972091674805, "policy_loss": -0.016062118113040924, "cur_lr": 0.0005000000237487257, "kl": 0.01788758672773838, "total_loss": 13.078948020935059, "entropy": 1.3061784505844116}, "load_time_ms": 48.704, "num_steps_trained": 8937262}, "node_ip": "10.138.0.2", "timesteps_since_restore": 8937262, "iterations_since_restore": 66, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b6a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b668>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bcf8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 988.0966908759091, "time_this_iter_s": 70.66677498817444, "time_total_s": 4492.594769477844, "time_since_restore": 4492.594769477844, "timesteps_this_iter": 128280, "custom_metrics": {"cost1_mean": 345.86311602258013, "system_level_velocity_mean": 12.031100045741239, "cost2_max": -74.20748368625375, "system_level_velocity_min": 10.081233955606885, "outflow_rate_max": 1066.186286039166, "outflow_rate_min": 623.567008003445, "system_level_velocity_max": 13.359062984590471, "cost2_min": -127.00917824888865, "cost1_max": 384.59155974331065, "outflow_rate_mean": 982.4033403524272, "cost1_min": 202.06204356204665, "cost2_mean": -106.83608752893281}, "episodes_total": 3929}
{"date": "2019-05-09_12-39-43", "episode_reward_mean": 886.9188858315704, "episode_reward_min": 219.651972717135, "done": false, "episode_len_mean": 745.79, "timestamp": 1557405583, "training_iteration": 67, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9065012, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 39068.345, "grad_time_ms": 31051.867, "update_time_ms": 10.088, "num_steps_sampled": 9065012, "default": {"vf_explained_var": 0.9191492199897766, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 13.888240814208984, "policy_loss": -0.01632259599864483, "cur_lr": 0.0005000000237487257, "kl": 0.018059121444821358, "total_loss": 13.878013610839844, "entropy": 1.3117743730545044}, "load_time_ms": 49.051, "num_steps_trained": 9065012}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9065012, "iterations_since_restore": 67, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcc50>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcc88>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 980.0146277674603, "time_this_iter_s": 68.81874251365662, "time_total_s": 4561.413511991501, "time_since_restore": 4561.413511991501, "timesteps_this_iter": 127750, "custom_metrics": {"cost1_mean": 348.7687667004943, "system_level_velocity_mean": 12.147195697427968, "cost2_max": -54.46450982777024, "system_level_velocity_min": 10.253436516486602, "outflow_rate_max": 1066.186286039166, "outflow_rate_min": 429.6959378610446, "system_level_velocity_max": 13.359062984590471, "cost2_min": -126.0537982669141, "cost1_max": 384.59155974331065, "outflow_rate_mean": 991.00888573314, "cost1_min": 112.84324379790445, "cost2_mean": -108.1560833828011}, "episodes_total": 3993}
{"date": "2019-05-09_12-40-52", "episode_reward_mean": 884.6586610393819, "episode_reward_min": 219.651972717135, "done": false, "episode_len_mean": 745.79, "timestamp": 1557405652, "training_iteration": 68, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9192880, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 38759.506, "grad_time_ms": 31178.33, "update_time_ms": 10.186, "num_steps_sampled": 9192880, "default": {"vf_explained_var": 0.9285576939582825, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 12.75560474395752, "policy_loss": -0.01626603677868843, "cur_lr": 0.0005000000237487257, "kl": 0.01706524007022381, "total_loss": 12.745097160339355, "entropy": 1.307895302772522}, "load_time_ms": 44.813, "num_steps_trained": 9192880}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9192880, "iterations_since_restore": 68, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc7b8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc860>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 991.5621619479463, "time_this_iter_s": 68.646080493927, "time_total_s": 4630.059592485428, "time_since_restore": 4630.059592485428, "timesteps_this_iter": 127868, "custom_metrics": {"cost1_mean": 349.0204813269113, "system_level_velocity_mean": 12.15537062059783, "cost2_max": -54.46450982777024, "system_level_velocity_min": 9.837562145628777, "outflow_rate_max": 1063.3380616107206, "outflow_rate_min": 429.6959378610446, "system_level_velocity_max": 13.137161758317118, "cost2_min": -136.17806830216057, "cost1_max": 380.5503630704318, "outflow_rate_mean": 993.3738642152675, "cost1_min": 112.84324379790445, "cost2_mean": -108.37534169199289}, "episodes_total": 4056}
{"date": "2019-05-09_12-42-01", "episode_reward_mean": 882.2845343797904, "episode_reward_min": 752.9429328502137, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405721, "training_iteration": 69, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9321591, "pid": 25325, "episodes_this_iter": 63, "info": {"sample_time_ms": 38350.282, "grad_time_ms": 31297.085, "update_time_ms": 10.289, "num_steps_sampled": 9321591, "default": {"vf_explained_var": 0.9303675889968872, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 12.884065628051758, "policy_loss": -0.016948889940977097, "cur_lr": 0.0005000000237487257, "kl": 0.017537111416459084, "total_loss": 12.87303638458252, "entropy": 1.3360779285430908}, "load_time_ms": 44.556, "num_steps_trained": 9321591}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9321591, "iterations_since_restore": 69, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598be80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b550>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b5f8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 991.5621619479463, "time_this_iter_s": 69.25034403800964, "time_total_s": 4699.3099365234375, "time_since_restore": 4699.3099365234375, "timesteps_this_iter": 128711, "custom_metrics": {"cost1_mean": 349.53801472817884, "system_level_velocity_mean": 12.09208776938951, "cost2_max": -94.64268125371643, "system_level_velocity_min": 9.837562145628777, "outflow_rate_max": 1070.7865174139706, "outflow_rate_min": 804.1716257857787, "system_level_velocity_max": 13.152104787981024, "cost2_min": -127.95158515997826, "cost1_max": 380.5503630704318, "outflow_rate_mean": 995.6455698853457, "cost1_min": 282.69233744162364, "cost2_mean": -108.87109452107292}, "episodes_total": 4119}
{"date": "2019-05-09_12-43-11", "episode_reward_mean": 877.8681624192654, "episode_reward_min": 795.6422605467635, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405791, "training_iteration": 70, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9450277, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 37980.794, "grad_time_ms": 31400.563, "update_time_ms": 10.426, "num_steps_sampled": 9450277, "default": {"vf_explained_var": 0.9196325540542603, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 14.187561988830566, "policy_loss": -0.016290416941046715, "cur_lr": 0.0005000000237487257, "kl": 0.018738318234682083, "total_loss": 14.177596092224121, "entropy": 1.3133941888809204}, "load_time_ms": 44.968, "num_steps_trained": 9450277}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9450277, "iterations_since_restore": 70, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cb00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cc88>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcb38>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 989.9991170198808, "time_this_iter_s": 69.80125617980957, "time_total_s": 4769.111192703247, "time_since_restore": 4769.111192703247, "timesteps_this_iter": 128686, "custom_metrics": {"cost1_mean": 349.1077507893505, "system_level_velocity_mean": 12.089982845208537, "cost2_max": -92.48846775904632, "system_level_velocity_min": 10.216607024633216, "outflow_rate_max": 1070.7865174139706, "outflow_rate_min": 878.2969407263379, "system_level_velocity_max": 13.159894603799538, "cost2_min": -127.95158515997826, "cost1_max": 380.68965949764277, "outflow_rate_mean": 991.2702955548402, "cost1_min": 295.73458622760694, "cost2_mean": -108.11684174675058}, "episodes_total": 4183}
{"date": "2019-05-09_12-44-18", "episode_reward_mean": 873.9632540701846, "episode_reward_min": 786.8587591138714, "done": false, "episode_len_mean": 751.0, "timestamp": 1557405858, "training_iteration": 71, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9578802, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 37653.204, "grad_time_ms": 31411.585, "update_time_ms": 10.036, "num_steps_sampled": 9578802, "default": {"vf_explained_var": 0.9188477993011475, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 14.844354629516602, "policy_loss": -0.0166394654661417, "cur_lr": 0.0005000000237487257, "kl": 0.0178340133279562, "total_loss": 14.833735466003418, "entropy": 1.3249303102493286}, "load_time_ms": 45.966, "num_steps_trained": 9578802}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9578802, "iterations_since_restore": 71, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dceb8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcb00>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 991.5120584349556, "time_this_iter_s": 67.61816501617432, "time_total_s": 4836.729357719421, "time_since_restore": 4836.729357719421, "timesteps_this_iter": 128525, "custom_metrics": {"cost1_mean": 348.5740912825549, "system_level_velocity_mean": 12.082572607296107, "cost2_max": -80.04753008353818, "system_level_velocity_min": 10.530051568446144, "outflow_rate_max": 1060.1092511263532, "outflow_rate_min": 856.1885850810153, "system_level_velocity_max": 13.195959203697972, "cost2_min": -128.47311601912833, "cost1_max": 382.0868243305727, "outflow_rate_mean": 988.4528926073392, "cost1_min": 303.3430797264896, "cost2_mean": -108.2208210285002}, "episodes_total": 4247}
{"date": "2019-05-09_12-45-25", "episode_reward_mean": 867.9376350199735, "episode_reward_min": 207.92357331648316, "done": false, "episode_len_mean": 743.19, "timestamp": 1557405925, "training_iteration": 72, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9705309, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37226.297, "grad_time_ms": 31545.154, "update_time_ms": 9.619, "num_steps_sampled": 9705309, "default": {"vf_explained_var": 0.9145386815071106, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 15.631132125854492, "policy_loss": -0.01653478667140007, "cur_lr": 0.0005000000237487257, "kl": 0.017832152545452118, "total_loss": 15.620615005493164, "entropy": 1.3148493766784668}, "load_time_ms": 45.529, "num_steps_trained": 9705309}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9705309, "iterations_since_restore": 72, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bfd0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bb00>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 998.6722252429181, "time_this_iter_s": 66.55250024795532, "time_total_s": 4903.281857967377, "time_since_restore": 4903.281857967377, "timesteps_this_iter": 126507, "custom_metrics": {"cost1_mean": 347.9387848445923, "system_level_velocity_mean": 12.197148728686969, "cost2_max": -51.809223799469734, "system_level_velocity_min": 11.063929983045655, "outflow_rate_max": 1082.536375029034, "outflow_rate_min": 416.45459004986924, "system_level_velocity_max": 13.703694424906804, "cost2_min": -126.47462564497522, "cost1_max": 388.1690267574054, "outflow_rate_mean": 986.8647505004799, "cost1_min": 107.60111472944575, "cost2_mean": -106.24086190827761}, "episodes_total": 4313}
{"date": "2019-05-09_12-46-32", "episode_reward_mean": 874.8967091033003, "episode_reward_min": 207.92357331648316, "done": false, "episode_len_mean": 745.71, "timestamp": 1557405992, "training_iteration": 73, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9831780, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 36787.962, "grad_time_ms": 31714.219, "update_time_ms": 9.487, "num_steps_sampled": 9831780, "default": {"vf_explained_var": 0.9073778986930847, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 16.13127326965332, "policy_loss": -0.016169419512152672, "cur_lr": 0.0005000000237487257, "kl": 0.018399864435195923, "total_loss": 16.121313095092773, "entropy": 1.316220998764038}, "load_time_ms": 44.599, "num_steps_trained": 9831780}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9831780, "iterations_since_restore": 73, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ccf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c208>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ce10>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 998.6722252429181, "time_this_iter_s": 66.67428064346313, "time_total_s": 4969.95613861084, "time_since_restore": 4969.95613861084, "timesteps_this_iter": 126471, "custom_metrics": {"cost1_mean": 349.6572598596953, "system_level_velocity_mean": 12.20762913846637, "cost2_max": -51.809223799469734, "system_level_velocity_min": 10.350559039081793, "outflow_rate_max": 1072.0513064830795, "outflow_rate_min": 416.45459004986924, "system_level_velocity_max": 13.392943153855065, "cost2_min": -125.26717979499111, "cost1_max": 384.94976577734417, "outflow_rate_mean": 990.1368454582952, "cost1_min": 107.60111472944575, "cost2_mean": -106.69274058776404}, "episodes_total": 4377}
{"date": "2019-05-09_12-47-38", "episode_reward_mean": 866.0013788859678, "episode_reward_min": 200.90969430323855, "done": false, "episode_len_mean": 740.47, "timestamp": 1557406058, "training_iteration": 74, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 9958748, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 36334.608, "grad_time_ms": 31801.852, "update_time_ms": 9.497, "num_steps_sampled": 9958748, "default": {"vf_explained_var": 0.9039366841316223, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 16.804487228393555, "policy_loss": -0.015790311619639397, "cur_lr": 0.0005000000237487257, "kl": 0.018556319177150726, "total_loss": 16.794960021972656, "entropy": 1.3246769905090332}, "load_time_ms": 44.75, "num_steps_trained": 9958748}, "node_ip": "10.138.0.2", "timesteps_since_restore": 9958748, "iterations_since_restore": 74, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c50>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c5748>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 987.4353068068376, "time_this_iter_s": 66.49091219902039, "time_total_s": 5036.44705080986, "time_since_restore": 5036.44705080986, "timesteps_this_iter": 126968, "custom_metrics": {"cost1_mean": 346.4534514988957, "system_level_velocity_mean": 12.195017337470292, "cost2_max": -51.71349770804575, "system_level_velocity_min": 10.350559039081793, "outflow_rate_max": 1074.070750055369, "outflow_rate_min": 417.60435215670356, "system_level_velocity_max": 13.302671324998215, "cost2_min": -125.26717979499111, "cost1_max": 384.3935541137316, "outflow_rate_mean": 980.9104261832961, "cost1_min": 106.10806264331268, "cost2_mean": -105.85673827910121}, "episodes_total": 4443}
{"date": "2019-05-09_12-48-46", "episode_reward_mean": 880.5582023539097, "episode_reward_min": 219.46954324510918, "done": false, "episode_len_mean": 745.79, "timestamp": 1557406126, "training_iteration": 75, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10086160, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 36004.032, "grad_time_ms": 31959.255, "update_time_ms": 9.471, "num_steps_sampled": 10086160, "default": {"vf_explained_var": 0.9197225570678711, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 14.32059097290039, "policy_loss": -0.017526552081108093, "cur_lr": 0.0005000000237487257, "kl": 0.018735868856310844, "total_loss": 14.309389114379883, "entropy": 1.3310402631759644}, "load_time_ms": 44.692, "num_steps_trained": 10086160}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10086160, "iterations_since_restore": 75, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c3c8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e49b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 992.8156706542817, "time_this_iter_s": 67.9099223613739, "time_total_s": 5104.356973171234, "time_since_restore": 5104.356973171234, "timesteps_this_iter": 127412, "custom_metrics": {"cost1_mean": 351.4605170202153, "system_level_velocity_mean": 12.27385543613636, "cost2_max": -55.45661267686242, "system_level_velocity_min": 10.281140260735581, "outflow_rate_max": 1074.070750055369, "outflow_rate_min": 429.054656463492, "system_level_velocity_max": 13.320373674683918, "cost2_min": -123.74256074852488, "cost1_max": 384.7260712716061, "outflow_rate_mean": 994.9343264345963, "cost1_min": 112.81285482472096, "cost2_mean": -106.15021962206062}, "episodes_total": 4507}
{"date": "2019-05-09_12-49-54", "episode_reward_mean": 881.0066708184233, "episode_reward_min": 775.9170658732573, "done": false, "episode_len_mean": 751.0, "timestamp": 1557406194, "training_iteration": 76, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10213072, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 35581.145, "grad_time_ms": 32043.727, "update_time_ms": 9.11, "num_steps_sampled": 10213072, "default": {"vf_explained_var": 0.9101715087890625, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 16.03074836730957, "policy_loss": -0.016878865659236908, "cur_lr": 0.0005000000237487257, "kl": 0.019022144377231598, "total_loss": 16.020288467407227, "entropy": 1.336294174194336}, "load_time_ms": 44.292, "num_steps_trained": 10213072}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10213072, "iterations_since_restore": 76, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b978>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b278>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b208>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 992.8156706542817, "time_this_iter_s": 67.28050351142883, "time_total_s": 5171.637476682663, "time_since_restore": 5171.637476682663, "timesteps_this_iter": 126912, "custom_metrics": {"cost1_mean": 352.608205186415, "system_level_velocity_mean": 12.228385053321777, "cost2_max": -87.37749388366547, "system_level_velocity_min": 10.281140260735581, "outflow_rate_max": 1073.93415139447, "outflow_rate_min": 909.8689469536919, "system_level_velocity_max": 13.423475394297068, "cost2_min": -126.50312397861227, "cost1_max": 384.7260712716061, "outflow_rate_mean": 997.2526801524197, "cost1_min": 297.6203937745117, "cost2_mean": -106.82059914034475}, "episodes_total": 4571}
{"date": "2019-05-09_12-50-59", "episode_reward_mean": 866.2570789376011, "episode_reward_min": 207.28131368548478, "done": false, "episode_len_mean": 745.67, "timestamp": 1557406259, "training_iteration": 77, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10340595, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 35323.339, "grad_time_ms": 32001.367, "update_time_ms": 8.797, "num_steps_sampled": 10340595, "default": {"vf_explained_var": 0.9096987843513489, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 15.879121780395508, "policy_loss": -0.01606258563697338, "cur_lr": 0.0005000000237487257, "kl": 0.01767193339765072, "total_loss": 15.869023323059082, "entropy": 1.3488004207611084}, "load_time_ms": 43.933, "num_steps_trained": 10340595}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10340595, "iterations_since_restore": 77, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc0b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc668>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dca58>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1018.6368701965388, "time_this_iter_s": 65.78164458274841, "time_total_s": 5237.419121265411, "time_since_restore": 5237.419121265411, "timesteps_this_iter": 127523, "custom_metrics": {"cost1_mean": 348.2155964349091, "system_level_velocity_mean": 12.175360616210995, "cost2_max": -55.84861292280024, "system_level_velocity_min": 11.142008437394013, "outflow_rate_max": 1075.1016299221371, "outflow_rate_min": 417.83330888801135, "system_level_velocity_max": 13.509448908712328, "cost2_min": -121.30765975670865, "cost1_max": 391.86095060219304, "outflow_rate_mean": 987.5843443408698, "cost1_min": 107.8440899412178, "cost2_mean": -105.6861114961537}, "episodes_total": 4636}
{"date": "2019-05-09_12-52-06", "episode_reward_mean": 857.8513375621461, "episode_reward_min": 207.28131368548478, "done": false, "episode_len_mean": 735.32, "timestamp": 1557406326, "training_iteration": 78, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10467246, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 35066.205, "grad_time_ms": 32013.237, "update_time_ms": 8.783, "num_steps_sampled": 10467246, "default": {"vf_explained_var": 0.9161396622657776, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 14.737702369689941, "policy_loss": -0.016810117289423943, "cur_lr": 0.0005000000237487257, "kl": 0.018323291093111038, "total_loss": 14.727075576782227, "entropy": 1.3370164632797241}, "load_time_ms": 49.99, "num_steps_trained": 10467246}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10467246, "iterations_since_restore": 78, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cd68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c748>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cb70>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1018.6368701965388, "time_this_iter_s": 66.26836800575256, "time_total_s": 5303.687489271164, "time_since_restore": 5303.687489271164, "timesteps_this_iter": 126651, "custom_metrics": {"cost1_mean": 345.65771836248183, "system_level_velocity_mean": 12.262520700997616, "cost2_max": -45.8437155633557, "system_level_velocity_min": 11.213862150566367, "outflow_rate_max": 1075.1016299221371, "outflow_rate_min": 417.83330888801135, "system_level_velocity_max": 13.451712680016584, "cost2_min": -126.76481195479508, "cost1_max": 389.6716879794933, "outflow_rate_mean": 983.7996810535723, "cost1_min": 107.8440899412178, "cost2_mean": -104.50792169574689}, "episodes_total": 4700}
{"date": "2019-05-09_12-53-10", "episode_reward_mean": 840.6225450938364, "episode_reward_min": 210.65365164296318, "done": false, "episode_len_mean": 724.94, "timestamp": 1557406390, "training_iteration": 79, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10591952, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 34828.694, "grad_time_ms": 31793.74, "update_time_ms": 8.403, "num_steps_sampled": 10591952, "default": {"vf_explained_var": 0.9058102369308472, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 17.0754337310791, "policy_loss": -0.017587821930646896, "cur_lr": 0.0005000000237487257, "kl": 0.01926472969353199, "total_loss": 17.064348220825195, "entropy": 1.3319852352142334}, "load_time_ms": 48.477, "num_steps_trained": 10591952}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10591952, "iterations_since_restore": 79, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bd68>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b9b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 963.649139077387, "time_this_iter_s": 64.63632321357727, "time_total_s": 5368.323812484741, "time_since_restore": 5368.323812484741, "timesteps_this_iter": 124706, "custom_metrics": {"cost1_mean": 341.1139143816847, "system_level_velocity_mean": 12.298968682972998, "cost2_max": -45.8437155633557, "system_level_velocity_min": 10.595286320934905, "outflow_rate_max": 1065.3505445409937, "outflow_rate_min": 413.86092456417316, "system_level_velocity_max": 13.449545482133688, "cost2_min": -126.76481195479508, "cost1_max": 383.38880985120716, "outflow_rate_mean": 971.5252752879381, "cost1_min": 107.89848013876446, "cost2_mean": -102.5601599412437}, "episodes_total": 4766}
{"date": "2019-05-09_12-54-16", "episode_reward_mean": 857.3352327420861, "episode_reward_min": 210.65365164296318, "done": false, "episode_len_mean": 735.29, "timestamp": 1557406456, "training_iteration": 80, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10718094, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 34805.424, "grad_time_ms": 31423.181, "update_time_ms": 8.022, "num_steps_sampled": 10718094, "default": {"vf_explained_var": 0.905665934085846, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 16.747949600219727, "policy_loss": -0.016664177179336548, "cur_lr": 0.0005000000237487257, "kl": 0.01839328743517399, "total_loss": 16.737491607666016, "entropy": 1.334882140159607}, "load_time_ms": 50.459, "num_steps_trained": 10718094}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10718094, "iterations_since_restore": 80, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc7f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcb00>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcac8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.366084814936, "time_this_iter_s": 65.83245587348938, "time_total_s": 5434.156268358231, "time_since_restore": 5434.156268358231, "timesteps_this_iter": 126142, "custom_metrics": {"cost1_mean": 345.9432606517771, "system_level_velocity_mean": 12.299322805871393, "cost2_max": -52.07927037351962, "system_level_velocity_min": 10.510935910009309, "outflow_rate_max": 1094.33493400343, "outflow_rate_min": 413.86092456417316, "system_level_velocity_max": 13.73083469091452, "cost2_min": -126.38880311924154, "cost1_max": 392.6598813278082, "outflow_rate_mean": 979.8631821296443, "cost1_min": 107.89848013876446, "cost2_mean": -102.5056693032003}, "episodes_total": 4830}
{"date": "2019-05-09_12-55-22", "episode_reward_mean": 881.2544388200179, "episode_reward_min": 785.285574015876, "done": false, "episode_len_mean": 751.0, "timestamp": 1557406522, "training_iteration": 81, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10845380, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 34941.292, "grad_time_ms": 31108.379, "update_time_ms": 8.172, "num_steps_sampled": 10845380, "default": {"vf_explained_var": 0.9101940989494324, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 16.068220138549805, "policy_loss": -0.01677992008626461, "cur_lr": 0.0005000000237487257, "kl": 0.01822901889681816, "total_loss": 16.057592391967773, "entropy": 1.3566335439682007}, "load_time_ms": 49.553, "num_steps_trained": 10845380}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10845380, "iterations_since_restore": 81, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cb70>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c710>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.366084814936, "time_this_iter_s": 65.87004971504211, "time_total_s": 5500.026318073273, "time_since_restore": 5500.026318073273, "timesteps_this_iter": 127286, "custom_metrics": {"cost1_mean": 354.2382502780454, "system_level_velocity_mean": 12.2984284508727, "cost2_max": -85.17134348612083, "system_level_velocity_min": 10.583200107386702, "outflow_rate_max": 1094.33493400343, "outflow_rate_min": 895.7219976450561, "system_level_velocity_max": 13.60126596442887, "cost2_min": -126.53937478309572, "cost1_max": 391.9779742098775, "outflow_rate_mean": 1001.6890875326221, "cost1_min": 305.9769845441621, "cost2_mean": -105.47389036665275}, "episodes_total": 4894}
{"date": "2019-05-09_12-56-29", "episode_reward_mean": 865.9276464412525, "episode_reward_min": 205.70502577583215, "done": false, "episode_len_mean": 740.49, "timestamp": 1557406589, "training_iteration": 82, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 10971427, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 35072.664, "grad_time_ms": 30973.799, "update_time_ms": 8.328, "num_steps_sampled": 10971427, "default": {"vf_explained_var": 0.9026383757591248, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 18.039180755615234, "policy_loss": -0.016828788444399834, "cur_lr": 0.0005000000237487257, "kl": 0.018811795860528946, "total_loss": 18.028701782226562, "entropy": 1.3520046472549438}, "load_time_ms": 47.633, "num_steps_trained": 10971427}, "node_ip": "10.138.0.2", "timesteps_since_restore": 10971427, "iterations_since_restore": 82, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c2b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cd30>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c9b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1006.9250060451176, "time_this_iter_s": 66.50671410560608, "time_total_s": 5566.533032178879, "time_since_restore": 5566.533032178879, "timesteps_this_iter": 126047, "custom_metrics": {"cost1_mean": 347.95664928709937, "system_level_velocity_mean": 12.260898424608156, "cost2_max": -53.20562741307175, "system_level_velocity_min": 10.583200107386702, "outflow_rate_max": 1091.3219470201611, "outflow_rate_min": 415.53559303705686, "system_level_velocity_max": 13.694098219802022, "cost2_min": -123.89507544627405, "cost1_max": 393.62980660256045, "outflow_rate_mean": 987.9142103964086, "cost1_min": 107.04737826228757, "cost2_mean": -104.51827942158233}, "episodes_total": 4960}
{"date": "2019-05-09_12-57-36", "episode_reward_mean": 887.995163016673, "episode_reward_min": 785.5507392296099, "done": false, "episode_len_mean": 751.0, "timestamp": 1557406656, "training_iteration": 83, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11098153, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 35334.367, "grad_time_ms": 30737.975, "update_time_ms": 8.303, "num_steps_sampled": 11098153, "default": {"vf_explained_var": 0.8912395238876343, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 18.681392669677734, "policy_loss": -0.016118258237838745, "cur_lr": 0.0005000000237487257, "kl": 0.018786663189530373, "total_loss": 18.671613693237305, "entropy": 1.3487353324890137}, "load_time_ms": 48.952, "num_steps_trained": 11098153}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11098153, "iterations_since_restore": 83, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4f98>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e42e8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1016.182295148411, "time_this_iter_s": 66.93784666061401, "time_total_s": 5633.470878839493, "time_since_restore": 5633.470878839493, "timesteps_this_iter": 126726, "custom_metrics": {"cost1_mean": 354.6816030986124, "system_level_velocity_mean": 12.300100793889833, "cost2_max": -88.24703675009519, "system_level_velocity_min": 10.715370555237879, "outflow_rate_max": 1082.3031350515264, "outflow_rate_min": 905.9377522737184, "system_level_velocity_max": 13.694098219802022, "cost2_min": -128.6202270060716, "cost1_max": 393.62980660256045, "outflow_rate_mean": 1003.4655661414077, "cost1_min": 311.34321389988645, "cost2_mean": -107.03887676793009}, "episodes_total": 5024}
{"date": "2019-05-09_12-58-43", "episode_reward_mean": 881.3397086207697, "episode_reward_min": 793.0371349693144, "done": false, "episode_len_mean": 751.0, "timestamp": 1557406723, "training_iteration": 84, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11224733, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 35535.069, "grad_time_ms": 30660.031, "update_time_ms": 8.335, "num_steps_sampled": 11224733, "default": {"vf_explained_var": 0.894137978553772, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 18.480749130249023, "policy_loss": -0.01725403219461441, "cur_lr": 0.0005000000237487257, "kl": 0.01881803199648857, "total_loss": 18.469844818115234, "entropy": 1.3619966506958008}, "load_time_ms": 49.451, "num_steps_trained": 11224733}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11224733, "iterations_since_restore": 84, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dceb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc7f0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc668>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 976.484452487672, "time_this_iter_s": 67.72726488113403, "time_total_s": 5701.198143720627, "time_since_restore": 5701.198143720627, "timesteps_this_iter": 126580, "custom_metrics": {"cost1_mean": 351.6865887566372, "system_level_velocity_mean": 12.198838368407188, "cost2_max": -88.24703675009519, "system_level_velocity_min": 11.0318735722, "outflow_rate_max": 1065.57332653993, "outflow_rate_min": 887.0299936008176, "system_level_velocity_max": 13.315066014141303, "cost2_min": -127.02675548731855, "cost1_max": 384.84004545425694, "outflow_rate_mean": 993.9427449430549, "cost1_min": 317.6172062970214, "cost2_mean": -106.01491614228911}, "episodes_total": 5088}
{"date": "2019-05-09_12-59-50", "episode_reward_mean": 881.7995137038597, "episode_reward_min": 792.0799061214992, "done": false, "episode_len_mean": 751.0, "timestamp": 1557406790, "training_iteration": 85, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11351590, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 35769.556, "grad_time_ms": 30293.969, "update_time_ms": 8.228, "num_steps_sampled": 11351590, "default": {"vf_explained_var": 0.901369035243988, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 17.780078887939453, "policy_loss": -0.016644055023789406, "cur_lr": 0.0005000000237487257, "kl": 0.01832888275384903, "total_loss": 17.769622802734375, "entropy": 1.3851851224899292}, "load_time_ms": 47.348, "num_steps_trained": 11351590}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11351590, "iterations_since_restore": 85, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e48d0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4978>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 982.5656731292388, "time_this_iter_s": 66.57951545715332, "time_total_s": 5767.77765917778, "time_since_restore": 5767.77765917778, "timesteps_this_iter": 126857, "custom_metrics": {"cost1_mean": 353.3955874017393, "system_level_velocity_mean": 12.256404372294428, "cost2_max": -89.33464217699031, "system_level_velocity_min": 11.0318735722, "outflow_rate_max": 1065.8453718278847, "outflow_rate_min": 887.0299936008176, "system_level_velocity_max": 13.514664490812349, "cost2_min": -126.51446464471744, "cost1_max": 387.48010304833986, "outflow_rate_mean": 1000.0888785297607, "cost1_min": 317.6172062970214, "cost2_mean": -105.36461228135822}, "episodes_total": 5152}
{"date": "2019-05-09_13-00-58", "episode_reward_mean": 875.6366493851046, "episode_reward_min": 231.07621535234068, "done": false, "episode_len_mean": 745.82, "timestamp": 1557406858, "training_iteration": 86, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11478429, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 36066.453, "grad_time_ms": 30055.028, "update_time_ms": 8.338, "num_steps_sampled": 11478429, "default": {"vf_explained_var": 0.898679792881012, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 18.48745346069336, "policy_loss": -0.017518671229481697, "cur_lr": 0.0005000000237487257, "kl": 0.019040534272789955, "total_loss": 18.476360321044922, "entropy": 1.3867404460906982}, "load_time_ms": 47.845, "num_steps_trained": 11478429}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11478429, "iterations_since_restore": 86, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e44a8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4f98>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 997.7889803102316, "time_this_iter_s": 67.88050246238708, "time_total_s": 5835.658161640167, "time_since_restore": 5835.658161640167, "timesteps_this_iter": 126839, "custom_metrics": {"cost1_mean": 353.0366952016248, "system_level_velocity_mean": 12.339873408434157, "cost2_max": -55.145843909008704, "system_level_velocity_min": 9.885967988138349, "outflow_rate_max": 1102.0021010893959, "outflow_rate_min": 430.3976804916072, "system_level_velocity_max": 13.786926056846392, "cost2_min": -126.51446464471744, "cost1_max": 395.6329549490973, "outflow_rate_mean": 1000.2364645013322, "cost1_min": 115.72918677509341, "cost2_mean": -105.95229680858333}, "episodes_total": 5217}
{"date": "2019-05-09_13-02-06", "episode_reward_mean": 866.6583990465399, "episode_reward_min": 231.07621535234068, "done": false, "episode_len_mean": 745.82, "timestamp": 1557406926, "training_iteration": 87, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11604996, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 36422.246, "grad_time_ms": 29924.263, "update_time_ms": 8.373, "num_steps_sampled": 11604996, "default": {"vf_explained_var": 0.8899204730987549, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 19.687332153320312, "policy_loss": -0.016956955194473267, "cur_lr": 0.0005000000237487257, "kl": 0.019785277545452118, "total_loss": 19.677051544189453, "entropy": 1.3797191381454468}, "load_time_ms": 48.198, "num_steps_trained": 11604996}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11604996, "iterations_since_restore": 87, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dca58>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc860>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 993.6299986661268, "time_this_iter_s": 68.04008603096008, "time_total_s": 5903.698247671127, "time_since_restore": 5903.698247671127, "timesteps_this_iter": 126567, "custom_metrics": {"cost1_mean": 348.88992626106307, "system_level_velocity_mean": 12.201777212972544, "cost2_max": -55.145843909008704, "system_level_velocity_min": 9.885967988138349, "outflow_rate_max": 1095.2535352189927, "outflow_rate_min": 430.3976804916072, "system_level_velocity_max": 13.361682553587881, "cost2_min": -131.33052018280884, "cost1_max": 388.40503289454205, "outflow_rate_mean": 989.7392457373774, "cost1_min": 115.72918677509341, "cost2_mean": -105.24367019661351}, "episodes_total": 5281}
{"date": "2019-05-09_13-03-14", "episode_reward_mean": 876.03618191577, "episode_reward_min": 774.5972306041303, "done": false, "episode_len_mean": 751.0, "timestamp": 1557406994, "training_iteration": 88, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11731287, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 36815.734, "grad_time_ms": 29648.686, "update_time_ms": 8.35, "num_steps_sampled": 11731287, "default": {"vf_explained_var": 0.8965443968772888, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 18.140575408935547, "policy_loss": -0.016743360087275505, "cur_lr": 0.0005000000237487257, "kl": 0.019486134871840477, "total_loss": 18.130407333374023, "entropy": 1.402037262916565}, "load_time_ms": 46.743, "num_steps_trained": 11731287}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11731287, "iterations_since_restore": 88, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c4e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c6a0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c470>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1018.0693988140289, "time_this_iter_s": 67.4158263206482, "time_total_s": 5971.1140739917755, "time_since_restore": 5971.1140739917755, "timesteps_this_iter": 126291, "custom_metrics": {"cost1_mean": 352.9184308783967, "system_level_velocity_mean": 12.247591412614074, "cost2_max": -84.37306002661619, "system_level_velocity_min": 11.428514582416605, "outflow_rate_max": 1098.3313157374746, "outflow_rate_min": 940.2637183059405, "system_level_velocity_max": 13.746387589246828, "cost2_min": -131.33052018280884, "cost1_max": 396.20643554018363, "outflow_rate_mean": 999.4057807943004, "cost1_min": 327.4512270874238, "cost2_mean": -106.93061437583363}, "episodes_total": 5345}
{"date": "2019-05-09_13-04-23", "episode_reward_mean": 859.7627345511412, "episode_reward_min": 216.31614743646185, "done": false, "episode_len_mean": 745.79, "timestamp": 1557407063, "training_iteration": 89, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11858606, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37360.323, "grad_time_ms": 29555.947, "update_time_ms": 8.537, "num_steps_sampled": 11858606, "default": {"vf_explained_var": 0.8753600120544434, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 20.87096405029297, "policy_loss": -0.016289087012410164, "cur_lr": 0.0005000000237487257, "kl": 0.018682431429624557, "total_loss": 20.860980987548828, "entropy": 1.3986448049545288}, "load_time_ms": 48.241, "num_steps_trained": 11858606}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11858606, "iterations_since_restore": 89, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4198>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4eb8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 966.5833958148645, "time_this_iter_s": 69.2138991355896, "time_total_s": 6040.327973127365, "time_since_restore": 6040.327973127365, "timesteps_this_iter": 127319, "custom_metrics": {"cost1_mean": 348.56365612881353, "system_level_velocity_mean": 12.210254869857238, "cost2_max": -51.71814117498727, "system_level_velocity_min": 11.287840132064336, "outflow_rate_max": 1067.2655891655963, "outflow_rate_min": 433.80351725741843, "system_level_velocity_max": 13.284337422526324, "cost2_min": -133.09279550864179, "cost1_max": 380.22718411198616, "outflow_rate_mean": 987.7546328465562, "cost1_min": 112.15322216119695, "cost2_mean": -104.43614739321455}, "episodes_total": 5411}
{"date": "2019-05-09_13-05-31", "episode_reward_mean": 854.7272851325039, "episode_reward_min": 217.6545286899148, "done": false, "episode_len_mean": 740.58, "timestamp": 1557407131, "training_iteration": 90, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 11984183, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 37772.189, "grad_time_ms": 29386.626, "update_time_ms": 8.67, "num_steps_sampled": 11984183, "default": {"vf_explained_var": 0.8794894218444824, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 19.778413772583008, "policy_loss": -0.01666293852031231, "cur_lr": 0.0005000000237487257, "kl": 0.01927107758820057, "total_loss": 19.768253326416016, "entropy": 1.409982442855835}, "load_time_ms": 45.511, "num_steps_trained": 11984183}, "node_ip": "10.138.0.2", "timesteps_since_restore": 11984183, "iterations_since_restore": 90, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcd68>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc860>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1000.0977794239793, "time_this_iter_s": 68.22452688217163, "time_total_s": 6108.552500009537, "time_since_restore": 6108.552500009537, "timesteps_this_iter": 125577, "custom_metrics": {"cost1_mean": 345.908517985102, "system_level_velocity_mean": 12.208086358835626, "cost2_max": -58.29253620118867, "system_level_velocity_min": 11.105554245728596, "outflow_rate_max": 1070.863510442599, "outflow_rate_min": 425.5739938278364, "system_level_velocity_max": 13.4659283151603, "cost2_min": -133.09279550864179, "cost1_max": 388.6163207091557, "outflow_rate_mean": 982.9257553689667, "cost1_min": 113.5193725921006, "cost2_mean": -104.77729563482916}, "episodes_total": 5476}
{"date": "2019-05-09_13-06-39", "episode_reward_mean": 859.1578144598981, "episode_reward_min": 217.6545286899148, "done": false, "episode_len_mean": 745.79, "timestamp": 1557407199, "training_iteration": 91, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12109745, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 38102.877, "grad_time_ms": 29245.9, "update_time_ms": 8.359, "num_steps_sampled": 12109745, "default": {"vf_explained_var": 0.873381495475769, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 20.637754440307617, "policy_loss": -0.016929376870393753, "cur_lr": 0.0005000000237487257, "kl": 0.019214387983083725, "total_loss": 20.62731170654297, "entropy": 1.4170308113098145}, "load_time_ms": 45.029, "num_steps_trained": 12109745}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12109745, "iterations_since_restore": 91, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d69e8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d63c8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1010.4359821456775, "time_this_iter_s": 67.70722603797913, "time_total_s": 6176.259726047516, "time_since_restore": 6176.259726047516, "timesteps_this_iter": 125562, "custom_metrics": {"cost1_mean": 348.31800615780907, "system_level_velocity_mean": 12.19745567944333, "cost2_max": -62.541922481480114, "system_level_velocity_min": 10.650259242522836, "outflow_rate_max": 1079.3426653950041, "outflow_rate_min": 425.5739938278364, "system_level_velocity_max": 13.572524126099287, "cost2_min": -122.17269259607457, "cost1_max": 391.12689405949095, "outflow_rate_mean": 988.3950999401729, "cost1_min": 113.5193725921006, "cost2_mean": -104.6434957953884}, "episodes_total": 5540}
{"date": "2019-05-09_13-07-48", "episode_reward_mean": 856.9022482583001, "episode_reward_min": 221.4663834601009, "done": false, "episode_len_mean": 740.66, "timestamp": 1557407268, "training_iteration": 92, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12234842, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 38485.511, "grad_time_ms": 29073.889, "update_time_ms": 8.193, "num_steps_sampled": 12234842, "default": {"vf_explained_var": 0.876134991645813, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 20.507476806640625, "policy_loss": -0.017273060977458954, "cur_lr": 0.0005000000237487257, "kl": 0.018571820110082626, "total_loss": 20.496471405029297, "entropy": 1.415154218673706}, "load_time_ms": 44.818, "num_steps_trained": 12234842}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12234842, "iterations_since_restore": 92, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e45f8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4438>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1003.9275047173537, "time_this_iter_s": 68.61236238479614, "time_total_s": 6244.872088432312, "time_since_restore": 6244.872088432312, "timesteps_this_iter": 125097, "custom_metrics": {"cost1_mean": 348.05707199168916, "system_level_velocity_mean": 12.285349242025289, "cost2_max": -54.763466304103346, "system_level_velocity_min": 10.487217943535537, "outflow_rate_max": 1096.8957078770816, "outflow_rate_min": 439.3627868923172, "system_level_velocity_max": 13.742279201961853, "cost2_min": -126.01314344098476, "cost1_max": 395.8135933022162, "outflow_rate_mean": 987.1412916397446, "cost1_min": 115.31276135744528, "cost2_mean": -104.78249252156203}, "episodes_total": 5606}
{"date": "2019-05-09_13-08-57", "episode_reward_mean": 865.9231702173536, "episode_reward_min": 221.4663834601009, "done": false, "episode_len_mean": 745.79, "timestamp": 1557407337, "training_iteration": 93, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12360229, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 38808.622, "grad_time_ms": 28978.188, "update_time_ms": 8.256, "num_steps_sampled": 12360229, "default": {"vf_explained_var": 0.874487578868866, "cur_kl_coeff": 0.33750003576278687, "vf_loss": 20.557409286499023, "policy_loss": -0.016430899500846863, "cur_lr": 0.0005000000237487257, "kl": 0.01873711869120598, "total_loss": 20.54730224609375, "entropy": 1.4170761108398438}, "load_time_ms": 44.442, "num_steps_trained": 12360229}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12360229, "iterations_since_restore": 93, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc7b8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dca58>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 972.1978919172836, "time_this_iter_s": 69.25376152992249, "time_total_s": 6314.1258499622345, "time_since_restore": 6314.1258499622345, "timesteps_this_iter": 125387, "custom_metrics": {"cost1_mean": 350.4627526536197, "system_level_velocity_mean": 12.269241510596451, "cost2_max": -58.003615554311274, "system_level_velocity_min": 10.166789171403726, "outflow_rate_max": 1098.7959132543947, "outflow_rate_min": 439.3627868923172, "system_level_velocity_max": 13.656796697035176, "cost2_min": -124.1925598455605, "cost1_max": 391.8895226279867, "outflow_rate_mean": 991.4757297127003, "cost1_min": 115.31276135744528, "cost2_mean": -106.69277195334087}, "episodes_total": 5670}
{"date": "2019-05-09_13-10-05", "episode_reward_mean": 858.9313044227528, "episode_reward_min": 230.33578345729316, "done": false, "episode_len_mean": 745.82, "timestamp": 1557407405, "training_iteration": 94, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12488234, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 39201.649, "grad_time_ms": 28665.006, "update_time_ms": 8.265, "num_steps_sampled": 12488234, "default": {"vf_explained_var": 0.8738581538200378, "cur_kl_coeff": 0.33750006556510925, "vf_loss": 20.785938262939453, "policy_loss": -0.016953373327851295, "cur_lr": 0.0005000000237487257, "kl": 0.020137939602136612, "total_loss": 20.775781631469727, "entropy": 1.4284043312072754}, "load_time_ms": 43.34, "num_steps_trained": 12488234}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12488234, "iterations_since_restore": 94, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6c50>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c4e0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 987.7203991672816, "time_this_iter_s": 68.50251626968384, "time_total_s": 6382.628366231918, "time_since_restore": 6382.628366231918, "timesteps_this_iter": 128005, "custom_metrics": {"cost1_mean": 348.910406249084, "system_level_velocity_mean": 12.216557830005398, "cost2_max": -60.24753575286293, "system_level_velocity_min": 10.166789171403726, "outflow_rate_max": 1098.7959132543947, "outflow_rate_min": 428.84653467923846, "system_level_velocity_max": 13.606403715529044, "cost2_min": -128.62321953039614, "cost1_max": 390.94730024718336, "outflow_rate_mean": 987.1782745024757, "cost1_min": 116.26637228230771, "cost2_mean": -107.85507555486546}, "episodes_total": 5736}
{"date": "2019-05-09_13-11-15", "episode_reward_mean": 859.6770743372782, "episode_reward_min": 230.33578345729316, "done": false, "episode_len_mean": 745.82, "timestamp": 1557407475, "training_iteration": 95, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12614905, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 39489.396, "grad_time_ms": 28654.806, "update_time_ms": 8.228, "num_steps_sampled": 12614905, "default": {"vf_explained_var": 0.8899939656257629, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 18.615516662597656, "policy_loss": -0.015908416360616684, "cur_lr": 0.0005000000237487257, "kl": 0.0153586957603693, "total_loss": 18.607383728027344, "entropy": 1.4437330961227417}, "load_time_ms": 43.264, "num_steps_trained": 12614905}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12614905, "iterations_since_restore": 95, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e47b8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4198>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 987.7203991672816, "time_this_iter_s": 69.31553530693054, "time_total_s": 6451.943901538849, "time_since_restore": 6451.943901538849, "timesteps_this_iter": 126671, "custom_metrics": {"cost1_mean": 349.47066556999994, "system_level_velocity_mean": 12.237830352472976, "cost2_max": -60.24753575286293, "system_level_velocity_min": 11.388214278292882, "outflow_rate_max": 1058.322135749288, "outflow_rate_min": 428.84653467923846, "system_level_velocity_max": 13.52819872797555, "cost2_min": -128.62321953039614, "cost1_max": 388.87523406688774, "outflow_rate_mean": 990.1935668575, "cost1_min": 116.26637228230771, "cost2_mean": -106.75548312625654}, "episodes_total": 5800}
{"date": "2019-05-09_13-12-25", "episode_reward_mean": 856.219929937646, "episode_reward_min": 224.75079005947416, "done": false, "episode_len_mean": 745.84, "timestamp": 1557407545, "training_iteration": 96, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12740599, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39716.245, "grad_time_ms": 28678.017, "update_time_ms": 8.146, "num_steps_sampled": 12740599, "default": {"vf_explained_var": 0.8826128840446472, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 20.222963333129883, "policy_loss": -0.016705462709069252, "cur_lr": 0.0005000000237487257, "kl": 0.015088550746440887, "total_loss": 20.21389389038086, "entropy": 1.4334005117416382}, "load_time_ms": 43.112, "num_steps_trained": 12740599}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12740599, "iterations_since_restore": 96, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcd68>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc6d8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 971.5419334439907, "time_this_iter_s": 70.36985182762146, "time_total_s": 6522.31375336647, "time_since_restore": 6522.31375336647, "timesteps_this_iter": 125694, "custom_metrics": {"cost1_mean": 348.2619671498896, "system_level_velocity_mean": 12.190855158875292, "cost2_max": -53.5284876278694, "system_level_velocity_min": 11.218621704621885, "outflow_rate_max": 1115.8171207282246, "outflow_rate_min": 419.3381967881056, "system_level_velocity_max": 13.733440448243552, "cost2_min": -127.42677190221855, "cost1_max": 397.02268945847686, "outflow_rate_mean": 988.6307575037292, "cost1_min": 114.4052939129615, "cost2_mean": -105.83239386737188}, "episodes_total": 5865}
{"date": "2019-05-09_13-13-35", "episode_reward_mean": 867.3222616873651, "episode_reward_min": 784.6607333001106, "done": false, "episode_len_mean": 751.0, "timestamp": 1557407615, "training_iteration": 97, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12866508, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 39917.123, "grad_time_ms": 28682.456, "update_time_ms": 8.222, "num_steps_sampled": 12866508, "default": {"vf_explained_var": 0.8794456124305725, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 20.8387393951416, "policy_loss": -0.01670224964618683, "cur_lr": 0.0005000000237487257, "kl": 0.015548564493656158, "total_loss": 20.82990837097168, "entropy": 1.434810996055603}, "load_time_ms": 42.641, "num_steps_trained": 12866508}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12866508, "iterations_since_restore": 97, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e46d8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4cc0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.894481436959, "time_this_iter_s": 70.08010697364807, "time_total_s": 6592.393860340118, "time_since_restore": 6592.393860340118, "timesteps_this_iter": 125909, "custom_metrics": {"cost1_mean": 351.77139405310396, "system_level_velocity_mean": 12.22109967397443, "cost2_max": -90.08721032739916, "system_level_velocity_min": 11.213198893687728, "outflow_rate_max": 1095.3057336301883, "outflow_rate_min": 899.7976226713529, "system_level_velocity_max": 13.552082739442515, "cost2_min": -129.8292447249918, "cost1_max": 391.3366958378571, "outflow_rate_mean": 994.9568908519599, "cost1_min": 322.1738252894939, "cost2_mean": -106.01294060256049}, "episodes_total": 5929}
{"date": "2019-05-09_13-14-45", "episode_reward_mean": 866.3904289853515, "episode_reward_min": 778.9636814615914, "done": false, "episode_len_mean": 751.0, "timestamp": 1557407685, "training_iteration": 98, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 12991977, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 40059.28, "grad_time_ms": 28755.11, "update_time_ms": 8.278, "num_steps_sampled": 12991977, "default": {"vf_explained_var": 0.88934326171875, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 19.809972763061523, "policy_loss": -0.016465459018945694, "cur_lr": 0.0005000000237487257, "kl": 0.0148561280220747, "total_loss": 19.801029205322266, "entropy": 1.4358253479003906}, "load_time_ms": 41.915, "num_steps_trained": 12991977}, "node_ip": "10.138.0.2", "timesteps_since_restore": 12991977, "iterations_since_restore": 98, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4780>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4358>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 993.7889104234839, "time_this_iter_s": 69.55082559585571, "time_total_s": 6661.944685935974, "time_since_restore": 6661.944685935974, "timesteps_this_iter": 125469, "custom_metrics": {"cost1_mean": 353.0935688630099, "system_level_velocity_mean": 12.265069817444548, "cost2_max": -90.54440149224688, "system_level_velocity_min": 11.213198893687728, "outflow_rate_max": 1095.3057336301883, "outflow_rate_min": 925.8989919785981, "system_level_velocity_max": 13.561635212374284, "cost2_min": -119.89266355075337, "cost1_max": 391.3366958378571, "outflow_rate_mean": 999.8865513885635, "cost1_min": 321.2627253035924, "cost2_mean": -105.2268008332533}, "episodes_total": 5993}
{"date": "2019-05-09_13-15-54", "episode_reward_mean": 866.1767782401612, "episode_reward_min": 783.3500939280862, "done": false, "episode_len_mean": 751.0, "timestamp": 1557407754, "training_iteration": 99, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 13117471, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 40084.279, "grad_time_ms": 28749.032, "update_time_ms": 8.276, "num_steps_sampled": 13117471, "default": {"vf_explained_var": 0.8790382742881775, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 21.244083404541016, "policy_loss": -0.016512909904122353, "cur_lr": 0.0005000000237487257, "kl": 0.015284000895917416, "total_loss": 21.235305786132812, "entropy": 1.4437938928604126}, "load_time_ms": 39.935, "num_steps_trained": 13117471}, "node_ip": "10.138.0.2", "timesteps_since_restore": 13117471, "iterations_since_restore": 99, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dca58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc4e0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc2b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1021.1742713552085, "time_this_iter_s": 69.33890271186829, "time_total_s": 6731.283588647842, "time_since_restore": 6731.283588647842, "timesteps_this_iter": 125494, "custom_metrics": {"cost1_mean": 351.90414961843237, "system_level_velocity_mean": 12.228472363767342, "cost2_max": -90.54440149224688, "system_level_velocity_min": 11.217587632547572, "outflow_rate_max": 1102.1493902617046, "outflow_rate_min": 916.8036433956017, "system_level_velocity_max": 13.926156630411265, "cost2_min": -123.23366929046017, "cost1_max": 400.479916724898, "outflow_rate_mean": 995.2459982672113, "cost1_min": 321.2627253035924, "cost2_mean": -105.05431275564597}, "episodes_total": 6057}
{"date": "2019-05-09_13-17-04", "episode_reward_mean": 836.4505577208787, "episode_reward_min": 211.80326712136886, "done": false, "episode_len_mean": 735.29, "timestamp": 1557407824, "training_iteration": 100, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 13243872, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 40101.682, "grad_time_ms": 28856.449, "update_time_ms": 8.154, "num_steps_sampled": 13243872, "default": {"vf_explained_var": 0.8834275603294373, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 20.79236602783203, "policy_loss": -0.016033783555030823, "cur_lr": 0.0005000000237487257, "kl": 0.015268084593117237, "total_loss": 20.784059524536133, "entropy": 1.451817274093628}, "load_time_ms": 42.644, "num_steps_trained": 13243872}, "node_ip": "10.138.0.2", "timesteps_since_restore": 13243872, "iterations_since_restore": 100, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c5c0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c668>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1021.1742713552085, "time_this_iter_s": 69.51434111595154, "time_total_s": 6800.797929763794, "time_since_restore": 6800.797929763794, "timesteps_this_iter": 126401, "custom_metrics": {"cost1_mean": 342.6151619375952, "system_level_velocity_mean": 12.195622946918363, "cost2_max": -54.525825680283376, "system_level_velocity_min": 9.753072029227143, "outflow_rate_max": 1102.1493902617046, "outflow_rate_min": 404.3974890292704, "system_level_velocity_max": 13.831065741796412, "cost2_min": -123.23366929046017, "cost1_max": 399.7677673088506, "outflow_rate_mean": 972.9382149250312, "cost1_min": 107.98946289317593, "cost2_mean": -103.77629572136982}, "episodes_total": 6125}
{"date": "2019-05-09_13-18-13", "episode_reward_mean": 832.5205503367923, "episode_reward_min": 69.48225607032889, "done": false, "episode_len_mean": 729.02, "timestamp": 1557407893, "training_iteration": 101, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 13370182, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 40135.0, "grad_time_ms": 28973.369, "update_time_ms": 8.309, "num_steps_sampled": 13370182, "default": {"vf_explained_var": 0.8765736222267151, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 20.864351272583008, "policy_loss": -0.015616771765053272, "cur_lr": 0.0005000000237487257, "kl": 0.015422411262989044, "total_loss": 20.856542587280273, "entropy": 1.4486634731292725}, "load_time_ms": 43.424, "num_steps_trained": 13370182}, "node_ip": "10.138.0.2", "timesteps_since_restore": 13370182, "iterations_since_restore": 101, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4208>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4198>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 984.4292893652901, "time_this_iter_s": 69.2393889427185, "time_total_s": 6870.037318706512, "time_since_restore": 6870.037318706512, "timesteps_this_iter": 126310, "custom_metrics": {"cost1_mean": 341.93875861906474, "system_level_velocity_mean": 12.278924086259956, "cost2_max": -51.11408041342027, "system_level_velocity_min": 9.753072029227143, "outflow_rate_max": 1066.3208728814209, "outflow_rate_min": 254.23111705178346, "system_level_velocity_max": 13.620620270394236, "cost2_min": -122.41544691039012, "cost1_max": 389.7355409286679, "outflow_rate_mean": 969.4044838244898, "cost1_min": 50.89619183052284, "cost2_mean": -102.65234445808416}, "episodes_total": 6192}
{"date": "2019-05-09_13-19-23", "episode_reward_mean": 858.3607242404973, "episode_reward_min": 762.8766176135249, "done": false, "episode_len_mean": 751.0, "timestamp": 1557407963, "training_iteration": 102, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 13495435, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 40169.733, "grad_time_ms": 29087.069, "update_time_ms": 8.474, "num_steps_sampled": 13495435, "default": {"vf_explained_var": 0.874996542930603, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 21.477909088134766, "policy_loss": -0.016350504010915756, "cur_lr": 0.0005000000237487257, "kl": 0.015138290822505951, "total_loss": 21.469221115112305, "entropy": 1.4633960723876953}, "load_time_ms": 46.124, "num_steps_trained": 13495435}, "node_ip": "10.138.0.2", "timesteps_since_restore": 13495435, "iterations_since_restore": 102, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cef0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c240>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1011.1001092789162, "time_this_iter_s": 70.1409478187561, "time_total_s": 6940.178266525269, "time_since_restore": 6940.178266525269, "timesteps_this_iter": 125253, "custom_metrics": {"cost1_mean": 351.83999321484487, "system_level_velocity_mean": 12.247431204792168, "cost2_max": -81.57020532105464, "system_level_velocity_min": 11.420576350017267, "outflow_rate_max": 1117.399098104361, "outflow_rate_min": 936.7987329261933, "system_level_velocity_max": 14.051776110358793, "cost2_min": -123.97274478325689, "cost1_max": 404.0928085770873, "outflow_rate_mean": 994.5780072214034, "cost1_min": 328.6258621952037, "cost2_mean": -105.02447432893524}, "episodes_total": 6256}
{"date": "2019-05-09_13-20-33", "episode_reward_mean": 859.7886319887757, "episode_reward_min": 236.87692578097273, "done": false, "episode_len_mean": 745.87, "timestamp": 1557408033, "training_iteration": 103, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 13621224, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40186.956, "grad_time_ms": 29153.394, "update_time_ms": 8.435, "num_steps_sampled": 13621224, "default": {"vf_explained_var": 0.8724605441093445, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 21.692472457885742, "policy_loss": -0.01633087918162346, "cur_lr": 0.0005000000237487257, "kl": 0.014666885137557983, "total_loss": 21.68356704711914, "entropy": 1.4696133136749268}, "load_time_ms": 46.638, "num_steps_trained": 13621224}, "node_ip": "10.138.0.2", "timesteps_since_restore": 13621224, "iterations_since_restore": 103, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4cf8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e45f8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1019.78485361231, "time_this_iter_s": 70.05187153816223, "time_total_s": 7010.230138063431, "time_since_restore": 7010.230138063431, "timesteps_this_iter": 125789, "custom_metrics": {"cost1_mean": 350.0653417966717, "system_level_velocity_mean": 12.262399736466797, "cost2_max": -62.15614164241789, "system_level_velocity_min": 11.420576350017267, "outflow_rate_max": 1117.399098104361, "outflow_rate_min": 444.56923659107224, "system_level_velocity_max": 14.051776110358793, "cost2_min": -124.45168009118699, "cost1_max": 404.0928085770873, "outflow_rate_mean": 991.0393263309124, "cost1_min": 119.70939323428803, "cost2_mean": -105.3856229842306}, "episodes_total": 6321}
{"date": "2019-05-09_13-21-44", "episode_reward_mean": 848.5656115087135, "episode_reward_min": 69.41362733459601, "done": false, "episode_len_mean": 739.64, "timestamp": 1557408104, "training_iteration": 104, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 13748377, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40193.516, "grad_time_ms": 29345.635, "update_time_ms": 8.451, "num_steps_sampled": 13748377, "default": {"vf_explained_var": 0.8681586384773254, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 21.559213638305664, "policy_loss": -0.01671040989458561, "cur_lr": 0.0005000000237487257, "kl": 0.016298845410346985, "total_loss": 21.55075454711914, "entropy": 1.456185221672058}, "load_time_ms": 46.851, "num_steps_trained": 13748377}, "node_ip": "10.138.0.2", "timesteps_since_restore": 13748377, "iterations_since_restore": 104, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859982b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998160>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1010.0697409492532, "time_this_iter_s": 70.4956042766571, "time_total_s": 7080.725742340088, "time_since_restore": 7080.725742340088, "timesteps_this_iter": 127153, "custom_metrics": {"cost1_mean": 345.1442872565413, "system_level_velocity_mean": 12.169071461188105, "cost2_max": -49.41261447181714, "system_level_velocity_min": 9.380902358619801, "outflow_rate_max": 1092.7721493225654, "outflow_rate_min": 254.23111705178346, "system_level_velocity_max": 13.703753283186824, "cost2_min": -123.83220435196591, "cost1_max": 394.7963133156916, "outflow_rate_mean": 977.8625816361533, "cost1_min": 50.6830719866961, "cost2_mean": -103.70738975206146}, "episodes_total": 6386}
{"date": "2019-05-09_13-22-53", "episode_reward_mean": 872.640199477207, "episode_reward_min": 727.0006983371948, "done": false, "episode_len_mean": 751.0, "timestamp": 1557408173, "training_iteration": 105, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 13873432, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 40122.798, "grad_time_ms": 29417.965, "update_time_ms": 8.701, "num_steps_sampled": 13873432, "default": {"vf_explained_var": 0.8678439855575562, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 21.877342224121094, "policy_loss": -0.015663644298911095, "cur_lr": 0.0005000000237487257, "kl": 0.015005084685981274, "total_loss": 21.869274139404297, "entropy": 1.448130488395691}, "load_time_ms": 46.754, "num_steps_trained": 13873432}, "node_ip": "10.138.0.2", "timesteps_since_restore": 13873432, "iterations_since_restore": 105, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ca20>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cef0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1007.6108264358966, "time_this_iter_s": 69.38688158988953, "time_total_s": 7150.112623929977, "time_since_restore": 7150.112623929977, "timesteps_this_iter": 125055, "custom_metrics": {"cost1_mean": 352.98848252416303, "system_level_velocity_mean": 12.241036486846482, "cost2_max": -87.59762774033447, "system_level_velocity_min": 9.380902358619801, "outflow_rate_max": 1109.8455228681248, "outflow_rate_min": 801.5959093055461, "system_level_velocity_max": 13.81360956863832, "cost2_min": -123.83220435196591, "cost1_max": 398.8371395042428, "outflow_rate_mean": 996.5229089121624, "cost1_min": 270.92663276059636, "cost2_mean": -105.0533295467311}, "episodes_total": 6450}
{"date": "2019-05-09_13-24-03", "episode_reward_mean": 876.9444350362279, "episode_reward_min": 774.572667592873, "done": false, "episode_len_mean": 751.0, "timestamp": 1557408243, "training_iteration": 106, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14000746, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40044.209, "grad_time_ms": 29446.837, "update_time_ms": 9.041, "num_steps_sampled": 14000746, "default": {"vf_explained_var": 0.8633142709732056, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 22.078895568847656, "policy_loss": -0.016088850796222687, "cur_lr": 0.0005000000237487257, "kl": 0.014910116791725159, "total_loss": 22.070356369018555, "entropy": 1.4522531032562256}, "load_time_ms": 44.542, "num_steps_trained": 14000746}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14000746, "iterations_since_restore": 106, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bc18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b048>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b208>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1019.3073728561736, "time_this_iter_s": 69.83231544494629, "time_total_s": 7219.944939374924, "time_since_restore": 7219.944939374924, "timesteps_this_iter": 127314, "custom_metrics": {"cost1_mean": 352.8360441365269, "system_level_velocity_mean": 12.240412459603467, "cost2_max": -87.38626656575558, "system_level_velocity_min": 11.215141425547701, "outflow_rate_max": 1101.1784695844856, "outflow_rate_min": 887.6772555796488, "system_level_velocity_max": 13.853490427065395, "cost2_min": -120.46505573179391, "cost1_max": 399.7044335193759, "outflow_rate_mean": 994.232159432724, "cost1_min": 323.5147762420832, "cost2_mean": -103.89636001972964}, "episodes_total": 6515}
{"date": "2019-05-09_13-25-13", "episode_reward_mean": 882.6431753565289, "episode_reward_min": 231.0886533743888, "done": false, "episode_len_mean": 745.83, "timestamp": 1557408313, "training_iteration": 107, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14127201, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 39891.338, "grad_time_ms": 29585.069, "update_time_ms": 9.041, "num_steps_sampled": 14127201, "default": {"vf_explained_var": 0.8585895299911499, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 22.6009521484375, "policy_loss": -0.016737669706344604, "cur_lr": 0.0005000000237487257, "kl": 0.01455172523856163, "total_loss": 22.591585159301758, "entropy": 1.4394220113754272}, "load_time_ms": 44.542, "num_steps_trained": 14127201}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14127201, "iterations_since_restore": 107, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dccf8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dca58>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1008.1387807510608, "time_this_iter_s": 69.96123385429382, "time_total_s": 7289.9061732292175, "time_since_restore": 7289.9061732292175, "timesteps_this_iter": 126455, "custom_metrics": {"cost1_mean": 352.5976499758305, "system_level_velocity_mean": 12.306752287257067, "cost2_max": -64.15856719925279, "system_level_velocity_min": 10.226452055646373, "outflow_rate_max": 1091.4513910382095, "outflow_rate_min": 431.5134459959643, "system_level_velocity_max": 13.800065544934741, "cost2_min": -127.81266632519895, "cost1_max": 396.8257177889336, "outflow_rate_mean": 992.6578998694613, "cost1_min": 116.93649981396936, "cost2_mean": -104.68873057041044}, "episodes_total": 6581}
{"date": "2019-05-09_13-26-23", "episode_reward_mean": 884.5469088868227, "episode_reward_min": 709.398520927359, "done": false, "episode_len_mean": 751.0, "timestamp": 1557408383, "training_iteration": 108, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14253957, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39668.424, "grad_time_ms": 29821.622, "update_time_ms": 9.354, "num_steps_sampled": 14253957, "default": {"vf_explained_var": 0.8561044931411743, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.06454086303711, "policy_loss": -0.016732707619667053, "cur_lr": 0.0005000000237487257, "kl": 0.015683358535170555, "total_loss": 24.05574607849121, "entropy": 1.4654313325881958}, "load_time_ms": 44.726, "num_steps_trained": 14253957}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14253957, "iterations_since_restore": 108, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c5f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cef0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c908>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1008.1387807510608, "time_this_iter_s": 69.73001956939697, "time_total_s": 7359.6361927986145, "time_since_restore": 7359.6361927986145, "timesteps_this_iter": 126756, "custom_metrics": {"cost1_mean": 353.43374352065257, "system_level_velocity_mean": 12.249641167532374, "cost2_max": -80.77595037372484, "system_level_velocity_min": 9.52231953270926, "outflow_rate_max": 1091.4513910382095, "outflow_rate_min": 821.9920708502866, "system_level_velocity_max": 13.857052413168445, "cost2_min": -127.81266632519895, "cost1_max": 398.23133035092303, "outflow_rate_mean": 993.3661881721412, "cost1_min": 275.30052779558554, "cost2_mean": -102.4980407038619}, "episodes_total": 6646}
{"date": "2019-05-09_13-27-32", "episode_reward_mean": 865.4718966537017, "episode_reward_min": 225.05131156983066, "done": false, "episode_len_mean": 745.77, "timestamp": 1557408452, "training_iteration": 109, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14379368, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39433.329, "grad_time_ms": 30033.302, "update_time_ms": 9.741, "num_steps_sampled": 14379368, "default": {"vf_explained_var": 0.8774740695953369, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 21.592796325683594, "policy_loss": -0.017609838396310806, "cur_lr": 0.0005000000237487257, "kl": 0.015532699413597584, "total_loss": 21.583049774169922, "entropy": 1.4812297821044922}, "load_time_ms": 46.506, "num_steps_trained": 14379368}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14379368, "iterations_since_restore": 109, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bd30>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b630>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 989.4241740226813, "time_this_iter_s": 69.15304946899414, "time_total_s": 7428.789242267609, "time_since_restore": 7428.789242267609, "timesteps_this_iter": 125411, "custom_metrics": {"cost1_mean": 349.591919395985, "system_level_velocity_mean": 12.22294397663815, "cost2_max": -62.97919913856224, "system_level_velocity_min": 11.182398407501756, "outflow_rate_max": 1063.8119139402909, "outflow_rate_min": 429.91303433242064, "system_level_velocity_max": 13.542584513289624, "cost2_min": -116.91447841870065, "cost1_max": 385.102801867598, "outflow_rate_mean": 987.4704841155974, "cost1_min": 115.99272789745889, "cost2_mean": -100.89007349545363}, "episodes_total": 6711}
{"date": "2019-05-09_13-28-44", "episode_reward_mean": 859.0959396131177, "episode_reward_min": 736.3386346938264, "done": false, "episode_len_mean": 751.0, "timestamp": 1557408524, "training_iteration": 110, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14506212, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 39367.672, "grad_time_ms": 30343.567, "update_time_ms": 10.089, "num_steps_sampled": 14506212, "default": {"vf_explained_var": 0.8873913288116455, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 19.76018524169922, "policy_loss": -0.016785873100161552, "cur_lr": 0.0005000000237487257, "kl": 0.01495041511952877, "total_loss": 19.75096893310547, "entropy": 1.5104752779006958}, "load_time_ms": 43.907, "num_steps_trained": 14506212}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14506212, "iterations_since_restore": 110, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc748>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc6d8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 981.1213452297328, "time_this_iter_s": 71.94260668754578, "time_total_s": 7500.731848955154, "time_since_restore": 7500.731848955154, "timesteps_this_iter": 126844, "custom_metrics": {"cost1_mean": 348.3161120135096, "system_level_velocity_mean": 12.082410787296293, "cost2_max": -87.13810333485713, "system_level_velocity_min": 9.988155591020139, "outflow_rate_max": 1068.682622397057, "outflow_rate_min": 841.9478781761374, "system_level_velocity_max": 13.407332541210698, "cost2_min": -120.7442874739003, "cost1_max": 385.102801867598, "outflow_rate_mean": 985.6195014651388, "cost1_min": 287.6322782207812, "cost2_mean": -102.66658362866792}, "episodes_total": 6775}
{"date": "2019-05-09_13-29-55", "episode_reward_mean": 861.0072078203389, "episode_reward_min": 226.45847351614077, "done": false, "episode_len_mean": 745.8, "timestamp": 1557408595, "training_iteration": 111, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14633132, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 39034.513, "grad_time_ms": 30856.246, "update_time_ms": 10.395, "num_steps_sampled": 14633132, "default": {"vf_explained_var": 0.8763918876647949, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 21.29607391357422, "policy_loss": -0.015551276504993439, "cur_lr": 0.0005000000237487257, "kl": 0.015317639335989952, "total_loss": 21.288278579711914, "entropy": 1.4773991107940674}, "load_time_ms": 43.82, "num_steps_trained": 14633132}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14633132, "iterations_since_restore": 111, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998080>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859986a0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 993.5824748508047, "time_this_iter_s": 71.1197681427002, "time_total_s": 7571.851617097855, "time_since_restore": 7571.851617097855, "timesteps_this_iter": 126920, "custom_metrics": {"cost1_mean": 347.79776830157095, "system_level_velocity_mean": 12.151706300219653, "cost2_max": -58.426614744959224, "system_level_velocity_min": 9.14483995962022, "outflow_rate_max": 1095.910938323611, "outflow_rate_min": 431.7323350876208, "system_level_velocity_max": 13.776714211532436, "cost2_min": -120.7442874739003, "cost1_max": 396.0938930647016, "outflow_rate_mean": 984.3411404584215, "cost1_min": 115.54325494426556, "cost2_mean": -100.96211799964586}, "episodes_total": 6841}
{"date": "2019-05-09_13-31-04", "episode_reward_mean": 871.209691164015, "episode_reward_min": 348.4028240903961, "done": false, "episode_len_mean": 745.83, "timestamp": 1557408664, "training_iteration": 112, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14759738, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 38585.693, "grad_time_ms": 31099.79, "update_time_ms": 11.095, "num_steps_sampled": 14759738, "default": {"vf_explained_var": 0.8625012040138245, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.654943466186523, "policy_loss": -0.016263995319604874, "cur_lr": 0.0005000000237487257, "kl": 0.01529603824019432, "total_loss": 23.64642333984375, "entropy": 1.4704190492630005}, "load_time_ms": 43.502, "num_steps_trained": 14759738}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14759738, "iterations_since_restore": 112, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc358>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dceb8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1020.1877600673604, "time_this_iter_s": 68.13406419754028, "time_total_s": 7639.985681295395, "time_since_restore": 7639.985681295395, "timesteps_this_iter": 126606, "custom_metrics": {"cost1_mean": 348.78337675974296, "system_level_velocity_mean": 12.184655024114953, "cost2_max": -56.54062821215564, "system_level_velocity_min": 10.233269028458949, "outflow_rate_max": 1092.2187497791756, "outflow_rate_min": 550.7811761727415, "system_level_velocity_max": 13.764093908887462, "cost2_min": -117.461000752313, "cost1_max": 397.5291162886972, "outflow_rate_mean": 984.6879352249598, "cost1_min": 160.75170759542772, "cost2_mean": -99.42539212665685}, "episodes_total": 6906}
{"date": "2019-05-09_13-32-12", "episode_reward_mean": 879.3186328171439, "episode_reward_min": 348.4028240903961, "done": false, "episode_len_mean": 745.83, "timestamp": 1557408732, "training_iteration": 113, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 14887294, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 38133.6, "grad_time_ms": 31411.275, "update_time_ms": 11.533, "num_steps_sampled": 14887294, "default": {"vf_explained_var": 0.8679252862930298, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 22.490741729736328, "policy_loss": -0.01632785052061081, "cur_lr": 0.0005000000237487257, "kl": 0.015472610481083393, "total_loss": 22.48224449157715, "entropy": 1.4734834432601929}, "load_time_ms": 43.866, "num_steps_trained": 14887294}, "node_ip": "10.138.0.2", "timesteps_since_restore": 14887294, "iterations_since_restore": 113, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c748>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c588>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1020.1877600673604, "time_this_iter_s": 68.6745343208313, "time_total_s": 7708.660215616226, "time_since_restore": 7708.660215616226, "timesteps_this_iter": 127556, "custom_metrics": {"cost1_mean": 350.5696982035233, "system_level_velocity_mean": 12.22841657940993, "cost2_max": -56.54062821215564, "system_level_velocity_min": 10.233269028458949, "outflow_rate_max": 1092.2187497791756, "outflow_rate_min": 550.7811761727415, "system_level_velocity_max": 13.764093908887462, "cost2_min": -117.22512417866548, "cost1_max": 397.5291162886972, "outflow_rate_mean": 990.1568519004545, "cost1_min": 160.75170759542772, "cost2_mean": -100.94305319304645}, "episodes_total": 6971}
{"date": "2019-05-09_13-33-20", "episode_reward_mean": 888.5810050142271, "episode_reward_min": 718.3663417912359, "done": false, "episode_len_mean": 751.0, "timestamp": 1557408800, "training_iteration": 114, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15014170, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 37611.663, "grad_time_ms": 31664.353, "update_time_ms": 11.557, "num_steps_sampled": 15014170, "default": {"vf_explained_var": 0.8623375296592712, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 23.202001571655273, "policy_loss": -0.016101496294140816, "cur_lr": 0.0005000000237487257, "kl": 0.015256313607096672, "total_loss": 23.193620681762695, "entropy": 1.454898476600647}, "load_time_ms": 41.638, "num_steps_trained": 15014170}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15014170, "iterations_since_restore": 114, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4b38>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4208>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1021.6524045714223, "time_this_iter_s": 67.75238108634949, "time_total_s": 7776.412596702576, "time_since_restore": 7776.412596702576, "timesteps_this_iter": 126876, "custom_metrics": {"cost1_mean": 352.74465402316395, "system_level_velocity_mean": 12.202093929179135, "cost2_max": -88.13460446565064, "system_level_velocity_min": 9.416678964977793, "outflow_rate_max": 1094.5791315529757, "outflow_rate_min": 797.9737742252684, "system_level_velocity_max": 13.876651979275099, "cost2_min": -121.65590662380653, "cost1_max": 399.84803447711346, "outflow_rate_mean": 993.207679870776, "cost1_min": 272.69106080280335, "cost2_mean": -102.0788202776457}, "episodes_total": 7036}
{"date": "2019-05-09_13-34-27", "episode_reward_mean": 885.3517218503625, "episode_reward_min": 223.8101464301415, "done": false, "episode_len_mean": 745.79, "timestamp": 1557408867, "training_iteration": 115, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15140491, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 37113.596, "grad_time_ms": 31895.141, "update_time_ms": 11.243, "num_steps_sampled": 15140491, "default": {"vf_explained_var": 0.8578216433525085, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.922025680541992, "policy_loss": -0.016437344253063202, "cur_lr": 0.0005000000237487257, "kl": 0.01543294358998537, "total_loss": 23.913400650024414, "entropy": 1.4845092296600342}, "load_time_ms": 43.748, "num_steps_trained": 15140491}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15140491, "iterations_since_restore": 115, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998ac8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859987f0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 985.8071557101715, "time_this_iter_s": 66.68809986114502, "time_total_s": 7843.100696563721, "time_since_restore": 7843.100696563721, "timesteps_this_iter": 126321, "custom_metrics": {"cost1_mean": 350.2139758857114, "system_level_velocity_mean": 12.200245574697078, "cost2_max": -56.47352160238023, "system_level_velocity_min": 9.416678964977793, "outflow_rate_max": 1088.570818386673, "outflow_rate_min": 431.63312071902305, "system_level_velocity_max": 13.659278275198506, "cost2_min": -118.30340533074866, "cost1_max": 391.9109198593976, "outflow_rate_mean": 987.0801345165335, "cost1_min": 114.3506557411981, "cost2_mean": -102.55333416808462}, "episodes_total": 7100}
{"date": "2019-05-09_13-35-35", "episode_reward_mean": 880.7089829947657, "episode_reward_min": 223.8101464301415, "done": false, "episode_len_mean": 745.79, "timestamp": 1557408935, "training_iteration": 116, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15265763, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 36729.307, "grad_time_ms": 32057.104, "update_time_ms": 10.882, "num_steps_sampled": 15265763, "default": {"vf_explained_var": 0.8472988605499268, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 25.019779205322266, "policy_loss": -0.016854284331202507, "cur_lr": 0.0005000000237487257, "kl": 0.015429523773491383, "total_loss": 25.0107364654541, "entropy": 1.4820609092712402}, "load_time_ms": 45.501, "num_steps_trained": 15265763}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15265763, "iterations_since_restore": 116, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e44a8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4320>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1007.3565917598369, "time_this_iter_s": 67.64328479766846, "time_total_s": 7910.743981361389, "time_since_restore": 7910.743981361389, "timesteps_this_iter": 125272, "custom_metrics": {"cost1_mean": 349.4241607614376, "system_level_velocity_mean": 12.171659438024008, "cost2_max": -56.47352160238023, "system_level_velocity_min": 10.25732039364452, "outflow_rate_max": 1085.4615647998273, "outflow_rate_min": 431.63312071902305, "system_level_velocity_max": 13.303391950783373, "cost2_min": -118.4653783975226, "cost1_max": 385.3658997949696, "outflow_rate_mean": 984.8911493068887, "cost1_min": 114.3506557411981, "cost2_mean": -101.48057890780561}, "episodes_total": 7164}
{"date": "2019-05-09_13-36-41", "episode_reward_mean": 876.7008757848937, "episode_reward_min": 789.4293889213578, "done": false, "episode_len_mean": 751.0, "timestamp": 1557409001, "training_iteration": 117, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15391792, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 36341.184, "grad_time_ms": 32105.265, "update_time_ms": 10.723, "num_steps_sampled": 15391792, "default": {"vf_explained_var": 0.8562219142913818, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.18535614013672, "policy_loss": -0.016785621643066406, "cur_lr": 0.0005000000237487257, "kl": 0.015667427331209183, "total_loss": 24.176502227783203, "entropy": 1.5022423267364502}, "load_time_ms": 46.456, "num_steps_trained": 15391792}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15391792, "iterations_since_restore": 117, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e47b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e42e8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4588>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1007.3565917598369, "time_this_iter_s": 66.58432579040527, "time_total_s": 7977.328307151794, "time_since_restore": 7977.328307151794, "timesteps_this_iter": 126029, "custom_metrics": {"cost1_mean": 348.51965508704495, "system_level_velocity_mean": 12.056623857266977, "cost2_max": -80.13856094814922, "system_level_velocity_min": 10.714243259511917, "outflow_rate_max": 1085.4615647998273, "outflow_rate_min": 862.5557527124096, "system_level_velocity_max": 13.303391950783373, "cost2_min": -117.50605636480105, "cost1_max": 385.3658997949696, "outflow_rate_mean": 982.8151045601503, "cost1_min": 308.6999435761586, "cost2_mean": -100.22777375188178}, "episodes_total": 7228}
{"date": "2019-05-09_13-37-48", "episode_reward_mean": 875.0937333875761, "episode_reward_min": 737.5467477992305, "done": false, "episode_len_mean": 751.0, "timestamp": 1557409068, "training_iteration": 118, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15517856, "pid": 25325, "episodes_this_iter": 64, "info": {"sample_time_ms": 36081.63, "grad_time_ms": 32053.587, "update_time_ms": 10.395, "num_steps_sampled": 15517856, "default": {"vf_explained_var": 0.8611600399017334, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.842365264892578, "policy_loss": -0.017001841217279434, "cur_lr": 0.0005000000237487257, "kl": 0.015351062640547752, "total_loss": 23.833133697509766, "entropy": 1.5020803213119507}, "load_time_ms": 44.639, "num_steps_trained": 15517856}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15517856, "iterations_since_restore": 118, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859987f0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998860>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1006.1408287912606, "time_this_iter_s": 66.58838129043579, "time_total_s": 8043.91668844223, "time_since_restore": 8043.91668844223, "timesteps_this_iter": 126064, "custom_metrics": {"cost1_mean": 348.136447563194, "system_level_velocity_mean": 12.044253663123516, "cost2_max": -80.13856094814922, "system_level_velocity_min": 10.184576917993125, "outflow_rate_max": 1074.780232357472, "outflow_rate_min": 830.2133710904694, "system_level_velocity_max": 13.298784490900548, "cost2_min": -120.54882103621443, "cost1_max": 386.4608593965035, "outflow_rate_mean": 982.2891418173189, "cost1_min": 291.32063441769685, "cost2_mean": -101.85193329258267}, "episodes_total": 7292}
{"date": "2019-05-09_13-38-53", "episode_reward_mean": 872.4229163946696, "episode_reward_min": 640.3392505454018, "done": false, "episode_len_mean": 747.68, "timestamp": 1557409133, "training_iteration": 119, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15643415, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 35894.472, "grad_time_ms": 31852.424, "update_time_ms": 9.917, "num_steps_sampled": 15643415, "default": {"vf_explained_var": 0.8775271773338318, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.068227767944336, "policy_loss": -0.01649431139230728, "cur_lr": 0.0005000000237487257, "kl": 0.01448767352849245, "total_loss": 23.059072494506836, "entropy": 1.5189769268035889}, "load_time_ms": 45.064, "num_steps_trained": 15643415}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15643415, "iterations_since_restore": 119, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859980b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998668>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998cc0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 999.8889644141008, "time_this_iter_s": 65.2468626499176, "time_total_s": 8109.163551092148, "time_since_restore": 8109.163551092148, "timesteps_this_iter": 125559, "custom_metrics": {"cost1_mean": 350.68583893156216, "system_level_velocity_mean": 12.200876824563766, "cost2_max": -77.4996283245562, "system_level_velocity_min": 10.184576917993125, "outflow_rate_max": 1108.9913148614162, "outflow_rate_min": 748.7072835080926, "system_level_velocity_max": 14.00021263046089, "cost2_min": -119.40302900474265, "cost1_max": 400.26397296951853, "outflow_rate_mean": 990.3836849286806, "cost1_min": 268.37755096760117, "cost2_mean": -102.20105269495636}, "episodes_total": 7357}
{"date": "2019-05-09_13-40-01", "episode_reward_mean": 855.3935320298383, "episode_reward_min": 206.6689806296022, "done": false, "episode_len_mean": 737.22, "timestamp": 1557409201, "training_iteration": 120, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15769179, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 35518.204, "grad_time_ms": 31766.368, "update_time_ms": 9.554, "num_steps_sampled": 15769179, "default": {"vf_explained_var": 0.8675615787506104, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.7309627532959, "policy_loss": -0.01627088524401188, "cur_lr": 0.0005000000237487257, "kl": 0.015277846716344357, "total_loss": 23.72242546081543, "entropy": 1.4930611848831177}, "load_time_ms": 47.678, "num_steps_trained": 15769179}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15769179, "iterations_since_restore": 120, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e47f0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4208>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1011.3132987615935, "time_this_iter_s": 67.41495037078857, "time_total_s": 8176.578501462936, "time_since_restore": 8176.578501462936, "timesteps_this_iter": 125764, "custom_metrics": {"cost1_mean": 345.86435706833504, "system_level_velocity_mean": 12.234975230059206, "cost2_max": -56.54828335647039, "system_level_velocity_min": 11.13336976215397, "outflow_rate_max": 1096.977140112429, "outflow_rate_min": 414.51293096871774, "system_level_velocity_max": 14.00021263046089, "cost2_min": -126.50586356219549, "cost1_max": 392.85058232105143, "outflow_rate_mean": 979.3847036240185, "cost1_min": 107.62491817318265, "cost2_mean": -99.82130804082432}, "episodes_total": 7424}
{"date": "2019-05-09_13-41-07", "episode_reward_mean": 850.8677842882825, "episode_reward_min": 234.90149124380034, "done": false, "episode_len_mean": 735.56, "timestamp": 1557409267, "training_iteration": 121, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 15895061, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 35505.341, "grad_time_ms": 31339.156, "update_time_ms": 9.379, "num_steps_sampled": 15895061, "default": {"vf_explained_var": 0.8680641055107117, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 24.908649444580078, "policy_loss": -0.016325879842042923, "cur_lr": 0.0005000000237487257, "kl": 0.015658661723136902, "total_loss": 24.900251388549805, "entropy": 1.5229061841964722}, "load_time_ms": 47.586, "num_steps_trained": 15895061}, "node_ip": "10.138.0.2", "timesteps_since_restore": 15895061, "iterations_since_restore": 121, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859987f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998eb8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998080>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1011.3132987615935, "time_this_iter_s": 66.65957140922546, "time_total_s": 8243.238072872162, "time_since_restore": 8243.238072872162, "timesteps_this_iter": 125882, "custom_metrics": {"cost1_mean": 344.54003112134683, "system_level_velocity_mean": 12.229182288903939, "cost2_max": -59.977599427801536, "system_level_velocity_min": 9.449807701694848, "outflow_rate_max": 1084.9005991830493, "outflow_rate_min": 434.1287355120441, "system_level_velocity_max": 13.54777289066382, "cost2_min": -113.30067436635822, "cost1_max": 390.73437297481365, "outflow_rate_mean": 974.9767998665202, "cost1_min": 118.29919363175998, "cost2_mean": -98.84263906565225}, "episodes_total": 7491}
{"date": "2019-05-09_13-42-14", "episode_reward_mean": 854.9164424647593, "episode_reward_min": 234.90149124380034, "done": false, "episode_len_mean": 740.69, "timestamp": 1557409334, "training_iteration": 122, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16021149, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 35621.679, "grad_time_ms": 31108.422, "update_time_ms": 8.67, "num_steps_sampled": 16021149, "default": {"vf_explained_var": 0.8656482696533203, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.82304573059082, "policy_loss": -0.015700234100222588, "cur_lr": 0.0005000000237487257, "kl": 0.015498178079724312, "total_loss": 24.8151912689209, "entropy": 1.5087865591049194}, "load_time_ms": 48.099, "num_steps_trained": 16021149}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16021149, "iterations_since_restore": 122, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc908>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc978>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 983.7625794449301, "time_this_iter_s": 66.9445333480835, "time_total_s": 8310.182606220245, "time_since_restore": 8310.182606220245, "timesteps_this_iter": 126088, "custom_metrics": {"cost1_mean": 346.7651721110036, "system_level_velocity_mean": 12.226669116734271, "cost2_max": -63.48526720624996, "system_level_velocity_min": 9.449807701694848, "outflow_rate_max": 1056.3161904378994, "outflow_rate_min": 434.1287355120441, "system_level_velocity_max": 13.54777289066382, "cost2_min": -125.6484317356709, "cost1_max": 386.71214745995167, "outflow_rate_mean": 979.5453718935314, "cost1_min": 119.1008544264848, "cost2_mean": -98.51852632239921}, "episodes_total": 7556}
{"date": "2019-05-09_13-43-21", "episode_reward_mean": 873.4953402787427, "episode_reward_min": 223.63505003171474, "done": false, "episode_len_mean": 745.79, "timestamp": 1557409401, "training_iteration": 123, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16146583, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 35774.11, "grad_time_ms": 30761.496, "update_time_ms": 8.637, "num_steps_sampled": 16146583, "default": {"vf_explained_var": 0.8537284731864929, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 25.50156021118164, "policy_loss": -0.016079042106866837, "cur_lr": 0.0005000000237487257, "kl": 0.014944355003535748, "total_loss": 25.493045806884766, "entropy": 1.494338870048523}, "load_time_ms": 47.743, "num_steps_trained": 16146583}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16146583, "iterations_since_restore": 123, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984e0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998ef0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1001.308715475373, "time_this_iter_s": 66.72300410270691, "time_total_s": 8376.905610322952, "time_since_restore": 8376.905610322952, "timesteps_this_iter": 125434, "custom_metrics": {"cost1_mean": 352.56554647921, "system_level_velocity_mean": 12.316821924322289, "cost2_max": -61.55856157372389, "system_level_velocity_min": 10.445605547761586, "outflow_rate_max": 1105.9704119670125, "outflow_rate_min": 439.87262720929044, "system_level_velocity_max": 13.940280927853873, "cost2_min": -125.6484317356709, "cost1_max": 400.6190838559414, "outflow_rate_mean": 991.0609050627415, "cost1_min": 116.58095873494777, "cost2_mean": -102.14570700185526}, "episodes_total": 7622}
{"date": "2019-05-09_13-44-29", "episode_reward_mean": 867.9331581914973, "episode_reward_min": 764.4070019693917, "done": false, "episode_len_mean": 751.0, "timestamp": 1557409469, "training_iteration": 124, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16273836, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 36090.537, "grad_time_ms": 30400.28, "update_time_ms": 8.59, "num_steps_sampled": 16273836, "default": {"vf_explained_var": 0.8634439706802368, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 25.784574508666992, "policy_loss": -0.01705002225935459, "cur_lr": 0.0005000000237487257, "kl": 0.015059038996696472, "total_loss": 25.775146484375, "entropy": 1.559208631515503}, "load_time_ms": 50.141, "num_steps_trained": 16273836}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16273836, "iterations_since_restore": 124, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859980f0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998400>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1023.1941594826914, "time_this_iter_s": 67.3577823638916, "time_total_s": 8444.263392686844, "time_since_restore": 8444.263392686844, "timesteps_this_iter": 127253, "custom_metrics": {"cost1_mean": 351.3149907353803, "system_level_velocity_mean": 12.185822884669935, "cost2_max": -79.3500557250247, "system_level_velocity_min": 9.756525788675392, "outflow_rate_max": 1096.7550290690708, "outflow_rate_min": 826.9695178907123, "system_level_velocity_max": 13.717170970957765, "cost2_min": -121.85054015992404, "cost1_max": 396.4661045688764, "outflow_rate_mean": 989.0476845315411, "cost1_min": 282.34538900369375, "cost2_mean": -102.70188898866893}, "episodes_total": 7687}
{"date": "2019-05-09_13-45-38", "episode_reward_mean": 856.4267241878337, "episode_reward_min": 768.8092691242663, "done": false, "episode_len_mean": 751.0, "timestamp": 1557409538, "training_iteration": 125, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16399608, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 36478.025, "grad_time_ms": 30265.968, "update_time_ms": 8.862, "num_steps_sampled": 16399608, "default": {"vf_explained_var": 0.8752948641777039, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.358261108398438, "policy_loss": -0.016944387927651405, "cur_lr": 0.0005000000237487257, "kl": 0.015031944960355759, "total_loss": 24.34892463684082, "entropy": 1.569292426109314}, "load_time_ms": 48.001, "num_steps_trained": 16399608}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16399608, "iterations_since_restore": 125, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcd68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc748>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc6d8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1023.1941594826914, "time_this_iter_s": 69.19545412063599, "time_total_s": 8513.45884680748, "time_since_restore": 8513.45884680748, "timesteps_this_iter": 125772, "custom_metrics": {"cost1_mean": 350.17366099256884, "system_level_velocity_mean": 12.164014947689544, "cost2_max": -79.3500557250247, "system_level_velocity_min": 9.756525788675392, "outflow_rate_max": 1098.515935555435, "outflow_rate_min": 816.108521793981, "system_level_velocity_max": 13.976387494901322, "cost2_min": -126.43012343434174, "cost1_max": 400.14907119215275, "outflow_rate_mean": 987.6249809632761, "cost1_min": 282.34538900369375, "cost2_mean": -101.9498681602166}, "episodes_total": 7752}
{"date": "2019-05-09_13-46-45", "episode_reward_mean": 854.2421334310451, "episode_reward_min": 763.7775720197582, "done": false, "episode_len_mean": 751.0, "timestamp": 1557409605, "training_iteration": 126, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16525635, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 36837.701, "grad_time_ms": 29891.436, "update_time_ms": 8.878, "num_steps_sampled": 16525635, "default": {"vf_explained_var": 0.8751726746559143, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.338289260864258, "policy_loss": -0.016657155007123947, "cur_lr": 0.0005000000237487257, "kl": 0.014766519889235497, "total_loss": 24.329105377197266, "entropy": 1.5661596059799194}, "load_time_ms": 48.352, "num_steps_trained": 16525635}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16525635, "iterations_since_restore": 126, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998a20>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998550>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 984.9291064023146, "time_this_iter_s": 67.46549081802368, "time_total_s": 8580.924337625504, "time_since_restore": 8580.924337625504, "timesteps_this_iter": 126027, "custom_metrics": {"cost1_mean": 352.11603748700526, "system_level_velocity_mean": 12.246869894026055, "cost2_max": -83.12450328275641, "system_level_velocity_min": 9.810777261212754, "outflow_rate_max": 1098.888657060211, "outflow_rate_min": 816.108521793981, "system_level_velocity_max": 13.976387494901322, "cost2_min": -126.43012343434174, "cost1_max": 401.7723552999124, "outflow_rate_mean": 991.2159764561034, "cost1_min": 283.0908826253603, "cost2_mean": -103.49209529582743}, "episodes_total": 7817}
{"date": "2019-05-09_13-47-54", "episode_reward_mean": 834.871671201606, "episode_reward_min": 218.03645132715823, "done": false, "episode_len_mean": 745.79, "timestamp": 1557409674, "training_iteration": 127, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16652971, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 37266.729, "grad_time_ms": 29673.002, "update_time_ms": 8.895, "num_steps_sampled": 16652971, "default": {"vf_explained_var": 0.8834009170532227, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.129764556884766, "policy_loss": -0.016336826607584953, "cur_lr": 0.0005000000237487257, "kl": 0.014794795773923397, "total_loss": 23.12091827392578, "entropy": 1.6125222444534302}, "load_time_ms": 47.952, "num_steps_trained": 16652971}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16652971, "iterations_since_restore": 127, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cc88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c780>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c7f0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 988.2841734059236, "time_this_iter_s": 68.65972352027893, "time_total_s": 8649.584061145782, "time_since_restore": 8649.584061145782, "timesteps_this_iter": 127336, "custom_metrics": {"cost1_mean": 347.3386878671521, "system_level_velocity_mean": 12.191324301957401, "cost2_max": -71.85166771822782, "system_level_velocity_min": 10.376287818116955, "outflow_rate_max": 1128.3131366771925, "outflow_rate_min": 429.4118466067862, "system_level_velocity_max": 14.259169457441786, "cost2_min": -119.87380392366423, "cost1_max": 409.6127552633387, "outflow_rate_mean": 981.5352380672382, "cost1_min": 115.34448122789622, "cost2_mean": -104.93782122035425}, "episodes_total": 7882}
{"date": "2019-05-09_13-49-00", "episode_reward_mean": 835.4070508795809, "episode_reward_min": 218.03645132715823, "done": false, "episode_len_mean": 745.79, "timestamp": 1557409740, "training_iteration": 128, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16779150, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 37598.189, "grad_time_ms": 29248.653, "update_time_ms": 9.044, "num_steps_sampled": 16779150, "default": {"vf_explained_var": 0.8741570711135864, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.55913734436035, "policy_loss": -0.016458049416542053, "cur_lr": 0.0005000000237487257, "kl": 0.015461727045476437, "total_loss": 24.550504684448242, "entropy": 1.5838178396224976}, "load_time_ms": 50.47, "num_steps_trained": 16779150}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16779150, "iterations_since_restore": 128, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998128>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859986a0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 988.2841734059236, "time_this_iter_s": 65.67562103271484, "time_total_s": 8715.259682178497, "time_since_restore": 8715.259682178497, "timesteps_this_iter": 126179, "custom_metrics": {"cost1_mean": 346.98574726656756, "system_level_velocity_mean": 12.166537354916777, "cost2_max": -71.85166771822782, "system_level_velocity_min": 11.26543537359084, "outflow_rate_max": 1128.3131366771925, "outflow_rate_min": 429.4118466067862, "system_level_velocity_max": 14.259169457441786, "cost2_min": -119.85754928959507, "cost1_max": 409.6127552633387, "outflow_rate_mean": 979.4978458434813, "cost1_min": 115.34448122789622, "cost2_mean": -104.91917607317875}, "episodes_total": 7947}
{"date": "2019-05-09_13-50-08", "episode_reward_mean": 837.9740157811007, "episode_reward_min": 222.266460989875, "done": false, "episode_len_mean": 736.23, "timestamp": 1557409808, "training_iteration": 129, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 16903671, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 37924.079, "grad_time_ms": 29269.3, "update_time_ms": 9.122, "num_steps_sampled": 16903671, "default": {"vf_explained_var": 0.8498495817184448, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 28.682388305664062, "policy_loss": -0.016759298741817474, "cur_lr": 0.0005000000237487257, "kl": 0.01548838336020708, "total_loss": 28.67346954345703, "entropy": 1.553582787513733}, "load_time_ms": 48.247, "num_steps_trained": 16903671}, "node_ip": "10.138.0.2", "timesteps_since_restore": 16903671, "iterations_since_restore": 129, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859982b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998d68>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859981d0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 999.0936314432614, "time_this_iter_s": 68.73946166038513, "time_total_s": 8783.999143838882, "time_since_restore": 8783.999143838882, "timesteps_this_iter": 124521, "custom_metrics": {"cost1_mean": 345.290141656057, "system_level_velocity_mean": 12.273319936415636, "cost2_max": -60.20970801909329, "system_level_velocity_min": 11.45199617159304, "outflow_rate_max": 1094.8880291893465, "outflow_rate_min": 424.319551937254, "system_level_velocity_max": 14.238155051374163, "cost2_min": -120.13489569799906, "cost1_max": 405.40678957498443, "outflow_rate_mean": 972.7129185823277, "cost1_min": 115.15824819967963, "cost2_mean": -103.3921659660755}, "episodes_total": 8014}
{"date": "2019-05-09_13-51-15", "episode_reward_mean": 848.8701098791, "episode_reward_min": 222.266460989875, "done": false, "episode_len_mean": 740.56, "timestamp": 1557409875, "training_iteration": 130, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17028780, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 38290.205, "grad_time_ms": 28834.207, "update_time_ms": 9.177, "num_steps_sampled": 17028780, "default": {"vf_explained_var": 0.8402650356292725, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 28.821361541748047, "policy_loss": -0.0155421681702137, "cur_lr": 0.0005000000237487257, "kl": 0.014983602799475193, "total_loss": 28.813404083251953, "entropy": 1.56501042842865}, "load_time_ms": 47.71, "num_steps_trained": 17028780}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17028780, "iterations_since_restore": 130, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bc18>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d69e8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 962.0313306893553, "time_this_iter_s": 66.66393494606018, "time_total_s": 8850.663078784943, "time_since_restore": 8850.663078784943, "timesteps_this_iter": 125109, "custom_metrics": {"cost1_mean": 347.2109751863045, "system_level_velocity_mean": 12.245662244437467, "cost2_max": -58.7620714546436, "system_level_velocity_min": 11.278270070749935, "outflow_rate_max": 1107.2665915315486, "outflow_rate_min": 424.319551937254, "system_level_velocity_max": 13.838604577872044, "cost2_min": -119.81931692552686, "cost1_max": 398.76744127500973, "outflow_rate_mean": 978.5490526014145, "cost1_min": 115.15824819967963, "cost2_mean": -104.44904518204231}, "episodes_total": 8080}
{"date": "2019-05-09_13-52-24", "episode_reward_mean": 837.7417638879335, "episode_reward_min": 222.68126872249536, "done": false, "episode_len_mean": 741.57, "timestamp": 1557409944, "training_iteration": 131, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17153281, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 38513.183, "grad_time_ms": 28821.455, "update_time_ms": 9.139, "num_steps_sampled": 17153281, "default": {"vf_explained_var": 0.8568670749664307, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.916107177734375, "policy_loss": -0.015966152772307396, "cur_lr": 0.0005000000237487257, "kl": 0.014721380546689034, "total_loss": 26.9075927734375, "entropy": 1.6136831045150757}, "load_time_ms": 48.258, "num_steps_trained": 17153281}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17153281, "iterations_since_restore": 131, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4dd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4cf8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4b38>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 962.0313306893553, "time_this_iter_s": 68.76115226745605, "time_total_s": 8919.424231052399, "time_since_restore": 8919.424231052399, "timesteps_this_iter": 124501, "custom_metrics": {"cost1_mean": 345.7049007644328, "system_level_velocity_mean": 12.190422305344033, "cost2_max": -58.7620714546436, "system_level_velocity_min": 11.194038765594813, "outflow_rate_max": 1107.2665915315486, "outflow_rate_min": 439.373771964518, "system_level_velocity_max": 13.838604577872044, "cost2_min": -120.00395213718195, "cost1_max": 398.76744127500973, "outflow_rate_mean": 975.1419176041765, "cost1_min": 115.88213968607946, "cost2_mean": -104.48486185311373}, "episodes_total": 8145}
{"date": "2019-05-09_13-53-33", "episode_reward_mean": 855.3936260888543, "episode_reward_min": 772.463764256117, "done": false, "episode_len_mean": 751.0, "timestamp": 1557410013, "training_iteration": 132, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17278917, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 38753.68, "grad_time_ms": 28801.605, "update_time_ms": 8.993, "num_steps_sampled": 17278917, "default": {"vf_explained_var": 0.8561446666717529, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 25.912933349609375, "policy_loss": -0.016391480341553688, "cur_lr": 0.0005000000237487257, "kl": 0.01519617810845375, "total_loss": 25.90423583984375, "entropy": 1.6052340269088745}, "load_time_ms": 47.79, "num_steps_trained": 17278917}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17278917, "iterations_since_restore": 132, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c978>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c630>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1010.9060587059396, "time_this_iter_s": 69.16553354263306, "time_total_s": 8988.589764595032, "time_since_restore": 8988.589764595032, "timesteps_this_iter": 125636, "custom_metrics": {"cost1_mean": 351.61840879935744, "system_level_velocity_mean": 12.22470411971748, "cost2_max": -79.54363204875261, "system_level_velocity_min": 11.194038765594813, "outflow_rate_max": 1127.529533894494, "outflow_rate_min": 906.3616631583709, "system_level_velocity_max": 14.375773247366102, "cost2_min": -124.11991069003481, "cost1_max": 411.57774315453617, "outflow_rate_mean": 987.267749371189, "cost1_min": 322.7144232762363, "cost2_mean": -106.26533012868077}, "episodes_total": 8210}
{"date": "2019-05-09_13-54-41", "episode_reward_mean": 833.5000245903085, "episode_reward_min": 225.59021438710548, "done": false, "episode_len_mean": 740.62, "timestamp": 1557410081, "training_iteration": 133, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17404035, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 38957.112, "grad_time_ms": 28738.682, "update_time_ms": 8.76, "num_steps_sampled": 17404035, "default": {"vf_explained_var": 0.8612697720527649, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.097368240356445, "policy_loss": -0.017885722219944, "cur_lr": 0.0005000000237487257, "kl": 0.015549360774457455, "total_loss": 26.087352752685547, "entropy": 1.6231255531311035}, "load_time_ms": 48.116, "num_steps_trained": 17404035}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17404035, "iterations_since_restore": 133, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859982e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998470>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998908>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 953.7039081755954, "time_this_iter_s": 68.15813398361206, "time_total_s": 9056.747898578644, "time_since_restore": 9056.747898578644, "timesteps_this_iter": 125118, "custom_metrics": {"cost1_mean": 344.98022456548983, "system_level_velocity_mean": 12.189565276724425, "cost2_max": -60.564626266107354, "system_level_velocity_min": 10.650609445078741, "outflow_rate_max": 1053.4319420680874, "outflow_rate_min": 427.74274357939254, "system_level_velocity_max": 13.517648279254185, "cost2_min": -128.24183105295504, "cost1_max": 386.3752387675923, "outflow_rate_mean": 970.9105515707907, "cost1_min": 115.73966779372427, "cost2_mean": -104.17670907308997}, "episodes_total": 8276}
{"date": "2019-05-09_13-55-51", "episode_reward_mean": 834.017082877444, "episode_reward_min": 731.4705437511587, "done": false, "episode_len_mean": 751.0, "timestamp": 1557410151, "training_iteration": 134, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17529724, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39101.893, "grad_time_ms": 28772.748, "update_time_ms": 8.841, "num_steps_sampled": 17529724, "default": {"vf_explained_var": 0.8625614047050476, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 25.641883850097656, "policy_loss": -0.016637662425637245, "cur_lr": 0.0005000000237487257, "kl": 0.015483108349144459, "total_loss": 25.63308334350586, "entropy": 1.6242871284484863}, "load_time_ms": 46.517, "num_steps_trained": 17529724}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17529724, "iterations_since_restore": 134, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984a8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998438>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 948.9036653613198, "time_this_iter_s": 69.15229606628418, "time_total_s": 9125.900194644928, "time_since_restore": 9125.900194644928, "timesteps_this_iter": 125689, "custom_metrics": {"cost1_mean": 345.6081376179561, "system_level_velocity_mean": 12.027844243453332, "cost2_max": -87.23693627916694, "system_level_velocity_min": 10.667039530810618, "outflow_rate_max": 1108.0498993387296, "outflow_rate_min": 851.869409089192, "system_level_velocity_max": 13.862565767006307, "cost2_min": -118.34323079993783, "cost1_max": 397.93568004742224, "outflow_rate_mean": 975.2252532626463, "cost1_min": 305.03928388090776, "cost2_mean": -103.35455263675613}, "episodes_total": 8341}
{"date": "2019-05-09_13-56-59", "episode_reward_mean": 843.2270654452202, "episode_reward_min": 731.4705437511587, "done": false, "episode_len_mean": 751.0, "timestamp": 1557410219, "training_iteration": 135, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17655561, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39256.225, "grad_time_ms": 28503.782, "update_time_ms": 8.672, "num_steps_sampled": 17655561, "default": {"vf_explained_var": 0.8399724364280701, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 27.954561233520508, "policy_loss": -0.01681147888302803, "cur_lr": 0.0005000000237487257, "kl": 0.015677383169531822, "total_loss": 27.94568634033203, "entropy": 1.6170635223388672}, "load_time_ms": 48.49, "num_steps_trained": 17655561}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17655561, "iterations_since_restore": 135, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896d6940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c518>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c978>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 963.4577000778467, "time_this_iter_s": 68.07189321517944, "time_total_s": 9193.972087860107, "time_since_restore": 9193.972087860107, "timesteps_this_iter": 125837, "custom_metrics": {"cost1_mean": 346.0885873619419, "system_level_velocity_mean": 12.0321325446131, "cost2_max": -82.77044119486152, "system_level_velocity_min": 10.667039530810618, "outflow_rate_max": 1055.333831669513, "outflow_rate_min": 851.869409089192, "system_level_velocity_max": 13.398121296823224, "cost2_min": -118.34323079993783, "cost1_max": 384.2410844181585, "outflow_rate_mean": 972.9945907711881, "cost1_min": 305.03928388090776, "cost2_mean": -102.22829385077253}, "episodes_total": 8406}
{"date": "2019-05-09_13-58-07", "episode_reward_mean": 845.5668127542248, "episode_reward_min": 729.377420857271, "done": false, "episode_len_mean": 750.17, "timestamp": 1557410287, "training_iteration": 136, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17781027, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39314.419, "grad_time_ms": 28559.03, "update_time_ms": 9.151, "num_steps_sampled": 17781027, "default": {"vf_explained_var": 0.8536198735237122, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 25.086917877197266, "policy_loss": -0.016494739800691605, "cur_lr": 0.0005000000237487257, "kl": 0.015440582297742367, "total_loss": 25.0782413482666, "entropy": 1.62351655960083}, "load_time_ms": 48.427, "num_steps_trained": 17781027}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17781027, "iterations_since_restore": 136, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859987b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998be0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998828>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 996.0577028969435, "time_this_iter_s": 68.60586833953857, "time_total_s": 9262.577956199646, "time_since_restore": 9262.577956199646, "timesteps_this_iter": 125466, "custom_metrics": {"cost1_mean": 345.95941631766794, "system_level_velocity_mean": 12.030014827088817, "cost2_max": -82.55199054534822, "system_level_velocity_min": 9.421541716302363, "outflow_rate_max": 1065.0502404084425, "outflow_rate_min": 796.2602634765115, "system_level_velocity_max": 13.681785273395905, "cost2_min": -119.57747038623367, "cost1_max": 393.30106894065034, "outflow_rate_mean": 972.3983316045014, "cost1_min": 270.3897584917404, "cost2_mean": -102.24644259708236}, "episodes_total": 8471}
{"date": "2019-05-09_13-59-14", "episode_reward_mean": 855.530545751666, "episode_reward_min": 729.377420857271, "done": false, "episode_len_mean": 750.17, "timestamp": 1557410354, "training_iteration": 137, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 17905642, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39351.812, "grad_time_ms": 28347.015, "update_time_ms": 9.192, "num_steps_sampled": 17905642, "default": {"vf_explained_var": 0.8465306162834167, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 26.521263122558594, "policy_loss": -0.01659519225358963, "cur_lr": 0.0005000000237487257, "kl": 0.015340565703809261, "total_loss": 26.512434005737305, "entropy": 1.6084234714508057}, "load_time_ms": 47.897, "num_steps_trained": 17905642}, "node_ip": "10.138.0.2", "timesteps_since_restore": 17905642, "iterations_since_restore": 137, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998f28>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998f98>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 981.0931683623078, "time_this_iter_s": 66.90274214744568, "time_total_s": 9329.480698347092, "time_since_restore": 9329.480698347092, "timesteps_this_iter": 124615, "custom_metrics": {"cost1_mean": 350.1714269123004, "system_level_velocity_mean": 12.178125501827559, "cost2_max": -82.55199054534822, "system_level_velocity_min": 9.421541716302363, "outflow_rate_max": 1105.246353017088, "outflow_rate_min": 796.2602634765115, "system_level_velocity_max": 13.680049752645525, "cost2_min": -120.73093115116775, "cost1_max": 394.38042680487416, "outflow_rate_mean": 983.4642769483263, "cost1_min": 270.3897584917404, "cost2_mean": -103.54745187723351}, "episodes_total": 8536}
{"date": "2019-05-09_14-00-23", "episode_reward_mean": 855.7333830634759, "episode_reward_min": 725.6453800790523, "done": false, "episode_len_mean": 751.0, "timestamp": 1557410423, "training_iteration": 138, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18029707, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39457.374, "grad_time_ms": 28513.808, "update_time_ms": 9.111, "num_steps_sampled": 18029707, "default": {"vf_explained_var": 0.8407297134399414, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 26.435136795043945, "policy_loss": -0.016438079997897148, "cur_lr": 0.0005000000237487257, "kl": 0.015570330433547497, "total_loss": 26.426578521728516, "entropy": 1.6244527101516724}, "load_time_ms": 47.045, "num_steps_trained": 18029707}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18029707, "iterations_since_restore": 138, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598beb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b4e0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598be80>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 977.7266026884752, "time_this_iter_s": 68.3700692653656, "time_total_s": 9397.850767612457, "time_since_restore": 9397.850767612457, "timesteps_this_iter": 124065, "custom_metrics": {"cost1_mean": 351.120341597695, "system_level_velocity_mean": 12.20389966803943, "cost2_max": -89.50992025559074, "system_level_velocity_min": 10.616926497391477, "outflow_rate_max": 1067.7403081667644, "outflow_rate_min": 863.20746326868, "system_level_velocity_max": 13.541338276177889, "cost2_min": -117.68606859785554, "cost1_max": 388.2438865817532, "outflow_rate_mean": 983.3166745756258, "cost1_min": 304.2429320090947, "cost2_mean": -103.17531270251298}, "episodes_total": 8601}
{"date": "2019-05-09_14-01-32", "episode_reward_mean": 841.7003360042136, "episode_reward_min": 718.3381067439597, "done": false, "episode_len_mean": 751.0, "timestamp": 1557410492, "training_iteration": 139, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18154350, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39613.824, "grad_time_ms": 28394.238, "update_time_ms": 9.142, "num_steps_sampled": 18154350, "default": {"vf_explained_var": 0.8383716344833374, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 26.86787223815918, "policy_loss": -0.017278924584388733, "cur_lr": 0.0005000000237487257, "kl": 0.01554633304476738, "total_loss": 26.858463287353516, "entropy": 1.647176742553711}, "load_time_ms": 49.887, "num_steps_trained": 18154350}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18154350, "iterations_since_restore": 139, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859988d0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c88>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 972.2872486501196, "time_this_iter_s": 69.08682131767273, "time_total_s": 9466.93758893013, "time_since_restore": 9466.93758893013, "timesteps_this_iter": 124643, "custom_metrics": {"cost1_mean": 346.494415773854, "system_level_velocity_mean": 12.042912830901585, "cost2_max": -87.17770176365906, "system_level_velocity_min": 10.288812479038869, "outflow_rate_max": 1052.4099775789996, "outflow_rate_min": 821.5365875557249, "system_level_velocity_max": 13.333412834005767, "cost2_min": -117.7649540212229, "cost1_max": 383.41779765940555, "outflow_rate_mean": 972.9665213591778, "cost1_min": 293.2119201529936, "cost2_mean": -101.99721338143692}, "episodes_total": 8666}
{"date": "2019-05-09_14-02-41", "episode_reward_mean": 848.2264219880083, "episode_reward_min": 718.3381067439597, "done": false, "episode_len_mean": 751.0, "timestamp": 1557410561, "training_iteration": 140, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18278458, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39665.432, "grad_time_ms": 28539.805, "update_time_ms": 9.19, "num_steps_sampled": 18278458, "default": {"vf_explained_var": 0.8289985060691833, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 26.7440185546875, "policy_loss": -0.016850529238581657, "cur_lr": 0.0005000000237487257, "kl": 0.015720369294285774, "total_loss": 26.735126495361328, "entropy": 1.6178559064865112}, "load_time_ms": 47.673, "num_steps_trained": 18278458}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18278458, "iterations_since_restore": 140, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4160>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4a90>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4da0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 978.8092537444293, "time_this_iter_s": 68.58082842826843, "time_total_s": 9535.518417358398, "time_since_restore": 9535.518417358398, "timesteps_this_iter": 124108, "custom_metrics": {"cost1_mean": 346.67920500910697, "system_level_velocity_mean": 12.035134416603903, "cost2_max": -87.17770176365906, "system_level_velocity_min": 10.288812479038869, "outflow_rate_max": 1097.6875746698042, "outflow_rate_min": 821.5365875557249, "system_level_velocity_max": 13.743524980153042, "cost2_min": -116.58984733594878, "cost1_max": 396.59017309321956, "outflow_rate_mean": 974.9305306253439, "cost1_min": 293.2119201529936, "cost2_mean": -101.21704253067263}, "episodes_total": 8731}
{"date": "2019-05-09_14-03-49", "episode_reward_mean": 851.4215194768235, "episode_reward_min": 220.32385742182768, "done": false, "episode_len_mean": 745.76, "timestamp": 1557410629, "training_iteration": 141, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18403426, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 39807.158, "grad_time_ms": 28330.596, "update_time_ms": 9.023, "num_steps_sampled": 18403426, "default": {"vf_explained_var": 0.8249489665031433, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 27.604829788208008, "policy_loss": -0.01704547181725502, "cur_lr": 0.0005000000237487257, "kl": 0.01579657569527626, "total_loss": 27.595781326293945, "entropy": 1.6499830484390259}, "load_time_ms": 48.682, "num_steps_trained": 18403426}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18403426, "iterations_since_restore": 141, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c90b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c88>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c7b8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 978.8092537444293, "time_this_iter_s": 68.07344126701355, "time_total_s": 9603.591858625412, "time_since_restore": 9603.591858625412, "timesteps_this_iter": 124968, "custom_metrics": {"cost1_mean": 346.57170296325194, "system_level_velocity_mean": 12.121654670828038, "cost2_max": -60.09527185340553, "system_level_velocity_min": 10.318682357058524, "outflow_rate_max": 1097.6875746698042, "outflow_rate_min": 434.00962987981404, "system_level_velocity_max": 13.743524980153042, "cost2_min": -117.32741084736324, "cost1_max": 396.59017309321956, "outflow_rate_mean": 971.5164104150213, "cost1_min": 114.8548765951023, "cost2_mean": -100.21366357468747}, "episodes_total": 8797}
{"date": "2019-05-09_14-04-57", "episode_reward_mean": 848.5278330742764, "episode_reward_min": 220.32385742182768, "done": false, "episode_len_mean": 745.76, "timestamp": 1557410697, "training_iteration": 142, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18528676, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 39892.173, "grad_time_ms": 28211.729, "update_time_ms": 8.925, "num_steps_sampled": 18528676, "default": {"vf_explained_var": 0.8227657675743103, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 27.394176483154297, "policy_loss": -0.01654348336160183, "cur_lr": 0.0005000000237487257, "kl": 0.01580704376101494, "total_loss": 27.385631561279297, "entropy": 1.6565808057785034}, "load_time_ms": 46.239, "num_steps_trained": 18528676}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18528676, "iterations_since_restore": 142, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998a58>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998eb8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 985.0603112357816, "time_this_iter_s": 68.76612854003906, "time_total_s": 9672.357987165451, "time_since_restore": 9672.357987165451, "timesteps_this_iter": 125250, "custom_metrics": {"cost1_mean": 343.76628882051386, "system_level_velocity_mean": 12.022877768057965, "cost2_max": -60.09527185340553, "system_level_velocity_min": 10.267620441168072, "outflow_rate_max": 1053.5903468207962, "outflow_rate_min": 434.00962987981404, "system_level_velocity_max": 13.554055729471337, "cost2_min": -119.53377407808003, "cost1_max": 385.0661209036056, "outflow_rate_mean": 963.8942998612849, "cost1_min": 114.8548765951023, "cost2_mean": -101.48417264291881}, "episodes_total": 8862}
{"date": "2019-05-09_14-06-08", "episode_reward_mean": 842.1205822078322, "episode_reward_min": 223.21226880292065, "done": false, "episode_len_mean": 740.62, "timestamp": 1557410768, "training_iteration": 143, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18653105, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 39986.34, "grad_time_ms": 28339.135, "update_time_ms": 8.996, "num_steps_sampled": 18653105, "default": {"vf_explained_var": 0.819098711013794, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 28.05996322631836, "policy_loss": -0.01663479581475258, "cur_lr": 0.0005000000237487257, "kl": 0.01583283394575119, "total_loss": 28.05134391784668, "entropy": 1.6525628566741943}, "load_time_ms": 46.77, "num_steps_trained": 18653105}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18653105, "iterations_since_restore": 143, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c400>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c748>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 985.0603112357816, "time_this_iter_s": 70.34328842163086, "time_total_s": 9742.701275587082, "time_since_restore": 9742.701275587082, "timesteps_this_iter": 124429, "custom_metrics": {"cost1_mean": 342.3299561921507, "system_level_velocity_mean": 12.061771189209685, "cost2_max": -56.85592106601882, "system_level_velocity_min": 10.493543313908246, "outflow_rate_max": 1085.5102078446005, "outflow_rate_min": 418.9716952638514, "system_level_velocity_max": 13.492534258711308, "cost2_min": -124.89396086545042, "cost1_max": 388.8985829631956, "outflow_rate_mean": 963.2047217534179, "cost1_min": 113.49427461926368, "cost2_mean": -100.7137414508355}, "episodes_total": 8929}
{"date": "2019-05-09_14-07-17", "episode_reward_mean": 842.3850530998176, "episode_reward_min": 223.21226880292065, "done": false, "episode_len_mean": 745.79, "timestamp": 1557410837, "training_iteration": 144, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18778649, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40066.129, "grad_time_ms": 28275.373, "update_time_ms": 8.938, "num_steps_sampled": 18778649, "default": {"vf_explained_var": 0.8464285731315613, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.664899826049805, "policy_loss": -0.015526008792221546, "cur_lr": 0.0005000000237487257, "kl": 0.01572771929204464, "total_loss": 24.657339096069336, "entropy": 1.676500678062439}, "load_time_ms": 49.401, "num_steps_trained": 18778649}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18778649, "iterations_since_restore": 144, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984e0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859982e8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 968.7368544189216, "time_this_iter_s": 69.28809404373169, "time_total_s": 9811.989369630814, "time_since_restore": 9811.989369630814, "timesteps_this_iter": 125544, "custom_metrics": {"cost1_mean": 343.72160208272595, "system_level_velocity_mean": 12.022528215945538, "cost2_max": -58.88104073548145, "system_level_velocity_min": 10.194005079202825, "outflow_rate_max": 1054.7533439785425, "outflow_rate_min": 418.9716952638514, "system_level_velocity_max": 13.388738240120643, "cost2_min": -119.95469824676584, "cost1_max": 388.22506192564026, "outflow_rate_mean": 966.8720454402835, "cost1_min": 113.49427461926368, "cost2_mean": -100.43864406042296}, "episodes_total": 8994}
{"date": "2019-05-09_14-08-27", "episode_reward_mean": 841.1401393173213, "episode_reward_min": 231.00179483301855, "done": false, "episode_len_mean": 745.82, "timestamp": 1557410907, "training_iteration": 145, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 18903761, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40203.653, "grad_time_ms": 28340.987, "update_time_ms": 8.891, "num_steps_sampled": 18903761, "default": {"vf_explained_var": 0.8377035856246948, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 25.44875144958496, "policy_loss": -0.016932565718889236, "cur_lr": 0.0005000000237487257, "kl": 0.015434954315423965, "total_loss": 25.439634323120117, "entropy": 1.6721735000610352}, "load_time_ms": 50.234, "num_steps_trained": 18903761}, "node_ip": "10.138.0.2", "timesteps_since_restore": 18903761, "iterations_since_restore": 145, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c88>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998080>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 963.0685582920906, "time_this_iter_s": 70.10707306861877, "time_total_s": 9882.096442699432, "time_since_restore": 9882.096442699432, "timesteps_this_iter": 125112, "custom_metrics": {"cost1_mean": 343.29282780264265, "system_level_velocity_mean": 12.009551783495265, "cost2_max": -63.13982256906018, "system_level_velocity_min": 10.194005079202825, "outflow_rate_max": 1064.9065844184277, "outflow_rate_min": 432.67904560696275, "system_level_velocity_max": 13.412109598162417, "cost2_min": -118.2367759601513, "cost1_max": 380.7964144094262, "outflow_rate_mean": 966.2447086838324, "cost1_min": 117.88198087069196, "cost2_mean": -100.64483332306587}, "episodes_total": 9060}
{"date": "2019-05-09_14-09-36", "episode_reward_mean": 843.4848653016743, "episode_reward_min": 231.00179483301855, "done": false, "episode_len_mean": 745.82, "timestamp": 1557410976, "training_iteration": 146, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19029257, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40230.074, "grad_time_ms": 28263.82, "update_time_ms": 8.43, "num_steps_sampled": 19029257, "default": {"vf_explained_var": 0.8221475481987, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.70896339416504, "policy_loss": -0.0163740161806345, "cur_lr": 0.0005000000237487257, "kl": 0.01566704548895359, "total_loss": 26.700517654418945, "entropy": 1.6630713939666748}, "load_time_ms": 52.03, "num_steps_trained": 19029257}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19029257, "iterations_since_restore": 146, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998d68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998f60>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859985f8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 966.1106975831514, "time_this_iter_s": 68.13089036941528, "time_total_s": 9950.227333068848, "time_since_restore": 9950.227333068848, "timesteps_this_iter": 125496, "custom_metrics": {"cost1_mean": 344.24312578062427, "system_level_velocity_mean": 12.053082258336206, "cost2_max": -63.13982256906018, "system_level_velocity_min": 10.352519613933996, "outflow_rate_max": 1064.9065844184277, "outflow_rate_min": 432.67904560696275, "system_level_velocity_max": 13.412109598162417, "cost2_min": -118.2367759601513, "cost1_max": 380.3434257797254, "outflow_rate_mean": 965.0862875062057, "cost1_min": 117.88198087069196, "cost2_mean": -99.88157221427427}, "episodes_total": 9126}
{"date": "2019-05-09_14-10-45", "episode_reward_mean": 841.8258716339391, "episode_reward_min": 713.0401607093296, "done": false, "episode_len_mean": 751.0, "timestamp": 1557411045, "training_iteration": 147, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19154403, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40307.218, "grad_time_ms": 28454.442, "update_time_ms": 8.39, "num_steps_sampled": 19154403, "default": {"vf_explained_var": 0.8140295743942261, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.380765914916992, "policy_loss": -0.01621301658451557, "cur_lr": 0.0005000000237487257, "kl": 0.015759682282805443, "total_loss": 26.372533798217773, "entropy": 1.6695421934127808}, "load_time_ms": 52.566, "num_steps_trained": 19154403}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19154403, "iterations_since_restore": 147, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997ba8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896c9c88>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1001.2930605732536, "time_this_iter_s": 69.61710214614868, "time_total_s": 10019.844435214996, "time_since_restore": 10019.844435214996, "timesteps_this_iter": 125146, "custom_metrics": {"cost1_mean": 345.33454248032217, "system_level_velocity_mean": 12.012996707945367, "cost2_max": -83.87611874849598, "system_level_velocity_min": 10.382848936072879, "outflow_rate_max": 1081.5286296230572, "outflow_rate_min": 813.1866790145323, "system_level_velocity_max": 13.673207791395043, "cost2_min": -116.53305907047061, "cost1_max": 394.6745756967709, "outflow_rate_mean": 967.0491536452957, "cost1_min": 297.182213463866, "cost2_mean": -99.10618438641981}, "episodes_total": 9192}
{"date": "2019-05-09_14-11-54", "episode_reward_mean": 831.507249302551, "episode_reward_min": 208.7789749522929, "done": false, "episode_len_mean": 745.67, "timestamp": 1557411114, "training_iteration": 148, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19279057, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40379.466, "grad_time_ms": 28462.734, "update_time_ms": 8.318, "num_steps_sampled": 19279057, "default": {"vf_explained_var": 0.821012556552887, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 26.1568603515625, "policy_loss": -0.01608233153820038, "cur_lr": 0.0005000000237487257, "kl": 0.015408538281917572, "total_loss": 26.148578643798828, "entropy": 1.6853574514389038}, "load_time_ms": 53.293, "num_steps_trained": 19279057}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19279057, "iterations_since_restore": 148, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c6d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c588>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c18>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 972.723374856755, "time_this_iter_s": 69.22715163230896, "time_total_s": 10089.071586847305, "time_since_restore": 10089.071586847305, "timesteps_this_iter": 124654, "custom_metrics": {"cost1_mean": 342.29200415673694, "system_level_velocity_mean": 11.99605790396295, "cost2_max": -61.0313460058744, "system_level_velocity_min": 10.29055693900334, "outflow_rate_max": 1041.6349324016012, "outflow_rate_min": 407.4936016969071, "system_level_velocity_max": 13.542458978973631, "cost2_min": -118.38558379491941, "cost1_max": 386.99244785408416, "outflow_rate_mean": 961.3279504713755, "cost1_min": 107.96607660109973, "cost2_mean": -99.42833251466246}, "episodes_total": 9258}
{"date": "2019-05-09_14-13-03", "episode_reward_mean": 834.125797621881, "episode_reward_min": 208.7789749522929, "done": false, "episode_len_mean": 745.67, "timestamp": 1557411183, "training_iteration": 149, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19402961, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40313.075, "grad_time_ms": 28453.186, "update_time_ms": 8.43, "num_steps_sampled": 19402961, "default": {"vf_explained_var": 0.8320900201797485, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 25.207487106323242, "policy_loss": -0.017462382093071938, "cur_lr": 0.0005000000237487257, "kl": 0.015685075893998146, "total_loss": 25.197965621948242, "entropy": 1.6789511442184448}, "load_time_ms": 51.892, "num_steps_trained": 19402961}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19402961, "iterations_since_restore": 149, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cf28>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4da0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 982.4791821264761, "time_this_iter_s": 68.31217861175537, "time_total_s": 10157.38376545906, "time_since_restore": 10157.38376545906, "timesteps_this_iter": 123904, "custom_metrics": {"cost1_mean": 343.4731444520112, "system_level_velocity_mean": 12.035178602039554, "cost2_max": -61.0313460058744, "system_level_velocity_min": 10.124837949662972, "outflow_rate_max": 1077.3405307570804, "outflow_rate_min": 407.4936016969071, "system_level_velocity_max": 13.542458978973631, "cost2_min": -132.8604007363079, "cost1_max": 389.07698452428986, "outflow_rate_mean": 963.7688911198089, "cost1_min": 107.96607660109973, "cost2_mean": -100.27350708648397}, "episodes_total": 9323}
{"date": "2019-05-09_14-14-10", "episode_reward_mean": 835.7942240310354, "episode_reward_min": 224.83130805770537, "done": false, "episode_len_mean": 745.78, "timestamp": 1557411250, "training_iteration": 150, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19527003, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40251.937, "grad_time_ms": 28405.063, "update_time_ms": 8.4, "num_steps_sampled": 19527003, "default": {"vf_explained_var": 0.8346801400184631, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 24.98332405090332, "policy_loss": -0.01686299405992031, "cur_lr": 0.0005000000237487257, "kl": 0.016795529052615166, "total_loss": 24.974966049194336, "entropy": 1.6955742835998535}, "load_time_ms": 54.18, "num_steps_trained": 19527003}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19527003, "iterations_since_restore": 150, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997d30>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997ef0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 975.8955943440299, "time_this_iter_s": 67.54345893859863, "time_total_s": 10224.92722439766, "time_since_restore": 10224.92722439766, "timesteps_this_iter": 124042, "custom_metrics": {"cost1_mean": 345.2034173527391, "system_level_velocity_mean": 12.086859494881919, "cost2_max": -63.25780879076084, "system_level_velocity_min": 10.831695046354875, "outflow_rate_max": 1077.3405307570804, "outflow_rate_min": 428.40342372998526, "system_level_velocity_max": 13.416498866490242, "cost2_min": -132.8604007363079, "cost1_max": 382.7487604669617, "outflow_rate_mean": 968.6233656254502, "cost1_min": 115.51619976917513, "cost2_mean": -100.4609913030691}, "episodes_total": 9388}
{"date": "2019-05-09_14-15-19", "episode_reward_mean": 833.0019501498509, "episode_reward_min": 621.7032574142719, "done": false, "episode_len_mean": 749.27, "timestamp": 1557411319, "training_iteration": 151, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19651892, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40236.343, "grad_time_ms": 28502.32, "update_time_ms": 8.53, "num_steps_sampled": 19651892, "default": {"vf_explained_var": 0.8461785316467285, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.388782501220703, "policy_loss": -0.015714403241872787, "cur_lr": 0.0005000000237487257, "kl": 0.015933932736516, "total_loss": 23.381135940551758, "entropy": 1.7105358839035034}, "load_time_ms": 49.869, "num_steps_trained": 19651892}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19651892, "iterations_since_restore": 151, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997080>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859977f0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 955.0508614503661, "time_this_iter_s": 68.86866211891174, "time_total_s": 10293.795886516571, "time_since_restore": 10293.795886516571, "timesteps_this_iter": 124889, "custom_metrics": {"cost1_mean": 343.3197535123761, "system_level_velocity_mean": 11.964658553305098, "cost2_max": -80.66415508141398, "system_level_velocity_min": 9.50178565905585, "outflow_rate_max": 1041.7925877937935, "outflow_rate_min": 780.5524355799403, "system_level_velocity_max": 13.290367216162341, "cost2_min": -121.10104979529127, "cost1_max": 380.92229786614996, "outflow_rate_mean": 963.7280121921652, "cost1_min": 259.70024386101534, "cost2_mean": -100.6361133537121}, "episodes_total": 9453}
{"date": "2019-05-09_14-16-29", "episode_reward_mean": 824.003229157707, "episode_reward_min": 69.38720911100802, "done": false, "episode_len_mean": 743.04, "timestamp": 1557411389, "training_iteration": 152, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19776065, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40222.277, "grad_time_ms": 28621.931, "update_time_ms": 8.657, "num_steps_sampled": 19776065, "default": {"vf_explained_var": 0.8291234374046326, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.528749465942383, "policy_loss": -0.0162229984998703, "cur_lr": 0.0005000000237487257, "kl": 0.01647571101784706, "total_loss": 26.5208683013916, "entropy": 1.719731330871582}, "load_time_ms": 52.131, "num_steps_trained": 19776065}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19776065, "iterations_since_restore": 152, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dccf8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dcba8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 993.8829196117493, "time_this_iter_s": 69.84780097007751, "time_total_s": 10363.643687486649, "time_since_restore": 10363.643687486649, "timesteps_this_iter": 124173, "custom_metrics": {"cost1_mean": 340.4388545361916, "system_level_velocity_mean": 11.95950925515994, "cost2_max": -43.65067026497036, "system_level_velocity_min": 9.50178565905585, "outflow_rate_max": 1092.743538583077, "outflow_rate_min": 254.23111705178346, "system_level_velocity_max": 13.764451732378967, "cost2_min": -119.79346128431995, "cost1_max": 395.8734881607103, "outflow_rate_mean": 959.0047652542727, "cost1_min": 50.105822853840735, "cost2_mean": -100.59238102137057}, "episodes_total": 9519}
{"date": "2019-05-09_14-17-37", "episode_reward_mean": 831.3952016840672, "episode_reward_min": 211.88759308712704, "done": false, "episode_len_mean": 745.79, "timestamp": 1557411457, "training_iteration": 153, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 19900391, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 40182.46, "grad_time_ms": 28359.21, "update_time_ms": 8.439, "num_steps_sampled": 19900391, "default": {"vf_explained_var": 0.8158736824989319, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 27.872486114501953, "policy_loss": -0.01687004417181015, "cur_lr": 0.0005000000237487257, "kl": 0.01582658290863037, "total_loss": 27.86362648010254, "entropy": 1.6980148553848267}, "load_time_ms": 51.388, "num_steps_trained": 19900391}, "node_ip": "10.138.0.2", "timesteps_since_restore": 19900391, "iterations_since_restore": 153, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998128>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998390>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 993.8829196117493, "time_this_iter_s": 67.33131241798401, "time_total_s": 10430.974999904633, "time_since_restore": 10430.974999904633, "timesteps_this_iter": 124326, "custom_metrics": {"cost1_mean": 344.0951180701214, "system_level_velocity_mean": 12.074331627530194, "cost2_max": -54.92158496934893, "system_level_velocity_min": 10.219866820798467, "outflow_rate_max": 1081.8760470141333, "outflow_rate_min": 430.26294758603416, "system_level_velocity_max": 13.764451732378967, "cost2_min": -114.1081460079617, "cost1_max": 395.8734881607103, "outflow_rate_mean": 964.7385078443235, "cost1_min": 112.0053202935545, "cost2_mean": -100.74768170622293}, "episodes_total": 9586}
{"date": "2019-05-09_14-18-44", "episode_reward_mean": 819.6726652121813, "episode_reward_min": 211.88759308712704, "done": false, "episode_len_mean": 740.58, "timestamp": 1557411524, "training_iteration": 154, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20024557, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40143.993, "grad_time_ms": 28167.93, "update_time_ms": 8.305, "num_steps_sampled": 20024557, "default": {"vf_explained_var": 0.8250109553337097, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.045812606811523, "policy_loss": -0.016835104674100876, "cur_lr": 0.0005000000237487257, "kl": 0.016146667301654816, "total_loss": 26.037153244018555, "entropy": 1.7070047855377197}, "load_time_ms": 50.28, "num_steps_trained": 20024557}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20024557, "iterations_since_restore": 154, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997780>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859976d8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 963.8701649003375, "time_this_iter_s": 66.97828006744385, "time_total_s": 10497.953279972076, "time_since_restore": 10497.953279972076, "timesteps_this_iter": 124166, "custom_metrics": {"cost1_mean": 342.01904514678245, "system_level_velocity_mean": 12.105102347782124, "cost2_max": -54.92158496934893, "system_level_velocity_min": 10.219866820798467, "outflow_rate_max": 1105.5319253784764, "outflow_rate_min": 430.26294758603416, "system_level_velocity_max": 14.184319737894864, "cost2_min": -118.38066812807503, "cost1_max": 404.9503733046229, "outflow_rate_mean": 959.2272103232956, "cost1_min": 112.0053202935545, "cost2_mean": -99.79297228232181}, "episodes_total": 9652}
{"date": "2019-05-09_14-19-52", "episode_reward_mean": 815.0799391089452, "episode_reward_min": 216.82690762221162, "done": false, "episode_len_mean": 745.79, "timestamp": 1557411592, "training_iteration": 155, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20148933, "pid": 25325, "episodes_this_iter": 65, "info": {"sample_time_ms": 40033.686, "grad_time_ms": 28057.962, "update_time_ms": 8.339, "num_steps_sampled": 20148933, "default": {"vf_explained_var": 0.8524499535560608, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 23.56175994873047, "policy_loss": -0.01641610637307167, "cur_lr": 0.0005000000237487257, "kl": 0.016582457348704338, "total_loss": 23.55373764038086, "entropy": 1.7410504817962646}, "load_time_ms": 51.013, "num_steps_trained": 20148933}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20148933, "iterations_since_restore": 155, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cb70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c710>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c748>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 957.5723360620847, "time_this_iter_s": 67.95054078102112, "time_total_s": 10565.903820753098, "time_since_restore": 10565.903820753098, "timesteps_this_iter": 124376, "custom_metrics": {"cost1_mean": 342.69171381902527, "system_level_velocity_mean": 12.044018088431027, "cost2_max": -56.437088288922126, "system_level_velocity_min": 10.179573886699007, "outflow_rate_max": 1089.3093727897192, "outflow_rate_min": 438.7944702716633, "system_level_velocity_max": 13.709061976605302, "cost2_min": -118.38066812807503, "cost1_max": 392.30797017142936, "outflow_rate_mean": 962.6263058312122, "cost1_min": 114.55551525187394, "cost2_mean": -98.61083497436348}, "episodes_total": 9717}
{"date": "2019-05-09_14-21-00", "episode_reward_mean": 820.3527411769215, "episode_reward_min": 208.00983874859244, "done": false, "episode_len_mean": 745.67, "timestamp": 1557411660, "training_iteration": 156, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20273946, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40052.209, "grad_time_ms": 28090.019, "update_time_ms": 8.516, "num_steps_sampled": 20273946, "default": {"vf_explained_var": 0.838110625743866, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 24.778749465942383, "policy_loss": -0.017266498878598213, "cur_lr": 0.0005000000237487257, "kl": 0.01572098210453987, "total_loss": 24.769439697265625, "entropy": 1.7190086841583252}, "load_time_ms": 49.728, "num_steps_trained": 20273946}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20273946, "iterations_since_restore": 156, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998828>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998470>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 944.9756095758034, "time_this_iter_s": 68.62115979194641, "time_total_s": 10634.524980545044, "time_since_restore": 10634.524980545044, "timesteps_this_iter": 125013, "custom_metrics": {"cost1_mean": 344.53248503469297, "system_level_velocity_mean": 12.10957416739446, "cost2_max": -70.09215266711861, "system_level_velocity_min": 10.179573886699007, "outflow_rate_max": 1089.3093727897192, "outflow_rate_min": 418.8336743021077, "system_level_velocity_max": 13.709061976605302, "cost2_min": -119.8649037782111, "cost1_max": 392.30797017142936, "outflow_rate_mean": 967.6990524193068, "cost1_min": 110.77175164842672, "cost2_mean": -100.32980091313175}, "episodes_total": 9783}
{"date": "2019-05-09_14-22-09", "episode_reward_mean": 817.1071598327726, "episode_reward_min": 228.1994179653137, "done": false, "episode_len_mean": 739.94, "timestamp": 1557411729, "training_iteration": 157, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20397794, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 40065.398, "grad_time_ms": 27991.256, "update_time_ms": 8.566, "num_steps_sampled": 20397794, "default": {"vf_explained_var": 0.828199565410614, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 25.665369033813477, "policy_loss": -0.016676172614097595, "cur_lr": 0.0005000000237487257, "kl": 0.01673044078052044, "total_loss": 25.657163619995117, "entropy": 1.722048044204712}, "load_time_ms": 49.976, "num_steps_trained": 20397794}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20397794, "iterations_since_restore": 157, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997be0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997cc0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 947.6827428063547, "time_this_iter_s": 68.73147773742676, "time_total_s": 10703.25645828247, "time_since_restore": 10703.25645828247, "timesteps_this_iter": 123848, "custom_metrics": {"cost1_mean": 342.1468330424751, "system_level_velocity_mean": 12.12293789499713, "cost2_max": -59.781667763280886, "system_level_velocity_min": 10.364335542936862, "outflow_rate_max": 1058.2960067869778, "outflow_rate_min": 434.56820138313384, "system_level_velocity_max": 13.538370323143887, "cost2_min": -121.14835986745099, "cost1_max": 386.78676110941774, "outflow_rate_mean": 959.7923042056401, "cost1_min": 116.74726150062904, "cost2_mean": -98.10201217689456}, "episodes_total": 9850}
{"date": "2019-05-09_14-23-16", "episode_reward_mean": 815.0988665520152, "episode_reward_min": 219.46458964435507, "done": false, "episode_len_mean": 739.9, "timestamp": 1557411796, "training_iteration": 158, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20521070, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40051.624, "grad_time_ms": 27821.087, "update_time_ms": 8.509, "num_steps_sampled": 20521070, "default": {"vf_explained_var": 0.837703287601471, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 25.219682693481445, "policy_loss": -0.016707181930541992, "cur_lr": 0.0005000000237487257, "kl": 0.015032784081995487, "total_loss": 25.210586547851562, "entropy": 1.7371201515197754}, "load_time_ms": 47.036, "num_steps_trained": 20521070}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20521070, "iterations_since_restore": 158, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859986a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998eb8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998748>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 975.3135714828964, "time_this_iter_s": 67.3337299823761, "time_total_s": 10770.590188264847, "time_since_restore": 10770.590188264847, "timesteps_this_iter": 123276, "custom_metrics": {"cost1_mean": 340.68846720694665, "system_level_velocity_mean": 12.077384299670227, "cost2_max": -57.980115353340466, "system_level_velocity_min": 10.230755273399225, "outflow_rate_max": 1058.2960067869778, "outflow_rate_min": 427.2558814080677, "system_level_velocity_max": 13.538370323143887, "cost2_min": -121.14835986745099, "cost1_max": 386.78676110941774, "outflow_rate_mean": 954.7415343599988, "cost1_min": 113.73441154162144, "cost2_mean": -97.48289735651089}, "episodes_total": 9916}
{"date": "2019-05-09_14-24-25", "episode_reward_mean": 825.1369254144369, "episode_reward_min": 219.46458964435507, "done": false, "episode_len_mean": 745.79, "timestamp": 1557411865, "training_iteration": 159, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20645130, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40104.926, "grad_time_ms": 27742.572, "update_time_ms": 8.384, "num_steps_sampled": 20645130, "default": {"vf_explained_var": 0.8377107381820679, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 25.38166618347168, "policy_loss": -0.016381777822971344, "cur_lr": 0.0005000000237487257, "kl": 0.016485027968883514, "total_loss": 25.373628616333008, "entropy": 1.7423502206802368}, "load_time_ms": 45.54, "num_steps_trained": 20645130}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20645130, "iterations_since_restore": 159, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998b00>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998ef0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 975.9828387195042, "time_this_iter_s": 68.04969072341919, "time_total_s": 10838.639878988266, "time_since_restore": 10838.639878988266, "timesteps_this_iter": 124060, "custom_metrics": {"cost1_mean": 344.7779964504639, "system_level_velocity_mean": 12.11106376854902, "cost2_max": -57.980115353340466, "system_level_velocity_min": 9.738727801051965, "outflow_rate_max": 1080.1627474068307, "outflow_rate_min": 427.2558814080677, "system_level_velocity_max": 14.035654614961267, "cost2_min": -116.18940425559283, "cost1_max": 399.3088139387984, "outflow_rate_mean": 965.142133231029, "cost1_min": 113.73441154162144, "cost2_mean": -97.67672406608253}, "episodes_total": 9982}
{"date": "2019-05-09_14-25-32", "episode_reward_mean": 830.2865198400108, "episode_reward_min": 722.2584006368974, "done": false, "episode_len_mean": 751.0, "timestamp": 1557411932, "training_iteration": 160, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20769174, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40156.452, "grad_time_ms": 27684.958, "update_time_ms": 8.322, "num_steps_sampled": 20769174, "default": {"vf_explained_var": 0.8279685378074646, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 26.75511932373047, "policy_loss": -0.01606917940080166, "cur_lr": 0.0005000000237487257, "kl": 0.016001781448721886, "total_loss": 26.747150421142578, "entropy": 1.727450966835022}, "load_time_ms": 41.752, "num_steps_trained": 20769174}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20769174, "iterations_since_restore": 160, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859979e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859972b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997860>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 975.9828387195042, "time_this_iter_s": 67.41440057754517, "time_total_s": 10906.054279565811, "time_since_restore": 10906.054279565811, "timesteps_this_iter": 124044, "custom_metrics": {"cost1_mean": 345.94609644170725, "system_level_velocity_mean": 12.061304842097536, "cost2_max": -76.89579977111171, "system_level_velocity_min": 9.738727801051965, "outflow_rate_max": 1080.1627474068307, "outflow_rate_min": 807.9502743755991, "system_level_velocity_max": 14.035654614961267, "cost2_min": -117.0038632205016, "cost1_max": 399.3088139387984, "outflow_rate_mean": 968.027345877426, "cost1_min": 281.20524055690896, "cost2_mean": -99.76946005597938}, "episodes_total": 10048}
{"date": "2019-05-09_14-26-43", "episode_reward_mean": 816.4959708452702, "episode_reward_min": 216.00654078885634, "done": false, "episode_len_mean": 740.54, "timestamp": 1557412003, "training_iteration": 161, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 20893016, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 40266.785, "grad_time_ms": 27763.918, "update_time_ms": 8.147, "num_steps_sampled": 20893016, "default": {"vf_explained_var": 0.8376740217208862, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 25.57265853881836, "policy_loss": -0.017872845754027367, "cur_lr": 0.0005000000237487257, "kl": 0.015908516943454742, "total_loss": 25.562841415405273, "entropy": 1.7424322366714478}, "load_time_ms": 42.258, "num_steps_trained": 20893016}, "node_ip": "10.138.0.2", "timesteps_since_restore": 20893016, "iterations_since_restore": 161, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859985c0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998eb8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 936.8412881707695, "time_this_iter_s": 70.78457522392273, "time_total_s": 10976.838854789734, "time_since_restore": 10976.838854789734, "timesteps_this_iter": 123842, "custom_metrics": {"cost1_mean": 343.334246735838, "system_level_velocity_mean": 12.170259294251219, "cost2_max": -60.30045740101686, "system_level_velocity_min": 10.55806127439741, "outflow_rate_max": 1072.2737404276445, "outflow_rate_min": 429.42417586028756, "system_level_velocity_max": 13.674572274884216, "cost2_min": -115.79526442901948, "cost1_max": 391.7744501636145, "outflow_rate_mean": 964.4621049706561, "cost1_min": 113.1624363530942, "cost2_mean": -99.10217769856894}, "episodes_total": 10115}
{"date": "2019-05-09_14-27-51", "episode_reward_mean": 823.1191328952211, "episode_reward_min": 216.00654078885634, "done": false, "episode_len_mean": 745.75, "timestamp": 1557412071, "training_iteration": 162, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21016652, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 40185.996, "grad_time_ms": 27655.851, "update_time_ms": 8.311, "num_steps_sampled": 21016652, "default": {"vf_explained_var": 0.831515908241272, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 25.520856857299805, "policy_loss": -0.016905000433325768, "cur_lr": 0.0005000000237487257, "kl": 0.01529657281935215, "total_loss": 25.511693954467773, "entropy": 1.7378326654434204}, "load_time_ms": 42.178, "num_steps_trained": 21016652}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21016652, "iterations_since_restore": 162, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dce48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc320>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cd68>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 949.6925808102964, "time_this_iter_s": 67.96461963653564, "time_total_s": 11044.80347442627, "time_since_restore": 11044.80347442627, "timesteps_this_iter": 123636, "custom_metrics": {"cost1_mean": 347.0845256056138, "system_level_velocity_mean": 12.21159749136742, "cost2_max": -60.42606624798691, "system_level_velocity_min": 11.281594821242667, "outflow_rate_max": 1042.646526326383, "outflow_rate_min": 433.28162309133376, "system_level_velocity_max": 13.450228687074159, "cost2_min": -116.9682913602775, "cost1_max": 378.64779237113316, "outflow_rate_mean": 971.4293474996595, "cost1_min": 113.1624363530942, "cost2_mean": -100.68238457609421}, "episodes_total": 10181}
{"date": "2019-05-09_14-28-59", "episode_reward_mean": 830.0367427243222, "episode_reward_min": 372.10560021776433, "done": false, "episode_len_mean": 746.72, "timestamp": 1557412139, "training_iteration": 163, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21140907, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 40086.04, "grad_time_ms": 27824.981, "update_time_ms": 8.314, "num_steps_sampled": 21140907, "default": {"vf_explained_var": 0.8321011066436768, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 27.329423904418945, "policy_loss": -0.01656612567603588, "cur_lr": 0.0005000000237487257, "kl": 0.01649375446140766, "total_loss": 27.321205139160156, "entropy": 1.7399895191192627}, "load_time_ms": 39.351, "num_steps_trained": 21140907}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21140907, "iterations_since_restore": 163, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859970f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997320>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997358>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 957.6516974603275, "time_this_iter_s": 68.01648211479187, "time_total_s": 11112.819956541061, "time_since_restore": 11112.819956541061, "timesteps_this_iter": 124255, "custom_metrics": {"cost1_mean": 347.65502916694606, "system_level_velocity_mean": 12.204985466655616, "cost2_max": -82.38165456539201, "system_level_velocity_min": 9.732111676684362, "outflow_rate_max": 1055.28795085146, "outflow_rate_min": 570.1409592657837, "system_level_velocity_max": 14.018335809659801, "cost2_min": -118.99186613496046, "cost1_max": 379.20650415300247, "outflow_rate_mean": 971.0537376486925, "cost1_min": 172.11064478689212, "cost2_mean": -102.19499040345494}, "episodes_total": 10248}
{"date": "2019-05-09_14-30-05", "episode_reward_mean": 837.6183504676302, "episode_reward_min": 557.8490545924055, "done": false, "episode_len_mean": 749.42, "timestamp": 1557412205, "training_iteration": 164, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21264979, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 39949.489, "grad_time_ms": 27897.95, "update_time_ms": 8.406, "num_steps_sampled": 21264979, "default": {"vf_explained_var": 0.8256018161773682, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 28.68800926208496, "policy_loss": -0.015930503606796265, "cur_lr": 0.0005000000237487257, "kl": 0.01611526869237423, "total_loss": 28.68023681640625, "entropy": 1.7507383823394775}, "load_time_ms": 39.405, "num_steps_trained": 21264979}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21264979, "iterations_since_restore": 164, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859974a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997e48>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997b70>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 991.8885842986613, "time_this_iter_s": 66.35306119918823, "time_total_s": 11179.17301774025, "time_since_restore": 11179.17301774025, "timesteps_this_iter": 124072, "custom_metrics": {"cost1_mean": 350.852321260976, "system_level_velocity_mean": 12.26304349293631, "cost2_max": -77.41739123780806, "system_level_velocity_min": 9.732111676684362, "outflow_rate_max": 1106.6703765828129, "outflow_rate_min": 747.9970582825707, "system_level_velocity_max": 14.03109243401869, "cost2_min": -121.60040586491118, "cost1_max": 405.25545751130545, "outflow_rate_mean": 979.140384190906, "cost1_min": 243.23346390125508, "cost2_mean": -103.0101934246436}, "episodes_total": 10314}
{"date": "2019-05-09_14-31-11", "episode_reward_mean": 833.179788511079, "episode_reward_min": 557.8490545924055, "done": false, "episode_len_mean": 749.42, "timestamp": 1557412271, "training_iteration": 165, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21389924, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 39663.529, "grad_time_ms": 27991.554, "update_time_ms": 8.535, "num_steps_sampled": 21389924, "default": {"vf_explained_var": 0.8303418755531311, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 27.490938186645508, "policy_loss": -0.017386315390467644, "cur_lr": 0.0005000000237487257, "kl": 0.016482500359416008, "total_loss": 27.481897354125977, "entropy": 1.7422635555267334}, "load_time_ms": 38.192, "num_steps_trained": 21389924}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21389924, "iterations_since_restore": 165, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998828>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859980f0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 991.8885842986613, "time_this_iter_s": 65.97860741615295, "time_total_s": 11245.151625156403, "time_since_restore": 11245.151625156403, "timesteps_this_iter": 124945, "custom_metrics": {"cost1_mean": 350.3074628278302, "system_level_velocity_mean": 12.254356235864456, "cost2_max": -78.07622370807775, "system_level_velocity_min": 10.340259670106619, "outflow_rate_max": 1106.6703765828129, "outflow_rate_min": 747.9970582825707, "system_level_velocity_max": 14.03109243401869, "cost2_min": -128.4019650768069, "cost1_max": 405.25545751130545, "outflow_rate_mean": 979.4379636347273, "cost1_min": 243.23346390125508, "cost2_mean": -100.02041009224287}, "episodes_total": 10381}
{"date": "2019-05-09_14-32-18", "episode_reward_mean": 836.2858291394832, "episode_reward_min": 708.7654718631785, "done": false, "episode_len_mean": 751.0, "timestamp": 1557412338, "training_iteration": 166, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21515037, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 39394.244, "grad_time_ms": 28094.101, "update_time_ms": 8.352, "num_steps_sampled": 21515037, "default": {"vf_explained_var": 0.8315486907958984, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 27.39625358581543, "policy_loss": -0.017801400274038315, "cur_lr": 0.0005000000237487257, "kl": 0.016589699313044548, "total_loss": 27.386850357055664, "entropy": 1.752514123916626}, "load_time_ms": 36.198, "num_steps_trained": 21515037}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21515037, "iterations_since_restore": 166, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859976d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997048>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997128>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1005.2717551793736, "time_this_iter_s": 66.9525933265686, "time_total_s": 11312.104218482971, "time_since_restore": 11312.104218482971, "timesteps_this_iter": 125113, "custom_metrics": {"cost1_mean": 352.0472537918024, "system_level_velocity_mean": 12.288018724860844, "cost2_max": -77.0660672803222, "system_level_velocity_min": 10.543727622148445, "outflow_rate_max": 1109.2580844869897, "outflow_rate_min": 836.1566920775513, "system_level_velocity_max": 14.019811035830932, "cost2_min": -124.07976965853253, "cost1_max": 403.687354992057, "outflow_rate_mean": 980.0662556624255, "cost1_min": 303.4226164944513, "cost2_mean": -99.55389671743752}, "episodes_total": 10448}
{"date": "2019-05-09_14-33-24", "episode_reward_mean": 820.7669284171302, "episode_reward_min": 226.119175979907, "done": false, "episode_len_mean": 745.79, "timestamp": 1557412404, "training_iteration": 167, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21639272, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 38963.606, "grad_time_ms": 28256.624, "update_time_ms": 8.405, "num_steps_sampled": 21639272, "default": {"vf_explained_var": 0.8359191417694092, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.806238174438477, "policy_loss": -0.01711621694266796, "cur_lr": 0.0005000000237487257, "kl": 0.01658892259001732, "total_loss": 26.79751968383789, "entropy": 1.7595168352127075}, "load_time_ms": 36.019, "num_steps_trained": 21639272}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21639272, "iterations_since_restore": 167, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859974a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859973c8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997390>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1005.2717551793736, "time_this_iter_s": 66.06932497024536, "time_total_s": 11378.173543453217, "time_since_restore": 11378.173543453217, "timesteps_this_iter": 124235, "custom_metrics": {"cost1_mean": 345.3345541443279, "system_level_velocity_mean": 12.135305978299861, "cost2_max": -67.00218436979928, "system_level_velocity_min": 10.0308373727045, "outflow_rate_max": 1109.2580844869897, "outflow_rate_min": 441.39647473905114, "system_level_velocity_max": 14.019811035830932, "cost2_min": -124.07976965853253, "cost1_max": 403.687354992057, "outflow_rate_mean": 966.6668373079051, "cost1_min": 118.51058990417013, "cost2_mean": -99.22438201407667}, "episodes_total": 10515}
{"date": "2019-05-09_14-34-29", "episode_reward_mean": 826.242395765677, "episode_reward_min": 226.119175979907, "done": false, "episode_len_mean": 741.46, "timestamp": 1557412469, "training_iteration": 168, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21761990, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 38480.404, "grad_time_ms": 28440.199, "update_time_ms": 8.501, "num_steps_sampled": 21761990, "default": {"vf_explained_var": 0.8312307596206665, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 27.585317611694336, "policy_loss": -0.017597243189811707, "cur_lr": 0.0005000000237487257, "kl": 0.01602954789996147, "total_loss": 27.575834274291992, "entropy": 1.7511775493621826}, "load_time_ms": 38.618, "num_steps_trained": 21761990}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21761990, "iterations_since_restore": 168, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cfd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc320>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859975f8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 998.5471208451567, "time_this_iter_s": 64.36483335494995, "time_total_s": 11442.538376808167, "time_since_restore": 11442.538376808167, "timesteps_this_iter": 122718, "custom_metrics": {"cost1_mean": 347.9200064021595, "system_level_velocity_mean": 12.325231121113772, "cost2_max": -54.88421539906879, "system_level_velocity_min": 9.678117136303667, "outflow_rate_max": 1116.5045644698553, "outflow_rate_min": 441.39647473905114, "system_level_velocity_max": 14.267085139416627, "cost2_min": -120.53523106641332, "cost1_max": 410.0008689307875, "outflow_rate_mean": 970.4727749384533, "cost1_min": 118.51058990417013, "cost2_mean": -98.50690984757189}, "episodes_total": 10582}
{"date": "2019-05-09_14-35-33", "episode_reward_mean": 840.9332556464724, "episode_reward_min": 703.2847714302046, "done": false, "episode_len_mean": 750.25, "timestamp": 1557412533, "training_iteration": 169, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 21884328, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37920.444, "grad_time_ms": 28617.687, "update_time_ms": 8.394, "num_steps_sampled": 21884328, "default": {"vf_explained_var": 0.8164810538291931, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 28.43926239013672, "policy_loss": -0.01751827634871006, "cur_lr": 0.0005000000237487257, "kl": 0.016364898532629013, "total_loss": 28.43002700805664, "entropy": 1.7419415712356567}, "load_time_ms": 38.484, "num_steps_trained": 21884328}, "node_ip": "10.138.0.2", "timesteps_since_restore": 21884328, "iterations_since_restore": 169, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859977f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997940>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997b38>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 998.5471208451567, "time_this_iter_s": 64.24653959274292, "time_total_s": 11506.78491640091, "time_since_restore": 11506.78491640091, "timesteps_this_iter": 122338, "custom_metrics": {"cost1_mean": 351.3803479186609, "system_level_velocity_mean": 12.287151323033632, "cost2_max": -77.24835184417287, "system_level_velocity_min": 9.678117136303667, "outflow_rate_max": 1116.5045644698553, "outflow_rate_min": 815.0573563677257, "system_level_velocity_max": 14.267085139416627, "cost2_min": -120.53523106641332, "cost1_max": 410.0008689307875, "outflow_rate_mean": 976.9406474246249, "cost1_min": 277.11357404470976, "cost2_mean": -99.74697243746829}, "episodes_total": 10648}
{"date": "2019-05-09_14-36-38", "episode_reward_mean": 818.1877940461632, "episode_reward_min": 221.75376028831815, "done": false, "episode_len_mean": 734.64, "timestamp": 1557412598, "training_iteration": 170, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22006779, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37324.32, "grad_time_ms": 28901.805, "update_time_ms": 8.499, "num_steps_sampled": 22006779, "default": {"vf_explained_var": 0.8134440183639526, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 28.85076141357422, "policy_loss": -0.01653175987303257, "cur_lr": 0.0005000000237487257, "kl": 0.016130007803440094, "total_loss": 28.842395782470703, "entropy": 1.7595521211624146}, "load_time_ms": 43.296, "num_steps_trained": 22006779}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22006779, "iterations_since_restore": 170, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984a8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998f98>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 1001.3772251611873, "time_this_iter_s": 64.3884699344635, "time_total_s": 11571.173386335373, "time_since_restore": 11571.173386335373, "timesteps_this_iter": 122451, "custom_metrics": {"cost1_mean": 343.521999977784, "system_level_velocity_mean": 12.285117970115726, "cost2_max": -56.8293131243815, "system_level_velocity_min": 11.383158287831042, "outflow_rate_max": 1086.07225198058, "outflow_rate_min": 431.06608273405664, "system_level_velocity_max": 14.061595802794276, "cost2_min": -113.05340760817481, "cost1_max": 401.6942019014175, "outflow_rate_mean": 959.3158222677582, "cost1_min": 114.3780929878451, "cost2_mean": -96.5757381916303}, "episodes_total": 10714}
{"date": "2019-05-09_14-37-44", "episode_reward_mean": 830.8578231367891, "episode_reward_min": 222.71671189187762, "done": false, "episode_len_mean": 740.58, "timestamp": 1557412664, "training_iteration": 171, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22131017, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 36683.146, "grad_time_ms": 29047.532, "update_time_ms": 8.637, "num_steps_sampled": 22131017, "default": {"vf_explained_var": 0.8081931471824646, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 28.492586135864258, "policy_loss": -0.016164813190698624, "cur_lr": 0.0005000000237487257, "kl": 0.016329938545823097, "total_loss": 28.48468780517578, "entropy": 1.7573864459991455}, "load_time_ms": 47.087, "num_steps_trained": 22131017}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22131017, "iterations_since_restore": 171, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cc88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c8d0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c128>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 991.0478088285794, "time_this_iter_s": 65.88945698738098, "time_total_s": 11637.062843322754, "time_since_restore": 11637.062843322754, "timesteps_this_iter": 124238, "custom_metrics": {"cost1_mean": 347.8630617510794, "system_level_velocity_mean": 12.320470483434422, "cost2_max": -60.055549516846234, "system_level_velocity_min": 11.131690957490033, "outflow_rate_max": 1064.3980623349485, "outflow_rate_min": 416.29177028686365, "system_level_velocity_max": 13.92801539174761, "cost2_min": -115.85429953128785, "cost1_max": 397.85325449296374, "outflow_rate_mean": 969.4317061649759, "cost1_min": 112.95100816474385, "cost2_mean": -97.41492667383368}, "episodes_total": 10782}
{"date": "2019-05-09_14-38-47", "episode_reward_mean": 825.3996723513935, "episode_reward_min": 217.80484962920463, "done": false, "episode_len_mean": 735.34, "timestamp": 1557412727, "training_iteration": 172, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22254480, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 36155.902, "grad_time_ms": 29147.011, "update_time_ms": 8.51, "num_steps_sampled": 22254480, "default": {"vf_explained_var": 0.808194637298584, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 28.441722869873047, "policy_loss": -0.016967924311757088, "cur_lr": 0.0005000000237487257, "kl": 0.01612052321434021, "total_loss": 28.43291473388672, "entropy": 1.7474982738494873}, "load_time_ms": 47.087, "num_steps_trained": 22254480}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22254480, "iterations_since_restore": 172, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859971d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997860>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997828>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 979.181447884927, "time_this_iter_s": 63.67859411239624, "time_total_s": 11700.74143743515, "time_since_restore": 11700.74143743515, "timesteps_this_iter": 123463, "custom_metrics": {"cost1_mean": 345.63450095281297, "system_level_velocity_mean": 12.338432616187859, "cost2_max": -60.055549516846234, "system_level_velocity_min": 10.519800464545465, "outflow_rate_max": 1096.8817688337667, "outflow_rate_min": 416.29177028686365, "system_level_velocity_max": 13.92801539174761, "cost2_min": -114.29402570024996, "cost1_max": 397.85325449296374, "outflow_rate_mean": 963.8061569409158, "cost1_min": 112.95100816474385, "cost2_mean": -95.41999195483311}, "episodes_total": 10850}
{"date": "2019-05-09_14-39-52", "episode_reward_mean": 825.959016170001, "episode_reward_min": 69.52853976513315, "done": false, "episode_len_mean": 739.54, "timestamp": 1557412792, "training_iteration": 173, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22377079, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 35552.066, "grad_time_ms": 29394.989, "update_time_ms": 8.467, "num_steps_sampled": 22377079, "default": {"vf_explained_var": 0.8006207942962646, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 30.42815589904785, "policy_loss": -0.016803227365016937, "cur_lr": 0.0005000000237487257, "kl": 0.01600404642522335, "total_loss": 30.419456481933594, "entropy": 1.7571048736572266}, "load_time_ms": 49.176, "num_steps_trained": 22377079}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22377079, "iterations_since_restore": 173, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859985c0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998e48>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 952.9432722960828, "time_this_iter_s": 64.40631413459778, "time_total_s": 11765.147751569748, "time_since_restore": 11765.147751569748, "timesteps_this_iter": 122599, "custom_metrics": {"cost1_mean": 345.6414862886822, "system_level_velocity_mean": 12.236732963882877, "cost2_max": -44.64115162574815, "system_level_velocity_min": 10.464121818436936, "outflow_rate_max": 1096.8817688337667, "outflow_rate_min": 254.23111705178346, "system_level_velocity_max": 13.588584470690558, "cost2_min": -114.88064715386034, "cost1_max": 392.0256795254793, "outflow_rate_mean": 963.936117963913, "cost1_min": 50.280604192219414, "cost2_mean": -94.46301081648522}, "episodes_total": 10917}
{"date": "2019-05-09_14-40-56", "episode_reward_mean": 834.4209634984753, "episode_reward_min": 69.52853976513315, "done": false, "episode_len_mean": 744.77, "timestamp": 1557412856, "training_iteration": 174, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22500218, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 34995.942, "grad_time_ms": 29748.853, "update_time_ms": 8.301, "num_steps_sampled": 22500218, "default": {"vf_explained_var": 0.8043276071548462, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 29.016876220703125, "policy_loss": -0.01666281744837761, "cur_lr": 0.0005000000237487257, "kl": 0.016598086804151535, "total_loss": 29.008617401123047, "entropy": 1.76250159740448}, "load_time_ms": 49.194, "num_steps_trained": 22500218}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22500218, "iterations_since_restore": 174, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cfd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c6a0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c8d0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 962.6005733331019, "time_this_iter_s": 64.31929278373718, "time_total_s": 11829.467044353485, "time_since_restore": 11829.467044353485, "timesteps_this_iter": 123139, "custom_metrics": {"cost1_mean": 346.94239406585734, "system_level_velocity_mean": 12.186843725377322, "cost2_max": -44.64115162574815, "system_level_velocity_min": 9.433998961362207, "outflow_rate_max": 1072.6042856689162, "outflow_rate_min": 254.23111705178346, "system_level_velocity_max": 13.579513009686636, "cost2_min": -112.64220797836933, "cost1_max": 383.9803304597782, "outflow_rate_mean": 965.9090511321089, "cost1_min": 50.280604192219414, "cost2_mean": -93.71978492327452}, "episodes_total": 10983}
{"date": "2019-05-09_14-42-03", "episode_reward_mean": 833.6725135216413, "episode_reward_min": 209.6650376033411, "done": false, "episode_len_mean": 745.67, "timestamp": 1557412923, "training_iteration": 175, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22622816, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 34767.279, "grad_time_ms": 30084.758, "update_time_ms": 8.453, "num_steps_sampled": 22622816, "default": {"vf_explained_var": 0.8075579404830933, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 29.858787536621094, "policy_loss": -0.017003051936626434, "cur_lr": 0.0005000000237487257, "kl": 0.01649702712893486, "total_loss": 29.85013771057129, "entropy": 1.7701324224472046}, "load_time_ms": 49.255, "num_steps_trained": 22622816}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22622816, "iterations_since_restore": 175, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997c18>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997b38>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 992.3412197517408, "time_this_iter_s": 67.07077598571777, "time_total_s": 11896.537820339203, "time_since_restore": 11896.537820339203, "timesteps_this_iter": 122598, "custom_metrics": {"cost1_mean": 344.25886749667535, "system_level_velocity_mean": 12.082110093271346, "cost2_max": -53.947109292839684, "system_level_velocity_min": 10.403714952922112, "outflow_rate_max": 1071.8069861767583, "outflow_rate_min": 400.8376634933556, "system_level_velocity_max": 13.504047275296047, "cost2_min": -111.06378071256279, "cost1_max": 390.9600751738111, "outflow_rate_mean": 955.4180913044371, "cost1_min": 105.93717193160144, "cost2_mean": -92.96236133347357}, "episodes_total": 11050}
{"date": "2019-05-09_14-43-08", "episode_reward_mean": 835.4577113098281, "episode_reward_min": 209.6650376033411, "done": false, "episode_len_mean": 745.67, "timestamp": 1557412988, "training_iteration": 176, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22746233, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 34387.43, "grad_time_ms": 30259.589, "update_time_ms": 8.592, "num_steps_sampled": 22746233, "default": {"vf_explained_var": 0.8214230537414551, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 27.85776710510254, "policy_loss": -0.016744671389460564, "cur_lr": 0.0005000000237487257, "kl": 0.016221029683947563, "total_loss": 27.849233627319336, "entropy": 1.7750998735427856}, "load_time_ms": 48.615, "num_steps_trained": 22746233}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22746233, "iterations_since_restore": 176, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c18>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49896dc320>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c50>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 954.6443011569976, "time_this_iter_s": 64.86957502365112, "time_total_s": 11961.407395362854, "time_since_restore": 11961.407395362854, "timesteps_this_iter": 123417, "custom_metrics": {"cost1_mean": 344.73944289838636, "system_level_velocity_mean": 12.104516283230312, "cost2_max": -53.947109292839684, "system_level_velocity_min": 10.462649584666638, "outflow_rate_max": 1054.1619903846752, "outflow_rate_min": 400.8376634933556, "system_level_velocity_max": 13.445946665269995, "cost2_min": -114.88464201385456, "cost1_max": 384.5197034855257, "outflow_rate_mean": 957.4850579092339, "cost1_min": 105.93717193160144, "cost2_mean": -91.82315540783941}, "episodes_total": 11116}
{"date": "2019-05-09_14-44-13", "episode_reward_mean": 839.4141939068547, "episode_reward_min": 358.5186640110088, "done": false, "episode_len_mean": 746.67, "timestamp": 1557413053, "training_iteration": 177, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22869739, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 34114.089, "grad_time_ms": 30438.557, "update_time_ms": 8.446, "num_steps_sampled": 22869739, "default": {"vf_explained_var": 0.8067401051521301, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 29.780385971069336, "policy_loss": -0.01666763424873352, "cur_lr": 0.0005000000237487257, "kl": 0.01557687483727932, "total_loss": 29.7716064453125, "entropy": 1.768352746963501}, "load_time_ms": 44.206, "num_steps_trained": 22869739}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22869739, "iterations_since_restore": 177, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598be10>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b550>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 950.105263715185, "time_this_iter_s": 65.07564496994019, "time_total_s": 12026.483040332794, "time_since_restore": 12026.483040332794, "timesteps_this_iter": 123506, "custom_metrics": {"cost1_mean": 348.3646175744306, "system_level_velocity_mean": 12.214962140930238, "cost2_max": -67.47520936723615, "system_level_velocity_min": 11.29034899630201, "outflow_rate_max": 1056.0892678510309, "outflow_rate_min": 550.8663742844658, "system_level_velocity_max": 13.546118118079443, "cost2_min": -114.88464201385456, "cost1_max": 387.1458088479676, "outflow_rate_mean": 970.1120661791833, "cost1_min": 162.75196726360699, "cost2_mean": -92.64839982248137}, "episodes_total": 11184}
{"date": "2019-05-09_14-45-19", "episode_reward_mean": 847.3876062319729, "episode_reward_min": 222.3022447190679, "done": false, "episode_len_mean": 744.23, "timestamp": 1557413119, "training_iteration": 178, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 22993597, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 33927.95, "grad_time_ms": 30711.447, "update_time_ms": 8.449, "num_steps_sampled": 22993597, "default": {"vf_explained_var": 0.8307381868362427, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 26.59039306640625, "policy_loss": -0.016299529001116753, "cur_lr": 0.0005000000237487257, "kl": 0.015855753794312477, "total_loss": 26.582120895385742, "entropy": 1.7654114961624146}, "load_time_ms": 41.23, "num_steps_trained": 22993597}, "node_ip": "10.138.0.2", "timesteps_since_restore": 22993597, "iterations_since_restore": 178, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cd30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c9b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c8d0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 953.7069224012998, "time_this_iter_s": 65.20293974876404, "time_total_s": 12091.685980081558, "time_since_restore": 12091.685980081558, "timesteps_this_iter": 123858, "custom_metrics": {"cost1_mean": 349.79038240870034, "system_level_velocity_mean": 12.30135293629394, "cost2_max": -65.19717177468921, "system_level_velocity_min": 10.881727488299333, "outflow_rate_max": 1078.7200356787416, "outflow_rate_min": 438.2889232679782, "system_level_velocity_max": 13.727814493839064, "cost2_min": -114.28778474211069, "cost1_max": 390.89577830666553, "outflow_rate_mean": 971.5409342611823, "cost1_min": 116.48088503922366, "cost2_mean": -92.06598278283816}, "episodes_total": 11252}
{"date": "2019-05-09_14-46-24", "episode_reward_mean": 836.4542265156044, "episode_reward_min": 217.5054455721832, "done": false, "episode_len_mean": 745.79, "timestamp": 1557413184, "training_iteration": 179, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23116841, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 33806.21, "grad_time_ms": 30942.04, "update_time_ms": 8.626, "num_steps_sampled": 23116841, "default": {"vf_explained_var": 0.8312374353408813, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 29.0941104888916, "policy_loss": -0.017487669363617897, "cur_lr": 0.0005000000237487257, "kl": 0.01666436158120632, "total_loss": 29.085060119628906, "entropy": 1.8091177940368652}, "load_time_ms": 41.17, "num_steps_trained": 23116841}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23116841, "iterations_since_restore": 179, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859988d0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998080>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 979.4199051910826, "time_this_iter_s": 65.34516549110413, "time_total_s": 12157.031145572662, "time_since_restore": 12157.031145572662, "timesteps_this_iter": 123244, "custom_metrics": {"cost1_mean": 347.3473824627483, "system_level_velocity_mean": 12.192296444805352, "cost2_max": -55.713170906418, "system_level_velocity_min": 11.26966161621494, "outflow_rate_max": 1084.1018672551247, "outflow_rate_min": 427.13525244813934, "system_level_velocity_max": 13.832928697971163, "cost2_min": -110.08090628241939, "cost1_max": 396.19316971285116, "outflow_rate_mean": 968.7099544967282, "cost1_min": 113.11913221633206, "cost2_mean": -90.42760056703712}, "episodes_total": 11318}
{"date": "2019-05-09_14-47-30", "episode_reward_mean": 838.4342973883372, "episode_reward_min": 217.5054455721832, "done": false, "episode_len_mean": 745.79, "timestamp": 1557413250, "training_iteration": 180, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23239264, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 33813.044, "grad_time_ms": 31139.763, "update_time_ms": 8.618, "num_steps_sampled": 23239264, "default": {"vf_explained_var": 0.8120740652084351, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 30.298091888427734, "policy_loss": -0.017850426957011223, "cur_lr": 0.0005000000237487257, "kl": 0.016610093414783478, "total_loss": 30.288654327392578, "entropy": 1.781815767288208}, "load_time_ms": 40.489, "num_steps_trained": 23239264}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23239264, "iterations_since_restore": 180, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598bf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598b9e8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ba90>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 956.087357131775, "time_this_iter_s": 66.44047784805298, "time_total_s": 12223.471623420715, "time_since_restore": 12223.471623420715, "timesteps_this_iter": 122423, "custom_metrics": {"cost1_mean": 347.3227705730151, "system_level_velocity_mean": 12.20440329739174, "cost2_max": -55.713170906418, "system_level_velocity_min": 9.464422445367004, "outflow_rate_max": 1084.1018672551247, "outflow_rate_min": 427.13525244813934, "system_level_velocity_max": 13.907858675752104, "cost2_min": -116.00266289961412, "cost1_max": 396.19316971285116, "outflow_rate_mean": 966.5862824408026, "cost1_min": 113.11913221633206, "cost2_mean": -89.69800577223452}, "episodes_total": 11384}
{"date": "2019-05-09_14-48-38", "episode_reward_mean": 834.4664520160618, "episode_reward_min": 214.36906318021758, "done": false, "episode_len_mean": 740.5, "timestamp": 1557413318, "training_iteration": 181, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23363527, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 33926.48, "grad_time_ms": 31175.927, "update_time_ms": 8.697, "num_steps_sampled": 23363527, "default": {"vf_explained_var": 0.8172118067741394, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 29.601747512817383, "policy_loss": -0.017676351591944695, "cur_lr": 0.0005000000237487257, "kl": 0.01566854864358902, "total_loss": 29.592004776000977, "entropy": 1.806734561920166}, "load_time_ms": 38.492, "num_steps_trained": 23363527}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23363527, "iterations_since_restore": 181, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c5f8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c6a0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 949.1623690026358, "time_this_iter_s": 67.36349868774414, "time_total_s": 12290.83512210846, "time_since_restore": 12290.83512210846, "timesteps_this_iter": 124263, "custom_metrics": {"cost1_mean": 347.0014562990625, "system_level_velocity_mean": 12.28206637529643, "cost2_max": -56.2208667349996, "system_level_velocity_min": 10.269724812348239, "outflow_rate_max": 1062.0005653479952, "outflow_rate_min": 410.3132840269746, "system_level_velocity_max": 13.573388375673023, "cost2_min": -111.19238858811626, "cost1_max": 387.1928476655137, "outflow_rate_mean": 967.4144923512193, "cost1_min": 109.64210352231432, "cost2_mean": -90.21183101213866}, "episodes_total": 11452}
{"date": "2019-05-09_14-49-43", "episode_reward_mean": 828.8417112671127, "episode_reward_min": 209.83767992048726, "done": false, "episode_len_mean": 728.58, "timestamp": 1557413383, "training_iteration": 182, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23486987, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 34004.727, "grad_time_ms": 31269.194, "update_time_ms": 8.926, "num_steps_sampled": 23486987, "default": {"vf_explained_var": 0.8133304119110107, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 31.026968002319336, "policy_loss": -0.017010970041155815, "cur_lr": 0.0005000000237487257, "kl": 0.015696944668889046, "total_loss": 31.017902374267578, "entropy": 1.8039755821228027}, "load_time_ms": 38.793, "num_steps_trained": 23486987}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23486987, "iterations_since_restore": 182, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49896e4240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c6d8>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c470>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 973.8043384223722, "time_this_iter_s": 65.41254210472107, "time_total_s": 12356.24766421318, "time_since_restore": 12356.24766421318, "timesteps_this_iter": 123460, "custom_metrics": {"cost1_mean": 345.1653597060238, "system_level_velocity_mean": 12.438200693250526, "cost2_max": -56.2208667349996, "system_level_velocity_min": 11.427761208026913, "outflow_rate_max": 1069.5085693983128, "outflow_rate_min": 410.3132840269746, "system_level_velocity_max": 13.830013716533758, "cost2_min": -111.19238858811626, "cost1_max": 393.34194924600644, "outflow_rate_mean": 965.1741207268284, "cost1_min": 109.64210352231432, "cost2_mean": -90.77458170031898}, "episodes_total": 11520}
{"date": "2019-05-09_14-50-50", "episode_reward_mean": 836.9710107720185, "episode_reward_min": 222.5718079242874, "done": false, "episode_len_mean": 744.33, "timestamp": 1557413450, "training_iteration": 183, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23610804, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 34252.05, "grad_time_ms": 31215.046, "update_time_ms": 9.058, "num_steps_sampled": 23610804, "default": {"vf_explained_var": 0.8177240490913391, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 30.354480743408203, "policy_loss": -0.0166716780513525, "cur_lr": 0.0005000000237487257, "kl": 0.015805749222636223, "total_loss": 30.345809936523438, "entropy": 1.8107937574386597}, "load_time_ms": 36.884, "num_steps_trained": 23610804}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23610804, "iterations_since_restore": 183, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998c88>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998588>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 954.5884172437359, "time_this_iter_s": 66.3567328453064, "time_total_s": 12422.604397058487, "time_since_restore": 12422.604397058487, "timesteps_this_iter": 123817, "custom_metrics": {"cost1_mean": 349.108809273914, "system_level_velocity_mean": 12.321372889632409, "cost2_max": -60.07487562235845, "system_level_velocity_min": 10.21772756471731, "outflow_rate_max": 1091.4432628982272, "outflow_rate_min": 434.50563098247255, "system_level_velocity_max": 14.022291255210737, "cost2_min": -123.75183718585362, "cost1_max": 392.18634542420824, "outflow_rate_mean": 973.7612050340759, "cost1_min": 115.92622667215603, "cost2_mean": -91.61779641361346}, "episodes_total": 11588}
{"date": "2019-05-09_14-51-56", "episode_reward_mean": 830.9362864538394, "episode_reward_min": 222.5718079242874, "done": false, "episode_len_mean": 741.36, "timestamp": 1557413516, "training_iteration": 184, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23734408, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 34451.739, "grad_time_ms": 31168.26, "update_time_ms": 9.52, "num_steps_sampled": 23734408, "default": {"vf_explained_var": 0.8187733292579651, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 29.886808395385742, "policy_loss": -0.01717851124703884, "cur_lr": 0.0005000000237487257, "kl": 0.016552653163671494, "total_loss": 29.878007888793945, "entropy": 1.817000150680542}, "load_time_ms": 36.561, "num_steps_trained": 23734408}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23734408, "iterations_since_restore": 184, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498599bef0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498599bba8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 995.7379529823269, "time_this_iter_s": 65.94231057167053, "time_total_s": 12488.546707630157, "time_since_restore": 12488.546707630157, "timesteps_this_iter": 123604, "custom_metrics": {"cost1_mean": 348.36798633337435, "system_level_velocity_mean": 12.361010177922699, "cost2_max": -60.07487562235845, "system_level_velocity_min": 10.21772756471731, "outflow_rate_max": 1099.105779649795, "outflow_rate_min": 434.50563098247255, "system_level_velocity_max": 14.208799433789785, "cost2_min": -121.49182715040114, "cost1_max": 405.34576799016213, "outflow_rate_mean": 971.1481350564572, "cost1_min": 115.92622667215603, "cost2_mean": -91.96266308084583}, "episodes_total": 11656}
{"date": "2019-05-09_14-53-04", "episode_reward_mean": 843.9899932375292, "episode_reward_min": 751.4186898961536, "done": false, "episode_len_mean": 751.0, "timestamp": 1557413584, "training_iteration": 185, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23857706, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 34615.647, "grad_time_ms": 31119.54, "update_time_ms": 9.672, "num_steps_sampled": 23857706, "default": {"vf_explained_var": 0.8134225606918335, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 29.65610122680664, "policy_loss": -0.01716717518866062, "cur_lr": 0.0005000000237487257, "kl": 0.015927130356431007, "total_loss": 29.646997451782227, "entropy": 1.818358063697815}, "load_time_ms": 34.008, "num_steps_trained": 23857706}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23857706, "iterations_since_restore": 185, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859982b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998a90>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 995.7379529823269, "time_this_iter_s": 68.259206533432, "time_total_s": 12556.80591416359, "time_since_restore": 12556.80591416359, "timesteps_this_iter": 123298, "custom_metrics": {"cost1_mean": 353.1647485875887, "system_level_velocity_mean": 12.346497022967158, "cost2_max": -70.64425796232301, "system_level_velocity_min": 9.900561343598811, "outflow_rate_max": 1113.9225089397273, "outflow_rate_min": 807.1219971210905, "system_level_velocity_max": 14.650431883570672, "cost2_min": -121.49182715040114, "cost1_max": 414.2868480883575, "outflow_rate_mean": 983.2706203385368, "cost1_min": 285.02640491313997, "cost2_mean": -93.16739984603268}, "episodes_total": 11723}
{"date": "2019-05-09_14-54-11", "episode_reward_mean": 846.4505245003375, "episode_reward_min": 769.0798277526418, "done": false, "episode_len_mean": 750.27, "timestamp": 1557413651, "training_iteration": 186, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 23981035, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 34874.868, "grad_time_ms": 31033.465, "update_time_ms": 9.869, "num_steps_sampled": 23981035, "default": {"vf_explained_var": 0.800207257270813, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 30.365633010864258, "policy_loss": -0.016353273764252663, "cur_lr": 0.0005000000237487257, "kl": 0.01678951270878315, "total_loss": 30.35778045654297, "entropy": 1.8235108852386475}, "load_time_ms": 34.706, "num_steps_trained": 23981035}, "node_ip": "10.138.0.2", "timesteps_since_restore": 23981035, "iterations_since_restore": 186, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cda0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c9b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ce10>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 974.2334241496661, "time_this_iter_s": 66.6695339679718, "time_total_s": 12623.475448131561, "time_since_restore": 12623.475448131561, "timesteps_this_iter": 123329, "custom_metrics": {"cost1_mean": 351.7636405687642, "system_level_velocity_mean": 12.311457875589774, "cost2_max": -67.38020225836199, "system_level_velocity_min": 11.164071803233997, "outflow_rate_max": 1113.9225089397273, "outflow_rate_min": 865.0190236344636, "system_level_velocity_max": 14.650431883570672, "cost2_min": -112.01250063728216, "cost1_max": 414.2868480883575, "outflow_rate_mean": 974.840120289862, "cost1_min": 318.05969758610667, "cost2_mean": -91.39617050925175}, "episodes_total": 11790}
{"date": "2019-05-09_14-55-17", "episode_reward_mean": 840.2351867279722, "episode_reward_min": 220.89141479616347, "done": false, "episode_len_mean": 745.06, "timestamp": 1557413717, "training_iteration": 187, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24104446, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 35126.037, "grad_time_ms": 30926.258, "update_time_ms": 10.261, "num_steps_sampled": 24104446, "default": {"vf_explained_var": 0.8099945783615112, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 28.942298889160156, "policy_loss": -0.016651779413223267, "cur_lr": 0.0005000000237487257, "kl": 0.016535891219973564, "total_loss": 28.934019088745117, "entropy": 1.8352068662643433}, "load_time_ms": 38.864, "num_steps_trained": 24104446}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24104446, "iterations_since_restore": 187, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498599bf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b2b0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b198>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 956.3044115601771, "time_this_iter_s": 66.57010245323181, "time_total_s": 12690.045550584793, "time_since_restore": 12690.045550584793, "timesteps_this_iter": 123411, "custom_metrics": {"cost1_mean": 349.31288863720016, "system_level_velocity_mean": 12.313418447129557, "cost2_max": -52.23736354303931, "system_level_velocity_min": 11.017144030637041, "outflow_rate_max": 1104.8650206795496, "outflow_rate_min": 430.75870616305326, "system_level_velocity_max": 14.199402040319656, "cost2_min": -112.01250063728216, "cost1_max": 405.10734214494573, "outflow_rate_mean": 971.5555377968557, "cost1_min": 113.50982294630653, "cost2_mean": -91.79434157583248}, "episodes_total": 11858}
{"date": "2019-05-09_14-56-25", "episode_reward_mean": 834.9991007978864, "episode_reward_min": 68.92110278472244, "done": false, "episode_len_mean": 735.29, "timestamp": 1557413785, "training_iteration": 188, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24227392, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 35385.616, "grad_time_ms": 30886.904, "update_time_ms": 10.612, "num_steps_sampled": 24227392, "default": {"vf_explained_var": 0.7914059162139893, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 30.943275451660156, "policy_loss": -0.01669425144791603, "cur_lr": 0.0005000000237487257, "kl": 0.015701953321695328, "total_loss": 30.934532165527344, "entropy": 1.8257527351379395}, "load_time_ms": 39.208, "num_steps_trained": 24227392}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24227392, "iterations_since_restore": 188, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c6d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cb70>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c780>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 994.8029227076051, "time_this_iter_s": 67.45570158958435, "time_total_s": 12757.501252174377, "time_since_restore": 12757.501252174377, "timesteps_this_iter": 122946, "custom_metrics": {"cost1_mean": 347.42623032601404, "system_level_velocity_mean": 12.40123506805549, "cost2_max": -40.05165087612912, "system_level_velocity_min": 9.85401349593545, "outflow_rate_max": 1115.0933030509013, "outflow_rate_min": 252.80341528926027, "system_level_velocity_max": 14.199402040319656, "cost2_min": -125.77303784595787, "cost1_max": 405.6638756240632, "outflow_rate_mean": 966.9937632586746, "cost1_min": 49.529671961201146, "cost2_mean": -91.80617020356527}, "episodes_total": 11926}
{"date": "2019-05-09_14-57-33", "episode_reward_mean": 835.8951892305163, "episode_reward_min": 68.92110278472244, "done": false, "episode_len_mean": 739.75, "timestamp": 1557413853, "training_iteration": 189, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24350177, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 35687.889, "grad_time_ms": 30894.678, "update_time_ms": 10.767, "num_steps_sampled": 24350177, "default": {"vf_explained_var": 0.8010897636413574, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 29.31272315979004, "policy_loss": -0.016641581431031227, "cur_lr": 0.0005000000237487257, "kl": 0.016206583008170128, "total_loss": 29.304288864135742, "entropy": 1.8432121276855469}, "load_time_ms": 41.811, "num_steps_trained": 24350177}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24350177, "iterations_since_restore": 189, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cd68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ce10>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c8d0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 994.8029227076051, "time_this_iter_s": 68.52942991256714, "time_total_s": 12826.030682086945, "time_since_restore": 12826.030682086945, "timesteps_this_iter": 122785, "custom_metrics": {"cost1_mean": 348.794803990367, "system_level_velocity_mean": 12.362425409612142, "cost2_max": -40.05165087612912, "system_level_velocity_min": 9.93141345730413, "outflow_rate_max": 1102.7295367210277, "outflow_rate_min": 252.80341528926027, "system_level_velocity_max": 14.24515721045453, "cost2_min": -110.15597930949593, "cost1_max": 402.7589162339909, "outflow_rate_mean": 973.5160037391149, "cost1_min": 49.529671961201146, "cost2_mean": -92.26399425794845}, "episodes_total": 11992}
{"date": "2019-05-09_14-58-42", "episode_reward_mean": 848.9301527029222, "episode_reward_min": 721.1123041115524, "done": false, "episode_len_mean": 750.25, "timestamp": 1557413922, "training_iteration": 190, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24473704, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 36044.402, "grad_time_ms": 30709.247, "update_time_ms": 10.89, "num_steps_sampled": 24473704, "default": {"vf_explained_var": 0.804701030254364, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 29.410831451416016, "policy_loss": -0.017662132158875465, "cur_lr": 0.0005000000237487257, "kl": 0.016367068514227867, "total_loss": 29.401456832885742, "entropy": 1.8629509210586548}, "load_time_ms": 41.735, "num_steps_trained": 24473704}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24473704, "iterations_since_restore": 190, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498599bcf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b748>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b198>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 947.6905320005238, "time_this_iter_s": 68.18481659889221, "time_total_s": 12894.215498685837, "time_since_restore": 12894.215498685837, "timesteps_this_iter": 123527, "custom_metrics": {"cost1_mean": 352.25508579380056, "system_level_velocity_mean": 12.303321648892593, "cost2_max": -72.94204944548395, "system_level_velocity_min": 10.283323883949276, "outflow_rate_max": 1081.1752727941387, "outflow_rate_min": 829.8342752850328, "system_level_velocity_max": 14.013918875666207, "cost2_min": -110.38626672003906, "cost1_max": 396.04122927451067, "outflow_rate_mean": 981.5979225041924, "cost1_min": 295.83205173070576, "cost2_mean": -93.06145592335264}, "episodes_total": 12058}
{"date": "2019-05-09_14-59-50", "episode_reward_mean": 843.2341392503764, "episode_reward_min": 721.1123041115524, "done": false, "episode_len_mean": 751.0, "timestamp": 1557413990, "training_iteration": 191, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24597203, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 36161.898, "grad_time_ms": 30698.232, "update_time_ms": 10.77, "num_steps_sampled": 24597203, "default": {"vf_explained_var": 0.8120778203010559, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 28.876920700073242, "policy_loss": -0.015451115556061268, "cur_lr": 0.0005000000237487257, "kl": 0.019674042239785194, "total_loss": 28.871429443359375, "entropy": 1.8685014247894287}, "load_time_ms": 41.589, "num_steps_trained": 24597203}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24597203, "iterations_since_restore": 191, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cf28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c780>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598c588>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 953.4490425123156, "time_this_iter_s": 68.37826633453369, "time_total_s": 12962.59376502037, "time_since_restore": 12962.59376502037, "timesteps_this_iter": 123499, "custom_metrics": {"cost1_mean": 348.5589771087777, "system_level_velocity_mean": 12.16203016824861, "cost2_max": -73.15861007556404, "system_level_velocity_min": 10.283323883949276, "outflow_rate_max": 1054.9872091696975, "outflow_rate_min": 829.8342752850328, "system_level_velocity_max": 13.545291690104666, "cost2_min": -110.88165415966037, "cost1_max": 385.1570764268021, "outflow_rate_mean": 971.2766059647203, "cost1_min": 295.83205173070576, "cost2_mean": -91.38033202314577}, "episodes_total": 12124}
{"date": "2019-05-09_15-01-00", "episode_reward_mean": 848.8593719395316, "episode_reward_min": 218.17616672801736, "done": false, "episode_len_mean": 745.77, "timestamp": 1557414060, "training_iteration": 192, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24720544, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 36496.155, "grad_time_ms": 30765.683, "update_time_ms": 10.845, "num_steps_sampled": 24720544, "default": {"vf_explained_var": 0.8063180446624756, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 30.822832107543945, "policy_loss": -0.017861712723970413, "cur_lr": 0.0005000000237487257, "kl": 0.0163407102227211, "total_loss": 30.813241958618164, "entropy": 1.8528838157653809}, "load_time_ms": 41.413, "num_steps_trained": 24720544}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24720544, "iterations_since_restore": 192, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ce10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498598ca90>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498598cd68>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 968.1006447186605, "time_this_iter_s": 69.42819499969482, "time_total_s": 13032.021960020065, "time_since_restore": 13032.021960020065, "timesteps_this_iter": 123341, "custom_metrics": {"cost1_mean": 348.74005371414023, "system_level_velocity_mean": 12.249789038869086, "cost2_max": -63.00130759814276, "system_level_velocity_min": 10.875171852104266, "outflow_rate_max": 1063.0442741253687, "outflow_rate_min": 429.9798915903574, "system_level_velocity_max": 13.683149448354303, "cost2_min": -113.24929089700971, "cost1_max": 389.5750901726552, "outflow_rate_mean": 971.223135087794, "cost1_min": 114.65136722625037, "cost2_mean": -93.35032953010011}, "episodes_total": 12190}
{"date": "2019-05-09_15-02-09", "episode_reward_mean": 832.2423578815453, "episode_reward_min": 69.63485067860258, "done": false, "episode_len_mean": 734.21, "timestamp": 1557414129, "training_iteration": 193, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24843446, "pid": 25325, "episodes_this_iter": 68, "info": {"sample_time_ms": 36730.343, "grad_time_ms": 30792.507, "update_time_ms": 11.046, "num_steps_sampled": 24843446, "default": {"vf_explained_var": 0.8118168711662292, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 31.4228515625, "policy_loss": -0.017298143357038498, "cur_lr": 0.0005000000237487257, "kl": 0.0161711648106575, "total_loss": 31.41373634338379, "entropy": 1.8706380128860474}, "load_time_ms": 43.843, "num_steps_trained": 24843446}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24843446, "iterations_since_restore": 193, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b550>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b780>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 968.1006447186605, "time_this_iter_s": 69.06874656677246, "time_total_s": 13101.090706586838, "time_since_restore": 13101.090706586838, "timesteps_this_iter": 122902, "custom_metrics": {"cost1_mean": 344.6002610507319, "system_level_velocity_mean": 12.297089730192138, "cost2_max": -47.13051765341726, "system_level_velocity_min": 9.9914170653965, "outflow_rate_max": 1070.964568189703, "outflow_rate_min": 252.10029028926027, "system_level_velocity_max": 13.683149448354303, "cost2_min": -111.52187405877304, "cost1_max": 389.84300983210676, "outflow_rate_mean": 963.0724220866895, "cost1_min": 50.60534562579749, "cost2_mean": -92.56404308038951}, "episodes_total": 12258}
{"date": "2019-05-09_15-03-19", "episode_reward_mean": 845.2344958851745, "episode_reward_min": 221.90852011217433, "done": false, "episode_len_mean": 745.78, "timestamp": 1557414199, "training_iteration": 194, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 24967555, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 36973.925, "grad_time_ms": 30982.116, "update_time_ms": 10.765, "num_steps_sampled": 24967555, "default": {"vf_explained_var": 0.8116815090179443, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 30.50250244140625, "policy_loss": -0.0166595708578825, "cur_lr": 0.0005000000237487257, "kl": 0.016236571595072746, "total_loss": 30.494062423706055, "entropy": 1.8532114028930664}, "load_time_ms": 44.425, "num_steps_trained": 24967555}, "node_ip": "10.138.0.2", "timesteps_since_restore": 24967555, "iterations_since_restore": 194, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859986a0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998128>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 961.60330151695, "time_this_iter_s": 70.2860598564148, "time_total_s": 13171.376766443253, "time_since_restore": 13171.376766443253, "timesteps_this_iter": 124109, "custom_metrics": {"cost1_mean": 351.7272239600797, "system_level_velocity_mean": 12.374131128320105, "cost2_max": -53.588592535073495, "system_level_velocity_min": 10.3935575019506, "outflow_rate_max": 1070.964568189703, "outflow_rate_min": 425.3184145175743, "system_level_velocity_max": 14.035220514373426, "cost2_min": -111.52187405877304, "cost1_max": 397.6633396515174, "outflow_rate_mean": 980.7779244559857, "cost1_min": 112.79851875013188, "cost2_mean": -92.45340207269483}, "episodes_total": 12325}
{"date": "2019-05-09_15-04-28", "episode_reward_mean": 829.1990755485078, "episode_reward_min": 221.90852011217433, "done": false, "episode_len_mean": 740.58, "timestamp": 1557414268, "training_iteration": 195, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 25091017, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37054.303, "grad_time_ms": 30972.129, "update_time_ms": 10.63, "num_steps_sampled": 25091017, "default": {"vf_explained_var": 0.8131399154663086, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 29.525190353393555, "policy_loss": -0.01767360232770443, "cur_lr": 0.0005000000237487257, "kl": 0.01646912842988968, "total_loss": 29.515853881835938, "entropy": 1.878551721572876}, "load_time_ms": 46.672, "num_steps_trained": 25091017}, "node_ip": "10.138.0.2", "timesteps_since_restore": 25091017, "iterations_since_restore": 195, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859985c0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859987b8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 973.7664808040848, "time_this_iter_s": 68.92641353607178, "time_total_s": 13240.303179979324, "time_since_restore": 13240.303179979324, "timesteps_this_iter": 123462, "custom_metrics": {"cost1_mean": 345.7462943482021, "system_level_velocity_mean": 12.258318275589993, "cost2_max": -53.588592535073495, "system_level_velocity_min": 9.667301162354756, "outflow_rate_max": 1064.9855999914193, "outflow_rate_min": 425.3184145175743, "system_level_velocity_max": 14.209675973634928, "cost2_min": -111.42374618666877, "cost1_max": 399.15106960259163, "outflow_rate_mean": 967.0022492960586, "cost1_min": 112.79851875013188, "cost2_mean": -92.51822065089328}, "episodes_total": 12391}
{"date": "2019-05-09_15-05-37", "episode_reward_mean": 839.5066979727162, "episode_reward_min": 703.4939738374844, "done": false, "episode_len_mean": 749.4, "timestamp": 1557414337, "training_iteration": 196, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 25215526, "pid": 25325, "episodes_this_iter": 67, "info": {"sample_time_ms": 37225.773, "grad_time_ms": 30985.146, "update_time_ms": 10.585, "num_steps_sampled": 25215526, "default": {"vf_explained_var": 0.8082571029663086, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 30.097463607788086, "policy_loss": -0.01700342446565628, "cur_lr": 0.0005000000237487257, "kl": 0.016681721433997154, "total_loss": 30.088905334472656, "entropy": 1.8839460611343384}, "load_time_ms": 47.738, "num_steps_trained": 25215526}, "node_ip": "10.138.0.2", "timesteps_since_restore": 25215526, "iterations_since_restore": 196, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985997908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b668>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b898>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 973.7664808040848, "time_this_iter_s": 68.52831292152405, "time_total_s": 13308.831492900848, "time_since_restore": 13308.831492900848, "timesteps_this_iter": 124509, "custom_metrics": {"cost1_mean": 349.25702645366124, "system_level_velocity_mean": 12.224373086838838, "cost2_max": -68.94990336639665, "system_level_velocity_min": 9.740735457876157, "outflow_rate_max": 1111.1464175915023, "outflow_rate_min": 806.7109983150316, "system_level_velocity_max": 14.218940328324699, "cost2_min": -112.0403376630318, "cost1_max": 406.43165158226793, "outflow_rate_mean": 975.131062655352, "cost1_min": 280.90006415232205, "cost2_mean": -93.57779219542442}, "episodes_total": 12458}
{"date": "2019-05-09_15-06-45", "episode_reward_mean": 841.9205855594369, "episode_reward_min": 703.4939738374844, "done": false, "episode_len_mean": 749.4, "timestamp": 1557414405, "training_iteration": 197, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 25338707, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37421.529, "grad_time_ms": 30925.55, "update_time_ms": 10.697, "num_steps_sampled": 25338707, "default": {"vf_explained_var": 0.837265133857727, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 26.067014694213867, "policy_loss": -0.017268475145101547, "cur_lr": 0.0005000000237487257, "kl": 0.016331404447555542, "total_loss": 26.058013916015625, "entropy": 1.8859351873397827}, "load_time_ms": 47.163, "num_steps_trained": 25338707}, "node_ip": "10.138.0.2", "timesteps_since_restore": 25338707, "iterations_since_restore": 197, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859980f0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859986a0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 949.0490302857357, "time_this_iter_s": 67.98379325866699, "time_total_s": 13376.815286159515, "time_since_restore": 13376.815286159515, "timesteps_this_iter": 123181, "custom_metrics": {"cost1_mean": 350.77740687146155, "system_level_velocity_mean": 12.275707833084773, "cost2_max": -78.5502195430669, "system_level_velocity_min": 11.379242675091563, "outflow_rate_max": 1061.0303727605233, "outflow_rate_min": 860.6424960003856, "system_level_velocity_max": 13.49331770412836, "cost2_min": -109.75462353232932, "cost1_max": 387.1551074485954, "outflow_rate_mean": 979.151636309771, "cost1_min": 301.4116442227115, "cost2_mean": -93.72565656279032}, "episodes_total": 12524}
{"date": "2019-05-09_15-07-53", "episode_reward_mean": 842.478189632292, "episode_reward_min": 762.0143928322299, "done": false, "episode_len_mean": 751.0, "timestamp": 1557414473, "training_iteration": 198, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 25460808, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37587.22, "grad_time_ms": 30852.149, "update_time_ms": 10.622, "num_steps_sampled": 25460808, "default": {"vf_explained_var": 0.8049212694168091, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 31.219045639038086, "policy_loss": -0.01735064387321472, "cur_lr": 0.0005000000237487257, "kl": 0.017379848286509514, "total_loss": 31.210493087768555, "entropy": 1.8864766359329224}, "load_time_ms": 49.265, "num_steps_trained": 25460808}, "node_ip": "10.138.0.2", "timesteps_since_restore": 25460808, "iterations_since_restore": 198, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859982b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f49859984e0>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f49859989b0>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 959.4538110471364, "time_this_iter_s": 68.36280512809753, "time_total_s": 13445.178091287613, "time_since_restore": 13445.178091287613, "timesteps_this_iter": 122101, "custom_metrics": {"cost1_mean": 353.2461493404048, "system_level_velocity_mean": 12.354541138284016, "cost2_max": -79.99014480882212, "system_level_velocity_min": 10.305473960717332, "outflow_rate_max": 1090.2316359164347, "outflow_rate_min": 853.1264801352007, "system_level_velocity_max": 14.233803810342224, "cost2_min": -111.41656199740159, "cost1_max": 401.6502979499822, "outflow_rate_mean": 985.6546436104046, "cost1_min": 294.80211497758535, "cost2_mean": -94.90673265107597}, "episodes_total": 12590}
{"date": "2019-05-09_15-09-01", "episode_reward_mean": 840.3031126215906, "episode_reward_min": 731.989863022481, "done": false, "episode_len_mean": 751.0, "timestamp": 1557414541, "training_iteration": 199, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 25583660, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37717.948, "grad_time_ms": 30679.141, "update_time_ms": 10.874, "num_steps_sampled": 25583660, "default": {"vf_explained_var": 0.8389846682548523, "cur_kl_coeff": 0.5062499046325684, "vf_loss": 27.315717697143555, "policy_loss": -0.017626261338591576, "cur_lr": 0.0005000000237487257, "kl": 0.016749517992138863, "total_loss": 27.306570053100586, "entropy": 1.8971498012542725}, "load_time_ms": 48.704, "num_steps_trained": 25583660}, "node_ip": "10.138.0.2", "timesteps_since_restore": 25583660, "iterations_since_restore": 199, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f498599bcf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b780>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f498599b748>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 959.4538110471364, "time_this_iter_s": 68.04560828208923, "time_total_s": 13513.223699569702, "time_since_restore": 13513.223699569702, "timesteps_this_iter": 122852, "custom_metrics": {"cost1_mean": 353.2272097765709, "system_level_velocity_mean": 12.360784325101157, "cost2_max": -78.24734001534773, "system_level_velocity_min": 10.305473960717332, "outflow_rate_max": 1079.9200689760462, "outflow_rate_min": 847.5151666937993, "system_level_velocity_max": 14.233803810342224, "cost2_min": -113.02205232935569, "cost1_max": 401.6502979499822, "outflow_rate_mean": 985.1640635666606, "cost1_min": 294.80211497758535, "cost2_mean": -96.7442130956404}, "episodes_total": 12656}
{"date": "2019-05-09_15-10-09", "episode_reward_mean": 838.350441032243, "episode_reward_min": 731.989863022481, "done": true, "episode_len_mean": 751.0, "timestamp": 1557414609, "training_iteration": 200, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "policy_reward_mean": {}, "timesteps_total": 25706592, "pid": 25325, "episodes_this_iter": 66, "info": {"sample_time_ms": 37719.111, "grad_time_ms": 30599.135, "update_time_ms": 10.729, "num_steps_sampled": 25706592, "default": {"vf_explained_var": 0.82356858253479, "cur_kl_coeff": 0.5062499642372131, "vf_loss": 28.516298294067383, "policy_loss": -0.01751476712524891, "cur_lr": 0.0005000000237487257, "kl": 0.01626431755721569, "total_loss": 28.50701904296875, "entropy": 1.8942763805389404}, "load_time_ms": 48.947, "num_steps_trained": 25706592}, "node_ip": "10.138.0.2", "timesteps_since_restore": 25706592, "iterations_since_restore": 200, "num_metric_batches_dropped": 0, "config": {"local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "compress_observations": false, "input": "sampler", "sample_async": false, "custom_resources_per_worker": {}, "use_gae": true, "vf_share_layers": false, "vf_loss_coeff": 1.0, "optimizer": {}, "simple_optimizer": false, "entropy_coeff": 0.0, "vf_clip_param": 1000000.0, "synchronize_filters": true, "num_cpus_per_worker": 1, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "kl_target": 0.01, "clip_actions": false, "clip_rewards": null, "input_evaluation": null, "num_envs_per_worker": 1, "lr_schedule": null, "sgd_minibatch_size": 128, "horizon": 1500, "callbacks": {"on_sample_end": null, "on_train_result": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f49859980b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998a90>", "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f4985998cf8>"}, "num_cpus_for_driver": 1, "log_level": "INFO", "tf_session_args": {"intra_op_parallelism_threads": 2, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "inter_op_parallelism_threads": 2, "allow_soft_placement": true, "device_count": {"CPU": 1}}, "model": {"dim": 84, "free_log_std": false, "fcnet_hiddens": [128, 64, 32], "grayscale": false, "fcnet_activation": "tanh", "lstm_use_prev_action_reward": false, "custom_model": null, "channel_major": false, "squash_to_range": false, "framestack": true, "use_lstm": false, "conv_activation": "relu", "conv_filters": null, "custom_preprocessor": null, "lstm_cell_size": 256, "zero_mean": true, "custom_options": {}, "max_seq_len": 20}, "lambda": 0.97, "num_gpus_per_worker": 0, "kl_coeff": 0.2, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "preprocessor_pref": "deepmind", "clip_param": 0.3, "observation_filter": "MeanStdFilter", "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0density_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:7.0", "gamma": 0.99, "lr": 0.0005, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "batch_mode": "truncate_episodes", "num_gpus": 0, "num_workers": 30, "output": null, "collect_metrics_timeout": 180, "num_sgd_iter": 10, "sample_batch_size": 750, "output_max_file_size": 67108864, "straggler_mitigation": false, "train_batch_size": 90000}, "hostname": "flow-main", "episode_reward_max": 953.7750009667061, "time_this_iter_s": 67.32730960845947, "time_total_s": 13580.551009178162, "time_since_restore": 13580.551009178162, "timesteps_this_iter": 122932, "custom_metrics": {"cost1_mean": 354.64260561574434, "system_level_velocity_mean": 12.410360633151333, "cost2_max": -78.24734001534773, "system_level_velocity_min": 10.442160338107353, "outflow_rate_max": 1079.9200689760462, "outflow_rate_min": 847.5151666937993, "system_level_velocity_max": 13.922275287247555, "cost2_min": -113.36329384669136, "cost1_max": 392.201788404304, "outflow_rate_mean": 988.3010379648827, "cost1_min": 300.5245404062674, "cost2_mean": -96.99754675793743}, "episodes_total": 12722}
