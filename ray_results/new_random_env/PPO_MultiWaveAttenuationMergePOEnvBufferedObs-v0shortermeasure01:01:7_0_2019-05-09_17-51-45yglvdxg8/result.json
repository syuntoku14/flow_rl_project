{"time_this_iter_s": 44.89421510696411, "done": false, "date": "2019-05-09_17-53-10", "episode_reward_mean": 852.1702992838233, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f0b8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f0f0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f128>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 44.89421510696411, "timestamp": 1557424390, "custom_metrics": {"cost2_max": -79.1281510605885, "outflow_rate_mean": 1111.5473496070178, "cost2_min": -118.07303982143145, "cost2_mean": -97.94235968040768, "system_level_velocity_max": 13.649383702856623, "system_level_velocity_min": 11.44466752728675, "cost1_min": 330.30122699902046, "cost1_mean": 355.1263205616082, "outflow_rate_max": 1230.3440289482453, "system_level_velocity_mean": 12.42811869108082, "cost1_max": 386.5369393019629, "outflow_rate_min": 1033.8982705608578}, "timesteps_this_iter": 80612, "time_total_s": 13625.445224285126, "episodes_this_iter": 30, "info": {"update_time_ms": 731.726, "grad_time_ms": 18739.288, "sample_time_ms": 25107.152, "default": {"vf_explained_var": 0.866007924079895, "cur_kl_coeff": 0.5062499642372131, "entropy": 1.911815881729126, "total_loss": 21.29118537902832, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02092309109866619, "vf_loss": 21.30388832092285, "kl": 0.016235386952757835}, "load_time_ms": 89.087, "num_steps_trained": 25787204, "num_steps_sampled": 25787204}, "episode_reward_max": 972.4258098763547, "policy_reward_mean": {}, "training_iteration": 201, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 25787204, "episode_reward_min": 780.1735806760418, "pid": 14989, "iterations_since_restore": 1, "num_metric_batches_dropped": 0, "episodes_total": 12752, "timesteps_since_restore": 80612, "episode_len_mean": 750.0}
{"time_this_iter_s": 44.168070554733276, "done": false, "date": "2019-05-09_17-53-54", "episode_reward_mean": 850.0085550761169, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f9e8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fa20>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fa58>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 89.06228566169739, "timestamp": 1557424434, "custom_metrics": {"cost2_max": -79.1281510605885, "outflow_rate_mean": 1104.3008046792158, "cost2_min": -118.07303982143145, "cost2_mean": -97.42333925527018, "system_level_velocity_max": 13.675826704696197, "system_level_velocity_min": 9.19437863384363, "cost1_min": 265.5869696748647, "cost1_mean": 352.61244989674003, "outflow_rate_max": 1236.1457286236152, "system_level_velocity_mean": 12.328331860208989, "cost1_max": 388.03487192581724, "outflow_rate_min": 900.5674786373743}, "timesteps_this_iter": 79406, "time_total_s": 13669.613294839859, "episodes_this_iter": 25, "info": {"update_time_ms": 370.75, "grad_time_ms": 18759.331, "sample_time_ms": 25138.207, "default": {"vf_explained_var": 0.9530283212661743, "cur_kl_coeff": 0.20000001788139343, "entropy": 1.926058292388916, "total_loss": 6.136141777038574, "cur_lr": 0.0005000000237487257, "policy_loss": -0.026915984228253365, "vf_loss": 6.156730651855469, "kl": 0.03163683041930199}, "load_time_ms": 68.952, "num_steps_trained": 25866610, "num_steps_sampled": 25866610}, "episode_reward_max": 972.4258098763547, "policy_reward_mean": {}, "training_iteration": 202, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 25866610, "episode_reward_min": 694.6658395303929, "pid": 14989, "iterations_since_restore": 2, "num_metric_batches_dropped": 0, "episodes_total": 12777, "timesteps_since_restore": 160018, "episode_len_mean": 750.4545454545455}
{"time_this_iter_s": 44.55984044075012, "done": false, "date": "2019-05-09_17-54-39", "episode_reward_mean": 855.9656906103047, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee294a8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee294e0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29518>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 133.6221261024475, "timestamp": 1557424479, "custom_metrics": {"cost2_max": -75.73992355196472, "outflow_rate_mean": 1112.7088213682966, "cost2_min": -118.07303982143145, "cost2_mean": -97.1774088548126, "system_level_velocity_max": 14.256737614063901, "system_level_velocity_min": 9.19437863384363, "cost1_min": 265.5869696748647, "cost1_mean": 354.17576105665523, "outflow_rate_max": 1333.6759820726538, "system_level_velocity_mean": 12.380378172932456, "cost1_max": 409.5795285051512, "outflow_rate_min": 900.5674786373743}, "timesteps_this_iter": 79520, "time_total_s": 13714.17313528061, "episodes_this_iter": 43, "info": {"update_time_ms": 249.809, "grad_time_ms": 18815.23, "sample_time_ms": 25230.793, "default": {"vf_explained_var": 0.9138588309288025, "cur_kl_coeff": 0.29999998211860657, "entropy": 1.8923312425613403, "total_loss": 9.735671997070312, "cur_lr": 0.0005000000237487257, "policy_loss": -0.023162469267845154, "vf_loss": 9.75180435180664, "kl": 0.023432500660419464}, "load_time_ms": 61.429, "num_steps_trained": 25946130, "num_steps_sampled": 25946130}, "episode_reward_max": 1001.0192125513951, "policy_reward_mean": {}, "training_iteration": 203, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 25946130, "episode_reward_min": 694.6658395303929, "pid": 14989, "iterations_since_restore": 3, "num_metric_batches_dropped": 0, "episodes_total": 12820, "timesteps_since_restore": 239538, "episode_len_mean": 750.6938775510204}
{"time_this_iter_s": 44.05386972427368, "done": false, "date": "2019-05-09_17-55-23", "episode_reward_mean": 860.7612425135122, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f8d0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f748>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f908>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 177.6759958267212, "timestamp": 1557424523, "custom_metrics": {"cost2_max": -71.00269605556574, "outflow_rate_mean": 1116.855461519496, "cost2_min": -121.81117182103635, "cost2_mean": -98.47317333614886, "system_level_velocity_max": 14.256737614063901, "system_level_velocity_min": 10.448136656774846, "cost1_min": 212.5357985293146, "cost1_mean": 354.1419666275036, "outflow_rate_max": 1333.6759820726538, "system_level_velocity_mean": 12.431056019441021, "cost1_max": 409.5795285051512, "outflow_rate_min": 690.1302195454764}, "timesteps_this_iter": 78485, "time_total_s": 13758.227005004883, "episodes_this_iter": 43, "info": {"update_time_ms": 189.456, "grad_time_ms": 18674.423, "sample_time_ms": 25326.217, "default": {"vf_explained_var": 0.879263699054718, "cur_kl_coeff": 0.4500000476837158, "entropy": 1.9362514019012451, "total_loss": 13.891679763793945, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021285241469740868, "vf_loss": 13.905176162719727, "kl": 0.017312735319137573}, "load_time_ms": 55.216, "num_steps_trained": 26024615, "num_steps_sampled": 26024615}, "episode_reward_max": 1001.0192125513951, "policy_reward_mean": {}, "training_iteration": 204, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26024615, "episode_reward_min": 440.0588285236124, "pid": 14989, "iterations_since_restore": 4, "num_metric_batches_dropped": 0, "episodes_total": 12863, "timesteps_since_restore": 318023, "episode_len_mean": 747.58}
{"time_this_iter_s": 45.57736659049988, "done": false, "date": "2019-05-09_17-56-09", "episode_reward_mean": 859.4423003658881, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29be0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29358>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29390>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 223.25336241722107, "timestamp": 1557424569, "custom_metrics": {"cost2_max": -71.00269605556574, "outflow_rate_mean": 1114.9091244064812, "cost2_min": -121.81117182103635, "cost2_mean": -99.10087439626697, "system_level_velocity_max": 14.256737614063901, "system_level_velocity_min": 9.126365906667525, "cost1_min": 212.5357985293146, "cost1_mean": 352.67683021709024, "outflow_rate_max": 1333.6759820726538, "system_level_velocity_mean": 12.385380246343006, "cost1_max": 409.5795285051512, "outflow_rate_min": 690.1302195454764}, "timesteps_this_iter": 78991, "time_total_s": 13803.804371595383, "episodes_this_iter": 42, "info": {"update_time_ms": 153.19, "grad_time_ms": 18853.884, "sample_time_ms": 25417.344, "default": {"vf_explained_var": 0.8689546585083008, "cur_kl_coeff": 0.4500000476837158, "entropy": 1.9514621496200562, "total_loss": 15.709430694580078, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020712517201900482, "vf_loss": 15.722538948059082, "kl": 0.016898786649107933}, "load_time_ms": 54.365, "num_steps_trained": 26103606, "num_steps_sampled": 26103606}, "episode_reward_max": 1001.0192125513951, "policy_reward_mean": {}, "training_iteration": 205, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26103606, "episode_reward_min": 440.0588285236124, "pid": 14989, "iterations_since_restore": 5, "num_metric_batches_dropped": 0, "episodes_total": 12905, "timesteps_since_restore": 397014, "episode_len_mean": 747.58}
{"time_this_iter_s": 45.31715178489685, "done": false, "date": "2019-05-09_17-56-54", "episode_reward_mean": 847.5340427010432, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fac8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ff9f27e2588>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fa58>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 268.5705142021179, "timestamp": 1557424614, "custom_metrics": {"cost2_max": -65.80948352152402, "outflow_rate_mean": 1098.9063731176573, "cost2_min": -116.3010842721088, "cost2_mean": -99.09781256062588, "system_level_velocity_max": 14.228884698437215, "system_level_velocity_min": 9.126365906667525, "cost1_min": 117.76621232999796, "cost1_mean": 348.3033039947617, "outflow_rate_max": 1299.5251742508449, "system_level_velocity_mean": 12.266902311952194, "cost1_max": 402.51419327369604, "outflow_rate_min": 434.67049499822815}, "timesteps_this_iter": 78792, "time_total_s": 13849.12152338028, "episodes_this_iter": 43, "info": {"update_time_ms": 128.973, "grad_time_ms": 18962.792, "sample_time_ms": 25450.646, "default": {"vf_explained_var": 0.8459855914115906, "cur_kl_coeff": 0.44999998807907104, "entropy": 1.9495679140090942, "total_loss": 17.53945541381836, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021128559485077858, "vf_loss": 17.552806854248047, "kl": 0.017282376065850258}, "load_time_ms": 50.554, "num_steps_trained": 26182398, "num_steps_sampled": 26182398}, "episode_reward_max": 993.4860119626879, "policy_reward_mean": {}, "training_iteration": 206, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26182398, "episode_reward_min": 228.33865480959426, "pid": 14989, "iterations_since_restore": 6, "num_metric_batches_dropped": 0, "episodes_total": 12948, "timesteps_since_restore": 475806, "episode_len_mean": 745.81}
{"time_this_iter_s": 42.995840549468994, "done": false, "date": "2019-05-09_17-57-37", "episode_reward_mean": 838.159544896006, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee294e0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee294a8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee290b8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 311.5663547515869, "timestamp": 1557424657, "custom_metrics": {"cost2_max": -62.38990824625323, "outflow_rate_mean": 1089.8584958138513, "cost2_min": -116.3010842721088, "cost2_mean": -97.32861161761177, "system_level_velocity_max": 14.228884698437215, "system_level_velocity_min": 9.126365906667525, "cost1_min": 116.89428850128989, "cost1_mean": 344.9980435844027, "outflow_rate_max": 1265.1594392431098, "system_level_velocity_mean": 12.294736350707662, "cost1_max": 399.72425535138035, "outflow_rate_min": 434.67049499822815}, "timesteps_this_iter": 78768, "time_total_s": 13892.117363929749, "episodes_this_iter": 45, "info": {"update_time_ms": 111.79, "grad_time_ms": 18765.917, "sample_time_ms": 25418.933, "default": {"vf_explained_var": 0.8261740803718567, "cur_kl_coeff": 0.44999998807907104, "entropy": 1.9166815280914307, "total_loss": 20.327219009399414, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02017180807888508, "vf_loss": 20.339326858520508, "kl": 0.017922356724739075}, "load_time_ms": 46.062, "num_steps_trained": 26261166, "num_steps_sampled": 26261166}, "episode_reward_max": 987.0491117420429, "policy_reward_mean": {}, "training_iteration": 207, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26261166, "episode_reward_min": 225.5957863093096, "pid": 14989, "iterations_since_restore": 7, "num_metric_batches_dropped": 0, "episodes_total": 12993, "timesteps_since_restore": 554574, "episode_len_mean": 738.14}
{"time_this_iter_s": 43.121432304382324, "done": false, "date": "2019-05-09_17-58-20", "episode_reward_mean": 841.991502397611, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fe80>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f780>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fa20>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 354.68778705596924, "timestamp": 1557424700, "custom_metrics": {"cost2_max": -62.38990824625323, "outflow_rate_mean": 1095.5393466915893, "cost2_min": -115.18599381588949, "cost2_mean": -98.29445690030133, "system_level_velocity_max": 14.089710961653859, "system_level_velocity_min": 10.079351384091586, "cost1_min": 116.89428850128989, "cost1_mean": 347.9623368710769, "outflow_rate_max": 1231.662797211919, "system_level_velocity_mean": 12.402013319209647, "cost1_max": 391.63322529345146, "outflow_rate_min": 434.67049499822815}, "timesteps_this_iter": 80143, "time_total_s": 13935.23879623413, "episodes_this_iter": 43, "info": {"update_time_ms": 98.82, "grad_time_ms": 18783.763, "sample_time_ms": 25232.774, "default": {"vf_explained_var": 0.8303566575050354, "cur_kl_coeff": 0.45000001788139343, "entropy": 1.9639215469360352, "total_loss": 20.56211280822754, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021595938131213188, "vf_loss": 20.575420379638672, "kl": 0.018416989594697952}, "load_time_ms": 56.51, "num_steps_trained": 26341309, "num_steps_sampled": 26341309}, "episode_reward_max": 970.7939373888302, "policy_reward_mean": {}, "training_iteration": 208, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26341309, "episode_reward_min": 225.5957863093096, "pid": 14989, "iterations_since_restore": 8, "num_metric_batches_dropped": 0, "episodes_total": 13036, "timesteps_since_restore": 634717, "episode_len_mean": 738.14}
{"time_this_iter_s": 44.3601438999176, "done": false, "date": "2019-05-09_17-59-05", "episode_reward_mean": 849.7012478624324, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29be0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee295c0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29390>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 399.04793095588684, "timestamp": 1557424745, "custom_metrics": {"cost2_max": -74.99183614657181, "outflow_rate_mean": 1105.3153090035892, "cost2_min": -115.18599381588949, "cost2_mean": -96.98280541235039, "system_level_velocity_max": 13.8120809418063, "system_level_velocity_min": 10.079351384091586, "cost1_min": 285.23805463246924, "cost1_mean": 351.8944931574403, "outflow_rate_max": 1231.662797211919, "system_level_velocity_mean": 12.303495001056179, "cost1_max": 391.63322529345146, "outflow_rate_min": 930.1528803647965}, "timesteps_this_iter": 78417, "time_total_s": 13979.598940134048, "episodes_this_iter": 42, "info": {"update_time_ms": 88.648, "grad_time_ms": 19009.485, "sample_time_ms": 25022.422, "default": {"vf_explained_var": 0.8331127166748047, "cur_kl_coeff": 0.4500000476837158, "entropy": 1.9611026048660278, "total_loss": 21.531068801879883, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02081296592950821, "vf_loss": 21.543292999267578, "kl": 0.019084161147475243}, "load_time_ms": 56.766, "num_steps_trained": 26419726, "num_steps_sampled": 26419726}, "episode_reward_max": 970.7939373888302, "policy_reward_mean": {}, "training_iteration": 209, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26419726, "episode_reward_min": 758.8755604094684, "pid": 14989, "iterations_since_restore": 9, "num_metric_batches_dropped": 0, "episodes_total": 13078, "timesteps_since_restore": 713134, "episode_len_mean": 751.0}
{"time_this_iter_s": 42.913142919540405, "done": false, "date": "2019-05-09_17-59-47", "episode_reward_mean": 836.9428156948701, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f7f0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f518>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f748>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 441.96107387542725, "timestamp": 1557424787, "custom_metrics": {"cost2_max": -49.75245713522531, "outflow_rate_mean": 1091.5586030272711, "cost2_min": -118.61415456635706, "cost2_mean": -95.09560530347439, "system_level_velocity_max": 14.109547377216451, "system_level_velocity_min": 10.388371830059004, "cost1_min": 50.70129871575853, "cost1_mean": 347.10609141116714, "outflow_rate_max": 1282.1238366445812, "system_level_velocity_mean": 12.220935758193198, "cost1_max": 399.4265232247616, "outflow_rate_min": 251.3931853867125}, "timesteps_this_iter": 79637, "time_total_s": 14022.512083053589, "episodes_this_iter": 44, "info": {"update_time_ms": 80.562, "grad_time_ms": 19102.607, "sample_time_ms": 24793.559, "default": {"vf_explained_var": 0.8132516741752625, "cur_kl_coeff": 0.4500000476837158, "entropy": 1.9533377885818481, "total_loss": 23.701370239257812, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0221212487667799, "vf_loss": 23.71514892578125, "kl": 0.018538588657975197}, "load_time_ms": 59.511, "num_steps_trained": 26499363, "num_steps_sampled": 26499363}, "episode_reward_max": 968.8188670737427, "policy_reward_mean": {}, "training_iteration": 210, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26499363, "episode_reward_min": 69.3577911254476, "pid": 14989, "iterations_since_restore": 10, "num_metric_batches_dropped": 0, "episodes_total": 13122, "timesteps_since_restore": 792771, "episode_len_mean": 744.77}
{"time_this_iter_s": 42.44040489196777, "done": false, "date": "2019-05-09_18-00-30", "episode_reward_mean": 832.6944403269763, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee290b8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29908>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29550>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 484.401478767395, "timestamp": 1557424830, "custom_metrics": {"cost2_max": -49.75245713522531, "outflow_rate_mean": 1086.3527092595436, "cost2_min": -118.61415456635706, "cost2_mean": -94.45832413855038, "system_level_velocity_max": 14.109547377216451, "system_level_velocity_min": 10.388371830059004, "cost1_min": 50.70129871575853, "cost1_mean": 346.4555942850301, "outflow_rate_max": 1282.1238366445812, "system_level_velocity_mean": 12.295573971366911, "cost1_max": 399.4265232247616, "outflow_rate_min": 251.3931853867125}, "timesteps_this_iter": 77910, "time_total_s": 14064.952487945557, "episodes_this_iter": 44, "info": {"update_time_ms": 8.204, "grad_time_ms": 19192.955, "sample_time_ms": 24540.599, "default": {"vf_explained_var": 0.7933618426322937, "cur_kl_coeff": 0.45000001788139343, "entropy": 1.9632905721664429, "total_loss": 25.521438598632812, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02136637642979622, "vf_loss": 25.534305572509766, "kl": 0.01889117993414402}, "load_time_ms": 57.393, "num_steps_trained": 26577273, "num_steps_sampled": 26577273}, "episode_reward_max": 968.8188670737427, "policy_reward_mean": {}, "training_iteration": 211, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26577273, "episode_reward_min": 69.3577911254476, "pid": 14989, "iterations_since_restore": 11, "num_metric_batches_dropped": 0, "episodes_total": 13166, "timesteps_since_restore": 870681, "episode_len_mean": 739.64}
{"time_this_iter_s": 43.55761480331421, "done": false, "date": "2019-05-09_18-01-14", "episode_reward_mean": 831.4628760484828, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f780>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fac8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f9b0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 527.9590935707092, "timestamp": 1557424874, "custom_metrics": {"cost2_max": -49.75245713522531, "outflow_rate_mean": 1087.3024818116, "cost2_min": -118.61415456635706, "cost2_mean": -93.9752270094148, "system_level_velocity_max": 14.229750938261697, "system_level_velocity_min": 10.26964648172862, "cost1_min": 50.70129871575853, "cost1_mean": 346.53006908870987, "outflow_rate_max": 1263.5556108066353, "system_level_velocity_mean": 12.308490697052878, "cost1_max": 401.44366339879895, "outflow_rate_min": 251.3931853867125}, "timesteps_this_iter": 78886, "time_total_s": 14108.51010274887, "episodes_this_iter": 43, "info": {"update_time_ms": 8.101, "grad_time_ms": 19372.422, "sample_time_ms": 24303.832, "default": {"vf_explained_var": 0.8000702261924744, "cur_kl_coeff": 0.45000001788139343, "entropy": 1.9786580801010132, "total_loss": 24.742406845092773, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02093571424484253, "vf_loss": 24.754499435424805, "kl": 0.019653525203466415}, "load_time_ms": 56.043, "num_steps_trained": 26656159, "num_steps_sampled": 26656159}, "episode_reward_max": 1007.306640647918, "policy_reward_mean": {}, "training_iteration": 212, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26656159, "episode_reward_min": 69.3577911254476, "pid": 14989, "iterations_since_restore": 12, "num_metric_batches_dropped": 0, "episodes_total": 13209, "timesteps_since_restore": 949567, "episode_len_mean": 739.64}
{"time_this_iter_s": 43.61045217514038, "done": false, "date": "2019-05-09_18-01-57", "episode_reward_mean": 841.795964800871, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29470>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee295c0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29b38>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 571.5695457458496, "timestamp": 1557424917, "custom_metrics": {"cost2_max": -69.53905505241514, "outflow_rate_mean": 1097.4960481603628, "cost2_min": -113.68249542480879, "cost2_mean": -93.22469402804929, "system_level_velocity_max": 14.229750938261697, "system_level_velocity_min": 9.954234283575243, "cost1_min": 281.0563949711503, "cost1_mean": 349.87508766122767, "outflow_rate_max": 1263.5556108066353, "system_level_velocity_mean": 12.251945894120157, "cost1_max": 401.44366339879895, "outflow_rate_min": 899.4611882529164}, "timesteps_this_iter": 78404, "time_total_s": 14152.120554924011, "episodes_this_iter": 43, "info": {"update_time_ms": 8.071, "grad_time_ms": 19546.135, "sample_time_ms": 24039.172, "default": {"vf_explained_var": 0.8028483390808105, "cur_kl_coeff": 0.4500000476837158, "entropy": 1.9652440547943115, "total_loss": 25.453413009643555, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02169528417289257, "vf_loss": 25.466129302978516, "kl": 0.019952289760112762}, "load_time_ms": 53.41, "num_steps_trained": 26734563, "num_steps_sampled": 26734563}, "episode_reward_max": 1008.6400403302804, "policy_reward_mean": {}, "training_iteration": 213, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26734563, "episode_reward_min": 717.0333376791009, "pid": 14989, "iterations_since_restore": 13, "num_metric_batches_dropped": 0, "episodes_total": 13252, "timesteps_since_restore": 1027971, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.04353618621826, "done": false, "date": "2019-05-09_18-02-41", "episode_reward_mean": 849.0209335872698, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f7b8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0ff60>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f9e8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 615.6130819320679, "timestamp": 1557424961, "custom_metrics": {"cost2_max": -68.35612855944628, "outflow_rate_mean": 1100.4075003891512, "cost2_min": -113.68249542480879, "cost2_mean": -92.449532078318, "system_level_velocity_max": 14.370302099718366, "system_level_velocity_min": 9.954234283575243, "cost1_min": 281.0563949711503, "cost1_mean": 350.81565234107387, "outflow_rate_max": 1279.0495876074178, "system_level_velocity_mean": 12.294328304654806, "cost1_max": 408.8611390620977, "outflow_rate_min": 899.4611882529164}, "timesteps_this_iter": 77903, "time_total_s": 14196.16409111023, "episodes_this_iter": 43, "info": {"update_time_ms": 8.294, "grad_time_ms": 19765.652, "sample_time_ms": 23817.021, "default": {"vf_explained_var": 0.7658340930938721, "cur_kl_coeff": 0.45000001788139343, "entropy": 1.9510513544082642, "total_loss": 27.082763671875, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02222820557653904, "vf_loss": 27.096582412719727, "kl": 0.01868915557861328}, "load_time_ms": 54.19, "num_steps_trained": 26812466, "num_steps_sampled": 26812466}, "episode_reward_max": 1008.6400403302804, "policy_reward_mean": {}, "training_iteration": 214, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26812466, "episode_reward_min": 717.0333376791009, "pid": 14989, "iterations_since_restore": 14, "num_metric_batches_dropped": 0, "episodes_total": 13295, "timesteps_since_restore": 1105874, "episode_len_mean": 751.0}
{"time_this_iter_s": 45.25264835357666, "done": false, "date": "2019-05-09_18-03-27", "episode_reward_mean": 848.0320125482864, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29358>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29588>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee293c8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 660.8657302856445, "timestamp": 1557425007, "custom_metrics": {"cost2_max": -55.53795439683407, "outflow_rate_mean": 1100.539200089494, "cost2_min": -113.84211949862669, "cost2_mean": -93.89645362289784, "system_level_velocity_max": 14.370302099718366, "system_level_velocity_min": 10.052275344384935, "cost1_min": 110.3823647902957, "cost1_mean": 349.4134162209336, "outflow_rate_max": 1279.0495876074178, "system_level_velocity_mean": 12.411046618358956, "cost1_max": 408.8611390620977, "outflow_rate_min": 423.9768394385097}, "timesteps_this_iter": 78108, "time_total_s": 14241.416739463806, "episodes_this_iter": 45, "info": {"update_time_ms": 8.681, "grad_time_ms": 19824.855, "sample_time_ms": 23724.106, "default": {"vf_explained_var": 0.7732340097427368, "cur_kl_coeff": 0.44999998807907104, "entropy": 1.9607025384902954, "total_loss": 27.967805862426758, "cur_lr": 0.0005000000237487257, "policy_loss": -0.023206831887364388, "vf_loss": 27.98232650756836, "kl": 0.01929965801537037}, "load_time_ms": 56.599, "num_steps_trained": 26890574, "num_steps_sampled": 26890574}, "episode_reward_max": 981.1796417955175, "policy_reward_mean": {}, "training_iteration": 215, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26890574, "episode_reward_min": 214.00597691872133, "pid": 14989, "iterations_since_restore": 15, "num_metric_batches_dropped": 0, "episodes_total": 13340, "timesteps_since_restore": 1183982, "episode_len_mean": 741.47}
{"time_this_iter_s": 45.74885535240173, "done": false, "date": "2019-05-09_18-04-12", "episode_reward_mean": 853.31115133692, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee292e8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29518>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee294a8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 706.6145856380463, "timestamp": 1557425052, "custom_metrics": {"cost2_max": -55.53795439683407, "outflow_rate_mean": 1110.245529257657, "cost2_min": -114.19099084480874, "cost2_mean": -95.2816585973107, "system_level_velocity_max": 14.370302099718366, "system_level_velocity_min": 10.052275344384935, "cost1_min": 110.3823647902957, "cost1_mean": 352.59327505614675, "outflow_rate_max": 1279.0495876074178, "system_level_velocity_mean": 12.511249883488444, "cost1_max": 408.8611390620977, "outflow_rate_min": 423.9768394385097}, "timesteps_this_iter": 77586, "time_total_s": 14287.165594816208, "episodes_this_iter": 43, "info": {"update_time_ms": 9.048, "grad_time_ms": 19851.346, "sample_time_ms": 23739.669, "default": {"vf_explained_var": 0.8025158643722534, "cur_kl_coeff": 0.45000001788139343, "entropy": 1.9954571723937988, "total_loss": 25.788902282714844, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022266944870352745, "vf_loss": 25.80242919921875, "kl": 0.01941498927772045}, "load_time_ms": 57.572, "num_steps_trained": 26968160, "num_steps_sampled": 26968160}, "episode_reward_max": 981.1796417955175, "policy_reward_mean": {}, "training_iteration": 216, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 26968160, "episode_reward_min": 214.00597691872133, "pid": 14989, "iterations_since_restore": 16, "num_metric_batches_dropped": 0, "episodes_total": 13383, "timesteps_since_restore": 1261568, "episode_len_mean": 741.47}
{"time_this_iter_s": 43.90713667869568, "done": false, "date": "2019-05-09_18-04-56", "episode_reward_mean": 832.5868022668719, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29d30>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29f60>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee292b0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 750.521722316742, "timestamp": 1557425096, "custom_metrics": {"cost2_max": -42.9933650446533, "outflow_rate_mean": 1086.7360881787195, "cost2_min": -114.19099084480874, "cost2_mean": -91.47005669695187, "system_level_velocity_max": 14.179152892662394, "system_level_velocity_min": 9.93404640378139, "cost1_min": 49.75421079862046, "cost1_mean": 345.1951835636114, "outflow_rate_max": 1270.3970788518413, "system_level_velocity_mean": 12.331645491713575, "cost1_max": 391.5317138632528, "outflow_rate_min": 253.32967474409116}, "timesteps_this_iter": 76967, "time_total_s": 14331.072731494904, "episodes_this_iter": 44, "info": {"update_time_ms": 9.099, "grad_time_ms": 19892.623, "sample_time_ms": 23791.092, "default": {"vf_explained_var": 0.7772238254547119, "cur_kl_coeff": 0.45000001788139343, "entropy": 1.9928994178771973, "total_loss": 27.430051803588867, "cur_lr": 0.0005000000237487257, "policy_loss": -0.023178281262516975, "vf_loss": 27.444087982177734, "kl": 0.020318936556577682}, "load_time_ms": 57.39, "num_steps_trained": 27045127, "num_steps_sampled": 27045127}, "episode_reward_max": 981.1796417955175, "policy_reward_mean": {}, "training_iteration": 217, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27045127, "episode_reward_min": 68.9092261214637, "pid": 14989, "iterations_since_restore": 17, "num_metric_batches_dropped": 0, "episodes_total": 13427, "timesteps_since_restore": 1338535, "episode_len_mean": 736.89}
{"time_this_iter_s": 44.11566495895386, "done": false, "date": "2019-05-09_18-05-41", "episode_reward_mean": 829.575815524067, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29d68>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29400>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29198>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 794.6373872756958, "timestamp": 1557425141, "custom_metrics": {"cost2_max": -42.9933650446533, "outflow_rate_mean": 1085.2590013394044, "cost2_min": -113.2642092796957, "cost2_mean": -89.76628452820896, "system_level_velocity_max": 13.966579011259489, "system_level_velocity_min": 9.93404640378139, "cost1_min": 49.75421079862046, "cost1_mean": 344.64444309802144, "outflow_rate_max": 1282.2186285165815, "system_level_velocity_mean": 12.196916235765825, "cost1_max": 398.7111383030411, "outflow_rate_min": 253.32967474409116}, "timesteps_this_iter": 78063, "time_total_s": 14375.188396453857, "episodes_this_iter": 43, "info": {"update_time_ms": 9.041, "grad_time_ms": 19815.518, "sample_time_ms": 23972.781, "default": {"vf_explained_var": 0.818519115447998, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.0124359130859375, "total_loss": 25.654375076293945, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021067973226308823, "vf_loss": 25.665279388427734, "kl": 0.015059983357787132}, "load_time_ms": 52.312, "num_steps_trained": 27123190, "num_steps_sampled": 27123190}, "episode_reward_max": 977.9492728453247, "policy_reward_mean": {}, "training_iteration": 218, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27123190, "episode_reward_min": 68.9092261214637, "pid": 14989, "iterations_since_restore": 18, "num_metric_batches_dropped": 0, "episodes_total": 13470, "timesteps_since_restore": 1416598, "episode_len_mean": 744.77}
{"time_this_iter_s": 41.92611074447632, "done": false, "date": "2019-05-09_18-06-23", "episode_reward_mean": 830.5952301018261, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29630>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29f28>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fe80>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 836.5634980201721, "timestamp": 1557425183, "custom_metrics": {"cost2_max": -42.9933650446533, "outflow_rate_mean": 1085.5749199807806, "cost2_min": -115.32969608273797, "cost2_mean": -91.87248065855673, "system_level_velocity_max": 13.966579011259489, "system_level_velocity_min": 10.32420646173062, "cost1_min": 49.75421079862046, "cost1_mean": 346.47348594278316, "outflow_rate_max": 1282.2186285165815, "system_level_velocity_mean": 12.261936101888109, "cost1_max": 398.7111383030411, "outflow_rate_min": 253.32967474409116}, "timesteps_this_iter": 77340, "time_total_s": 14417.114507198334, "episodes_this_iter": 43, "info": {"update_time_ms": 9.264, "grad_time_ms": 19544.896, "sample_time_ms": 24002.533, "default": {"vf_explained_var": 0.8065455555915833, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0003974437713623, "total_loss": 26.452970504760742, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020585786551237106, "vf_loss": 26.46331024169922, "kl": 0.015175173990428448}, "load_time_ms": 49.488, "num_steps_trained": 27200530, "num_steps_sampled": 27200530}, "episode_reward_max": 977.9492728453247, "policy_reward_mean": {}, "training_iteration": 219, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27200530, "episode_reward_min": 68.9092261214637, "pid": 14989, "iterations_since_restore": 19, "num_metric_batches_dropped": 0, "episodes_total": 13513, "timesteps_since_restore": 1493938, "episode_len_mean": 744.77}
{"time_this_iter_s": 43.12670063972473, "done": false, "date": "2019-05-09_18-07-06", "episode_reward_mean": 826.4533734720754, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee295c0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29048>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fcf8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 879.6901986598969, "timestamp": 1557425226, "custom_metrics": {"cost2_max": -62.96547142510815, "outflow_rate_mean": 1089.0281230614921, "cost2_min": -115.32969608273797, "cost2_mean": -94.1819458667556, "system_level_velocity_max": 14.16945503922936, "system_level_velocity_min": 10.32420646173062, "cost1_min": 117.97965924609579, "cost1_mean": 347.4246250977191, "outflow_rate_max": 1282.2186285165815, "system_level_velocity_mean": 12.400468675361498, "cost1_max": 398.7111383030411, "outflow_rate_min": 436.23119293816626}, "timesteps_this_iter": 77247, "time_total_s": 14460.241207838058, "episodes_this_iter": 46, "info": {"update_time_ms": 9.198, "grad_time_ms": 19584.293, "sample_time_ms": 23985.108, "default": {"vf_explained_var": 0.797977864742279, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0088400840759277, "total_loss": 29.584266662597656, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0214582197368145, "vf_loss": 29.595239639282227, "kl": 0.01553281582891941}, "load_time_ms": 48.935, "num_steps_trained": 27277777, "num_steps_sampled": 27277777}, "episode_reward_max": 977.9492728453247, "policy_reward_mean": {}, "training_iteration": 220, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27277777, "episode_reward_min": 225.92092921059984, "pid": 14989, "iterations_since_restore": 20, "num_metric_batches_dropped": 0, "episodes_total": 13559, "timesteps_since_restore": 1571185, "episode_len_mean": 739.93}
{"time_this_iter_s": 42.487282276153564, "done": false, "date": "2019-05-09_18-07-48", "episode_reward_mean": 827.3686685252168, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29630>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29710>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29b38>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 922.1774809360504, "timestamp": 1557425268, "custom_metrics": {"cost2_max": -62.96547142510815, "outflow_rate_mean": 1094.0850853829688, "cost2_min": -127.16011665096816, "cost2_mean": -94.7946281085585, "system_level_velocity_max": 14.325439342019786, "system_level_velocity_min": 9.986080347909786, "cost1_min": 117.97965924609579, "cost1_mean": 347.25436364766676, "outflow_rate_max": 1323.2099857129474, "system_level_velocity_mean": 12.391049900058613, "cost1_max": 407.62137882786044, "outflow_rate_min": 436.23119293816626}, "timesteps_this_iter": 77053, "time_total_s": 14502.728490114212, "episodes_this_iter": 43, "info": {"update_time_ms": 9.367, "grad_time_ms": 19594.44, "sample_time_ms": 23982.12, "default": {"vf_explained_var": 0.7828783392906189, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.013917922973633, "total_loss": 29.241249084472656, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020865680649876595, "vf_loss": 29.2520694732666, "kl": 0.014883210882544518}, "load_time_ms": 45.588, "num_steps_trained": 27354830, "num_steps_sampled": 27354830}, "episode_reward_max": 1031.1376357513368, "policy_reward_mean": {}, "training_iteration": 221, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27354830, "episode_reward_min": 225.92092921059984, "pid": 14989, "iterations_since_restore": 21, "num_metric_batches_dropped": 0, "episodes_total": 13602, "timesteps_since_restore": 1648238, "episode_len_mean": 739.93}
{"time_this_iter_s": 43.89131808280945, "done": false, "date": "2019-05-09_18-08-32", "episode_reward_mean": 842.9930391988656, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fb38>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f780>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f7b8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 966.0687990188599, "timestamp": 1557425312, "custom_metrics": {"cost2_max": -64.46581914896167, "outflow_rate_mean": 1112.8385134057423, "cost2_min": -127.16011665096816, "cost2_mean": -95.64103743464513, "system_level_velocity_max": 14.325439342019786, "system_level_velocity_min": 9.986080347909786, "cost1_min": 279.93748236524596, "cost1_mean": 354.1358380011381, "outflow_rate_max": 1323.2099857129474, "system_level_velocity_mean": 12.425532703442505, "cost1_max": 407.62137882786044, "outflow_rate_min": 904.1385395124582}, "timesteps_this_iter": 77156, "time_total_s": 14546.619808197021, "episodes_this_iter": 43, "info": {"update_time_ms": 9.768, "grad_time_ms": 19550.899, "sample_time_ms": 24050.057, "default": {"vf_explained_var": 0.7787640690803528, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0174264907836914, "total_loss": 29.96514892578125, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021214988082647324, "vf_loss": 29.97614097595215, "kl": 0.015147887170314789}, "load_time_ms": 46.534, "num_steps_trained": 27431986, "num_steps_sampled": 27431986}, "episode_reward_max": 1031.1376357513368, "policy_reward_mean": {}, "training_iteration": 222, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27431986, "episode_reward_min": 696.6954164521314, "pid": 14989, "iterations_since_restore": 22, "num_metric_batches_dropped": 0, "episodes_total": 13645, "timesteps_since_restore": 1725394, "episode_len_mean": 751.0}
{"time_this_iter_s": 45.21757364273071, "done": false, "date": "2019-05-09_18-09-17", "episode_reward_mean": 834.4643597764307, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29390>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29358>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29588>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1011.2863726615906, "timestamp": 1557425357, "custom_metrics": {"cost2_max": -64.46581914896167, "outflow_rate_mean": 1105.4620624394151, "cost2_min": -115.25349558469416, "cost2_mean": -95.24395478895006, "system_level_velocity_max": 14.325439342019786, "system_level_velocity_min": 10.245062382700143, "cost1_min": 279.93748236524596, "cost1_mean": 352.9901453421972, "outflow_rate_max": 1300.8263301291483, "system_level_velocity_mean": 12.398051844082287, "cost1_max": 405.73778788712593, "outflow_rate_min": 904.1385395124582}, "timesteps_this_iter": 77872, "time_total_s": 14591.837381839752, "episodes_this_iter": 43, "info": {"update_time_ms": 10.102, "grad_time_ms": 19562.409, "sample_time_ms": 24188.418, "default": {"vf_explained_var": 0.8098191618919373, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.048020124435425, "total_loss": 26.390113830566406, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022119054570794106, "vf_loss": 26.40178871154785, "kl": 0.0154721075668931}, "load_time_ms": 57.391, "num_steps_trained": 27509858, "num_steps_sampled": 27509858}, "episode_reward_max": 954.5306291812385, "policy_reward_mean": {}, "training_iteration": 223, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27509858, "episode_reward_min": 696.6954164521314, "pid": 14989, "iterations_since_restore": 23, "num_metric_batches_dropped": 0, "episodes_total": 13688, "timesteps_since_restore": 1803266, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.35466027259827, "done": false, "date": "2019-05-09_18-10-02", "episode_reward_mean": 834.2326642401786, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee74400>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f7b8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f780>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1055.6410329341888, "timestamp": 1557425402, "custom_metrics": {"cost2_max": -64.46581914896167, "outflow_rate_mean": 1105.2826735545932, "cost2_min": -113.29754225615122, "cost2_mean": -94.49173726560021, "system_level_velocity_max": 13.986049416661519, "system_level_velocity_min": 10.245062382700143, "cost1_min": 279.93748236524596, "cost1_mean": 352.7307899314117, "outflow_rate_max": 1267.5906920114712, "system_level_velocity_mean": 12.398885795394717, "cost1_max": 399.00915270253796, "outflow_rate_min": 904.1385395124582}, "timesteps_this_iter": 77326, "time_total_s": 14636.19204211235, "episodes_this_iter": 44, "info": {"update_time_ms": 10.167, "grad_time_ms": 19424.615, "sample_time_ms": 24359.752, "default": {"vf_explained_var": 0.7859004139900208, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.029340982437134, "total_loss": 30.226682662963867, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021728288382291794, "vf_loss": 30.2382755279541, "kl": 0.015007085166871548}, "load_time_ms": 56.222, "num_steps_trained": 27587184, "num_steps_sampled": 27587184}, "episode_reward_max": 1007.0870403022689, "policy_reward_mean": {}, "training_iteration": 224, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27587184, "episode_reward_min": 696.6954164521314, "pid": 14989, "iterations_since_restore": 24, "num_metric_batches_dropped": 0, "episodes_total": 13732, "timesteps_since_restore": 1880592, "episode_len_mean": 750.25}
{"time_this_iter_s": 44.42065978050232, "done": false, "date": "2019-05-09_18-10-46", "episode_reward_mean": 835.985488673379, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29b38>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29fd0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee292b0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1100.0616927146912, "timestamp": 1557425446, "custom_metrics": {"cost2_max": -63.50765654248515, "outflow_rate_mean": 1103.5733424889145, "cost2_min": -112.18413174732063, "cost2_mean": -94.64343786346295, "system_level_velocity_max": 14.321391244437415, "system_level_velocity_min": 10.801770207073636, "cost1_min": 298.72465154024, "cost1_mean": 352.9492777829645, "outflow_rate_max": 1300.8024163558869, "system_level_velocity_mean": 12.44057586338825, "cost1_max": 399.1914693854638, "outflow_rate_min": 936.6565302622821}, "timesteps_this_iter": 77094, "time_total_s": 14680.612701892853, "episodes_this_iter": 43, "info": {"update_time_ms": 9.726, "grad_time_ms": 19250.446, "sample_time_ms": 24455.633, "default": {"vf_explained_var": 0.7876101732254028, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0339386463165283, "total_loss": 29.62917137145996, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021748140454292297, "vf_loss": 29.640695571899414, "kl": 0.015153118409216404}, "load_time_ms": 51.946, "num_steps_trained": 27664278, "num_steps_sampled": 27664278}, "episode_reward_max": 1007.0870403022689, "policy_reward_mean": {}, "training_iteration": 225, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27664278, "episode_reward_min": 675.4190310900876, "pid": 14989, "iterations_since_restore": 25, "num_metric_batches_dropped": 0, "episodes_total": 13775, "timesteps_since_restore": 1957686, "episode_len_mean": 748.63}
{"time_this_iter_s": 42.034825801849365, "done": false, "date": "2019-05-09_18-11-28", "episode_reward_mean": 829.9251432810696, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee297b8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29c18>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34c88>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1142.0965185165405, "timestamp": 1557425488, "custom_metrics": {"cost2_max": -63.50765654248515, "outflow_rate_mean": 1099.5443126311432, "cost2_min": -112.18413174732063, "cost2_mean": -93.04865035208384, "system_level_velocity_max": 14.321391244437415, "system_level_velocity_min": 10.801770207073636, "cost1_min": 298.72465154024, "cost1_mean": 352.65812515704334, "outflow_rate_max": 1300.8024163558869, "system_level_velocity_mean": 12.436275421516216, "cost1_max": 399.1914693854638, "outflow_rate_min": 936.6565302622821}, "timesteps_this_iter": 77205, "time_total_s": 14722.647527694702, "episodes_this_iter": 44, "info": {"update_time_ms": 9.346, "grad_time_ms": 18924.399, "sample_time_ms": 24406.224, "default": {"vf_explained_var": 0.7821162939071655, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.023561716079712, "total_loss": 29.17218017578125, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022306879982352257, "vf_loss": 29.18385887145996, "kl": 0.01574351079761982}, "load_time_ms": 57.823, "num_steps_trained": 27741483, "num_steps_sampled": 27741483}, "episode_reward_max": 983.0133542481208, "policy_reward_mean": {}, "training_iteration": 226, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27741483, "episode_reward_min": 675.4190310900876, "pid": 14989, "iterations_since_restore": 26, "num_metric_batches_dropped": 0, "episodes_total": 13819, "timesteps_since_restore": 2034891, "episode_len_mean": 749.38}
{"time_this_iter_s": 42.27394199371338, "done": false, "date": "2019-05-09_18-12-11", "episode_reward_mean": 823.6970388747163, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fa90>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f5c0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fb00>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1184.370460510254, "timestamp": 1557425531, "custom_metrics": {"cost2_max": -60.60209433982009, "outflow_rate_mean": 1090.1802234703805, "cost2_min": -111.1489041909827, "cost2_mean": -90.64673350320754, "system_level_velocity_max": 14.259649846271955, "system_level_velocity_min": 10.13108771453439, "cost1_min": 281.89345963002245, "cost1_mean": 350.4260954501106, "outflow_rate_max": 1213.0158149838016, "system_level_velocity_mean": 12.344395928697379, "cost1_max": 398.31886060793784, "outflow_rate_min": 918.1823007518797}, "timesteps_this_iter": 77146, "time_total_s": 14764.921469688416, "episodes_this_iter": 43, "info": {"update_time_ms": 9.16, "grad_time_ms": 18922.98, "sample_time_ms": 24237.697, "default": {"vf_explained_var": 0.8153426647186279, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0566279888153076, "total_loss": 27.11591148376465, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02305486798286438, "vf_loss": 27.12822723388672, "kl": 0.015908829867839813}, "load_time_ms": 61.964, "num_steps_trained": 27818629, "num_steps_sampled": 27818629}, "episode_reward_max": 942.7854879768705, "policy_reward_mean": {}, "training_iteration": 227, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27818629, "episode_reward_min": 715.1609142177282, "pid": 14989, "iterations_since_restore": 27, "num_metric_batches_dropped": 0, "episodes_total": 13862, "timesteps_since_restore": 2112037, "episode_len_mean": 751.0}
{"time_this_iter_s": 41.549290895462036, "done": false, "date": "2019-05-09_18-12-52", "episode_reward_mean": 817.3836069228606, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee340f0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34f28>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34b38>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1225.919751405716, "timestamp": 1557425572, "custom_metrics": {"cost2_max": -60.60209433982009, "outflow_rate_mean": 1084.5631582931649, "cost2_min": -111.1489041909827, "cost2_mean": -90.14569158673457, "system_level_velocity_max": 14.12295458725297, "system_level_velocity_min": 9.92379533434812, "cost1_min": 279.79466918324937, "cost1_mean": 349.1395300168167, "outflow_rate_max": 1245.0401986698234, "system_level_velocity_mean": 12.291669544381877, "cost1_max": 398.0215184638079, "outflow_rate_min": 907.6123680020007}, "timesteps_this_iter": 77261, "time_total_s": 14806.470760583878, "episodes_this_iter": 43, "info": {"update_time_ms": 9.179, "grad_time_ms": 19027.161, "sample_time_ms": 23873.494, "default": {"vf_explained_var": 0.8097109198570251, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0625946521759033, "total_loss": 28.390913009643555, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021352659910917282, "vf_loss": 28.401517868041992, "kl": 0.01592322625219822}, "load_time_ms": 65.373, "num_steps_trained": 27895890, "num_steps_sampled": 27895890}, "episode_reward_max": 947.4512252915057, "policy_reward_mean": {}, "training_iteration": 228, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27895890, "episode_reward_min": 687.8375051266455, "pid": 14989, "iterations_since_restore": 28, "num_metric_batches_dropped": 0, "episodes_total": 13905, "timesteps_since_restore": 2189298, "episode_len_mean": 751.0}
{"time_this_iter_s": 41.33616757392883, "done": false, "date": "2019-05-09_18-13-34", "episode_reward_mean": 816.8121215331356, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f9b0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fb70>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee346d8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1267.2559189796448, "timestamp": 1557425614, "custom_metrics": {"cost2_max": -60.60209433982009, "outflow_rate_mean": 1081.889234226688, "cost2_min": -107.43249187805333, "cost2_mean": -89.84953276668058, "system_level_velocity_max": 14.12295458725297, "system_level_velocity_min": 9.92379533434812, "cost1_min": 279.79466918324937, "cost1_mean": 349.47214962004597, "outflow_rate_max": 1245.0401986698234, "system_level_velocity_mean": 12.309383118110894, "cost1_max": 398.0215184638079, "outflow_rate_min": 907.6123680020007}, "timesteps_this_iter": 75844, "time_total_s": 14847.806928157806, "episodes_this_iter": 43, "info": {"update_time_ms": 8.97, "grad_time_ms": 19153.066, "sample_time_ms": 23687.009, "default": {"vf_explained_var": 0.7819905877113342, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0264999866485596, "total_loss": 29.995994567871094, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02236458659172058, "vf_loss": 30.007631301879883, "kl": 0.0158927533775568}, "load_time_ms": 67.749, "num_steps_trained": 27971734, "num_steps_sampled": 27971734}, "episode_reward_max": 947.4512252915057, "policy_reward_mean": {}, "training_iteration": 229, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 27971734, "episode_reward_min": 687.8375051266455, "pid": 14989, "iterations_since_restore": 29, "num_metric_batches_dropped": 0, "episodes_total": 13948, "timesteps_since_restore": 2265142, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.241501331329346, "done": false, "date": "2019-05-09_18-14-18", "episode_reward_mean": 822.1930858138273, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34208>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34198>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34b00>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1311.4974203109741, "timestamp": 1557425658, "custom_metrics": {"cost2_max": -64.52514207303872, "outflow_rate_mean": 1093.0084064264986, "cost2_min": -130.95850658332606, "cost2_mean": -90.82768323361175, "system_level_velocity_max": 14.12295458725297, "system_level_velocity_min": 10.820612503849544, "cost1_min": 309.1094344699154, "cost1_mean": 352.766197071529, "outflow_rate_max": 1244.425986248595, "system_level_velocity_mean": 12.424164945899738, "cost1_max": 398.12864589744066, "outflow_rate_min": 923.856209895632}, "timesteps_this_iter": 77448, "time_total_s": 14892.048429489136, "episodes_this_iter": 44, "info": {"update_time_ms": 9.073, "grad_time_ms": 19293.382, "sample_time_ms": 23654.392, "default": {"vf_explained_var": 0.791372537612915, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0538954734802246, "total_loss": 27.181760787963867, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02098802663385868, "vf_loss": 27.191993713378906, "kl": 0.015935001894831657}, "load_time_ms": 68.145, "num_steps_trained": 28049182, "num_steps_sampled": 28049182}, "episode_reward_max": 946.6049714712435, "policy_reward_mean": {}, "training_iteration": 230, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28049182, "episode_reward_min": 716.870225983165, "pid": 14989, "iterations_since_restore": 30, "num_metric_batches_dropped": 0, "episodes_total": 13992, "timesteps_since_restore": 2342590, "episode_len_mean": 751.0}
{"time_this_iter_s": 43.104554891586304, "done": false, "date": "2019-05-09_18-15-01", "episode_reward_mean": 816.85327642617, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34588>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34b70>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34518>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1354.6019752025604, "timestamp": 1557425701, "custom_metrics": {"cost2_max": -61.73164746844585, "outflow_rate_mean": 1083.7464457579888, "cost2_min": -130.95850658332606, "cost2_mean": -89.79638095042718, "system_level_velocity_max": 14.118283152621558, "system_level_velocity_min": 9.838235398137133, "cost1_min": 275.4099123050572, "cost1_mean": 349.8199805239599, "outflow_rate_max": 1294.0162133588917, "system_level_velocity_mean": 12.318854762111295, "cost1_max": 400.2456963255411, "outflow_rate_min": 866.5888124542124}, "timesteps_this_iter": 76657, "time_total_s": 14935.152984380722, "episodes_this_iter": 43, "info": {"update_time_ms": 9.03, "grad_time_ms": 19264.789, "sample_time_ms": 23743.838, "default": {"vf_explained_var": 0.8144237995147705, "cur_kl_coeff": 0.675000011920929, "entropy": 2.0772202014923096, "total_loss": 26.90418815612793, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02171017974615097, "vf_loss": 26.9148006439209, "kl": 0.01643877476453781}, "load_time_ms": 69.56, "num_steps_trained": 28125839, "num_steps_sampled": 28125839}, "episode_reward_max": 946.6049714712435, "policy_reward_mean": {}, "training_iteration": 231, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28125839, "episode_reward_min": 711.1383738495655, "pid": 14989, "iterations_since_restore": 31, "num_metric_batches_dropped": 0, "episodes_total": 14035, "timesteps_since_restore": 2419247, "episode_len_mean": 751.0}
{"time_this_iter_s": 43.21575856208801, "done": false, "date": "2019-05-09_18-15-44", "episode_reward_mean": 811.7993075928991, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34c88>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee349e8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee340b8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1397.8177337646484, "timestamp": 1557425744, "custom_metrics": {"cost2_max": -61.73164746844585, "outflow_rate_mean": 1078.03531775573, "cost2_min": -120.28405181035745, "cost2_mean": -90.06306355823617, "system_level_velocity_max": 14.094260403825357, "system_level_velocity_min": 9.52014042511494, "cost1_min": 274.04903536951963, "cost1_mean": 347.898317618987, "outflow_rate_max": 1294.0162133588917, "system_level_velocity_mean": 12.24599021446253, "cost1_max": 400.2456963255411, "outflow_rate_min": 866.5888124542124}, "timesteps_this_iter": 75865, "time_total_s": 14978.36874294281, "episodes_this_iter": 43, "info": {"update_time_ms": 8.756, "grad_time_ms": 19020.371, "sample_time_ms": 23923.599, "default": {"vf_explained_var": 0.7913581132888794, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.0846199989318848, "total_loss": 28.761831283569336, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021403862163424492, "vf_loss": 28.772369384765625, "kl": 0.016094034537672997}, "load_time_ms": 74.704, "num_steps_trained": 28201704, "num_steps_sampled": 28201704}, "episode_reward_max": 951.5528364233747, "policy_reward_mean": {}, "training_iteration": 232, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28201704, "episode_reward_min": 710.8547970940879, "pid": 14989, "iterations_since_restore": 32, "num_metric_batches_dropped": 0, "episodes_total": 14078, "timesteps_since_restore": 2495112, "episode_len_mean": 751.0}
{"time_this_iter_s": 43.69719672203064, "done": false, "date": "2019-05-09_18-16-28", "episode_reward_mean": 811.9667269831589, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34358>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34ef0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee345f8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1441.514930486679, "timestamp": 1557425788, "custom_metrics": {"cost2_max": -60.96277571273174, "outflow_rate_mean": 1076.9078534595012, "cost2_min": -120.28405181035745, "cost2_mean": -89.93484310865857, "system_level_velocity_max": 13.930396618157129, "system_level_velocity_min": 9.191228322873409, "cost1_min": 259.1695003664629, "cost1_mean": 347.95866106952514, "outflow_rate_max": 1294.0162133588917, "system_level_velocity_mean": 12.246841762141798, "cost1_max": 400.2456963255411, "outflow_rate_min": 781.3723146591968}, "timesteps_this_iter": 78210, "time_total_s": 15022.06593966484, "episodes_this_iter": 43, "info": {"update_time_ms": 8.434, "grad_time_ms": 18709.177, "sample_time_ms": 24085.703, "default": {"vf_explained_var": 0.8404743075370789, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.105257987976074, "total_loss": 25.190031051635742, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02197667770087719, "vf_loss": 25.201475143432617, "kl": 0.015606367029249668}, "load_time_ms": 73.498, "num_steps_trained": 28279914, "num_steps_sampled": 28279914}, "episode_reward_max": 953.9893283682464, "policy_reward_mean": {}, "training_iteration": 233, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28279914, "episode_reward_min": 637.5137441738117, "pid": 14989, "iterations_since_restore": 33, "num_metric_batches_dropped": 0, "episodes_total": 14121, "timesteps_since_restore": 2573322, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.7891321182251, "done": false, "date": "2019-05-09_18-17-13", "episode_reward_mean": 799.4998069170377, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34160>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34b00>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee340b8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1486.3040626049042, "timestamp": 1557425833, "custom_metrics": {"cost2_max": -60.96277571273174, "outflow_rate_mean": 1062.6616453617096, "cost2_min": -114.22761765333071, "cost2_mean": -89.79485303796844, "system_level_velocity_max": 13.811453338861059, "system_level_velocity_min": 8.761129496970291, "cost1_min": 110.53174580819773, "cost1_mean": 342.72114409431344, "outflow_rate_max": 1221.0475455399364, "system_level_velocity_mean": 12.157277839289105, "cost1_max": 389.8250287478637, "outflow_rate_min": 415.97755312847937}, "timesteps_this_iter": 78019, "time_total_s": 15066.855071783066, "episodes_this_iter": 44, "info": {"update_time_ms": 8.09, "grad_time_ms": 18658.925, "sample_time_ms": 24171.587, "default": {"vf_explained_var": 0.8267582058906555, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.1135289669036865, "total_loss": 26.077890396118164, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021774543449282646, "vf_loss": 26.088306427001953, "kl": 0.016831049695611}, "load_time_ms": 80.097, "num_steps_trained": 28357933, "num_steps_sampled": 28357933}, "episode_reward_max": 953.9893283682464, "policy_reward_mean": {}, "training_iteration": 234, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28357933, "episode_reward_min": 208.2427035034342, "pid": 14989, "iterations_since_restore": 34, "num_metric_batches_dropped": 0, "episodes_total": 14165, "timesteps_since_restore": 2651341, "episode_len_mean": 745.67}
{"time_this_iter_s": 41.97331380844116, "done": false, "date": "2019-05-09_18-17-55", "episode_reward_mean": 790.7438833710672, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34f98>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee345f8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34cc0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1528.2773764133453, "timestamp": 1557425875, "custom_metrics": {"cost2_max": -60.96277571273174, "outflow_rate_mean": 1050.319530403382, "cost2_min": -114.22761765333071, "cost2_mean": -90.24372535840375, "system_level_velocity_max": 13.811453338861059, "system_level_velocity_min": 8.761129496970291, "cost1_min": 110.53174580819773, "cost1_mean": 339.03850050734377, "outflow_rate_max": 1236.234747949204, "system_level_velocity_mean": 12.128498352922684, "cost1_max": 389.8250287478637, "outflow_rate_min": 415.97755312847937}, "timesteps_this_iter": 77514, "time_total_s": 15108.828385591507, "episodes_this_iter": 44, "info": {"update_time_ms": 8.197, "grad_time_ms": 18546.659, "sample_time_ms": 24036.2, "default": {"vf_explained_var": 0.8127497434616089, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.1191914081573486, "total_loss": 26.98627281188965, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022681981325149536, "vf_loss": 26.998214721679688, "kl": 0.01591009646654129}, "load_time_ms": 83.917, "num_steps_trained": 28435447, "num_steps_sampled": 28435447}, "episode_reward_max": 962.5420591902042, "policy_reward_mean": {}, "training_iteration": 235, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28435447, "episode_reward_min": 208.2427035034342, "pid": 14989, "iterations_since_restore": 35, "num_metric_batches_dropped": 0, "episodes_total": 14209, "timesteps_since_restore": 2728855, "episode_len_mean": 740.42}
{"time_this_iter_s": 41.14253067970276, "done": false, "date": "2019-05-09_18-18-36", "episode_reward_mean": 796.0299203949774, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34240>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34f60>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34cf8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1569.419907093048, "timestamp": 1557425916, "custom_metrics": {"cost2_max": -35.28216560723614, "outflow_rate_mean": 1059.160323874307, "cost2_min": -115.09140984092326, "cost2_mean": -91.05855647085669, "system_level_velocity_max": 13.654327171643367, "system_level_velocity_min": 10.161644549031653, "cost1_min": 113.85863442174818, "cost1_mean": 342.23064445371017, "outflow_rate_max": 1236.234747949204, "system_level_velocity_mean": 12.142208638813122, "cost1_max": 392.2441756324585, "outflow_rate_min": 427.1505769064122}, "timesteps_this_iter": 77031, "time_total_s": 15149.97091627121, "episodes_this_iter": 43, "info": {"update_time_ms": 8.219, "grad_time_ms": 18714.96, "sample_time_ms": 23783.005, "default": {"vf_explained_var": 0.8303413391113281, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.141887664794922, "total_loss": 25.903589248657227, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021718740463256836, "vf_loss": 25.914146423339844, "kl": 0.01653396338224411}, "load_time_ms": 79.259, "num_steps_trained": 28512478, "num_steps_sampled": 28512478}, "episode_reward_max": 962.5420591902042, "policy_reward_mean": {}, "training_iteration": 236, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28512478, "episode_reward_min": 215.34901204891207, "pid": 14989, "iterations_since_restore": 36, "num_metric_batches_dropped": 0, "episodes_total": 14252, "timesteps_since_restore": 2805886, "episode_len_mean": 745.75}
{"time_this_iter_s": 42.62259793281555, "done": false, "date": "2019-05-09_18-19-19", "episode_reward_mean": 791.0899912606659, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34668>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34898>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34710>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1612.0425050258636, "timestamp": 1557425959, "custom_metrics": {"cost2_max": -35.28216560723614, "outflow_rate_mean": 1057.8903166907367, "cost2_min": -115.09140984092326, "cost2_mean": -91.15664697612642, "system_level_velocity_max": 13.654327171643367, "system_level_velocity_min": 9.08396146928062, "cost1_min": 113.85863442174818, "cost1_mean": 343.2075192835131, "outflow_rate_max": 1231.9210869835417, "system_level_velocity_mean": 12.18745741948098, "cost1_max": 392.2441756324585, "outflow_rate_min": 427.1505769064122}, "timesteps_this_iter": 79146, "time_total_s": 15192.593514204025, "episodes_this_iter": 44, "info": {"update_time_ms": 8.299, "grad_time_ms": 18937.591, "sample_time_ms": 23597.656, "default": {"vf_explained_var": 0.8429625630378723, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.1507506370544434, "total_loss": 24.699609756469727, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020763782784342766, "vf_loss": 24.70944595336914, "kl": 0.016188403591513634}, "load_time_ms": 79.406, "num_steps_trained": 28591624, "num_steps_sampled": 28591624}, "episode_reward_max": 925.0036633704075, "policy_reward_mean": {}, "training_iteration": 237, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28591624, "episode_reward_min": 215.34901204891207, "pid": 14989, "iterations_since_restore": 37, "num_metric_batches_dropped": 0, "episodes_total": 14296, "timesteps_since_restore": 2885032, "episode_len_mean": 745.75}
{"time_this_iter_s": 43.645665645599365, "done": false, "date": "2019-05-09_18-20-03", "episode_reward_mean": 792.4136223209146, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee349b0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34dd8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee340f0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1655.688170671463, "timestamp": 1557426003, "custom_metrics": {"cost2_max": -61.34964662665594, "outflow_rate_mean": 1054.728623986602, "cost2_min": -115.09140984092326, "cost2_mean": -89.26256013462813, "system_level_velocity_max": 13.654327171643367, "system_level_velocity_min": 8.24078434108478, "cost1_min": 221.24997147829936, "cost1_mean": 343.2332366341479, "outflow_rate_max": 1231.9210869835417, "system_level_velocity_mean": 12.108498018242836, "cost1_max": 392.2441756324585, "outflow_rate_min": 704.627509833024}, "timesteps_this_iter": 78086, "time_total_s": 15236.239179849625, "episodes_this_iter": 43, "info": {"update_time_ms": 8.464, "grad_time_ms": 18999.648, "sample_time_ms": 23742.746, "default": {"vf_explained_var": 0.8267751336097717, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.160616397857666, "total_loss": 25.63347816467285, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022402403876185417, "vf_loss": 25.644916534423828, "kl": 0.01624557562172413}, "load_time_ms": 77.912, "num_steps_trained": 28669710, "num_steps_sampled": 28669710}, "episode_reward_max": 925.0036633704075, "policy_reward_mean": {}, "training_iteration": 238, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28669710, "episode_reward_min": 627.0054619079463, "pid": 14989, "iterations_since_restore": 38, "num_metric_batches_dropped": 0, "episodes_total": 14339, "timesteps_since_restore": 2963118, "episode_len_mean": 751.0}
{"time_this_iter_s": 42.455071210861206, "done": false, "date": "2019-05-09_18-20-45", "episode_reward_mean": 793.5069060816516, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34550>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34f98>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34780>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1698.1432418823242, "timestamp": 1557426045, "custom_metrics": {"cost2_max": -61.34964662665594, "outflow_rate_mean": 1054.8379343783934, "cost2_min": -112.56384611373855, "cost2_mean": -90.11649029714921, "system_level_velocity_max": 13.930990539478191, "system_level_velocity_min": 8.24078434108478, "cost1_min": 221.24997147829936, "cost1_mean": 340.9160935642991, "outflow_rate_max": 1233.4902242328203, "system_level_velocity_mean": 12.014702996880478, "cost1_max": 394.7941540184315, "outflow_rate_min": 704.627509833024}, "timesteps_this_iter": 78234, "time_total_s": 15278.694251060486, "episodes_this_iter": 43, "info": {"update_time_ms": 8.662, "grad_time_ms": 18953.933, "sample_time_ms": 23900.632, "default": {"vf_explained_var": 0.8299839496612549, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.150634288787842, "total_loss": 25.173250198364258, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02076275460422039, "vf_loss": 25.18320083618164, "kl": 0.016019295901060104}, "load_time_ms": 74.792, "num_steps_trained": 28747944, "num_steps_sampled": 28747944}, "episode_reward_max": 939.8395152807038, "policy_reward_mean": {}, "training_iteration": 239, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28747944, "episode_reward_min": 627.0054619079463, "pid": 14989, "iterations_since_restore": 39, "num_metric_batches_dropped": 0, "episodes_total": 14382, "timesteps_since_restore": 3041352, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.698275566101074, "done": false, "date": "2019-05-09_18-21-30", "episode_reward_mean": 795.2530654794507, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee349e8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee67f28>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34438>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1742.8415174484253, "timestamp": 1557426090, "custom_metrics": {"cost2_max": -58.89609884902755, "outflow_rate_mean": 1061.0778533864852, "cost2_min": -124.76686182533452, "cost2_mean": -93.11743972448544, "system_level_velocity_max": 13.930990539478191, "system_level_velocity_min": 8.971027399144864, "cost1_min": 114.70052957661278, "cost1_mean": 341.5184782637293, "outflow_rate_max": 1233.4902242328203, "system_level_velocity_mean": 12.119928883283736, "cost1_max": 394.7941540184315, "outflow_rate_min": 425.6593847431546}, "timesteps_this_iter": 78938, "time_total_s": 15323.392526626587, "episodes_this_iter": 44, "info": {"update_time_ms": 8.938, "grad_time_ms": 18646.712, "sample_time_ms": 24263.488, "default": {"vf_explained_var": 0.838200569152832, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.1773195266723633, "total_loss": 26.229001998901367, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02118544466793537, "vf_loss": 26.239330291748047, "kl": 0.016085676848888397}, "load_time_ms": 68.534, "num_steps_trained": 28826882, "num_steps_sampled": 28826882}, "episode_reward_max": 939.8395152807038, "policy_reward_mean": {}, "training_iteration": 240, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28826882, "episode_reward_min": 220.93919509363212, "pid": 14989, "iterations_since_restore": 40, "num_metric_batches_dropped": 0, "episodes_total": 14426, "timesteps_since_restore": 3120290, "episode_len_mean": 745.76}
{"time_this_iter_s": 44.98155331611633, "done": false, "date": "2019-05-09_18-22-15", "episode_reward_mean": 789.5175397412428, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34550>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34668>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34e48>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1787.8230707645416, "timestamp": 1557426135, "custom_metrics": {"cost2_max": -58.89609884902755, "outflow_rate_mean": 1055.8858256990304, "cost2_min": -124.76686182533452, "cost2_mean": -93.80090836862274, "system_level_velocity_max": 14.822693909032758, "system_level_velocity_min": 10.24699823915738, "cost1_min": 114.70052957661278, "cost1_mean": 341.2075537953218, "outflow_rate_max": 1365.338210745113, "system_level_velocity_mean": 12.108483286158382, "cost1_max": 422.50094048139835, "outflow_rate_min": 425.6593847431546}, "timesteps_this_iter": 78143, "time_total_s": 15368.374079942703, "episodes_this_iter": 43, "info": {"update_time_ms": 8.67, "grad_time_ms": 18577.526, "sample_time_ms": 24515.824, "default": {"vf_explained_var": 0.8295577168464661, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.188499689102173, "total_loss": 26.246484756469727, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02103602886199951, "vf_loss": 26.25545310974121, "kl": 0.01787719503045082}, "load_time_ms": 73.298, "num_steps_trained": 28905025, "num_steps_sampled": 28905025}, "episode_reward_max": 996.5437193848201, "policy_reward_mean": {}, "training_iteration": 241, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28905025, "episode_reward_min": 220.93919509363212, "pid": 14989, "iterations_since_restore": 41, "num_metric_batches_dropped": 0, "episodes_total": 14469, "timesteps_since_restore": 3198433, "episode_len_mean": 745.76}
{"time_this_iter_s": 42.70124816894531, "done": false, "date": "2019-05-09_18-22-58", "episode_reward_mean": 794.8511089639559, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34400>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee342b0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34b00>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1830.524318933487, "timestamp": 1557426178, "custom_metrics": {"cost2_max": -58.89609884902755, "outflow_rate_mean": 1057.1863222885577, "cost2_min": -112.56364158748457, "cost2_mean": -92.40517201983026, "system_level_velocity_max": 14.822693909032758, "system_level_velocity_min": 9.34839343378088, "cost1_min": 117.77818317242145, "cost1_mean": 340.8999030700789, "outflow_rate_max": 1365.338210745113, "system_level_velocity_mean": 12.090770613630868, "cost1_max": 422.50094048139835, "outflow_rate_min": 432.26960795551304}, "timesteps_this_iter": 77494, "time_total_s": 15411.075328111649, "episodes_this_iter": 44, "info": {"update_time_ms": 8.477, "grad_time_ms": 18463.793, "sample_time_ms": 24577.636, "default": {"vf_explained_var": 0.8045048713684082, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.1619410514831543, "total_loss": 27.952556610107422, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020345963537693024, "vf_loss": 27.96254539489746, "kl": 0.015341742895543575}, "load_time_ms": 73.576, "num_steps_trained": 28982519, "num_steps_sampled": 28982519}, "episode_reward_max": 996.5437193848201, "policy_reward_mean": {}, "training_iteration": 242, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 28982519, "episode_reward_min": 225.36537254021317, "pid": 14989, "iterations_since_restore": 42, "num_metric_batches_dropped": 0, "episodes_total": 14513, "timesteps_since_restore": 3275927, "episode_len_mean": 745.79}
{"time_this_iter_s": 42.99537229537964, "done": false, "date": "2019-05-09_18-23-41", "episode_reward_mean": 812.0490260966012, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee294e0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29438>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29e48>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1873.5196912288666, "timestamp": 1557426221, "custom_metrics": {"cost2_max": -63.44022529572936, "outflow_rate_mean": 1078.383962138585, "cost2_min": -118.90352665508263, "cost2_mean": -93.66129789411215, "system_level_velocity_max": 14.40427632771414, "system_level_velocity_min": 9.320100506176262, "cost1_min": 117.77818317242145, "cost1_mean": 345.8528774771328, "outflow_rate_max": 1287.3787355835545, "system_level_velocity_mean": 12.234938007215737, "cost1_max": 407.9605843021044, "outflow_rate_min": 432.26960795551304}, "timesteps_this_iter": 78769, "time_total_s": 15454.070700407028, "episodes_this_iter": 43, "info": {"update_time_ms": 8.54, "grad_time_ms": 18556.549, "sample_time_ms": 24416.108, "default": {"vf_explained_var": 0.8217164278030396, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.188917398452759, "total_loss": 25.2889347076416, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020847560837864876, "vf_loss": 25.2991943359375, "kl": 0.01568395271897316}, "load_time_ms": 68.311, "num_steps_trained": 29061288, "num_steps_sampled": 29061288}, "episode_reward_max": 964.1973966823208, "policy_reward_mean": {}, "training_iteration": 243, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29061288, "episode_reward_min": 225.36537254021317, "pid": 14989, "iterations_since_restore": 43, "num_metric_batches_dropped": 0, "episodes_total": 14556, "timesteps_since_restore": 3354696, "episode_len_mean": 745.79}
{"time_this_iter_s": 41.587472915649414, "done": false, "date": "2019-05-09_18-24-22", "episode_reward_mean": 807.7936760028059, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee340f0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee349b0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34240>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1915.107164144516, "timestamp": 1557426262, "custom_metrics": {"cost2_max": -55.05088329271281, "outflow_rate_mean": 1073.395499770881, "cost2_min": -123.24795655104667, "cost2_mean": -92.67651783899417, "system_level_velocity_max": 14.40427632771414, "system_level_velocity_min": 9.320100506176262, "cost1_min": 117.77818317242145, "cost1_mean": 343.7416636199455, "outflow_rate_max": 1287.3787355835545, "system_level_velocity_mean": 12.170136695069985, "cost1_max": 407.9605843021044, "outflow_rate_min": 432.26960795551304}, "timesteps_this_iter": 77371, "time_total_s": 15495.658173322678, "episodes_this_iter": 43, "info": {"update_time_ms": 8.679, "grad_time_ms": 18551.89, "sample_time_ms": 24097.237, "default": {"vf_explained_var": 0.8121394515037537, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.1939969062805176, "total_loss": 25.15792465209961, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022139757871627808, "vf_loss": 25.168794631958008, "kl": 0.016697514802217484}, "load_time_ms": 69.98, "num_steps_trained": 29138659, "num_steps_sampled": 29138659}, "episode_reward_max": 964.1973966823208, "policy_reward_mean": {}, "training_iteration": 244, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29138659, "episode_reward_min": 225.36537254021317, "pid": 14989, "iterations_since_restore": 44, "num_metric_batches_dropped": 0, "episodes_total": 14599, "timesteps_since_restore": 3432067, "episode_len_mean": 745.79}
{"time_this_iter_s": 43.401325941085815, "done": false, "date": "2019-05-09_18-25-06", "episode_reward_mean": 794.5698783006612, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34588>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34e48>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34828>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 1958.5084900856018, "timestamp": 1557426306, "custom_metrics": {"cost2_max": -55.05088329271281, "outflow_rate_mean": 1056.39107596818, "cost2_min": -123.24795655104667, "cost2_mean": -90.36708253535704, "system_level_velocity_max": 13.58909813723148, "system_level_velocity_min": 9.472349175819232, "cost1_min": 112.52487052184607, "cost1_mean": 339.2846083538038, "outflow_rate_max": 1227.2195890098583, "system_level_velocity_mean": 12.048083220697734, "cost1_max": 385.7919106285442, "outflow_rate_min": 427.61988726415996}, "timesteps_this_iter": 78003, "time_total_s": 15539.059499263763, "episodes_this_iter": 44, "info": {"update_time_ms": 8.929, "grad_time_ms": 18842.778, "sample_time_ms": 23944.657, "default": {"vf_explained_var": 0.8054783940315247, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.1836776733398438, "total_loss": 26.37247657775879, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020583555102348328, "vf_loss": 26.38170051574707, "kl": 0.016830813139677048}, "load_time_ms": 73.488, "num_steps_trained": 29216662, "num_steps_sampled": 29216662}, "episode_reward_max": 968.3760585500121, "policy_reward_mean": {}, "training_iteration": 245, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29216662, "episode_reward_min": 213.45933036005505, "pid": 14989, "iterations_since_restore": 45, "num_metric_batches_dropped": 0, "episodes_total": 14643, "timesteps_since_restore": 3510070, "episode_len_mean": 743.26}
{"time_this_iter_s": 42.58742046356201, "done": false, "date": "2019-05-09_18-25-48", "episode_reward_mean": 799.9800369480668, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34e80>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34eb8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34198>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2001.0959105491638, "timestamp": 1557426348, "custom_metrics": {"cost2_max": -56.261896913158054, "outflow_rate_mean": 1064.9073648886808, "cost2_min": -113.61539915404452, "cost2_mean": -89.86089141158396, "system_level_velocity_max": 13.501668149840668, "system_level_velocity_min": 9.9008656277544, "cost1_min": 112.52487052184607, "cost1_mean": 342.1758041667652, "outflow_rate_max": 1217.5785013792179, "system_level_velocity_mean": 12.135114220408596, "cost1_max": 383.24174784517174, "outflow_rate_min": 427.61988726415996}, "timesteps_this_iter": 78771, "time_total_s": 15581.646919727325, "episodes_this_iter": 43, "info": {"update_time_ms": 8.98, "grad_time_ms": 19023.366, "sample_time_ms": 23901.718, "default": {"vf_explained_var": 0.8137893080711365, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.197187900543213, "total_loss": 26.888179779052734, "cur_lr": 0.0005000000237487257, "policy_loss": -0.019940586760640144, "vf_loss": 26.896982192993164, "kl": 0.016501884907484055}, "load_time_ms": 79.045, "num_steps_trained": 29295433, "num_steps_sampled": 29295433}, "episode_reward_max": 968.3760585500121, "policy_reward_mean": {}, "training_iteration": 246, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29295433, "episode_reward_min": 213.45933036005505, "pid": 14989, "iterations_since_restore": 46, "num_metric_batches_dropped": 0, "episodes_total": 14686, "timesteps_since_restore": 3588841, "episode_len_mean": 743.26}
{"time_this_iter_s": 42.85055351257324, "done": false, "date": "2019-05-09_18-26-31", "episode_reward_mean": 802.2756160206644, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34cc0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34550>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34358>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2043.946464061737, "timestamp": 1557426391, "custom_metrics": {"cost2_max": -64.07914581243595, "outflow_rate_mean": 1065.8963940367792, "cost2_min": -107.92423834698639, "cost2_mean": -90.72464147570079, "system_level_velocity_max": 13.501668149840668, "system_level_velocity_min": 9.9008656277544, "cost1_min": 279.0553622592071, "cost1_mean": 343.5024739933908, "outflow_rate_max": 1207.6617266579979, "system_level_velocity_mean": 12.0670231161523, "cost1_max": 381.3942179532068, "outflow_rate_min": 821.7490416135881}, "timesteps_this_iter": 77800, "time_total_s": 15624.497473239899, "episodes_this_iter": 43, "info": {"update_time_ms": 9.25, "grad_time_ms": 18956.873, "sample_time_ms": 23991.61, "default": {"vf_explained_var": 0.8383293747901917, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.185612916946411, "total_loss": 23.527742385864258, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020955901592969894, "vf_loss": 23.538410186767578, "kl": 0.01524109486490488}, "load_time_ms": 77.746, "num_steps_trained": 29373233, "num_steps_sampled": 29373233}, "episode_reward_max": 909.1740035416142, "policy_reward_mean": {}, "training_iteration": 247, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29373233, "episode_reward_min": 641.4315210886532, "pid": 14989, "iterations_since_restore": 47, "num_metric_batches_dropped": 0, "episodes_total": 14729, "timesteps_since_restore": 3666641, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.682276248931885, "done": false, "date": "2019-05-09_18-27-16", "episode_reward_mean": 803.3592103125222, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34b00>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34400>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34b70>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2088.628740310669, "timestamp": 1557426436, "custom_metrics": {"cost2_max": -64.07914581243595, "outflow_rate_mean": 1068.1052241107377, "cost2_min": -108.35058828772694, "cost2_mean": -91.64377147748162, "system_level_velocity_max": 14.237904138857317, "system_level_velocity_min": 9.818482647192116, "cost1_min": 198.11478772016966, "cost1_mean": 344.35108774148176, "outflow_rate_max": 1279.072028341788, "system_level_velocity_mean": 12.183650166833338, "cost1_max": 400.8950676182062, "outflow_rate_min": 687.6344985706223}, "timesteps_this_iter": 78692, "time_total_s": 15669.17974948883, "episodes_this_iter": 43, "info": {"update_time_ms": 9.276, "grad_time_ms": 18932.776, "sample_time_ms": 24131.924, "default": {"vf_explained_var": 0.8323204517364502, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.2013089656829834, "total_loss": 23.997114181518555, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020888427272439003, "vf_loss": 24.00701141357422, "kl": 0.016284344717860222}, "load_time_ms": 69.881, "num_steps_trained": 29451925, "num_steps_sampled": 29451925}, "episode_reward_max": 945.7925265976585, "policy_reward_mean": {}, "training_iteration": 248, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29451925, "episode_reward_min": 432.0481379239122, "pid": 14989, "iterations_since_restore": 48, "num_metric_batches_dropped": 0, "episodes_total": 14772, "timesteps_since_restore": 3745333, "episode_len_mean": 747.47}
{"time_this_iter_s": 44.25482153892517, "done": false, "date": "2019-05-09_18-28-00", "episode_reward_mean": 803.2071425952435, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34cc0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34780>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34320>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2132.883561849594, "timestamp": 1557426480, "custom_metrics": {"cost2_max": -65.75108626944714, "outflow_rate_mean": 1072.468117755101, "cost2_min": -117.68697368628055, "cost2_mean": -92.15112282846049, "system_level_velocity_max": 14.237904138857317, "system_level_velocity_min": 9.818482647192116, "cost1_min": 198.11478772016966, "cost1_mean": 345.1184677398167, "outflow_rate_max": 1279.072028341788, "system_level_velocity_mean": 12.199028904629943, "cost1_max": 400.8950676182062, "outflow_rate_min": 687.6344985706223}, "timesteps_this_iter": 78007, "time_total_s": 15713.434571027756, "episodes_this_iter": 43, "info": {"update_time_ms": 9.122, "grad_time_ms": 18816.495, "sample_time_ms": 24425.581, "default": {"vf_explained_var": 0.8035873174667358, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.220579147338867, "total_loss": 26.822099685668945, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021172301843762398, "vf_loss": 26.83261489868164, "kl": 0.015792828053236008}, "load_time_ms": 72.845, "num_steps_trained": 29529932, "num_steps_sampled": 29529932}, "episode_reward_max": 945.7925265976585, "policy_reward_mean": {}, "training_iteration": 249, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29529932, "episode_reward_min": 432.0481379239122, "pid": 14989, "iterations_since_restore": 49, "num_metric_batches_dropped": 0, "episodes_total": 14815, "timesteps_since_restore": 3823340, "episode_len_mean": 747.47}
{"time_this_iter_s": 45.18315839767456, "done": false, "date": "2019-05-09_18-28-46", "episode_reward_mean": 806.9672980240052, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34fd0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34898>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee342e8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2178.0667202472687, "timestamp": 1557426526, "custom_metrics": {"cost2_max": -65.75108626944714, "outflow_rate_mean": 1077.3023806974245, "cost2_min": -117.68697368628055, "cost2_mean": -91.56583338404285, "system_level_velocity_max": 14.002318746156043, "system_level_velocity_min": 9.86786328571133, "cost1_min": 268.2525141817241, "cost1_mean": 346.22347432754935, "outflow_rate_max": 1275.2863977612042, "system_level_velocity_mean": 12.171436764107831, "cost1_max": 396.8791575936607, "outflow_rate_min": 874.88472718894}, "timesteps_this_iter": 78857, "time_total_s": 15758.61772942543, "episodes_this_iter": 43, "info": {"update_time_ms": 8.895, "grad_time_ms": 18864.674, "sample_time_ms": 24415.447, "default": {"vf_explained_var": 0.8377773761749268, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.2224538326263428, "total_loss": 23.748380661010742, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022103434428572655, "vf_loss": 23.75955581665039, "kl": 0.016186727210879326}, "load_time_ms": 80.989, "num_steps_trained": 29608789, "num_steps_sampled": 29608789}, "episode_reward_max": 945.7925265976585, "policy_reward_mean": {}, "training_iteration": 250, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29608789, "episode_reward_min": 644.7735008417924, "pid": 14989, "iterations_since_restore": 50, "num_metric_batches_dropped": 0, "episodes_total": 14858, "timesteps_since_restore": 3902197, "episode_len_mean": 751.0}
{"time_this_iter_s": 46.44123339653015, "done": false, "date": "2019-05-09_18-29-32", "episode_reward_mean": 799.5029794625516, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34550>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34668>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34320>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2224.507953643799, "timestamp": 1557426572, "custom_metrics": {"cost2_max": -51.88298021803984, "outflow_rate_mean": 1067.3088068480743, "cost2_min": -119.2049696367059, "cost2_mean": -92.1757338007617, "system_level_velocity_max": 14.024599504566805, "system_level_velocity_min": 9.645088978011215, "cost1_min": 199.507617395136, "cost1_mean": 342.18976618824905, "outflow_rate_max": 1274.6521618245902, "system_level_velocity_mean": 12.085038986084731, "cost1_max": 402.2126087694461, "outflow_rate_min": 682.2780664936965}, "timesteps_this_iter": 80172, "time_total_s": 15805.05896282196, "episodes_this_iter": 44, "info": {"update_time_ms": 9.002, "grad_time_ms": 19011.681, "sample_time_ms": 24409.826, "default": {"vf_explained_var": 0.8444674015045166, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.232081890106201, "total_loss": 23.726858139038086, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021400438621640205, "vf_loss": 23.737363815307617, "kl": 0.016141053289175034}, "load_time_ms": 85.293, "num_steps_trained": 29688961, "num_steps_sampled": 29688961}, "episode_reward_max": 925.8728582008246, "policy_reward_mean": {}, "training_iteration": 251, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29688961, "episode_reward_min": 442.837654337809, "pid": 14989, "iterations_since_restore": 51, "num_metric_batches_dropped": 0, "episodes_total": 14902, "timesteps_since_restore": 3982369, "episode_len_mean": 747.57}
{"time_this_iter_s": 42.51636719703674, "done": false, "date": "2019-05-09_18-30-15", "episode_reward_mean": 790.0241366454461, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc88>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f320>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f358>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2267.0243208408356, "timestamp": 1557426615, "custom_metrics": {"cost2_max": -51.88298021803984, "outflow_rate_mean": 1054.4298350621361, "cost2_min": -119.2049696367059, "cost2_mean": -92.41324453672222, "system_level_velocity_max": 14.108897862008433, "system_level_velocity_min": 9.645088978011215, "cost1_min": 116.39296947194745, "cost1_mean": 337.77682315003347, "outflow_rate_max": 1289.9055861988757, "system_level_velocity_mean": 12.024783826366143, "cost1_max": 402.2126087694461, "outflow_rate_min": 443.38170751494226}, "timesteps_this_iter": 78064, "time_total_s": 15847.575330018997, "episodes_this_iter": 44, "info": {"update_time_ms": 8.974, "grad_time_ms": 19140.904, "sample_time_ms": 24262.314, "default": {"vf_explained_var": 0.8208568096160889, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.214608907699585, "total_loss": 24.238880157470703, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022301767021417618, "vf_loss": 24.250473022460938, "kl": 0.01586512289941311}, "load_time_ms": 85.017, "num_steps_trained": 29767025, "num_steps_sampled": 29767025}, "episode_reward_max": 959.3757191433534, "policy_reward_mean": {}, "training_iteration": 252, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29767025, "episode_reward_min": 214.52633106109707, "pid": 14989, "iterations_since_restore": 52, "num_metric_batches_dropped": 0, "episodes_total": 14946, "timesteps_since_restore": 4060433, "episode_len_mean": 742.34}
{"time_this_iter_s": 43.511000633239746, "done": false, "date": "2019-05-09_18-30-58", "episode_reward_mean": 791.1443037892797, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34d68>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34a20>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee347b8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2310.5353214740753, "timestamp": 1557426658, "custom_metrics": {"cost2_max": -51.88298021803984, "outflow_rate_mean": 1051.9944385574618, "cost2_min": -115.15027212591441, "cost2_mean": -90.66774735029037, "system_level_velocity_max": 14.108897862008433, "system_level_velocity_min": 9.152047172408352, "cost1_min": 116.39296947194745, "cost1_mean": 336.60125824248973, "outflow_rate_max": 1289.9055861988757, "system_level_velocity_mean": 11.927119149147511, "cost1_max": 401.0287517557497, "outflow_rate_min": 443.38170751494226}, "timesteps_this_iter": 80427, "time_total_s": 15891.086330652237, "episodes_this_iter": 43, "info": {"update_time_ms": 9.011, "grad_time_ms": 19306.5, "sample_time_ms": 24144.545, "default": {"vf_explained_var": 0.8291895985603333, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.2458033561706543, "total_loss": 24.561641693115234, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02181590348482132, "vf_loss": 24.57198143005371, "kl": 0.017002176493406296}, "load_time_ms": 89.722, "num_steps_trained": 29847452, "num_steps_sampled": 29847452}, "episode_reward_max": 959.3757191433534, "policy_reward_mean": {}, "training_iteration": 253, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29847452, "episode_reward_min": 214.52633106109707, "pid": 14989, "iterations_since_restore": 53, "num_metric_batches_dropped": 0, "episodes_total": 14989, "timesteps_since_restore": 4140860, "episode_len_mean": 745.77}
{"time_this_iter_s": 43.675588846206665, "done": false, "date": "2019-05-09_18-31-42", "episode_reward_mean": 800.5914560402641, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f0b8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f198>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f160>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2354.210910320282, "timestamp": 1557426702, "custom_metrics": {"cost2_max": -69.21001787584453, "outflow_rate_mean": 1054.6648146149541, "cost2_min": -115.15027212591441, "cost2_mean": -91.06176029082607, "system_level_velocity_max": 14.108897862008433, "system_level_velocity_min": 9.152047172408352, "cost1_min": 263.9956552461602, "cost1_mean": 338.4759433970061, "outflow_rate_max": 1289.9055861988757, "system_level_velocity_mean": 11.882977968638388, "cost1_max": 401.0287517557497, "outflow_rate_min": 858.6768750153719}, "timesteps_this_iter": 80442, "time_total_s": 15934.761919498444, "episodes_this_iter": 43, "info": {"update_time_ms": 8.826, "grad_time_ms": 19493.929, "sample_time_ms": 24175.587, "default": {"vf_explained_var": 0.8252481818199158, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.240675210952759, "total_loss": 23.888330459594727, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021670345216989517, "vf_loss": 23.89939308166504, "kl": 0.015713028609752655}, "load_time_ms": 79.517, "num_steps_trained": 29927894, "num_steps_sampled": 29927894}, "episode_reward_max": 959.3757191433534, "policy_reward_mean": {}, "training_iteration": 254, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 29927894, "episode_reward_min": 666.9977806888168, "pid": 14989, "iterations_since_restore": 54, "num_metric_batches_dropped": 0, "episodes_total": 15032, "timesteps_since_restore": 4221302, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.124444007873535, "done": false, "date": "2019-05-09_18-32-26", "episode_reward_mean": 805.0688083490741, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee342b0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34c18>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee345c0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2398.3353543281555, "timestamp": 1557426746, "custom_metrics": {"cost2_max": -55.06554486044208, "outflow_rate_mean": 1059.9454048411085, "cost2_min": -113.1103516386624, "cost2_mean": -92.37258402211724, "system_level_velocity_max": 13.558909445922803, "system_level_velocity_min": 9.152047172408352, "cost1_min": 263.9956552461602, "cost1_mean": 339.5608297603235, "outflow_rate_max": 1228.3561934408392, "system_level_velocity_mean": 11.906041520253677, "cost1_max": 386.3341996198676, "outflow_rate_min": 858.6768750153719}, "timesteps_this_iter": 78453, "time_total_s": 15978.886363506317, "episodes_this_iter": 43, "info": {"update_time_ms": 8.556, "grad_time_ms": 19553.716, "sample_time_ms": 24187.059, "default": {"vf_explained_var": 0.8072044849395752, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.2255308628082275, "total_loss": 23.17474937438965, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021458880975842476, "vf_loss": 23.184959411621094, "kl": 0.016663599759340286}, "load_time_ms": 78.88, "num_steps_trained": 30006347, "num_steps_sampled": 30006347}, "episode_reward_max": 922.0160160320701, "policy_reward_mean": {}, "training_iteration": 255, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30006347, "episode_reward_min": 666.9977806888168, "pid": 14989, "iterations_since_restore": 55, "num_metric_batches_dropped": 0, "episodes_total": 15075, "timesteps_since_restore": 4299755, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.014742851257324, "done": false, "date": "2019-05-09_18-33-10", "episode_reward_mean": 806.0239651540422, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f358>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f668>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f4e0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2442.350097179413, "timestamp": 1557426790, "custom_metrics": {"cost2_max": -55.06554486044208, "outflow_rate_mean": 1059.6308786267382, "cost2_min": -120.828324226737, "cost2_mean": -93.0688440131298, "system_level_velocity_max": 14.068567105236818, "system_level_velocity_min": 8.961274615365207, "cost1_min": 119.03239474274872, "cost1_mean": 338.2059177441321, "outflow_rate_max": 1254.815601873469, "system_level_velocity_mean": 11.952638628621164, "cost1_max": 401.26985105317146, "outflow_rate_min": 437.19726098756803}, "timesteps_this_iter": 80247, "time_total_s": 16022.901106357574, "episodes_this_iter": 44, "info": {"update_time_ms": 8.894, "grad_time_ms": 19574.167, "sample_time_ms": 24314.032, "default": {"vf_explained_var": 0.8313698172569275, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.252743721008301, "total_loss": 23.063690185546875, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02142447605729103, "vf_loss": 23.07377815246582, "kl": 0.01679362915456295}, "load_time_ms": 73.007, "num_steps_trained": 30086594, "num_steps_sampled": 30086594}, "episode_reward_max": 965.9356906867032, "policy_reward_mean": {}, "training_iteration": 256, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30086594, "episode_reward_min": 225.49833029091957, "pid": 14989, "iterations_since_restore": 56, "num_metric_batches_dropped": 0, "episodes_total": 15119, "timesteps_since_restore": 4380002, "episode_len_mean": 745.79}
{"time_this_iter_s": 44.72750639915466, "done": false, "date": "2019-05-09_18-33-55", "episode_reward_mean": 806.8501017210427, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34d30>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34a20>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34d68>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2487.0776035785675, "timestamp": 1557426835, "custom_metrics": {"cost2_max": -55.06554486044208, "outflow_rate_mean": 1066.6659409956667, "cost2_min": -120.828324226737, "cost2_mean": -94.75122869015422, "system_level_velocity_max": 14.068567105236818, "system_level_velocity_min": 8.961274615365207, "cost1_min": 119.03239474274872, "cost1_mean": 340.7210803411346, "outflow_rate_max": 1254.815601873469, "system_level_velocity_mean": 12.035180101469749, "cost1_max": 401.26985105317146, "outflow_rate_min": 437.19726098756803}, "timesteps_this_iter": 79779, "time_total_s": 16067.62861275673, "episodes_this_iter": 43, "info": {"update_time_ms": 8.724, "grad_time_ms": 19623.64, "sample_time_ms": 24445.078, "default": {"vf_explained_var": 0.806652843952179, "cur_kl_coeff": 0.675000011920929, "entropy": 2.2330472469329834, "total_loss": 24.525039672851562, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02172725461423397, "vf_loss": 24.535673141479492, "kl": 0.016435004770755768}, "load_time_ms": 75.144, "num_steps_trained": 30166373, "num_steps_sampled": 30166373}, "episode_reward_max": 965.9356906867032, "policy_reward_mean": {}, "training_iteration": 257, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30166373, "episode_reward_min": 225.49833029091957, "pid": 14989, "iterations_since_restore": 57, "num_metric_batches_dropped": 0, "episodes_total": 15162, "timesteps_since_restore": 4459781, "episode_len_mean": 745.79}
{"time_this_iter_s": 45.63637638092041, "done": false, "date": "2019-05-09_18-34-41", "episode_reward_mean": 808.1906040149635, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fcf8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc88>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f160>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2532.713979959488, "timestamp": 1557426881, "custom_metrics": {"cost2_max": -67.22485172443793, "outflow_rate_mean": 1067.6943695066602, "cost2_min": -116.27891384806358, "cost2_mean": -93.22840450804537, "system_level_velocity_max": 13.889629262096934, "system_level_velocity_min": 9.500287704848532, "cost1_min": 271.81531636489376, "cost1_mean": 340.0131173898398, "outflow_rate_max": 1200.091352287681, "system_level_velocity_mean": 11.953964355994298, "cost1_max": 383.33173756554527, "outflow_rate_min": 882.9627240110859}, "timesteps_this_iter": 79239, "time_total_s": 16113.26498913765, "episodes_this_iter": 43, "info": {"update_time_ms": 8.831, "grad_time_ms": 19635.495, "sample_time_ms": 24521.921, "default": {"vf_explained_var": 0.8026614785194397, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.2510483264923096, "total_loss": 24.577180862426758, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02170379087328911, "vf_loss": 24.58761215209961, "kl": 0.0166984423995018}, "load_time_ms": 79.051, "num_steps_trained": 30245612, "num_steps_sampled": 30245612}, "episode_reward_max": 939.8364566578267, "policy_reward_mean": {}, "training_iteration": 258, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30245612, "episode_reward_min": 686.4600232736025, "pid": 14989, "iterations_since_restore": 58, "num_metric_batches_dropped": 0, "episodes_total": 15205, "timesteps_since_restore": 4539020, "episode_len_mean": 749.31}
{"time_this_iter_s": 46.8502893447876, "done": false, "date": "2019-05-09_18-35-27", "episode_reward_mean": 802.5751607388054, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34f60>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee345c0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34c18>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2579.5642693042755, "timestamp": 1557426927, "custom_metrics": {"cost2_max": -67.22485172443793, "outflow_rate_mean": 1059.877965828626, "cost2_min": -113.15315390099697, "cost2_mean": -92.16251743497372, "system_level_velocity_max": 13.889629262096934, "system_level_velocity_min": 9.500287704848532, "cost1_min": 271.81531636489376, "cost1_mean": 337.18447953530483, "outflow_rate_max": 1237.5113051627177, "system_level_velocity_mean": 11.856731115512275, "cost1_max": 394.6924288946896, "outflow_rate_min": 878.2304847754313}, "timesteps_this_iter": 80886, "time_total_s": 16160.115278482437, "episodes_this_iter": 42, "info": {"update_time_ms": 9.339, "grad_time_ms": 19771.592, "sample_time_ms": 24636.218, "default": {"vf_explained_var": 0.8610396981239319, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.283480167388916, "total_loss": 22.256284713745117, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02154587022960186, "vf_loss": 22.266342163085938, "kl": 0.01701989769935608}, "load_time_ms": 83.874, "num_steps_trained": 30326498, "num_steps_sampled": 30326498}, "episode_reward_max": 954.9806835301835, "policy_reward_mean": {}, "training_iteration": 259, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30326498, "episode_reward_min": 686.4600232736025, "pid": 14989, "iterations_since_restore": 59, "num_metric_batches_dropped": 0, "episodes_total": 15247, "timesteps_since_restore": 4619906, "episode_len_mean": 749.31}
{"time_this_iter_s": 45.06776142120361, "done": false, "date": "2019-05-09_18-36-13", "episode_reward_mean": 797.6968644089154, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f630>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f4e0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fba8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2624.632030725479, "timestamp": 1557426973, "custom_metrics": {"cost2_max": -69.51769055412552, "outflow_rate_mean": 1056.3318346123176, "cost2_min": -116.0336311497314, "cost2_mean": -92.87129481255651, "system_level_velocity_max": 13.840136526879133, "system_level_velocity_min": 9.517471905071709, "cost1_min": 274.10615398053926, "cost1_mean": 338.23721719306565, "outflow_rate_max": 1283.1427297070275, "system_level_velocity_mean": 11.871356993192101, "cost1_max": 396.2924312866433, "outflow_rate_min": 854.4582175158176}, "timesteps_this_iter": 79266, "time_total_s": 16205.18303990364, "episodes_this_iter": 42, "info": {"update_time_ms": 9.188, "grad_time_ms": 19739.673, "sample_time_ms": 24658.25, "default": {"vf_explained_var": 0.8430008292198181, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.262575149536133, "total_loss": 22.258211135864258, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020965835079550743, "vf_loss": 22.268146514892578, "kl": 0.01634083315730095}, "load_time_ms": 83.793, "num_steps_trained": 30405764, "num_steps_sampled": 30405764}, "episode_reward_max": 954.9806835301835, "policy_reward_mean": {}, "training_iteration": 260, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30405764, "episode_reward_min": 655.7194664291723, "pid": 14989, "iterations_since_restore": 60, "num_metric_batches_dropped": 0, "episodes_total": 15289, "timesteps_since_restore": 4699172, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.07698106765747, "done": false, "date": "2019-05-09_18-36-57", "episode_reward_mean": 789.4724471402154, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34be0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee67f28>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34a20>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2668.7090117931366, "timestamp": 1557427017, "custom_metrics": {"cost2_max": -65.01827167590169, "outflow_rate_mean": 1045.1269635435794, "cost2_min": -116.0336311497314, "cost2_mean": -92.27047056468479, "system_level_velocity_max": 13.840136526879133, "system_level_velocity_min": 9.211249673669263, "cost1_min": 259.8689588773188, "cost1_mean": 335.8061970032593, "outflow_rate_max": 1283.1427297070275, "system_level_velocity_mean": 11.789067533211112, "cost1_max": 396.2924312866433, "outflow_rate_min": 757.1458715777901}, "timesteps_this_iter": 80955, "time_total_s": 16249.260020971298, "episodes_this_iter": 43, "info": {"update_time_ms": 9.452, "grad_time_ms": 19422.843, "sample_time_ms": 24738.092, "default": {"vf_explained_var": 0.8610154390335083, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.2772059440612793, "total_loss": 20.12958526611328, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02073325775563717, "vf_loss": 20.13939094543457, "kl": 0.01618936099112034}, "load_time_ms": 80.462, "num_steps_trained": 30486719, "num_steps_sampled": 30486719}, "episode_reward_max": 954.9806835301835, "policy_reward_mean": {}, "training_iteration": 261, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30486719, "episode_reward_min": 591.7473506758569, "pid": 14989, "iterations_since_restore": 61, "num_metric_batches_dropped": 0, "episodes_total": 15332, "timesteps_since_restore": 4780127, "episode_len_mean": 751.0}
{"time_this_iter_s": 43.888025760650635, "done": false, "date": "2019-05-09_18-37-41", "episode_reward_mean": 796.7375146629366, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc88>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fcf8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fda0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2712.5970375537872, "timestamp": 1557427061, "custom_metrics": {"cost2_max": -58.45625109827602, "outflow_rate_mean": 1050.3187857512241, "cost2_min": -117.79475725685384, "cost2_mean": -92.00281800519195, "system_level_velocity_max": 13.8459718622859, "system_level_velocity_min": 9.211249673669263, "cost1_min": 259.8689588773188, "cost1_mean": 338.7729233567118, "outflow_rate_max": 1283.1427297070275, "system_level_velocity_mean": 11.889526093168328, "cost1_max": 394.0818446726195, "outflow_rate_min": 757.1458715777901}, "timesteps_this_iter": 78963, "time_total_s": 16293.148046731949, "episodes_this_iter": 43, "info": {"update_time_ms": 9.578, "grad_time_ms": 19455.406, "sample_time_ms": 24843.093, "default": {"vf_explained_var": 0.8047361373901367, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.2518327236175537, "total_loss": 24.334243774414062, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021557236090302467, "vf_loss": 24.344491958618164, "kl": 0.016753550618886948}, "load_time_ms": 78.806, "num_steps_trained": 30565682, "num_steps_sampled": 30565682}, "episode_reward_max": 962.8252415119088, "policy_reward_mean": {}, "training_iteration": 262, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30565682, "episode_reward_min": 591.7473506758569, "pid": 14989, "iterations_since_restore": 62, "num_metric_batches_dropped": 0, "episodes_total": 15375, "timesteps_since_restore": 4859090, "episode_len_mean": 751.0}
{"time_this_iter_s": 43.64894962310791, "done": false, "date": "2019-05-09_18-38-24", "episode_reward_mean": 804.193519209115, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34668>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34358>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34da0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2756.245987176895, "timestamp": 1557427104, "custom_metrics": {"cost2_max": -58.45625109827602, "outflow_rate_mean": 1061.5297312148714, "cost2_min": -124.14545432943302, "cost2_mean": -93.74553743294622, "system_level_velocity_max": 14.310526834250933, "system_level_velocity_min": 9.211249673669263, "cost1_min": 118.47180760706829, "cost1_mean": 342.54233017668986, "outflow_rate_max": 1293.6786445896262, "system_level_velocity_mean": 12.098630195739858, "cost1_max": 409.81637210944314, "outflow_rate_min": 439.831286793125}, "timesteps_this_iter": 79143, "time_total_s": 16336.796996355057, "episodes_this_iter": 43, "info": {"update_time_ms": 9.543, "grad_time_ms": 19342.388, "sample_time_ms": 24973.346, "default": {"vf_explained_var": 0.820774495601654, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.2480196952819824, "total_loss": 23.39052963256836, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021171921864151955, "vf_loss": 23.40069007873535, "kl": 0.016311846673488617}, "load_time_ms": 73.927, "num_steps_trained": 30644825, "num_steps_sampled": 30644825}, "episode_reward_max": 962.8252415119088, "policy_reward_mean": {}, "training_iteration": 263, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30644825, "episode_reward_min": 230.25036554263303, "pid": 14989, "iterations_since_restore": 63, "num_metric_batches_dropped": 0, "episodes_total": 15418, "timesteps_since_restore": 4938233, "episode_len_mean": 745.83}
{"time_this_iter_s": 43.58215522766113, "done": false, "date": "2019-05-09_18-39-08", "episode_reward_mean": 793.2930270395881, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f630>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f198>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fba8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2799.8281424045563, "timestamp": 1557427148, "custom_metrics": {"cost2_max": -40.15046069664726, "outflow_rate_mean": 1055.597945798738, "cost2_min": -124.14545432943302, "cost2_mean": -94.06327653980753, "system_level_velocity_max": 14.740345531526444, "system_level_velocity_min": 8.96358725840814, "cost1_min": 106.44558543091478, "cost1_mean": 339.72472836153906, "outflow_rate_max": 1293.6786445896262, "system_level_velocity_mean": 12.186805406287913, "cost1_max": 409.81637210944314, "outflow_rate_min": 401.54406311329257}, "timesteps_this_iter": 79910, "time_total_s": 16380.379151582718, "episodes_this_iter": 44, "info": {"update_time_ms": 9.687, "grad_time_ms": 19223.734, "sample_time_ms": 25075.82, "default": {"vf_explained_var": 0.8306352496147156, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.288360118865967, "total_loss": 22.992061614990234, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021784039214253426, "vf_loss": 23.00260353088379, "kl": 0.016659459099173546}, "load_time_ms": 83.446, "num_steps_trained": 30724735, "num_steps_sampled": 30724735}, "episode_reward_max": 962.8252415119088, "policy_reward_mean": {}, "training_iteration": 264, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30724735, "episode_reward_min": 202.1478670177756, "pid": 14989, "iterations_since_restore": 64, "num_metric_batches_dropped": 0, "episodes_total": 15462, "timesteps_since_restore": 5018143, "episode_len_mean": 736.19}
{"time_this_iter_s": 42.63743543624878, "done": false, "date": "2019-05-09_18-39-51", "episode_reward_mean": 778.951220400141, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34ac8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34550>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34128>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2842.465577840805, "timestamp": 1557427191, "custom_metrics": {"cost2_max": -40.15046069664726, "outflow_rate_mean": 1048.9085844975655, "cost2_min": -124.7225218534914, "cost2_mean": -93.05837935435429, "system_level_velocity_max": 14.740345531526444, "system_level_velocity_min": 8.96358725840814, "cost1_min": 106.44558543091478, "cost1_mean": 337.19737260999335, "outflow_rate_max": 1270.8623974011587, "system_level_velocity_mean": 12.116069120215288, "cost1_max": 408.3385763661579, "outflow_rate_min": 401.54406311329257}, "timesteps_this_iter": 78056, "time_total_s": 16423.016587018967, "episodes_this_iter": 44, "info": {"update_time_ms": 9.762, "grad_time_ms": 19140.584, "sample_time_ms": 25010.192, "default": {"vf_explained_var": 0.8483877778053284, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.27523136138916, "total_loss": 20.698474884033203, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021097512915730476, "vf_loss": 20.70806121826172, "kl": 0.017054766416549683}, "load_time_ms": 83.682, "num_steps_trained": 30802791, "num_steps_sampled": 30802791}, "episode_reward_max": 961.0846773302296, "policy_reward_mean": {}, "training_iteration": 265, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30802791, "episode_reward_min": 202.1478670177756, "pid": 14989, "iterations_since_restore": 65, "num_metric_batches_dropped": 0, "episodes_total": 15506, "timesteps_since_restore": 5096199, "episode_len_mean": 736.15}
{"time_this_iter_s": 44.27309560775757, "done": false, "date": "2019-05-09_18-40-35", "episode_reward_mean": 783.2185585682512, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc88>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f668>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fda0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2886.7386734485626, "timestamp": 1557427235, "custom_metrics": {"cost2_max": -61.643294390993105, "outflow_rate_mean": 1055.5948471555253, "cost2_min": -124.7225218534914, "cost2_mean": -92.90839342812615, "system_level_velocity_max": 14.305789764734657, "system_level_velocity_min": 9.01027323192569, "cost1_min": 117.06201263281638, "cost1_mean": 340.584351241099, "outflow_rate_max": 1270.8623974011587, "system_level_velocity_mean": 12.067971528821456, "cost1_max": 408.3385763661579, "outflow_rate_min": 436.6436083593398}, "timesteps_this_iter": 79204, "time_total_s": 16467.289682626724, "episodes_this_iter": 43, "info": {"update_time_ms": 9.321, "grad_time_ms": 19147.691, "sample_time_ms": 25032.397, "default": {"vf_explained_var": 0.8389480710029602, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.275836229324341, "total_loss": 22.124021530151367, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02076634205877781, "vf_loss": 22.133609771728516, "kl": 0.01656237244606018}, "load_time_ms": 82.317, "num_steps_trained": 30881995, "num_steps_sampled": 30881995}, "episode_reward_max": 961.0846773302296, "policy_reward_mean": {}, "training_iteration": 266, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30881995, "episode_reward_min": 223.27571601327438, "pid": 14989, "iterations_since_restore": 66, "num_metric_batches_dropped": 0, "episodes_total": 15549, "timesteps_since_restore": 5175403, "episode_len_mean": 745.79}
{"time_this_iter_s": 44.98603582382202, "done": false, "date": "2019-05-09_18-41-20", "episode_reward_mean": 779.9322096247961, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34208>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34048>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34da0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2931.7247092723846, "timestamp": 1557427280, "custom_metrics": {"cost2_max": -61.643294390993105, "outflow_rate_mean": 1055.8580838978303, "cost2_min": -116.1214073292253, "cost2_mean": -94.9034533526548, "system_level_velocity_max": 14.305789764734657, "system_level_velocity_min": 9.01027323192569, "cost1_min": 117.06201263281638, "cost1_mean": 340.4816491793866, "outflow_rate_max": 1270.8623974011587, "system_level_velocity_mean": 12.062007796378516, "cost1_max": 408.3385763661579, "outflow_rate_min": 436.6436083593398}, "timesteps_this_iter": 80936, "time_total_s": 16512.275718450546, "episodes_this_iter": 43, "info": {"update_time_ms": 9.167, "grad_time_ms": 19329.055, "sample_time_ms": 24882.447, "default": {"vf_explained_var": 0.8699318766593933, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.3080551624298096, "total_loss": 19.533252716064453, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021899515762925148, "vf_loss": 19.543916702270508, "kl": 0.016643768176436424}, "load_time_ms": 79.181, "num_steps_trained": 30962931, "num_steps_sampled": 30962931}, "episode_reward_max": 954.7786090400909, "policy_reward_mean": {}, "training_iteration": 267, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 30962931, "episode_reward_min": 223.27571601327438, "pid": 14989, "iterations_since_restore": 67, "num_metric_batches_dropped": 0, "episodes_total": 15592, "timesteps_since_restore": 5256339, "episode_len_mean": 745.79}
{"time_this_iter_s": 43.23832058906555, "done": false, "date": "2019-05-09_18-42-03", "episode_reward_mean": 785.3395870281478, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f630>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f438>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fba8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 2974.96302986145, "timestamp": 1557427323, "custom_metrics": {"cost2_max": -65.80026378377933, "outflow_rate_mean": 1063.6510853797213, "cost2_min": -120.94114364501465, "cost2_mean": -98.37726124400598, "system_level_velocity_max": 14.705620839166745, "system_level_velocity_min": 9.034139494539389, "cost1_min": 110.49637386503407, "cost1_mean": 342.4249902431824, "outflow_rate_max": 1332.4606299316843, "system_level_velocity_mean": 12.23440909927265, "cost1_max": 418.6794625906611, "outflow_rate_min": 409.0430917688608}, "timesteps_this_iter": 78887, "time_total_s": 16555.51403903961, "episodes_this_iter": 44, "info": {"update_time_ms": 8.987, "grad_time_ms": 19413.561, "sample_time_ms": 24561.458, "default": {"vf_explained_var": 0.8435482382774353, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.2776036262512207, "total_loss": 23.069868087768555, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021036574617028236, "vf_loss": 23.079500198364258, "kl": 0.01689327135682106}, "load_time_ms": 75.17, "num_steps_trained": 31041818, "num_steps_sampled": 31041818}, "episode_reward_max": 995.6463985993321, "policy_reward_mean": {}, "training_iteration": 268, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31041818, "episode_reward_min": 213.09749334327321, "pid": 14989, "iterations_since_restore": 68, "num_metric_batches_dropped": 0, "episodes_total": 15636, "timesteps_since_restore": 5335226, "episode_len_mean": 739.62}
{"time_this_iter_s": 45.16850543022156, "done": false, "date": "2019-05-09_18-42-49", "episode_reward_mean": 781.0020570869632, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34f98>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29d30>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29048>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3020.1315352916718, "timestamp": 1557427369, "custom_metrics": {"cost2_max": -65.80026378377933, "outflow_rate_mean": 1056.8650684928834, "cost2_min": -120.94114364501465, "cost2_mean": -98.15052498124226, "system_level_velocity_max": 14.705620839166745, "system_level_velocity_min": 10.94393592711819, "cost1_min": 110.49637386503407, "cost1_mean": 342.10822859088313, "outflow_rate_max": 1332.4606299316843, "system_level_velocity_mean": 12.230458212156499, "cost1_max": 418.6794625906611, "outflow_rate_min": 409.0430917688608}, "timesteps_this_iter": 80807, "time_total_s": 16600.682544469833, "episodes_this_iter": 43, "info": {"update_time_ms": 8.841, "grad_time_ms": 19562.788, "sample_time_ms": 24256.193, "default": {"vf_explained_var": 0.8704430460929871, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3056387901306152, "total_loss": 18.663545608520508, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021514151245355606, "vf_loss": 18.674013137817383, "kl": 0.01636451855301857}, "load_time_ms": 67.01, "num_steps_trained": 31122625, "num_steps_sampled": 31122625}, "episode_reward_max": 995.6463985993321, "policy_reward_mean": {}, "training_iteration": 269, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31122625, "episode_reward_min": 213.09749334327321, "pid": 14989, "iterations_since_restore": 69, "num_metric_batches_dropped": 0, "episodes_total": 15679, "timesteps_since_restore": 5416033, "episode_len_mean": 739.62}
{"time_this_iter_s": 44.24122405052185, "done": false, "date": "2019-05-09_18-43-33", "episode_reward_mean": 789.9017438826293, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc88>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fdd8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fda0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3064.3727593421936, "timestamp": 1557427413, "custom_metrics": {"cost2_max": -66.69837496370036, "outflow_rate_mean": 1066.4803240923836, "cost2_min": -122.00055760881956, "cost2_mean": -97.666917059774, "system_level_velocity_max": 14.705620839166745, "system_level_velocity_min": 10.847274103563244, "cost1_min": 110.49637386503407, "cost1_mean": 346.1112339408257, "outflow_rate_max": 1332.4606299316843, "system_level_velocity_mean": 12.289291783396552, "cost1_max": 418.6794625906611, "outflow_rate_min": 409.0430917688608}, "timesteps_this_iter": 79249, "time_total_s": 16644.923768520355, "episodes_this_iter": 43, "info": {"update_time_ms": 9.263, "grad_time_ms": 19649.623, "sample_time_ms": 24092.093, "default": {"vf_explained_var": 0.8677155375480652, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.2864527702331543, "total_loss": 19.152345657348633, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020650338381528854, "vf_loss": 19.161455154418945, "kl": 0.017095692455768585}, "load_time_ms": 60.372, "num_steps_trained": 31201874, "num_steps_sampled": 31201874}, "episode_reward_max": 995.6463985993321, "policy_reward_mean": {}, "training_iteration": 270, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31201874, "episode_reward_min": 213.09749334327321, "pid": 14989, "iterations_since_restore": 70, "num_metric_batches_dropped": 0, "episodes_total": 15722, "timesteps_since_restore": 5495282, "episode_len_mean": 744.84}
{"time_this_iter_s": 44.82556700706482, "done": false, "date": "2019-05-09_18-44-18", "episode_reward_mean": 797.3214998846001, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29cc0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29e48>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29a58>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3109.1983263492584, "timestamp": 1557427458, "custom_metrics": {"cost2_max": -74.84174596474186, "outflow_rate_mean": 1072.4775465200867, "cost2_min": -122.00055760881956, "cost2_mean": -98.63096292064444, "system_level_velocity_max": 14.542918863119215, "system_level_velocity_min": 10.349728910765275, "cost1_min": 290.89109887488144, "cost1_mean": 348.7500456948609, "outflow_rate_max": 1293.125653861499, "system_level_velocity_mean": 12.271270552884442, "cost1_max": 410.7737145904498, "outflow_rate_min": 878.5746465710662}, "timesteps_this_iter": 79615, "time_total_s": 16689.74933552742, "episodes_this_iter": 43, "info": {"update_time_ms": 9.135, "grad_time_ms": 19894.902, "sample_time_ms": 23931.403, "default": {"vf_explained_var": 0.8659378290176392, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.315415143966675, "total_loss": 19.11542510986328, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021271713078022003, "vf_loss": 19.125822067260742, "kl": 0.01611194759607315}, "load_time_ms": 53.596, "num_steps_trained": 31281489, "num_steps_sampled": 31281489}, "episode_reward_max": 967.535312543059, "policy_reward_mean": {}, "training_iteration": 271, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31281489, "episode_reward_min": 683.6149497466905, "pid": 14989, "iterations_since_restore": 71, "num_metric_batches_dropped": 0, "episodes_total": 15765, "timesteps_since_restore": 5574897, "episode_len_mean": 751.0}
{"time_this_iter_s": 46.57509207725525, "done": false, "date": "2019-05-09_18-45-04", "episode_reward_mean": 795.5385636607731, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29e80>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29278>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee297b8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3155.7734184265137, "timestamp": 1557427504, "custom_metrics": {"cost2_max": -74.84174596474186, "outflow_rate_mean": 1073.0538389327191, "cost2_min": -125.40887765579987, "cost2_mean": -97.26728761759992, "system_level_velocity_max": 14.542918863119215, "system_level_velocity_min": 9.307675228536036, "cost1_min": 260.03620019173127, "cost1_mean": 348.44678052813686, "outflow_rate_max": 1302.064034938586, "system_level_velocity_mean": 12.260330685209304, "cost1_max": 410.973324392933, "outflow_rate_min": 791.5950437826497}, "timesteps_this_iter": 78263, "time_total_s": 16736.324427604675, "episodes_this_iter": 43, "info": {"update_time_ms": 9.094, "grad_time_ms": 19978.998, "sample_time_ms": 24123.529, "default": {"vf_explained_var": 0.8658335208892822, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3130767345428467, "total_loss": 18.52911376953125, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022299356758594513, "vf_loss": 18.540420532226562, "kl": 0.01628910005092621}, "load_time_ms": 47.415, "num_steps_trained": 31359752, "num_steps_sampled": 31359752}, "episode_reward_max": 948.3677330955516, "policy_reward_mean": {}, "training_iteration": 272, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31359752, "episode_reward_min": 655.3422397068026, "pid": 14989, "iterations_since_restore": 72, "num_metric_batches_dropped": 0, "episodes_total": 15808, "timesteps_since_restore": 5653160, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.26999878883362, "done": false, "date": "2019-05-09_18-45-49", "episode_reward_mean": 789.8566582174266, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee346d8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee345c0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34588>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3200.0434172153473, "timestamp": 1557427549, "custom_metrics": {"cost2_max": -65.98631774000012, "outflow_rate_mean": 1067.938175471557, "cost2_min": -125.40887765579987, "cost2_mean": -95.5250396827423, "system_level_velocity_max": 14.542918863119215, "system_level_velocity_min": 9.307675228536036, "cost1_min": 116.39188291532001, "cost1_mean": 345.2057540430683, "outflow_rate_max": 1302.064034938586, "system_level_velocity_mean": 12.243520080039822, "cost1_max": 410.973324392933, "outflow_rate_min": 423.81869056265265}, "timesteps_this_iter": 78327, "time_total_s": 16780.59442639351, "episodes_this_iter": 43, "info": {"update_time_ms": 9.043, "grad_time_ms": 19857.295, "sample_time_ms": 24314.606, "default": {"vf_explained_var": 0.8621023297309875, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.310832977294922, "total_loss": 20.50168228149414, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022150246426463127, "vf_loss": 20.512056350708008, "kl": 0.017446111887693405}, "load_time_ms": 41.825, "num_steps_trained": 31438079, "num_steps_sampled": 31438079}, "episode_reward_max": 948.3677330955516, "policy_reward_mean": {}, "training_iteration": 273, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31438079, "episode_reward_min": 223.9998976842492, "pid": 14989, "iterations_since_restore": 73, "num_metric_batches_dropped": 0, "episodes_total": 15851, "timesteps_since_restore": 5731487, "episode_len_mean": 745.79}
{"time_this_iter_s": 43.01982569694519, "done": false, "date": "2019-05-09_18-46-32", "episode_reward_mean": 775.4183296900609, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29588>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29438>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29390>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3243.0632429122925, "timestamp": 1557427592, "custom_metrics": {"cost2_max": -65.98631774000012, "outflow_rate_mean": 1048.0488164904473, "cost2_min": -120.97289372649144, "cost2_mean": -94.01346782582851, "system_level_velocity_max": 14.639455154548507, "system_level_velocity_min": 8.38005027178283, "cost1_min": 116.39188291532001, "cost1_mean": 340.2699581515846, "outflow_rate_max": 1295.8914794196508, "system_level_velocity_mean": 12.087847040597271, "cost1_max": 414.3654790760346, "outflow_rate_min": 423.81869056265265}, "timesteps_this_iter": 79726, "time_total_s": 16823.614252090454, "episodes_this_iter": 43, "info": {"update_time_ms": 8.976, "grad_time_ms": 19705.106, "sample_time_ms": 24414.939, "default": {"vf_explained_var": 0.8661049604415894, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3474082946777344, "total_loss": 20.554643630981445, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022154971957206726, "vf_loss": 20.565467834472656, "kl": 0.01678689569234848}, "load_time_ms": 34.78, "num_steps_trained": 31517805, "num_steps_sampled": 31517805}, "episode_reward_max": 939.126898317585, "policy_reward_mean": {}, "training_iteration": 274, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31517805, "episode_reward_min": 223.9998976842492, "pid": 14989, "iterations_since_restore": 74, "num_metric_batches_dropped": 0, "episodes_total": 15894, "timesteps_since_restore": 5811213, "episode_len_mean": 745.79}
{"time_this_iter_s": 42.93254089355469, "done": false, "date": "2019-05-09_18-47-15", "episode_reward_mean": 761.4296346123778, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34588>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee345c0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee346d8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3285.995783805847, "timestamp": 1557427635, "custom_metrics": {"cost2_max": -54.76341101960459, "outflow_rate_mean": 1034.1448806555884, "cost2_min": -126.38051569233363, "cost2_mean": -92.8616131666083, "system_level_velocity_max": 14.775752962201674, "system_level_velocity_min": 8.38005027178283, "cost1_min": 51.21413164269029, "cost1_mean": 336.8736538820693, "outflow_rate_max": 1377.0274280864926, "system_level_velocity_mean": 12.065962520835544, "cost1_max": 422.2801160221414, "outflow_rate_min": 253.51364256198752}, "timesteps_this_iter": 78092, "time_total_s": 16866.54679298401, "episodes_this_iter": 45, "info": {"update_time_ms": 8.844, "grad_time_ms": 19581.636, "sample_time_ms": 24575.149, "default": {"vf_explained_var": 0.858532726764679, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3419744968414307, "total_loss": 20.282047271728516, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021427704021334648, "vf_loss": 20.291852951049805, "kl": 0.017217621207237244}, "load_time_ms": 28.78, "num_steps_trained": 31595897, "num_steps_sampled": 31595897}, "episode_reward_max": 1013.4244553071144, "policy_reward_mean": {}, "training_iteration": 275, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31595897, "episode_reward_min": 69.5560219974659, "pid": 14989, "iterations_since_restore": 75, "num_metric_batches_dropped": 0, "episodes_total": 15939, "timesteps_since_restore": 5889305, "episode_len_mean": 739.52}
{"time_this_iter_s": 42.1956205368042, "done": false, "date": "2019-05-09_18-47-57", "episode_reward_mean": 753.811739102546, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34ba8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee341d0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34978>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3328.1914043426514, "timestamp": 1557427677, "custom_metrics": {"cost2_max": -54.76341101960459, "outflow_rate_mean": 1036.3163447985432, "cost2_min": -126.38051569233363, "cost2_mean": -93.7056901771394, "system_level_velocity_max": 14.775752962201674, "system_level_velocity_min": 8.970504330354178, "cost1_min": 51.21413164269029, "cost1_mean": 336.53691605215835, "outflow_rate_max": 1377.0274280864926, "system_level_velocity_mean": 12.15556058604192, "cost1_max": 422.2801160221414, "outflow_rate_min": 253.51364256198752}, "timesteps_this_iter": 77245, "time_total_s": 16908.742413520813, "episodes_this_iter": 44, "info": {"update_time_ms": 8.904, "grad_time_ms": 19441.372, "sample_time_ms": 24507.713, "default": {"vf_explained_var": 0.8530244827270508, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3367574214935303, "total_loss": 20.836057662963867, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02174387313425541, "vf_loss": 20.846271514892578, "kl": 0.017081154510378838}, "load_time_ms": 28.704, "num_steps_trained": 31673142, "num_steps_sampled": 31673142}, "episode_reward_max": 1013.4244553071144, "policy_reward_mean": {}, "training_iteration": 276, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31673142, "episode_reward_min": 69.5560219974659, "pid": 14989, "iterations_since_restore": 76, "num_metric_batches_dropped": 0, "episodes_total": 15983, "timesteps_since_restore": 5966550, "episode_len_mean": 733.44}
{"time_this_iter_s": 41.4962477684021, "done": false, "date": "2019-05-09_18-48-38", "episode_reward_mean": 754.8025542600492, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f5c0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f240>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fcf8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3369.6876521110535, "timestamp": 1557427718, "custom_metrics": {"cost2_max": -56.634028650923554, "outflow_rate_mean": 1039.1534883675852, "cost2_min": -115.66819737767413, "cost2_mean": -92.17319851696095, "system_level_velocity_max": 14.186897554840703, "system_level_velocity_min": 9.122315654633985, "cost1_min": 106.33616887565391, "cost1_mean": 337.01070209875905, "outflow_rate_max": 1219.9711821103756, "system_level_velocity_mean": 12.179760348284805, "cost1_max": 398.58562078064233, "outflow_rate_min": 399.510811611971}, "timesteps_this_iter": 77492, "time_total_s": 16950.238661289215, "episodes_this_iter": 44, "info": {"update_time_ms": 8.945, "grad_time_ms": 19226.399, "sample_time_ms": 24378.164, "default": {"vf_explained_var": 0.848869264125824, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3270750045776367, "total_loss": 20.66853141784668, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02150963433086872, "vf_loss": 20.678516387939453, "kl": 0.01707299053668976}, "load_time_ms": 26.93, "num_steps_trained": 31750634, "num_steps_sampled": 31750634}, "episode_reward_max": 953.0039811237731, "policy_reward_mean": {}, "training_iteration": 277, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31750634, "episode_reward_min": 209.52887092729517, "pid": 14989, "iterations_since_restore": 77, "num_metric_batches_dropped": 0, "episodes_total": 16027, "timesteps_since_restore": 6044042, "episode_len_mean": 734.34}
{"time_this_iter_s": 42.87706756591797, "done": false, "date": "2019-05-09_18-49-21", "episode_reward_mean": 764.0693085908716, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee342e8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee67f28>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fcf8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3412.5647196769714, "timestamp": 1557427761, "custom_metrics": {"cost2_max": -56.634028650923554, "outflow_rate_mean": 1045.4927313389394, "cost2_min": -116.11956217676979, "cost2_mean": -91.26140859084384, "system_level_velocity_max": 14.42302255448124, "system_level_velocity_min": 9.287761624976286, "cost1_min": 106.33616887565391, "cost1_mean": 337.3481872289753, "outflow_rate_max": 1233.0428457039834, "system_level_velocity_mean": 12.156885622883253, "cost1_max": 396.71636896918307, "outflow_rate_min": 399.510811611971}, "timesteps_this_iter": 77572, "time_total_s": 16993.115728855133, "episodes_this_iter": 45, "info": {"update_time_ms": 9.074, "grad_time_ms": 19201.365, "sample_time_ms": 24365.543, "default": {"vf_explained_var": 0.8368054628372192, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3216214179992676, "total_loss": 21.833162307739258, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022852476686239243, "vf_loss": 21.844362258911133, "kl": 0.017261533066630363}, "load_time_ms": 27.312, "num_steps_trained": 31828206, "num_steps_sampled": 31828206}, "episode_reward_max": 966.8066564250498, "policy_reward_mean": {}, "training_iteration": 278, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31828206, "episode_reward_min": 209.52887092729517, "pid": 14989, "iterations_since_restore": 78, "num_metric_batches_dropped": 0, "episodes_total": 16072, "timesteps_since_restore": 6121614, "episode_len_mean": 736.12}
{"time_this_iter_s": 42.96970987319946, "done": false, "date": "2019-05-09_18-50-04", "episode_reward_mean": 768.5734881575672, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f390>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f0b8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fd68>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3455.534429550171, "timestamp": 1557427804, "custom_metrics": {"cost2_max": -39.884113122402525, "outflow_rate_mean": 1042.1129513892927, "cost2_min": -118.31658822241319, "cost2_mean": -90.77781698699503, "system_level_velocity_max": 14.42302255448124, "system_level_velocity_min": 8.663010759807065, "cost1_min": 117.14250092907656, "cost1_mean": 336.17780104171476, "outflow_rate_max": 1233.0428457039834, "system_level_velocity_mean": 12.020113543656084, "cost1_max": 396.71636896918307, "outflow_rate_min": 434.42781403417285}, "timesteps_this_iter": 77537, "time_total_s": 17036.085438728333, "episodes_this_iter": 43, "info": {"update_time_ms": 9.102, "grad_time_ms": 19157.82, "sample_time_ms": 24182.188, "default": {"vf_explained_var": 0.8534879684448242, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3522443771362305, "total_loss": 20.18634796142578, "cur_lr": 0.0005000000237487257, "policy_loss": -0.019943710416555405, "vf_loss": 20.194854736328125, "kl": 0.01694294810295105}, "load_time_ms": 31.619, "num_steps_trained": 31905743, "num_steps_sampled": 31905743}, "episode_reward_max": 966.8066564250498, "policy_reward_mean": {}, "training_iteration": 279, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31905743, "episode_reward_min": 223.0291065526492, "pid": 14989, "iterations_since_restore": 79, "num_metric_batches_dropped": 0, "episodes_total": 16115, "timesteps_since_restore": 6199151, "episode_len_mean": 741.45}
{"time_this_iter_s": 45.16262459754944, "done": false, "date": "2019-05-09_18-50-50", "episode_reward_mean": 759.8515906039834, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee349e8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34400>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee340f0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3500.6970541477203, "timestamp": 1557427850, "custom_metrics": {"cost2_max": -39.884113122402525, "outflow_rate_mean": 1029.0962328943647, "cost2_min": -118.31658822241319, "cost2_mean": -90.17030597679795, "system_level_velocity_max": 14.42302255448124, "system_level_velocity_min": 8.663010759807065, "cost1_min": 113.16923498664818, "cost1_mean": 335.15495056471246, "outflow_rate_max": 1260.962827586037, "system_level_velocity_mean": 11.97996511261257, "cost1_max": 400.25448005386477, "outflow_rate_min": 432.5103441728948}, "timesteps_this_iter": 78415, "time_total_s": 17081.248063325882, "episodes_this_iter": 44, "info": {"update_time_ms": 8.953, "grad_time_ms": 19302.67, "sample_time_ms": 24124.316, "default": {"vf_explained_var": 0.8426768779754639, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.372405767440796, "total_loss": 20.446195602416992, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020850518718361855, "vf_loss": 20.45591163635254, "kl": 0.016498232260346413}, "load_time_ms": 32.17, "num_steps_trained": 31984158, "num_steps_sampled": 31984158}, "episode_reward_max": 926.6765511794355, "policy_reward_mean": {}, "training_iteration": 280, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 31984158, "episode_reward_min": 203.04147863960563, "pid": 14989, "iterations_since_restore": 80, "num_metric_batches_dropped": 0, "episodes_total": 16159, "timesteps_since_restore": 6277566, "episode_len_mean": 741.32}
{"time_this_iter_s": 44.77318549156189, "done": false, "date": "2019-05-09_18-51-34", "episode_reward_mean": 760.8767137572277, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f240>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f5c0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fa20>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3545.470239639282, "timestamp": 1557427894, "custom_metrics": {"cost2_max": -39.884113122402525, "outflow_rate_mean": 1029.3299012425537, "cost2_min": -115.23856353116835, "cost2_mean": -86.93523728651229, "system_level_velocity_max": 14.17257260282807, "system_level_velocity_min": 8.663010759807065, "cost1_min": 113.16923498664818, "cost1_mean": 336.0737919471617, "outflow_rate_max": 1260.962827586037, "system_level_velocity_mean": 11.947954707887721, "cost1_max": 400.25448005386477, "outflow_rate_min": 432.5103441728948}, "timesteps_this_iter": 78458, "time_total_s": 17126.021248817444, "episodes_this_iter": 43, "info": {"update_time_ms": 8.968, "grad_time_ms": 19285.242, "sample_time_ms": 24141.243, "default": {"vf_explained_var": 0.8633994460105896, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.382108449935913, "total_loss": 18.66464614868164, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020539814606308937, "vf_loss": 18.67348289489746, "kl": 0.0173377376049757}, "load_time_ms": 29.013, "num_steps_trained": 32062616, "num_steps_sampled": 32062616}, "episode_reward_max": 926.6765511794355, "policy_reward_mean": {}, "training_iteration": 281, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32062616, "episode_reward_min": 203.04147863960563, "pid": 14989, "iterations_since_restore": 81, "num_metric_batches_dropped": 0, "episodes_total": 16202, "timesteps_since_restore": 6356024, "episode_len_mean": 745.67}
{"time_this_iter_s": 45.16553282737732, "done": false, "date": "2019-05-09_18-52-20", "episode_reward_mean": 756.388668042922, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fac8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0ff60>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f780>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3590.6357724666595, "timestamp": 1557427940, "custom_metrics": {"cost2_max": -53.44862947905936, "outflow_rate_mean": 1021.8563274105409, "cost2_min": -112.73950899127283, "cost2_mean": -86.1120988558098, "system_level_velocity_max": 13.851810410671005, "system_level_velocity_min": 9.12580188711796, "cost1_min": 116.24131632441838, "cost1_mean": 331.8454122222181, "outflow_rate_max": 1198.7379686140425, "system_level_velocity_mean": 11.793280804334252, "cost1_max": 386.0329250429086, "outflow_rate_min": 442.0752589645667}, "timesteps_this_iter": 79492, "time_total_s": 17171.18678164482, "episodes_this_iter": 44, "info": {"update_time_ms": 8.828, "grad_time_ms": 19279.527, "sample_time_ms": 24004.385, "default": {"vf_explained_var": 0.8408772945404053, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.390328884124756, "total_loss": 21.602441787719727, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021159138530492783, "vf_loss": 21.612674713134766, "kl": 0.016186561435461044}, "load_time_ms": 29.773, "num_steps_trained": 32142108, "num_steps_sampled": 32142108}, "episode_reward_max": 861.6812020982779, "policy_reward_mean": {}, "training_iteration": 282, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32142108, "episode_reward_min": 216.24461450409996, "pid": 14989, "iterations_since_restore": 82, "num_metric_batches_dropped": 0, "episodes_total": 16246, "timesteps_since_restore": 6435516, "episode_len_mean": 745.77}
{"time_this_iter_s": 42.37896394729614, "done": false, "date": "2019-05-09_18-53-02", "episode_reward_mean": 742.5100600961878, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f358>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc18>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fa20>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3633.0147364139557, "timestamp": 1557427982, "custom_metrics": {"cost2_max": -54.84928339853202, "outflow_rate_mean": 1006.3761430619645, "cost2_min": -112.73950899127283, "cost2_mean": -86.23771964318529, "system_level_velocity_max": 13.976571525456563, "system_level_velocity_min": 9.12580188711796, "cost1_min": 110.63855554685239, "cost1_mean": 326.0866337113496, "outflow_rate_max": 1295.7766946265288, "system_level_velocity_mean": 11.773924529426228, "cost1_max": 401.9347466493201, "outflow_rate_min": 419.10080245126437}, "timesteps_this_iter": 77365, "time_total_s": 17213.565745592117, "episodes_this_iter": 44, "info": {"update_time_ms": 8.829, "grad_time_ms": 19182.964, "sample_time_ms": 23909.588, "default": {"vf_explained_var": 0.8325487375259399, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.37357759475708, "total_loss": 21.471479415893555, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020551277324557304, "vf_loss": 21.480863571166992, "kl": 0.016544781625270844}, "load_time_ms": 32.727, "num_steps_trained": 32219473, "num_steps_sampled": 32219473}, "episode_reward_max": 965.5150528643543, "policy_reward_mean": {}, "training_iteration": 283, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32219473, "episode_reward_min": 213.5028137798012, "pid": 14989, "iterations_since_restore": 83, "num_metric_batches_dropped": 0, "episodes_total": 16290, "timesteps_since_restore": 6512881, "episode_len_mean": 735.31}
{"time_this_iter_s": 43.22899675369263, "done": false, "date": "2019-05-09_18-53-45", "episode_reward_mean": 745.742388047274, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee349e8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34978>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee341d0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3676.2437331676483, "timestamp": 1557428025, "custom_metrics": {"cost2_max": -56.9062807791355, "outflow_rate_mean": 1017.7241968431241, "cost2_min": -118.67617455354275, "cost2_mean": -86.75794585342244, "system_level_velocity_max": 13.976571525456563, "system_level_velocity_min": 9.12580188711796, "cost1_min": 110.63855554685239, "cost1_mean": 330.0708906299062, "outflow_rate_max": 1295.7766946265288, "system_level_velocity_mean": 11.917800203522681, "cost1_max": 401.9347466493201, "outflow_rate_min": 419.10080245126437}, "timesteps_this_iter": 76903, "time_total_s": 17256.79474234581, "episodes_this_iter": 44, "info": {"update_time_ms": 8.85, "grad_time_ms": 19283.017, "sample_time_ms": 23833.758, "default": {"vf_explained_var": 0.8140305876731873, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.361727714538574, "total_loss": 22.810150146484375, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02206115983426571, "vf_loss": 22.820661544799805, "kl": 0.017107751220464706}, "load_time_ms": 30.88, "num_steps_trained": 32296376, "num_steps_sampled": 32296376}, "episode_reward_max": 965.5150528643543, "policy_reward_mean": {}, "training_iteration": 284, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32296376, "episode_reward_min": 213.5028137798012, "pid": 14989, "iterations_since_restore": 84, "num_metric_batches_dropped": 0, "episodes_total": 16334, "timesteps_since_restore": 6589784, "episode_len_mean": 734.59}
{"time_this_iter_s": 41.248817443847656, "done": false, "date": "2019-05-09_18-54-27", "episode_reward_mean": 764.563549396294, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f8d0>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f390>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc88>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3717.492550611496, "timestamp": 1557428067, "custom_metrics": {"cost2_max": -58.3315746103493, "outflow_rate_mean": 1039.41408076126, "cost2_min": -118.67617455354275, "cost2_mean": -86.71838853761984, "system_level_velocity_max": 14.063915427659742, "system_level_velocity_min": 9.602705290759399, "cost1_min": 110.63855554685239, "cost1_mean": 337.1658756167791, "outflow_rate_max": 1222.9034800581967, "system_level_velocity_mean": 11.980537455898643, "cost1_max": 400.70659740964265, "outflow_rate_min": 419.10080245126437}, "timesteps_this_iter": 77256, "time_total_s": 17298.043559789658, "episodes_this_iter": 43, "info": {"update_time_ms": 8.845, "grad_time_ms": 19285.018, "sample_time_ms": 23658.579, "default": {"vf_explained_var": 0.8127164840698242, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.376065731048584, "total_loss": 23.074451446533203, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021559951826930046, "vf_loss": 23.08445167541504, "kl": 0.017123689875006676}, "load_time_ms": 30.737, "num_steps_trained": 32373632, "num_steps_sampled": 32373632}, "episode_reward_max": 919.1220886985191, "policy_reward_mean": {}, "training_iteration": 285, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32373632, "episode_reward_min": 213.5028137798012, "pid": 14989, "iterations_since_restore": 85, "num_metric_batches_dropped": 0, "episodes_total": 16377, "timesteps_since_restore": 6667040, "episode_len_mean": 744.99}
{"time_this_iter_s": 43.49886465072632, "done": false, "date": "2019-05-09_18-55-10", "episode_reward_mean": 769.8838131195749, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fc18>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fac8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f908>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3760.9914152622223, "timestamp": 1557428110, "custom_metrics": {"cost2_max": -57.30965538315602, "outflow_rate_mean": 1041.6010659761503, "cost2_min": -111.22743632578192, "cost2_mean": -85.2442936082588, "system_level_velocity_max": 14.063915427659742, "system_level_velocity_min": 8.66858256907076, "cost1_min": 112.02384706383984, "cost1_mean": 339.0821764992646, "outflow_rate_max": 1222.9034800581967, "system_level_velocity_mean": 12.042255374824078, "cost1_max": 400.70659740964265, "outflow_rate_min": 428.95296096457673}, "timesteps_this_iter": 77795, "time_total_s": 17341.542424440384, "episodes_this_iter": 44, "info": {"update_time_ms": 8.969, "grad_time_ms": 19409.871, "sample_time_ms": 23663.535, "default": {"vf_explained_var": 0.8548749685287476, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.394056558609009, "total_loss": 21.52362632751465, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02263323962688446, "vf_loss": 21.534351348876953, "kl": 0.017639081925153732}, "load_time_ms": 30.573, "num_steps_trained": 32451427, "num_steps_sampled": 32451427}, "episode_reward_max": 931.5104882509532, "policy_reward_mean": {}, "training_iteration": 286, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32451427, "episode_reward_min": 210.20879807764334, "pid": 14989, "iterations_since_restore": 86, "num_metric_batches_dropped": 0, "episodes_total": 16421, "timesteps_since_restore": 6744835, "episode_len_mean": 745.77}
{"time_this_iter_s": 43.65123796463013, "done": false, "date": "2019-05-09_18-55-54", "episode_reward_mean": 764.1297607567262, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fa58>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc18>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f080>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3804.6426532268524, "timestamp": 1557428154, "custom_metrics": {"cost2_max": -43.90478737823601, "outflow_rate_mean": 1033.11902228634, "cost2_min": -111.22743632578192, "cost2_mean": -86.14251849261413, "system_level_velocity_max": 14.058843042417202, "system_level_velocity_min": 8.66858256907076, "cost1_min": 108.75894159335576, "cost1_mean": 335.7924267085343, "outflow_rate_max": 1301.3743884871803, "system_level_velocity_mean": 12.022530616383568, "cost1_max": 399.70212339595736, "outflow_rate_min": 407.3407024827217}, "timesteps_this_iter": 76674, "time_total_s": 17385.193662405014, "episodes_this_iter": 44, "info": {"update_time_ms": 9.278, "grad_time_ms": 19543.289, "sample_time_ms": 23741.565, "default": {"vf_explained_var": 0.8299087882041931, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3867838382720947, "total_loss": 22.916200637817383, "cur_lr": 0.0005000000237487257, "policy_loss": -0.0213001761585474, "vf_loss": 22.925954818725586, "kl": 0.01710807904601097}, "load_time_ms": 31.997, "num_steps_trained": 32528101, "num_steps_sampled": 32528101}, "episode_reward_max": 949.7069939755836, "policy_reward_mean": {}, "training_iteration": 287, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32528101, "episode_reward_min": 207.8416154996705, "pid": 14989, "iterations_since_restore": 87, "num_metric_batches_dropped": 0, "episodes_total": 16465, "timesteps_since_restore": 6821509, "episode_len_mean": 740.44}
{"time_this_iter_s": 43.41614294052124, "done": false, "date": "2019-05-09_18-56-37", "episode_reward_mean": 755.767931061536, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fcf8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fb38>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f908>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3848.0587961673737, "timestamp": 1557428197, "custom_metrics": {"cost2_max": -43.90478737823601, "outflow_rate_mean": 1023.4590780505698, "cost2_min": -116.83837403287593, "cost2_mean": -87.92787951914856, "system_level_velocity_max": 14.050050347325676, "system_level_velocity_min": 10.013474060189566, "cost1_min": 108.75894159335576, "cost1_mean": 334.1555573934545, "outflow_rate_max": 1301.3743884871803, "system_level_velocity_mean": 12.022515289621195, "cost1_max": 399.70212339595736, "outflow_rate_min": 407.3407024827217}, "timesteps_this_iter": 77111, "time_total_s": 17428.609805345535, "episodes_this_iter": 44, "info": {"update_time_ms": 9.214, "grad_time_ms": 19404.896, "sample_time_ms": 23938.775, "default": {"vf_explained_var": 0.8397759199142456, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.4069905281066895, "total_loss": 21.663883209228516, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021544208750128746, "vf_loss": 21.673860549926758, "kl": 0.017138395458459854}, "load_time_ms": 31.648, "num_steps_trained": 32605212, "num_steps_sampled": 32605212}, "episode_reward_max": 949.7069939755836, "policy_reward_mean": {}, "training_iteration": 288, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32605212, "episode_reward_min": 207.8416154996705, "pid": 14989, "iterations_since_restore": 88, "num_metric_batches_dropped": 0, "episodes_total": 16509, "timesteps_since_restore": 6898620, "episode_len_mean": 737.87}
{"time_this_iter_s": 42.79904389381409, "done": false, "date": "2019-05-09_18-57-20", "episode_reward_mean": 758.578745582208, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29f98>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29668>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29d68>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3890.8578400611877, "timestamp": 1557428240, "custom_metrics": {"cost2_max": -47.22234500537283, "outflow_rate_mean": 1028.9404175278103, "cost2_min": -116.83837403287593, "cost2_mean": -87.50263566766377, "system_level_velocity_max": 14.1421588322494, "system_level_velocity_min": 10.013474060189566, "cost1_min": 114.18360219838951, "cost1_mean": 335.82602625296454, "outflow_rate_max": 1301.3743884871803, "system_level_velocity_mean": 12.082572978675284, "cost1_max": 399.70212339595736, "outflow_rate_min": 419.3035461294681}, "timesteps_this_iter": 76273, "time_total_s": 17471.40884923935, "episodes_this_iter": 44, "info": {"update_time_ms": 8.779, "grad_time_ms": 19124.661, "sample_time_ms": 24210.111, "default": {"vf_explained_var": 0.8120163083076477, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.3798863887786865, "total_loss": 21.897090911865234, "cur_lr": 0.0005000000237487257, "policy_loss": -0.022296655923128128, "vf_loss": 21.90804100036621, "kl": 0.016813037917017937}, "load_time_ms": 27.119, "num_steps_trained": 32681485, "num_steps_sampled": 32681485}, "episode_reward_max": 949.7069939755836, "policy_reward_mean": {}, "training_iteration": 289, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32681485, "episode_reward_min": 222.84727978233076, "pid": 14989, "iterations_since_restore": 89, "num_metric_batches_dropped": 0, "episodes_total": 16553, "timesteps_since_restore": 6974893, "episode_len_mean": 737.99}
{"time_this_iter_s": 41.9478120803833, "done": false, "date": "2019-05-09_18-58-02", "episode_reward_mean": 764.7005177095859, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee34f60>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee342e8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee345f8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3932.805652141571, "timestamp": 1557428282, "custom_metrics": {"cost2_max": -47.22234500537283, "outflow_rate_mean": 1038.397919365208, "cost2_min": -112.04202851549442, "cost2_mean": -87.31500785623562, "system_level_velocity_max": 14.1421588322494, "system_level_velocity_min": 10.013474060189566, "cost1_min": 114.18360219838951, "cost1_mean": 338.32947818418177, "outflow_rate_max": 1261.298603241024, "system_level_velocity_mean": 12.123642232184729, "cost1_max": 398.44660400714713, "outflow_rate_min": 419.3035461294681}, "timesteps_this_iter": 76269, "time_total_s": 17513.356661319733, "episodes_this_iter": 44, "info": {"update_time_ms": 8.766, "grad_time_ms": 18781.074, "sample_time_ms": 24238.809, "default": {"vf_explained_var": 0.807105302810669, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.384099006652832, "total_loss": 21.76743507385254, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021837841719388962, "vf_loss": 21.77786636352539, "kl": 0.01690240018069744}, "load_time_ms": 25.702, "num_steps_trained": 32757754, "num_steps_sampled": 32757754}, "episode_reward_max": 963.4643404742857, "policy_reward_mean": {}, "training_iteration": 290, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32757754, "episode_reward_min": 222.62565202342017, "pid": 14989, "iterations_since_restore": 90, "num_metric_batches_dropped": 0, "episodes_total": 16597, "timesteps_since_restore": 7051162, "episode_len_mean": 740.6}
{"time_this_iter_s": 40.905303716659546, "done": false, "date": "2019-05-09_18-58-43", "episode_reward_mean": 770.9405087452873, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f908>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f080>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f470>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 3973.7109558582306, "timestamp": 1557428323, "custom_metrics": {"cost2_max": -52.543239045740776, "outflow_rate_mean": 1042.3399783159896, "cost2_min": -117.29856142685233, "cost2_mean": -89.386608332977, "system_level_velocity_max": 14.226887804979565, "system_level_velocity_min": 10.122910895515977, "cost1_min": 116.31315139281668, "cost1_mean": 339.5756190958908, "outflow_rate_max": 1310.3374769061004, "system_level_velocity_mean": 12.062123736819533, "cost1_max": 406.12710875147116, "outflow_rate_min": 436.819150339291}, "timesteps_this_iter": 76266, "time_total_s": 17554.261965036392, "episodes_this_iter": 43, "info": {"update_time_ms": 8.617, "grad_time_ms": 18734.241, "sample_time_ms": 23897.172, "default": {"vf_explained_var": 0.8008752465248108, "cur_kl_coeff": 0.6750001311302185, "entropy": 2.383305788040161, "total_loss": 22.138206481933594, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020822372287511826, "vf_loss": 22.147808074951172, "kl": 0.016622250899672508}, "load_time_ms": 25.84, "num_steps_trained": 32834020, "num_steps_sampled": 32834020}, "episode_reward_max": 963.4643404742857, "policy_reward_mean": {}, "training_iteration": 291, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32834020, "episode_reward_min": 222.62565202342017, "pid": 14989, "iterations_since_restore": 91, "num_metric_batches_dropped": 0, "episodes_total": 16640, "timesteps_since_restore": 7127428, "episode_len_mean": 745.81}
{"time_this_iter_s": 41.90098428726196, "done": false, "date": "2019-05-09_18-59-25", "episode_reward_mean": 783.6696315565989, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0feb8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fc50>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fcf8>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 4015.6119401454926, "timestamp": 1557428365, "custom_metrics": {"cost2_max": -52.543239045740776, "outflow_rate_mean": 1058.801554084566, "cost2_min": -120.07952532072795, "cost2_mean": -90.17773235856961, "system_level_velocity_max": 14.226887804979565, "system_level_velocity_min": 10.122910895515977, "cost1_min": 277.9774782050497, "cost1_mean": 343.6871378360926, "outflow_rate_max": 1310.3374769061004, "system_level_velocity_mean": 12.10295060824722, "cost1_max": 406.12710875147116, "outflow_rate_min": 854.6465510289069}, "timesteps_this_iter": 75980, "time_total_s": 17596.162949323654, "episodes_this_iter": 43, "info": {"update_time_ms": 8.77, "grad_time_ms": 18841.623, "sample_time_ms": 23461.755, "default": {"vf_explained_var": 0.7784579396247864, "cur_kl_coeff": 0.675000011920929, "entropy": 2.394672155380249, "total_loss": 23.566553115844727, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021387463435530663, "vf_loss": 23.57666015625, "kl": 0.016712497919797897}, "load_time_ms": 26.869, "num_steps_trained": 32910000, "num_steps_sampled": 32910000}, "episode_reward_max": 957.7649825965843, "policy_reward_mean": {}, "training_iteration": 292, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32910000, "episode_reward_min": 654.494548974724, "pid": 14989, "iterations_since_restore": 92, "num_metric_batches_dropped": 0, "episodes_total": 16683, "timesteps_since_restore": 7203408, "episode_len_mean": 751.0}
{"time_this_iter_s": 43.70210790634155, "done": false, "date": "2019-05-09_19-00-09", "episode_reward_mean": 788.816038004838, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f6d8>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3feb8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fda0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 4059.314048051834, "timestamp": 1557428409, "custom_metrics": {"cost2_max": -52.543239045740776, "outflow_rate_mean": 1066.7158093578773, "cost2_min": -120.07952532072795, "cost2_mean": -91.0043935644203, "system_level_velocity_max": 13.873558080169246, "system_level_velocity_min": 9.88767145526702, "cost1_min": 275.01836000380297, "cost1_mean": 346.02184105496434, "outflow_rate_max": 1246.9591318615107, "system_level_velocity_mean": 12.180684033384921, "cost1_max": 394.3419243191768, "outflow_rate_min": 885.8862073914325}, "timesteps_this_iter": 76515, "time_total_s": 17639.865057229996, "episodes_this_iter": 43, "info": {"update_time_ms": 8.82, "grad_time_ms": 19150.638, "sample_time_ms": 23279.064, "default": {"vf_explained_var": 0.8115629553794861, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3929965496063232, "total_loss": 20.892662048339844, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02108551189303398, "vf_loss": 20.901798248291016, "kl": 0.017701173201203346}, "load_time_ms": 26.805, "num_steps_trained": 32986515, "num_steps_sampled": 32986515}, "episode_reward_max": 946.931035653484, "policy_reward_mean": {}, "training_iteration": 293, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 32986515, "episode_reward_min": 679.0286931312231, "pid": 14989, "iterations_since_restore": 93, "num_metric_batches_dropped": 0, "episodes_total": 16726, "timesteps_since_restore": 7279923, "episode_len_mean": 751.0}
{"time_this_iter_s": 44.11922025680542, "done": false, "date": "2019-05-09_19-00-53", "episode_reward_mean": 777.2956560616805, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0fc50>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0feb8>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee0f5c0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 4103.4332683086395, "timestamp": 1557428453, "custom_metrics": {"cost2_max": -58.21356025086754, "outflow_rate_mean": 1055.356935924156, "cost2_min": -120.07952532072795, "cost2_mean": -91.38374576532561, "system_level_velocity_max": 14.17461077338506, "system_level_velocity_min": 9.88767145526702, "cost1_min": 114.08186423526614, "cost1_mean": 341.71364111251535, "outflow_rate_max": 1281.69316690661, "system_level_velocity_mean": 12.213450559351102, "cost1_max": 401.71627760255785, "outflow_rate_min": 425.8438112303845}, "timesteps_this_iter": 76526, "time_total_s": 17683.9842774868, "episodes_this_iter": 45, "info": {"update_time_ms": 8.917, "grad_time_ms": 19270.214, "sample_time_ms": 23248.85, "default": {"vf_explained_var": 0.8090860247612, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.3936336040496826, "total_loss": 21.916400909423828, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021338000893592834, "vf_loss": 21.926504135131836, "kl": 0.016646120697259903}, "load_time_ms": 26.67, "num_steps_trained": 33063041, "num_steps_sampled": 33063041}, "episode_reward_max": 952.2256960128028, "policy_reward_mean": {}, "training_iteration": 294, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 33063041, "episode_reward_min": 219.14793138346732, "pid": 14989, "iterations_since_restore": 94, "num_metric_batches_dropped": 0, "episodes_total": 16771, "timesteps_since_restore": 7356449, "episode_len_mean": 740.58}
{"time_this_iter_s": 43.86024451255798, "done": false, "date": "2019-05-09_19-01-37", "episode_reward_mean": 779.6931629852057, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f908>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f240>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fcc0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 4147.2935128211975, "timestamp": 1557428497, "custom_metrics": {"cost2_max": -58.10292813627636, "outflow_rate_mean": 1060.7995915258423, "cost2_min": -113.34645345332395, "cost2_mean": -89.99814239645897, "system_level_velocity_max": 14.554421853445291, "system_level_velocity_min": 8.905514590671498, "cost1_min": 114.08186423526614, "cost1_mean": 342.1251859629194, "outflow_rate_max": 1284.329734771499, "system_level_velocity_mean": 12.24825336621438, "cost1_max": 413.18892507499424, "outflow_rate_min": 425.8438112303845}, "timesteps_this_iter": 76734, "time_total_s": 17727.84452199936, "episodes_this_iter": 43, "info": {"update_time_ms": 9.223, "grad_time_ms": 19202.41, "sample_time_ms": 23583.209, "default": {"vf_explained_var": 0.8011060953140259, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.397209405899048, "total_loss": 22.943893432617188, "cur_lr": 0.0005000000237487257, "policy_loss": -0.020500462502241135, "vf_loss": 22.953147888183594, "kl": 0.0166635662317276}, "load_time_ms": 25.61, "num_steps_trained": 33139775, "num_steps_sampled": 33139775}, "episode_reward_max": 972.4080725345168, "policy_reward_mean": {}, "training_iteration": 295, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 33139775, "episode_reward_min": 219.14793138346732, "pid": 14989, "iterations_since_restore": 95, "num_metric_batches_dropped": 0, "episodes_total": 16814, "timesteps_since_restore": 7433183, "episode_len_mean": 740.58}
{"time_this_iter_s": 43.86165237426758, "done": false, "date": "2019-05-09_19-02-21", "episode_reward_mean": 779.9216502170972, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29f98>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29f28>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2ee29d68>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 4191.155165195465, "timestamp": 1557428541, "custom_metrics": {"cost2_max": -58.10292813627636, "outflow_rate_mean": 1056.1193912144927, "cost2_min": -125.8797032895451, "cost2_mean": -90.64158443029577, "system_level_velocity_max": 14.554421853445291, "system_level_velocity_min": 8.905514590671498, "cost1_min": 109.7793126846247, "cost1_mean": 341.11745398509237, "outflow_rate_max": 1284.329734771499, "system_level_velocity_mean": 12.248200317012515, "cost1_max": 413.18892507499424, "outflow_rate_min": 414.1149202172624}, "timesteps_this_iter": 76656, "time_total_s": 17771.706174373627, "episodes_this_iter": 44, "info": {"update_time_ms": 9.246, "grad_time_ms": 19011.336, "sample_time_ms": 23809.736, "default": {"vf_explained_var": 0.8106039762496948, "cur_kl_coeff": 0.675000011920929, "entropy": 2.4034204483032227, "total_loss": 21.72319221496582, "cur_lr": 0.0005000000237487257, "policy_loss": -0.021437261253595352, "vf_loss": 21.733043670654297, "kl": 0.01716523803770542}, "load_time_ms": 26.127, "num_steps_trained": 33216431, "num_steps_sampled": 33216431}, "episode_reward_max": 972.4080725345168, "policy_reward_mean": {}, "training_iteration": 296, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 33216431, "episode_reward_min": 206.60531216145955, "pid": 14989, "iterations_since_restore": 96, "num_metric_batches_dropped": 0, "episodes_total": 16858, "timesteps_since_restore": 7509839, "episode_len_mean": 737.91}
{"time_this_iter_s": 44.32151460647583, "done": false, "date": "2019-05-09_19-03-05", "episode_reward_mean": 777.1268666124562, "config": {"horizon": 1500, "sample_async": false, "num_cpus_per_worker": 1, "num_envs_per_worker": 1, "vf_clip_param": 1000000.0, "num_cpus_for_driver": 1, "model": {"fcnet_hiddens": [128, 64, 32], "lstm_cell_size": 256, "free_log_std": false, "lstm_use_prev_action_reward": false, "custom_preprocessor": null, "channel_major": false, "custom_model": null, "conv_filters": null, "conv_activation": "relu", "squash_to_range": false, "fcnet_activation": "tanh", "dim": 84, "framestack": true, "max_seq_len": 20, "zero_mean": true, "grayscale": false, "custom_options": {}, "use_lstm": false}, "env_config": {"run": "PPO", "flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 7.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 0\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnvBufferedObs\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 700,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}"}, "clip_rewards": null, "optimizer": {}, "input": "sampler", "clip_actions": false, "clip_param": 0.3, "observation_filter": "MeanStdFilter", "collect_metrics_timeout": 180, "straggler_mitigation": false, "use_gae": true, "sgd_minibatch_size": 128, "output_max_file_size": 67108864, "output": null, "num_gpus_per_worker": 0, "lr": 0.0005, "lambda": 0.97, "gamma": 0.99, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "intra_op_parallelism_threads": 2, "device_count": {"CPU": 1}, "log_device_placement": false, "inter_op_parallelism_threads": 2}, "synchronize_filters": true, "env": "MultiWaveAttenuationMergePOEnvBufferedObs-v0shortermeasure01:01:7", "num_workers": 30, "input_evaluation": null, "kl_target": 0.01, "compress_observations": false, "custom_resources_per_worker": {}, "vf_loss_coeff": 1.0, "train_batch_size": 45000, "callbacks": {"on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3fc18>", "on_sample_end": null, "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f8d0>", "on_train_result": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7ffa2eb3f2b0>"}, "lr_schedule": null, "num_gpus": 0, "multiagent": {"policy_graphs": {}, "policy_mapping_fn": null, "policies_to_train": null}, "num_sgd_iter": 10, "kl_coeff": 0.2, "monitor": false, "output_compress_columns": ["obs", "new_obs"], "sample_batch_size": 750, "preprocessor_pref": "deepmind", "simple_optimizer": false, "vf_share_layers": false, "entropy_coeff": 0.0, "log_level": "INFO", "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "batch_mode": "truncate_episodes"}, "time_since_restore": 4235.476679801941, "timestamp": 1557428585, "custom_metrics": {"cost2_max": -58.10292813627636, "outflow_rate_mean": 1052.1106180390657, "cost2_min": -125.8797032895451, "cost2_mean": -93.41268154969038, "system_level_velocity_max": 14.504650930081537, "system_level_velocity_min": 8.602832274940827, "cost1_min": 109.7793126846247, "cost1_mean": 340.27422394142866, "outflow_rate_max": 1258.9749151363606, "system_level_velocity_mean": 12.17809433690791, "cost1_max": 407.65005168417315, "outflow_rate_min": 414.1149202172624}, "timesteps_this_iter": 77798, "time_total_s": 17816.027688980103, "episodes_this_iter": 43, "info": {"update_time_ms": 8.988, "grad_time_ms": 18728.751, "sample_time_ms": 24161.949, "default": {"vf_explained_var": 0.83160400390625, "cur_kl_coeff": 0.6750000715255737, "entropy": 2.4291279315948486, "total_loss": 20.668739318847656, "cur_lr": 0.0005000000237487257, "policy_loss": -0.02175896428525448, "vf_loss": 20.6790828704834, "kl": 0.016912655904889107}, "load_time_ms": 26.282, "num_steps_trained": 33294229, "num_steps_sampled": 33294229}, "episode_reward_max": 942.7534665159103, "policy_reward_mean": {}, "training_iteration": 297, "experiment_id": "fd5eb6f11352451ea1d7d412405be32d", "node_ip": "10.138.0.2", "hostname": "flow-main", "timesteps_total": 33294229, "episode_reward_min": 206.60531216145955, "pid": 14989, "iterations_since_restore": 97, "num_metric_batches_dropped": 0, "episodes_total": 16901, "timesteps_since_restore": 7587637, "episode_len_mean": 739.59}
