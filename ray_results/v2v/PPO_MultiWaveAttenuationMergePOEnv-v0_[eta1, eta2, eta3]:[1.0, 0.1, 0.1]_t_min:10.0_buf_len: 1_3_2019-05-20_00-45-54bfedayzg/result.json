{"hostname": "flow-main", "episode_reward_mean": 323.2460889475478, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a8ba8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a85c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a87b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 45.45847487449646, "timesteps_since_restore": 63353, "info": {"update_time_ms": 604.178, "load_time_ms": 65.225, "sample_time_ms": 28758.076, "num_steps_trained": 63353, "default": {"entropy": 1.4190952777862549, "policy_loss": -0.0014269151724874973, "vf_loss": 0.9909089803695679, "kl": 0.0028932690620422363, "vf_explained_var": 0.891301691532135, "total_loss": 0.9900608062744141, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.20000001788139343}, "num_steps_sampled": 63353, "grad_time_ms": 15887.271}, "time_total_s": 45.45847487449646, "num_metric_batches_dropped": 0, "timestamp": 1558313261, "episode_reward_max": 420.890135642155, "timesteps_this_iter": 63353, "pid": 46936, "custom_metrics": {"cost2_mean": -49.522942985333664, "outflow_rate_mean": 603.0592000025891, "system_level_velocity_mean": 8.032997903264787, "cost2_min": -77.40554253399392, "cost1_min": 23.73693655167829, "cost1_mean": 191.83180610265188, "cost1_max": 236.16906432818868, "outflow_rate_max": 754.0175918384584, "system_level_velocity_max": 17.78403645579779, "outflow_rate_min": 511.4948111831903, "cost2_max": -21.30650444432874, "system_level_velocity_min": 5.943065233204263}, "policy_reward_mean": {}, "time_since_restore": 45.45847487449646, "episodes_total": 28, "iterations_since_restore": 1, "episode_reward_min": 48.0256965858973, "episodes_this_iter": 28, "episode_len_mean": 676.2857142857143, "done": false, "training_iteration": 1, "date": "2019-05-20_00-47-41", "node_ip": "10.138.0.2", "timesteps_total": 63353}
{"hostname": "flow-main", "episode_reward_mean": 347.86145842787676, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cec470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cec400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cec080>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 44.1957049369812, "timesteps_since_restore": 121431, "info": {"update_time_ms": 306.764, "load_time_ms": 38.363, "sample_time_ms": 29840.789, "num_steps_trained": 121431, "default": {"entropy": 1.4116021394729614, "policy_loss": -0.0035101252142339945, "vf_loss": 1.2714837789535522, "kl": 0.008301499299705029, "vf_explained_var": 0.9154435396194458, "total_loss": 1.2688039541244507, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 121431, "grad_time_ms": 14522.547}, "time_total_s": 89.65417981147766, "num_metric_batches_dropped": 0, "timestamp": 1558313305, "episode_reward_max": 493.28918317850963, "timesteps_this_iter": 58078, "pid": 46936, "custom_metrics": {"cost2_mean": -48.70422829513843, "outflow_rate_mean": 624.953641729355, "system_level_velocity_mean": 8.24979543201894, "cost2_min": -77.40554253399392, "cost1_min": 23.73693655167829, "cost1_mean": 204.64957859740883, "cost1_max": 249.04794792353022, "outflow_rate_max": 754.0175918384584, "system_level_velocity_max": 17.78403645579779, "outflow_rate_min": 483.6543993518236, "cost2_max": -21.30650444432874, "system_level_velocity_min": 5.943065233204263}, "policy_reward_mean": {}, "time_since_restore": 89.65417981147766, "episodes_total": 56, "iterations_since_restore": 2, "episode_reward_min": 48.0256965858973, "episodes_this_iter": 28, "episode_len_mean": 688.1428571428571, "done": false, "training_iteration": 2, "date": "2019-05-20_00-48-25", "node_ip": "10.138.0.2", "timesteps_total": 121431}
{"hostname": "flow-main", "episode_reward_mean": 386.22064492910056, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028976d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897ac8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 37.9334180355072, "timesteps_since_restore": 173753, "info": {"update_time_ms": 206.803, "load_time_ms": 28.732, "sample_time_ms": 28451.639, "num_steps_trained": 173753, "default": {"entropy": 1.389520525932312, "policy_loss": -0.007291839458048344, "vf_loss": 2.7033894062042236, "kl": 0.01232132688164711, "vf_explained_var": 0.8766186237335205, "total_loss": 2.6973299980163574, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 173753, "grad_time_ms": 13734.989}, "time_total_s": 127.58759784698486, "num_metric_batches_dropped": 0, "timestamp": 1558313343, "episode_reward_max": 555.0832334161863, "timesteps_this_iter": 52322, "pid": 46936, "custom_metrics": {"cost2_mean": -47.78471520992366, "outflow_rate_mean": 648.111609212977, "system_level_velocity_mean": 8.64975957494811, "cost2_min": -77.40554253399392, "cost1_min": 23.73693655167829, "cost1_mean": 217.71548473216035, "cost1_max": 278.25087058815484, "outflow_rate_max": 855.1090908256683, "system_level_velocity_max": 17.78403645579779, "outflow_rate_min": 413.08864230713283, "cost2_max": -21.30650444432874, "system_level_velocity_min": 3.6921366425314486}, "policy_reward_mean": {}, "time_since_restore": 127.58759784698486, "episodes_total": 85, "iterations_since_restore": 3, "episode_reward_min": 48.0256965858973, "episodes_this_iter": 29, "episode_len_mean": 692.1882352941177, "done": false, "training_iteration": 3, "date": "2019-05-20_00-49-03", "node_ip": "10.138.0.2", "timesteps_total": 173753}
{"hostname": "flow-main", "episode_reward_mean": 439.9599619559964, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d335f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdb780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdb0b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 40.92593765258789, "timesteps_since_restore": 229884, "info": {"update_time_ms": 157.012, "load_time_ms": 23.706, "sample_time_ms": 27901.481, "num_steps_trained": 229884, "default": {"entropy": 1.3748433589935303, "policy_loss": -0.007481131237000227, "vf_loss": 4.085870742797852, "kl": 0.013409307226538658, "vf_explained_var": 0.8721391558647156, "total_loss": 4.079730987548828, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 229884, "grad_time_ms": 13942.671}, "time_total_s": 168.51353549957275, "num_metric_batches_dropped": 0, "timestamp": 1558313384, "episode_reward_max": 669.1073897752393, "timesteps_this_iter": 56131, "pid": 46936, "custom_metrics": {"cost2_mean": -49.743528305257094, "outflow_rate_mean": 675.1897252842497, "system_level_velocity_mean": 9.064244813551417, "cost2_min": -80.67544706382996, "cost1_min": 23.73693655167829, "cost1_mean": 230.00644103118753, "cost1_max": 282.8122295224307, "outflow_rate_max": 855.1090908256683, "system_level_velocity_max": 17.78403645579779, "outflow_rate_min": 413.08864230713283, "cost2_max": -21.30650444432874, "system_level_velocity_min": 3.6921366425314486}, "policy_reward_mean": {}, "time_since_restore": 168.51353549957275, "episodes_total": 113, "iterations_since_restore": 4, "episode_reward_min": 48.0256965858973, "episodes_this_iter": 28, "episode_len_mean": 693.36, "done": false, "training_iteration": 4, "date": "2019-05-20_00-49-44", "node_ip": "10.138.0.2", "timesteps_total": 229884}
{"hostname": "flow-main", "episode_reward_mean": 525.3108941466777, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c0288ed68>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b20b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 46.668580532073975, "timesteps_since_restore": 293978, "info": {"update_time_ms": 127.024, "load_time_ms": 21.304, "sample_time_ms": 28102.052, "num_steps_trained": 293978, "default": {"entropy": 1.3735023736953735, "policy_loss": -0.00447233859449625, "vf_loss": 5.515837669372559, "kl": 0.008765091188251972, "vf_explained_var": 0.9064828157424927, "total_loss": 5.512242317199707, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 293978, "grad_time_ms": 14682.64}, "time_total_s": 215.18211603164673, "num_metric_batches_dropped": 0, "timestamp": 1558313431, "episode_reward_max": 780.254356818527, "timesteps_this_iter": 64094, "pid": 46936, "custom_metrics": {"cost2_mean": -54.767801599843295, "outflow_rate_mean": 732.3404274925409, "system_level_velocity_mean": 9.573646726780577, "cost2_min": -105.25795543569285, "cost1_min": 95.63410325615831, "cost1_mean": 249.33070082561963, "cost1_max": 313.511525989269, "outflow_rate_max": 955.468503929045, "system_level_velocity_max": 11.986340283681264, "outflow_rate_min": 413.08864230713283, "cost2_max": -29.943852758040528, "system_level_velocity_min": 3.6921366425314486}, "policy_reward_mean": {}, "time_since_restore": 215.18211603164673, "episodes_total": 140, "iterations_since_restore": 5, "episode_reward_min": 277.4557899780748, "episodes_this_iter": 27, "episode_len_mean": 700.0, "done": false, "training_iteration": 5, "date": "2019-05-20_00-50-31", "node_ip": "10.138.0.2", "timesteps_total": 293978}
{"hostname": "flow-main", "episode_reward_mean": 602.8877799259852, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897ba8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 50.97547435760498, "timesteps_since_restore": 366186, "info": {"update_time_ms": 106.977, "load_time_ms": 19.653, "sample_time_ms": 28706.425, "num_steps_trained": 366186, "default": {"entropy": 1.388826608657837, "policy_loss": -0.004672509618103504, "vf_loss": 5.855761528015137, "kl": 0.009440826252102852, "vf_explained_var": 0.9225630760192871, "total_loss": 5.852032661437988, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 366186, "grad_time_ms": 15421.024}, "time_total_s": 266.1575903892517, "num_metric_batches_dropped": 0, "timestamp": 1558313482, "episode_reward_max": 932.7409513325692, "timesteps_this_iter": 72208, "pid": 46936, "custom_metrics": {"cost2_mean": -67.82115146000909, "outflow_rate_mean": 781.7665235686219, "system_level_velocity_mean": 9.797763601958284, "cost2_min": -128.385217442351, "cost1_min": 95.63410325615831, "cost1_mean": 257.18033018354026, "cost1_max": 329.1492125298214, "outflow_rate_max": 1045.01055587965, "system_level_velocity_max": 12.320452767884817, "outflow_rate_min": 413.08864230713283, "cost2_max": -36.09661080651517, "system_level_velocity_min": 3.6921366425314486}, "policy_reward_mean": {}, "time_since_restore": 266.1575903892517, "episodes_total": 166, "iterations_since_restore": 6, "episode_reward_min": 349.9290830301951, "episodes_this_iter": 26, "episode_len_mean": 700.0, "done": false, "training_iteration": 6, "date": "2019-05-20_00-51-22", "node_ip": "10.138.0.2", "timesteps_total": 366186}
{"hostname": "flow-main", "episode_reward_mean": 682.2216442515211, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a8b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdb0f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdb0b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 47.18436408042908, "timesteps_since_restore": 432679, "info": {"update_time_ms": 92.641, "load_time_ms": 18.478, "sample_time_ms": 28754.213, "num_steps_trained": 432679, "default": {"entropy": 1.3680498600006104, "policy_loss": -0.006231511011719704, "vf_loss": 8.890013694763184, "kl": 0.01451585628092289, "vf_explained_var": 0.890323281288147, "total_loss": 8.885231971740723, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 432679, "grad_time_ms": 15792.909}, "time_total_s": 313.3419544696808, "num_metric_batches_dropped": 0, "timestamp": 1558313529, "episode_reward_max": 1024.210670899995, "timesteps_this_iter": 66493, "pid": 46936, "custom_metrics": {"cost2_mean": -82.3557671804808, "outflow_rate_mean": 838.3240834514883, "system_level_velocity_mean": 10.168872687410122, "cost2_min": -128.385217442351, "cost1_min": 113.71808327689773, "cost1_mean": 268.5389228276845, "cost1_max": 357.27565265621564, "outflow_rate_max": 1056.8320836209016, "system_level_velocity_max": 13.395183964378859, "outflow_rate_min": 491.60757595488116, "cost2_max": -42.4583783239308, "system_level_velocity_min": 4.494804932510052}, "policy_reward_mean": {}, "time_since_restore": 313.3419544696808, "episodes_total": 192, "iterations_since_restore": 7, "episode_reward_min": 431.8432215250615, "episodes_this_iter": 26, "episode_len_mean": 700.0, "done": false, "training_iteration": 7, "date": "2019-05-20_00-52-09", "node_ip": "10.138.0.2", "timesteps_total": 432679}
{"hostname": "flow-main", "episode_reward_mean": 762.1824284208886, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d335f8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 47.439350605010986, "timesteps_since_restore": 497050, "info": {"update_time_ms": 81.887, "load_time_ms": 17.326, "sample_time_ms": 28732.001, "num_steps_trained": 497050, "default": {"entropy": 1.3479763269424438, "policy_loss": -0.004917115438729525, "vf_loss": 10.21365737915039, "kl": 0.012970980256795883, "vf_explained_var": 0.8606515526771545, "total_loss": 10.210038185119629, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 497050, "grad_time_ms": 16157.677}, "time_total_s": 360.7813050746918, "num_metric_batches_dropped": 0, "timestamp": 1558313577, "episode_reward_max": 1024.210670899995, "timesteps_this_iter": 64371, "pid": 46936, "custom_metrics": {"cost2_mean": -96.85972823755463, "outflow_rate_mean": 905.473702030242, "system_level_velocity_mean": 10.777190949105766, "cost2_min": -132.69575341079607, "cost1_min": 113.71808327689773, "cost1_mean": 285.67375716283595, "cost1_max": 372.3020106538301, "outflow_rate_max": 1083.9155267922977, "system_level_velocity_max": 13.966769512999122, "outflow_rate_min": 512.9713489947113, "cost2_max": -44.89774464883178, "system_level_velocity_min": 4.494804932510052}, "policy_reward_mean": {}, "time_since_restore": 360.7813050746918, "episodes_total": 219, "iterations_since_restore": 8, "episode_reward_min": 498.5354391166435, "episodes_this_iter": 27, "episode_len_mean": 700.0, "done": false, "training_iteration": 8, "date": "2019-05-20_00-52-57", "node_ip": "10.138.0.2", "timesteps_total": 497050}
{"hostname": "flow-main", "episode_reward_mean": 813.2921603268061, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b20b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2128>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 44.51766920089722, "timesteps_since_restore": 560242, "info": {"update_time_ms": 73.834, "load_time_ms": 16.13, "sample_time_ms": 28676.155, "num_steps_trained": 560242, "default": {"entropy": 1.3428699970245361, "policy_loss": -0.005276972893625498, "vf_loss": 13.203965187072754, "kl": 0.010631494224071503, "vf_explained_var": 0.7977394461631775, "total_loss": 13.199750900268555, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 560242, "grad_time_ms": 16157.823}, "time_total_s": 405.298974275589, "num_metric_batches_dropped": 0, "timestamp": 1558313621, "episode_reward_max": 1024.210670899995, "timesteps_this_iter": 63192, "pid": 46936, "custom_metrics": {"cost2_mean": -106.0551214355218, "outflow_rate_mean": 946.3546897367503, "system_level_velocity_mean": 11.369956769607493, "cost2_min": -132.69575341079607, "cost1_min": 199.68322536590568, "cost1_mean": 300.9019656864734, "cost1_max": 373.41335216695893, "outflow_rate_max": 1091.8097114836394, "system_level_velocity_max": 14.212536154881182, "outflow_rate_min": 680.7909385446065, "cost2_max": -71.71603384822306, "system_level_velocity_min": 7.647611343106985}, "policy_reward_mean": {}, "time_since_restore": 405.298974275589, "episodes_total": 251, "iterations_since_restore": 9, "episode_reward_min": 498.5354391166435, "episodes_this_iter": 32, "episode_len_mean": 700.0, "done": false, "training_iteration": 9, "date": "2019-05-20_00-53-41", "node_ip": "10.138.0.2", "timesteps_total": 560242}
{"hostname": "flow-main", "episode_reward_mean": 842.4553838663529, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897fd0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 46.206581830978394, "timesteps_since_restore": 617427, "info": {"update_time_ms": 67.398, "load_time_ms": 15.531, "sample_time_ms": 28796.728, "num_steps_trained": 617427, "default": {"entropy": 1.3086693286895752, "policy_loss": -0.004864912945777178, "vf_loss": 16.020645141601562, "kl": 0.010971841402351856, "vf_explained_var": 0.8082121014595032, "total_loss": 16.016878128051758, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 617427, "grad_time_ms": 16159.026}, "time_total_s": 451.5055561065674, "num_metric_batches_dropped": 0, "timestamp": 1558313668, "episode_reward_max": 1013.2839596118574, "timesteps_this_iter": 57185, "pid": 46936, "custom_metrics": {"cost2_mean": -106.96111088862392, "outflow_rate_mean": 973.8924936911404, "system_level_velocity_mean": 12.106709240475073, "cost2_min": -138.96944208256073, "cost1_min": 24.557627224668114, "cost1_mean": 315.17964417163034, "cost1_max": 414.5840634174818, "outflow_rate_max": 1107.9642118719084, "system_level_velocity_max": 18.876967235462736, "outflow_rate_min": 512.7833691978668, "cost2_max": -22.06250335780675, "system_level_velocity_min": 7.647611343106985}, "policy_reward_mean": {}, "time_since_restore": 451.5055561065674, "episodes_total": 285, "iterations_since_restore": 10, "episode_reward_min": 49.06498905397107, "episodes_this_iter": 34, "episode_len_mean": 693.37, "done": false, "training_iteration": 10, "date": "2019-05-20_00-54-28", "node_ip": "10.138.0.2", "timesteps_total": 617427}
{"hostname": "flow-main", "episode_reward_mean": 865.3239249775937, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d335c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d336d8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 44.269734621047974, "timesteps_since_restore": 673861, "info": {"update_time_ms": 7.903, "load_time_ms": 9.86, "sample_time_ms": 28835.366, "num_steps_trained": 673861, "default": {"entropy": 1.2830132246017456, "policy_loss": -0.00494813546538353, "vf_loss": 18.072568893432617, "kl": 0.010607443749904633, "vf_explained_var": 0.8000872731208801, "total_loss": 18.068683624267578, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 673861, "grad_time_ms": 16071.373}, "time_total_s": 495.77529072761536, "num_metric_batches_dropped": 0, "timestamp": 1558313712, "episode_reward_max": 1021.7545476534701, "timesteps_this_iter": 56434, "pid": 46936, "custom_metrics": {"cost2_mean": -99.72101105446113, "outflow_rate_mean": 996.0471025897724, "system_level_velocity_mean": 12.901899661564778, "cost2_min": -138.96944208256073, "cost1_min": 24.557627224668114, "cost1_mean": 335.751996111498, "cost1_max": 414.5840634174818, "outflow_rate_max": 1110.5259765370458, "system_level_velocity_max": 18.876967235462736, "outflow_rate_min": 512.7833691978668, "cost2_max": -22.06250335780675, "system_level_velocity_min": 8.376605192765933}, "policy_reward_mean": {}, "time_since_restore": 495.77529072761536, "episodes_total": 319, "iterations_since_restore": 11, "episode_reward_min": 49.06498905397107, "episodes_this_iter": 34, "episode_len_mean": 693.37, "done": false, "training_iteration": 11, "date": "2019-05-20_00-55-12", "node_ip": "10.138.0.2", "timesteps_total": 673861}
{"hostname": "flow-main", "episode_reward_mean": 869.5676025450317, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b23c8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 42.781684160232544, "timesteps_since_restore": 729975, "info": {"update_time_ms": 7.67, "load_time_ms": 9.504, "sample_time_ms": 28522.32, "num_steps_trained": 729975, "default": {"entropy": 1.2973442077636719, "policy_loss": -0.005788310896605253, "vf_loss": 16.936946868896484, "kl": 0.012156989425420761, "vf_explained_var": 0.8052365183830261, "total_loss": 16.932373046875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 729975, "grad_time_ms": 16242.818}, "time_total_s": 538.5569748878479, "num_metric_batches_dropped": 0, "timestamp": 1558313755, "episode_reward_max": 1032.3627108731314, "timesteps_this_iter": 56114, "pid": 46936, "custom_metrics": {"cost2_mean": -94.71831444103992, "outflow_rate_mean": 1012.6329325065644, "system_level_velocity_mean": 13.460791550977092, "cost2_min": -138.96944208256073, "cost1_min": 24.420085986044917, "cost1_mean": 346.12879326007317, "cost1_max": 414.5840634174818, "outflow_rate_max": 1111.560627573513, "system_level_velocity_max": 18.876967235462736, "outflow_rate_min": 490.7136075974099, "cost2_max": -21.753365337922748, "system_level_velocity_min": 9.258641228630438}, "policy_reward_mean": {}, "time_since_restore": 538.5569748878479, "episodes_total": 349, "iterations_since_restore": 12, "episode_reward_min": 49.06498905397107, "episodes_this_iter": 30, "episode_len_mean": 686.75, "done": false, "training_iteration": 12, "date": "2019-05-20_00-55-55", "node_ip": "10.138.0.2", "timesteps_total": 729975}
{"hostname": "flow-main", "episode_reward_mean": 886.1167056521706, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898400>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898518>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 39.71355128288269, "timesteps_since_restore": 783356, "info": {"update_time_ms": 7.73, "load_time_ms": 9.467, "sample_time_ms": 28605.62, "num_steps_trained": 783356, "default": {"entropy": 1.2741271257400513, "policy_loss": -0.008543239906430244, "vf_loss": 20.119510650634766, "kl": 0.014428511261940002, "vf_explained_var": 0.7680906057357788, "total_loss": 20.112409591674805, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 783356, "grad_time_ms": 16334.902}, "time_total_s": 578.2705261707306, "num_metric_batches_dropped": 0, "timestamp": 1558313794, "episode_reward_max": 1032.3627108731314, "timesteps_this_iter": 53381, "pid": 46936, "custom_metrics": {"cost2_mean": -89.30918589490925, "outflow_rate_mean": 1024.4899793289146, "system_level_velocity_mean": 13.807450069958358, "cost2_min": -125.95959984976363, "cost1_min": 24.420085986044917, "cost1_mean": 359.65043992600675, "cost1_max": 426.74830385630946, "outflow_rate_max": 1142.7696951073217, "system_level_velocity_max": 17.96145483156024, "outflow_rate_min": 490.7136075974099, "cost2_max": -21.753365337922748, "system_level_velocity_min": 9.388727211034487}, "policy_reward_mean": {}, "time_since_restore": 578.2705261707306, "episodes_total": 379, "iterations_since_restore": 13, "episode_reward_min": 54.15023602628016, "episodes_this_iter": 30, "episode_len_mean": 693.38, "done": false, "training_iteration": 13, "date": "2019-05-20_00-56-34", "node_ip": "10.138.0.2", "timesteps_total": 783356}
{"hostname": "flow-main", "episode_reward_mean": 878.4041506238966, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2f60>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 37.83263611793518, "timesteps_since_restore": 834951, "info": {"update_time_ms": 7.802, "load_time_ms": 9.67, "sample_time_ms": 28454.505, "num_steps_trained": 834951, "default": {"entropy": 1.2711567878723145, "policy_loss": -0.005930300801992416, "vf_loss": 22.435077667236328, "kl": 0.01312396302819252, "vf_explained_var": 0.732292890548706, "total_loss": 22.430458068847656, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 834951, "grad_time_ms": 16176.493}, "time_total_s": 616.1031622886658, "num_metric_batches_dropped": 0, "timestamp": 1558313832, "episode_reward_max": 1032.3627108731314, "timesteps_this_iter": 51595, "pid": 46936, "custom_metrics": {"cost2_mean": -83.72325714773815, "outflow_rate_mean": 1019.129168036225, "system_level_velocity_mean": 14.068879760373804, "cost2_min": -125.95959984976363, "cost1_min": 18.839971832470145, "cost1_mean": 361.6325880183242, "cost1_max": 426.74830385630946, "outflow_rate_max": 1142.7696951073217, "system_level_velocity_max": 18.240188034026026, "outflow_rate_min": 487.9519811681622, "cost2_max": -17.32634445531202, "system_level_velocity_min": 9.388727211034487}, "policy_reward_mean": {}, "time_since_restore": 616.1031622886658, "episodes_total": 408, "iterations_since_restore": 14, "episode_reward_min": 41.71618353883381, "episodes_this_iter": 29, "episode_len_mean": 686.66, "done": false, "training_iteration": 14, "date": "2019-05-20_00-57-12", "node_ip": "10.138.0.2", "timesteps_total": 834951}
{"hostname": "flow-main", "episode_reward_mean": 879.4938811136923, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028982e8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 35.38943576812744, "timesteps_since_restore": 882723, "info": {"update_time_ms": 7.842, "load_time_ms": 9.448, "sample_time_ms": 27882.021, "num_steps_trained": 882723, "default": {"entropy": 1.2507517337799072, "policy_loss": -0.007431198842823505, "vf_loss": 26.69627571105957, "kl": 0.015779871493577957, "vf_explained_var": 0.5739794969558716, "total_loss": 26.69042205810547, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 882723, "grad_time_ms": 15622.344}, "time_total_s": 651.4925980567932, "num_metric_batches_dropped": 0, "timestamp": 1558313868, "episode_reward_max": 1009.7368139736284, "timesteps_this_iter": 47772, "pid": 46936, "custom_metrics": {"cost2_mean": -73.97441922826823, "outflow_rate_mean": 1016.286074298761, "system_level_velocity_mean": 14.493087033528406, "cost2_min": -125.95959984976363, "cost1_min": 18.839971832470145, "cost1_mean": 373.10026324452474, "cost1_max": 430.51538891756775, "outflow_rate_max": 1142.7696951073217, "system_level_velocity_max": 18.240188034026026, "outflow_rate_min": 487.9519811681622, "cost2_max": -17.32634445531202, "system_level_velocity_min": 9.388727211034487}, "policy_reward_mean": {}, "time_since_restore": 651.4925980567932, "episodes_total": 438, "iterations_since_restore": 15, "episode_reward_min": 41.71618353883381, "episodes_this_iter": 30, "episode_len_mean": 688.44, "done": false, "training_iteration": 15, "date": "2019-05-20_00-57-48", "node_ip": "10.138.0.2", "timesteps_total": 882723}
{"hostname": "flow-main", "episode_reward_mean": 874.168993237158, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d335c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d336d8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 36.72977352142334, "timesteps_since_restore": 930903, "info": {"update_time_ms": 7.941, "load_time_ms": 9.068, "sample_time_ms": 27316.318, "num_steps_trained": 930903, "default": {"entropy": 1.2651662826538086, "policy_loss": -0.005693197716027498, "vf_loss": 28.002470016479492, "kl": 0.014574214816093445, "vf_explained_var": 0.4950798451900482, "total_loss": 27.998233795166016, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 930903, "grad_time_ms": 14767.006}, "time_total_s": 688.2223715782166, "num_metric_batches_dropped": 0, "timestamp": 1558313905, "episode_reward_max": 1009.7368139736284, "timesteps_this_iter": 48180, "pid": 46936, "custom_metrics": {"cost2_mean": -63.677104020915436, "outflow_rate_mean": 1013.6492731752498, "system_level_velocity_mean": 15.068261211605302, "cost2_min": -115.14128721694719, "cost1_min": 18.839971832470145, "cost1_mean": 386.86099435415156, "cost1_max": 430.51538891756775, "outflow_rate_max": 1142.7696951073217, "system_level_velocity_max": 18.240188034026026, "outflow_rate_min": 487.9519811681622, "cost2_max": -17.32634445531202, "system_level_velocity_min": 10.494661977892488}, "policy_reward_mean": {}, "time_since_restore": 688.2223715782166, "episodes_total": 468, "iterations_since_restore": 16, "episode_reward_min": 41.71618353883381, "episodes_this_iter": 30, "episode_len_mean": 688.44, "done": false, "training_iteration": 16, "date": "2019-05-20_00-58-25", "node_ip": "10.138.0.2", "timesteps_total": 930903}
{"hostname": "flow-main", "episode_reward_mean": 856.0468767477431, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdb080>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 35.37933588027954, "timesteps_since_restore": 977766, "info": {"update_time_ms": 8.068, "load_time_ms": 8.759, "sample_time_ms": 26746.684, "num_steps_trained": 977766, "default": {"entropy": 1.259506344795227, "policy_loss": -0.0063797482289373875, "vf_loss": 28.024559020996094, "kl": 0.014182609505951405, "vf_explained_var": 0.48982447385787964, "total_loss": 28.019596099853516, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 977766, "grad_time_ms": 14154.784}, "time_total_s": 723.6017074584961, "num_metric_batches_dropped": 0, "timestamp": 1558313940, "episode_reward_max": 965.822014857555, "timesteps_this_iter": 46863, "pid": 46936, "custom_metrics": {"cost2_mean": -57.4163553580328, "outflow_rate_mean": 996.5888998276042, "system_level_velocity_mean": 15.205654700535241, "cost2_min": -99.30493642266542, "cost1_min": 18.839971832470145, "cost1_mean": 389.2877988351272, "cost1_max": 430.51538891756775, "outflow_rate_max": 1096.6798800640404, "system_level_velocity_max": 18.240188034026026, "outflow_rate_min": 487.9519811681622, "cost2_max": -17.32634445531202, "system_level_velocity_min": 10.026595678056998}, "policy_reward_mean": {}, "time_since_restore": 723.6017074584961, "episodes_total": 498, "iterations_since_restore": 17, "episode_reward_min": 41.71618353883381, "episodes_this_iter": 30, "episode_len_mean": 688.44, "done": false, "training_iteration": 17, "date": "2019-05-20_00-59-00", "node_ip": "10.138.0.2", "timesteps_total": 977766}
{"hostname": "flow-main", "episode_reward_mean": 853.192933632062, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a93c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a90f0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 35.60037899017334, "timesteps_since_restore": 1023875, "info": {"update_time_ms": 8.184, "load_time_ms": 8.527, "sample_time_ms": 26115.989, "num_steps_trained": 1023875, "default": {"entropy": 1.2619085311889648, "policy_loss": -0.006287419702857733, "vf_loss": 30.453933715820312, "kl": 0.013749361969530582, "vf_explained_var": 0.5175878405570984, "total_loss": 30.449020385742188, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000000894069672}, "num_steps_sampled": 1023875, "grad_time_ms": 13605.585}, "time_total_s": 759.2020864486694, "num_metric_batches_dropped": 0, "timestamp": 1558313976, "episode_reward_max": 935.8001005729504, "timesteps_this_iter": 46109, "pid": 46936, "custom_metrics": {"cost2_mean": -55.2406349859302, "outflow_rate_mean": 990.5688794643231, "system_level_velocity_mean": 15.308244864168607, "cost2_min": -99.30493642266542, "cost1_min": 264.71686127336454, "cost1_mean": 397.56789333535426, "cost1_max": 438.46529366200565, "outflow_rate_max": 1096.6798800640404, "system_level_velocity_max": 17.10517379153279, "outflow_rate_min": 826.9613508645452, "cost2_max": -33.663003124626506, "system_level_velocity_min": 10.026595678056998}, "policy_reward_mean": {}, "time_since_restore": 759.2020864486694, "episodes_total": 530, "iterations_since_restore": 18, "episode_reward_min": 705.3969733593716, "episodes_this_iter": 32, "episode_len_mean": 700.0, "done": false, "training_iteration": 18, "date": "2019-05-20_00-59-36", "node_ip": "10.138.0.2", "timesteps_total": 1023875}
{"hostname": "flow-main", "episode_reward_mean": 837.0430672944673, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdb780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cfe7f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdbc88>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 35.85900282859802, "timesteps_since_restore": 1069027, "info": {"update_time_ms": 8.194, "load_time_ms": 8.604, "sample_time_ms": 25757.459, "num_steps_trained": 1069027, "default": {"entropy": 1.2646809816360474, "policy_loss": -0.006531518418341875, "vf_loss": 34.932987213134766, "kl": 0.013977836817502975, "vf_explained_var": 0.33832934498786926, "total_loss": 34.927852630615234, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1069027, "grad_time_ms": 13099.042}, "time_total_s": 795.0610892772675, "num_metric_batches_dropped": 0, "timestamp": 1558314012, "episode_reward_max": 910.4775450060013, "timesteps_this_iter": 45152, "pid": 46936, "custom_metrics": {"cost2_mean": -53.67397702857667, "outflow_rate_mean": 979.8072374867287, "system_level_velocity_mean": 15.347624055243859, "cost2_min": -89.3929752322825, "cost1_min": 264.71686127336454, "cost1_mean": 394.630229248218, "cost1_max": 438.46529366200565, "outflow_rate_max": 1078.9057525780781, "system_level_velocity_max": 17.352402076087408, "outflow_rate_min": 807.9101648354039, "cost2_max": -33.663003124626506, "system_level_velocity_min": 10.026595678056998}, "policy_reward_mean": {}, "time_since_restore": 795.0610892772675, "episodes_total": 568, "iterations_since_restore": 19, "episode_reward_min": 589.4577238845648, "episodes_this_iter": 38, "episode_len_mean": 696.08, "done": false, "training_iteration": 19, "date": "2019-05-20_01-00-12", "node_ip": "10.138.0.2", "timesteps_total": 1069027}
{"hostname": "flow-main", "episode_reward_mean": 831.2005926974479, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898780>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 34.47423481941223, "timesteps_since_restore": 1113280, "info": {"update_time_ms": 8.238, "load_time_ms": 8.605, "sample_time_ms": 25227.388, "num_steps_trained": 1113280, "default": {"entropy": 1.2856281995773315, "policy_loss": -0.008085460402071476, "vf_loss": 35.991249084472656, "kl": 0.019243789836764336, "vf_explained_var": 0.3033561706542969, "total_loss": 35.98508834838867, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 1113280, "grad_time_ms": 12460.927}, "time_total_s": 829.5353240966797, "num_metric_batches_dropped": 0, "timestamp": 1558314046, "episode_reward_max": 936.6412183579447, "timesteps_this_iter": 44253, "pid": 46936, "custom_metrics": {"cost2_mean": -50.01424460373556, "outflow_rate_mean": 973.524417135993, "system_level_velocity_mean": 15.769191558415146, "cost2_min": -85.56604329479208, "cost1_min": 33.69015066551943, "cost1_mean": 398.814117550133, "cost1_max": 440.48943656561795, "outflow_rate_max": 1088.3686145810611, "system_level_velocity_max": 18.70934696103815, "outflow_rate_min": 536.1497950193897, "cost2_max": -19.442978324415332, "system_level_velocity_min": 10.476349182667876}, "policy_reward_mean": {}, "time_since_restore": 829.5353240966797, "episodes_total": 602, "iterations_since_restore": 20, "episode_reward_min": 79.60062753933113, "episodes_this_iter": 34, "episode_len_mean": 689.59, "done": false, "training_iteration": 20, "date": "2019-05-20_01-00-46", "node_ip": "10.138.0.2", "timesteps_total": 1113280}
{"hostname": "flow-main", "episode_reward_mean": 807.7480864577403, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a95f8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 33.59184408187866, "timesteps_since_restore": 1157403, "info": {"update_time_ms": 8.067, "load_time_ms": 8.327, "sample_time_ms": 24429.459, "num_steps_trained": 1157403, "default": {"entropy": 1.2617833614349365, "policy_loss": -0.007776911370456219, "vf_loss": 37.30339431762695, "kl": 0.014484272338449955, "vf_explained_var": 0.31613874435424805, "total_loss": 37.29706573486328, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1157403, "grad_time_ms": 12190.385}, "time_total_s": 863.1271681785583, "num_metric_batches_dropped": 0, "timestamp": 1558314080, "episode_reward_max": 936.6412183579447, "timesteps_this_iter": 44123, "pid": 46936, "custom_metrics": {"cost2_mean": -47.014029856581786, "outflow_rate_mean": 957.7053677076423, "system_level_velocity_mean": 16.03967612955786, "cost2_min": -73.66203879145895, "cost1_min": 22.991022131672516, "cost1_mean": 392.2232457639667, "cost1_max": 443.3743190431877, "outflow_rate_max": 1088.3686145810611, "system_level_velocity_max": 18.70934696103815, "outflow_rate_min": 491.08240431909303, "cost2_max": -17.896936405779346, "system_level_velocity_min": 11.50040647675514}, "policy_reward_mean": {}, "time_since_restore": 863.1271681785583, "episodes_total": 638, "iterations_since_restore": 21, "episode_reward_min": 52.631857251098, "episodes_this_iter": 36, "episode_len_mean": 671.64, "done": false, "training_iteration": 21, "date": "2019-05-20_01-01-20", "node_ip": "10.138.0.2", "timesteps_total": 1157403}
{"hostname": "flow-main", "episode_reward_mean": 808.8534563583464, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898128>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028987b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898518>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.330078840255737, "timesteps_since_restore": 1200934, "info": {"update_time_ms": 8.344, "load_time_ms": 8.234, "sample_time_ms": 23729.794, "num_steps_trained": 1200934, "default": {"entropy": 1.2758053541183472, "policy_loss": -0.00854503083974123, "vf_loss": 32.258506774902344, "kl": 0.017797980457544327, "vf_explained_var": 0.3138999938964844, "total_loss": 32.251739501953125, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000002384185791}, "num_steps_sampled": 1200934, "grad_time_ms": 11746.863}, "time_total_s": 894.4572470188141, "num_metric_batches_dropped": 0, "timestamp": 1558314111, "episode_reward_max": 936.6412183579447, "timesteps_this_iter": 43531, "pid": 46936, "custom_metrics": {"cost2_mean": -45.25543916400954, "outflow_rate_mean": 957.1460228956805, "system_level_velocity_mean": 16.22944535751763, "cost2_min": -73.66203879145895, "cost1_min": 22.991022131672516, "cost1_mean": 398.3341291320505, "cost1_max": 443.3743190431877, "outflow_rate_max": 1088.3686145810611, "system_level_velocity_max": 18.70934696103815, "outflow_rate_min": 491.08240431909303, "cost2_max": -17.896936405779346, "system_level_velocity_min": 13.451606425683421}, "policy_reward_mean": {}, "time_since_restore": 894.4572470188141, "episodes_total": 669, "iterations_since_restore": 22, "episode_reward_min": 52.631857251098, "episodes_this_iter": 31, "episode_len_mean": 675.56, "done": false, "training_iteration": 22, "date": "2019-05-20_01-01-51", "node_ip": "10.138.0.2", "timesteps_total": 1200934}
{"hostname": "flow-main", "episode_reward_mean": 802.9504436606937, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b60f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6828>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 35.74756646156311, "timesteps_since_restore": 1244846, "info": {"update_time_ms": 8.284, "load_time_ms": 8.095, "sample_time_ms": 23634.022, "num_steps_trained": 1244846, "default": {"entropy": 1.2649405002593994, "policy_loss": -0.007778980769217014, "vf_loss": 35.982078552246094, "kl": 0.01671791262924671, "vf_explained_var": 0.2792467772960663, "total_loss": 35.975975036621094, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1244846, "grad_time_ms": 11449.499}, "time_total_s": 930.2048134803772, "num_metric_batches_dropped": 0, "timestamp": 1558314147, "episode_reward_max": 900.1780666609578, "timesteps_this_iter": 43912, "pid": 46936, "custom_metrics": {"cost2_mean": -45.63082146795988, "outflow_rate_mean": 956.2438182643315, "system_level_velocity_mean": 16.14757471113918, "cost2_min": -68.41952417865532, "cost1_min": 22.991022131672516, "cost1_mean": 399.56236629402514, "cost1_max": 443.3743190431877, "outflow_rate_max": 1084.8162657371863, "system_level_velocity_max": 18.53193659421869, "outflow_rate_min": 491.08240431909303, "cost2_max": -17.896936405779346, "system_level_velocity_min": 12.423730730953617}, "policy_reward_mean": {}, "time_since_restore": 930.2048134803772, "episodes_total": 702, "iterations_since_restore": 23, "episode_reward_min": 52.631857251098, "episodes_this_iter": 33, "episode_len_mean": 680.28, "done": false, "training_iteration": 23, "date": "2019-05-20_01-02-27", "node_ip": "10.138.0.2", "timesteps_total": 1244846}
{"hostname": "flow-main", "episode_reward_mean": 797.542660158877, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2550>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 33.33749437332153, "timesteps_since_restore": 1288252, "info": {"update_time_ms": 8.159, "load_time_ms": 7.715, "sample_time_ms": 23289.108, "num_steps_trained": 1288252, "default": {"entropy": 1.255713939666748, "policy_loss": -0.004545657895505428, "vf_loss": 40.79030227661133, "kl": 0.01484536100178957, "vf_explained_var": 0.23375216126441956, "total_loss": 40.7872428894043, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1288252, "grad_time_ms": 11346.482}, "time_total_s": 963.5423078536987, "num_metric_batches_dropped": 0, "timestamp": 1558314180, "episode_reward_max": 900.1780666609578, "timesteps_this_iter": 43406, "pid": 46936, "custom_metrics": {"cost2_mean": -45.68956620803897, "outflow_rate_mean": 952.4160108407261, "system_level_velocity_mean": 16.207471335628654, "cost2_min": -69.48696093230419, "cost1_min": 28.37900764757256, "cost1_mean": 401.7686307648151, "cost1_max": 444.81341186171323, "outflow_rate_max": 1076.4513856863382, "system_level_velocity_max": 19.428235604132567, "outflow_rate_min": 533.1810317341698, "cost2_max": -20.99042758701534, "system_level_velocity_min": 12.423730730953617}, "policy_reward_mean": {}, "time_since_restore": 963.5423078536987, "episodes_total": 736, "iterations_since_restore": 24, "episode_reward_min": 55.894835475452744, "episodes_this_iter": 34, "episode_len_mean": 682.88, "done": false, "training_iteration": 24, "date": "2019-05-20_01-03-00", "node_ip": "10.138.0.2", "timesteps_total": 1288252}
{"hostname": "flow-main", "episode_reward_mean": 784.7523214991483, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028989e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028985c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898128>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 33.58939599990845, "timesteps_since_restore": 1332242, "info": {"update_time_ms": 8.343, "load_time_ms": 7.589, "sample_time_ms": 23168.284, "num_steps_trained": 1332242, "default": {"entropy": 1.2692228555679321, "policy_loss": -0.008991443552076817, "vf_loss": 38.568817138671875, "kl": 0.0211828351020813, "vf_explained_var": 0.2563721835613251, "total_loss": 38.561946868896484, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.10000001639127731}, "num_steps_sampled": 1332242, "grad_time_ms": 11287.255}, "time_total_s": 997.1317038536072, "num_metric_batches_dropped": 0, "timestamp": 1558314214, "episode_reward_max": 868.2153161543253, "timesteps_this_iter": 43990, "pid": 46936, "custom_metrics": {"cost2_mean": -45.96230942806157, "outflow_rate_mean": 941.1432736921234, "system_level_velocity_mean": 16.17081083646788, "cost2_min": -69.48696093230419, "cost1_min": 28.37900764757256, "cost1_mean": 396.7496077982078, "cost1_max": 444.81341186171323, "outflow_rate_max": 1080.383208478243, "system_level_velocity_max": 19.428235604132567, "outflow_rate_min": 533.1810317341698, "cost2_max": -20.99042758701534, "system_level_velocity_min": 12.423730730953617}, "policy_reward_mean": {}, "time_since_restore": 997.1317038536072, "episodes_total": 769, "iterations_since_restore": 25, "episode_reward_min": 55.894835475452744, "episodes_this_iter": 33, "episode_len_mean": 678.05, "done": false, "training_iteration": 25, "date": "2019-05-20_01-03-34", "node_ip": "10.138.0.2", "timesteps_total": 1332242}
{"hostname": "flow-main", "episode_reward_mean": 788.1207218034656, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9cf8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.388484477996826, "timesteps_since_restore": 1374858, "info": {"update_time_ms": 8.346, "load_time_ms": 7.51, "sample_time_ms": 22902.071, "num_steps_trained": 1374858, "default": {"entropy": 1.2665718793869019, "policy_loss": -0.008679855614900589, "vf_loss": 37.38510513305664, "kl": 0.015101250261068344, "vf_explained_var": 0.2172975242137909, "total_loss": 37.378692626953125, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1374858, "grad_time_ms": 11120.823}, "time_total_s": 1029.520188331604, "num_metric_batches_dropped": 0, "timestamp": 1558314246, "episode_reward_max": 868.4322795147895, "timesteps_this_iter": 42616, "pid": 46936, "custom_metrics": {"cost2_mean": -44.525703612611366, "outflow_rate_mean": 942.9195582640045, "system_level_velocity_mean": 16.376045841435474, "cost2_min": -69.48696093230419, "cost1_min": 28.37900764757256, "cost1_mean": 401.9283584793099, "cost1_max": 445.61116422216185, "outflow_rate_max": 1080.383208478243, "system_level_velocity_max": 19.428235604132567, "outflow_rate_min": 533.1810317341698, "cost2_max": -20.99042758701534, "system_level_velocity_min": 12.548218372298429}, "policy_reward_mean": {}, "time_since_restore": 1029.520188331604, "episodes_total": 800, "iterations_since_restore": 26, "episode_reward_min": 55.894835475452744, "episodes_this_iter": 31, "episode_len_mean": 679.82, "done": false, "training_iteration": 26, "date": "2019-05-20_01-04-06", "node_ip": "10.138.0.2", "timesteps_total": 1374858}
{"hostname": "flow-main", "episode_reward_mean": 784.4714915150674, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2048>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2160>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.334616899490356, "timesteps_since_restore": 1416912, "info": {"update_time_ms": 8.286, "load_time_ms": 7.319, "sample_time_ms": 22646.327, "num_steps_trained": 1416912, "default": {"entropy": 1.287569522857666, "policy_loss": -0.00890349317342043, "vf_loss": 38.0302734375, "kl": 0.016203073784708977, "vf_explained_var": 0.2259821593761444, "total_loss": 38.02379608154297, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1416912, "grad_time_ms": 11074.967}, "time_total_s": 1061.8548052310944, "num_metric_batches_dropped": 0, "timestamp": 1558314279, "episode_reward_max": 868.9874380987864, "timesteps_this_iter": 42054, "pid": 46936, "custom_metrics": {"cost2_mean": -44.63602611550066, "outflow_rate_mean": 940.8046482546157, "system_level_velocity_mean": 16.245440847546757, "cost2_min": -65.65478686945517, "cost1_min": 138.66252782681357, "cost1_mean": 402.17361409207587, "cost1_max": 445.61116422216185, "outflow_rate_max": 1080.383208478243, "system_level_velocity_max": 18.05100106972618, "outflow_rate_min": 730.3918990619208, "cost2_max": -30.123883755478325, "system_level_velocity_min": 13.759169257765206}, "policy_reward_mean": {}, "time_since_restore": 1061.8548052310944, "episodes_total": 836, "iterations_since_restore": 27, "episode_reward_min": 269.5268292989045, "episodes_this_iter": 36, "episode_len_mean": 684.71, "done": false, "training_iteration": 27, "date": "2019-05-20_01-04-39", "node_ip": "10.138.0.2", "timesteps_total": 1416912}
{"hostname": "flow-main", "episode_reward_mean": 775.7209014611379, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d335f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33908>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.530447244644165, "timesteps_since_restore": 1459625, "info": {"update_time_ms": 8.354, "load_time_ms": 7.266, "sample_time_ms": 22494.197, "num_steps_trained": 1459625, "default": {"entropy": 1.2950232028961182, "policy_loss": -0.008341221138834953, "vf_loss": 41.220767974853516, "kl": 0.017129801213741302, "vf_explained_var": 0.19378776848316193, "total_loss": 41.214996337890625, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1459625, "grad_time_ms": 10822.541}, "time_total_s": 1093.3852524757385, "num_metric_batches_dropped": 0, "timestamp": 1558314310, "episode_reward_max": 868.9874380987864, "timesteps_this_iter": 42713, "pid": 46936, "custom_metrics": {"cost2_mean": -44.02830931186329, "outflow_rate_mean": 933.9543969984447, "system_level_velocity_mean": 16.33943625294481, "cost2_min": -65.65478686945517, "cost1_min": 27.073795246550365, "cost1_mean": 402.1865949988463, "cost1_max": 450.5110733358115, "outflow_rate_max": 1062.217523850068, "system_level_velocity_max": 18.31287502575814, "outflow_rate_min": 503.53534072619476, "cost2_max": -19.24910456964614, "system_level_velocity_min": 13.589472831093719}, "policy_reward_mean": {}, "time_since_restore": 1093.3852524757385, "episodes_total": 871, "iterations_since_restore": 28, "episode_reward_min": 62.10337990801963, "episodes_this_iter": 35, "episode_len_mean": 682.63, "done": false, "training_iteration": 28, "date": "2019-05-20_01-05-10", "node_ip": "10.138.0.2", "timesteps_total": 1459625}
{"hostname": "flow-main", "episode_reward_mean": 765.4258255188818, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b60b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6128>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 34.51668953895569, "timesteps_since_restore": 1502800, "info": {"update_time_ms": 8.341, "load_time_ms": 7.38, "sample_time_ms": 22505.435, "num_steps_trained": 1502800, "default": {"entropy": 1.2895946502685547, "policy_loss": -0.006755164358764887, "vf_loss": 48.836448669433594, "kl": 0.015748409554362297, "vf_explained_var": 0.19548776745796204, "total_loss": 48.832054138183594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1502800, "grad_time_ms": 10679.088}, "time_total_s": 1127.9019420146942, "num_metric_batches_dropped": 0, "timestamp": 1558314345, "episode_reward_max": 873.2652559030035, "timesteps_this_iter": 43175, "pid": 46936, "custom_metrics": {"cost2_mean": -43.64739683380439, "outflow_rate_mean": 925.0563899467337, "system_level_velocity_mean": 16.349597897931226, "cost2_min": -65.85100533345327, "cost1_min": 23.04437456315566, "cost1_mean": 393.83368164207263, "cost1_max": 450.5110733358115, "outflow_rate_max": 1062.217523850068, "system_level_velocity_max": 18.411337463437732, "outflow_rate_min": 496.3415920460382, "cost2_max": -17.409577208120293, "system_level_velocity_min": 13.246305464403587}, "policy_reward_mean": {}, "time_since_restore": 1127.9019420146942, "episodes_total": 910, "iterations_since_restore": 29, "episode_reward_min": 54.31908550972383, "episodes_this_iter": 39, "episode_len_mean": 670.24, "done": false, "training_iteration": 29, "date": "2019-05-20_01-05-45", "node_ip": "10.138.0.2", "timesteps_total": 1502800}
{"hostname": "flow-main", "episode_reward_mean": 776.8449986303734, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b22b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2668>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.29660511016846, "timesteps_since_restore": 1545381, "info": {"update_time_ms": 8.124, "load_time_ms": 7.126, "sample_time_ms": 22159.881, "num_steps_trained": 1545381, "default": {"entropy": 1.3014967441558838, "policy_loss": -0.007168246433138847, "vf_loss": 39.635047912597656, "kl": 0.015750830993056297, "vf_explained_var": 0.17089343070983887, "total_loss": 39.630245208740234, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1545381, "grad_time_ms": 10805.941}, "time_total_s": 1160.1985471248627, "num_metric_batches_dropped": 0, "timestamp": 1558314377, "episode_reward_max": 885.0966276233511, "timesteps_this_iter": 42581, "pid": 46936, "custom_metrics": {"cost2_mean": -42.45687116468633, "outflow_rate_mean": 926.2859558378047, "system_level_velocity_mean": 16.471059650630597, "cost2_min": -65.85100533345327, "cost1_min": 23.04437456315566, "cost1_mean": 399.50628084822887, "cost1_max": 450.5110733358115, "outflow_rate_max": 1062.217523850068, "system_level_velocity_max": 18.411337463437732, "outflow_rate_min": 496.3415920460382, "cost2_max": -17.409577208120293, "system_level_velocity_min": 13.246305464403587}, "policy_reward_mean": {}, "time_since_restore": 1160.1985471248627, "episodes_total": 943, "iterations_since_restore": 30, "episode_reward_min": 54.31908550972383, "episodes_this_iter": 33, "episode_len_mean": 675.44, "done": false, "training_iteration": 30, "date": "2019-05-20_01-06-17", "node_ip": "10.138.0.2", "timesteps_total": 1545381}
{"hostname": "flow-main", "episode_reward_mean": 774.8031598131254, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d338d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2550>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.726306676864624, "timesteps_since_restore": 1586990, "info": {"update_time_ms": 8.094, "load_time_ms": 7.186, "sample_time_ms": 22117.965, "num_steps_trained": 1586990, "default": {"entropy": 1.3073936700820923, "policy_loss": -0.0080433813855052, "vf_loss": 41.33635711669922, "kl": 0.015699977055191994, "vf_explained_var": 0.18476900458335876, "total_loss": 41.33066940307617, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.1499999761581421}, "num_steps_sampled": 1586990, "grad_time_ms": 10664.486}, "time_total_s": 1191.9248538017273, "num_metric_batches_dropped": 0, "timestamp": 1558314409, "episode_reward_max": 885.0966276233511, "timesteps_this_iter": 41609, "pid": 46936, "custom_metrics": {"cost2_mean": -40.75284939075764, "outflow_rate_mean": 924.7889723774315, "system_level_velocity_mean": 16.693785392164386, "cost2_min": -59.98031087541452, "cost1_min": 23.014515501913394, "cost1_mean": 402.9118021160065, "cost1_max": 446.99704982537884, "outflow_rate_max": 1039.4177583796145, "system_level_velocity_max": 18.470781755409018, "outflow_rate_min": 496.3415920460382, "cost2_max": -16.397144603933114, "system_level_velocity_min": 13.246305464403587}, "policy_reward_mean": {}, "time_since_restore": 1191.9248538017273, "episodes_total": 977, "iterations_since_restore": 31, "episode_reward_min": 54.31908550972383, "episodes_this_iter": 34, "episode_len_mean": 673.25, "done": false, "training_iteration": 31, "date": "2019-05-20_01-06-49", "node_ip": "10.138.0.2", "timesteps_total": 1586990}
{"hostname": "flow-main", "episode_reward_mean": 768.8937426672949, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cec470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cec080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cecf98>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.049343585968018, "timesteps_since_restore": 1628561, "info": {"update_time_ms": 8.052, "load_time_ms": 7.072, "sample_time_ms": 22161.684, "num_steps_trained": 1628561, "default": {"entropy": 1.3260455131530762, "policy_loss": -0.00956276897341013, "vf_loss": 41.627750396728516, "kl": 0.018029287457466125, "vf_explained_var": 0.16070187091827393, "total_loss": 41.62089157104492, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.1499999761581421}, "num_steps_sampled": 1628561, "grad_time_ms": 10592.513}, "time_total_s": 1222.9741973876953, "num_metric_batches_dropped": 0, "timestamp": 1558314440, "episode_reward_max": 885.0966276233511, "timesteps_this_iter": 41571, "pid": 46936, "custom_metrics": {"cost2_mean": -40.50921889488374, "outflow_rate_mean": 922.7691822331616, "system_level_velocity_mean": 16.801279809025278, "cost2_min": -59.98031087541452, "cost1_min": 23.014515501913394, "cost1_mean": 406.8261068356853, "cost1_max": 451.66370984754224, "outflow_rate_max": 1039.4177583796145, "system_level_velocity_max": 18.470781755409018, "outflow_rate_min": 507.39374423947993, "cost2_max": -16.397144603933114, "system_level_velocity_min": 13.782225063286704}, "policy_reward_mean": {}, "time_since_restore": 1222.9741973876953, "episodes_total": 1011, "iterations_since_restore": 32, "episode_reward_min": 55.53866232937947, "episodes_this_iter": 34, "episode_len_mean": 674.63, "done": false, "training_iteration": 32, "date": "2019-05-20_01-07-20", "node_ip": "10.138.0.2", "timesteps_total": 1628561}
{"hostname": "flow-main", "episode_reward_mean": 765.9392444788637, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6f28>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.81321120262146, "timesteps_since_restore": 1669867, "info": {"update_time_ms": 8.17, "load_time_ms": 6.993, "sample_time_ms": 21485.67, "num_steps_trained": 1669867, "default": {"entropy": 1.3302667140960693, "policy_loss": -0.00788589846342802, "vf_loss": 43.72018814086914, "kl": 0.017134224995970726, "vf_explained_var": 0.12551827728748322, "total_loss": 43.71487045288086, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.14999999105930328}, "num_steps_sampled": 1669867, "grad_time_ms": 10574.347}, "time_total_s": 1251.7874085903168, "num_metric_batches_dropped": 0, "timestamp": 1558314469, "episode_reward_max": 849.3772183414793, "timesteps_this_iter": 41306, "pid": 46936, "custom_metrics": {"cost2_mean": -39.90142824016014, "outflow_rate_mean": 917.9374813481809, "system_level_velocity_mean": 16.98243340319273, "cost2_min": -57.99991984518656, "cost1_min": 23.014515501913394, "cost1_mean": 411.92948075538, "cost1_max": 451.66370984754224, "outflow_rate_max": 1030.6901498956975, "system_level_velocity_max": 18.470781755409018, "outflow_rate_min": 507.39374423947993, "cost2_max": -16.397144603933114, "system_level_velocity_min": 14.510457963556775}, "policy_reward_mean": {}, "time_since_restore": 1251.7874085903168, "episodes_total": 1043, "iterations_since_restore": 33, "episode_reward_min": 55.53866232937947, "episodes_this_iter": 32, "episode_len_mean": 676.52, "done": false, "training_iteration": 33, "date": "2019-05-20_01-07-49", "node_ip": "10.138.0.2", "timesteps_total": 1669867}
{"hostname": "flow-main", "episode_reward_mean": 765.5411443754879, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cecf98>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33a58>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.22064781188965, "timesteps_since_restore": 1711082, "info": {"update_time_ms": 8.322, "load_time_ms": 6.971, "sample_time_ms": 21534.926, "num_steps_trained": 1711082, "default": {"entropy": 1.3224116563796997, "policy_loss": -0.009400310926139355, "vf_loss": 43.6580924987793, "kl": 0.02126014046370983, "vf_explained_var": 0.14398129284381866, "total_loss": 43.651885986328125, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.1499999761581421}, "num_steps_sampled": 1711082, "grad_time_ms": 10313.63}, "time_total_s": 1283.0080564022064, "num_metric_batches_dropped": 0, "timestamp": 1558314500, "episode_reward_max": 849.3772183414793, "timesteps_this_iter": 41215, "pid": 46936, "custom_metrics": {"cost2_mean": -39.641771783891585, "outflow_rate_mean": 908.309987691711, "system_level_velocity_mean": 16.92087018993521, "cost2_min": -54.76058624632232, "cost1_min": 19.425560666430318, "cost1_mean": 412.35425700449457, "cost1_max": 451.66370984754224, "outflow_rate_max": 1021.6203741484114, "system_level_velocity_max": 18.368240511950763, "outflow_rate_min": 497.046332836002, "cost2_max": -17.750001599652126, "system_level_velocity_min": 14.807418896016747}, "policy_reward_mean": {}, "time_since_restore": 1283.0080564022064, "episodes_total": 1076, "iterations_since_restore": 34, "episode_reward_min": 38.69817211387345, "episodes_this_iter": 33, "episode_len_mean": 678.73, "done": false, "training_iteration": 34, "date": "2019-05-20_01-08-20", "node_ip": "10.138.0.2", "timesteps_total": 1711082}
{"hostname": "flow-main", "episode_reward_mean": 756.6112451551872, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b60b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.7781195640564, "timesteps_since_restore": 1752082, "info": {"update_time_ms": 8.282, "load_time_ms": 6.733, "sample_time_ms": 21567.067, "num_steps_trained": 1752082, "default": {"entropy": 1.33364999294281, "policy_loss": -0.006822950206696987, "vf_loss": 52.3293571472168, "kl": 0.012888604775071144, "vf_explained_var": 0.10611522197723389, "total_loss": 52.325439453125, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 1752082, "grad_time_ms": 10199.781}, "time_total_s": 1315.7861759662628, "num_metric_batches_dropped": 0, "timestamp": 1558314533, "episode_reward_max": 841.5584758437334, "timesteps_this_iter": 41000, "pid": 46936, "custom_metrics": {"cost2_mean": -39.19367024503359, "outflow_rate_mean": 897.6394689563587, "system_level_velocity_mean": 16.897537663374024, "cost2_min": -54.287074746172564, "cost1_min": 16.36264461803438, "cost1_mean": 410.1520187743079, "cost1_max": 452.34601872184584, "outflow_rate_max": 1021.6203741484114, "system_level_velocity_max": 18.438987679454637, "outflow_rate_min": 478.85323924047754, "cost2_max": -15.896104766949653, "system_level_velocity_min": 14.471317677141927}, "policy_reward_mean": {}, "time_since_restore": 1315.7861759662628, "episodes_total": 1113, "iterations_since_restore": 35, "episode_reward_min": 37.411213874841664, "episodes_this_iter": 37, "episode_len_mean": 677.31, "done": false, "training_iteration": 35, "date": "2019-05-20_01-08-53", "node_ip": "10.138.0.2", "timesteps_total": 1752082}
{"hostname": "flow-main", "episode_reward_mean": 745.7397252636833, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9f28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9208>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.899272680282593, "timesteps_since_restore": 1793400, "info": {"update_time_ms": 8.27, "load_time_ms": 6.63, "sample_time_ms": 21304.024, "num_steps_trained": 1793400, "default": {"entropy": 1.3315061330795288, "policy_loss": -0.007947098463773727, "vf_loss": 42.1392707824707, "kl": 0.013943657279014587, "vf_explained_var": 0.14838996529579163, "total_loss": 42.13446044921875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 1793400, "grad_time_ms": 10313.328}, "time_total_s": 1346.6854486465454, "num_metric_batches_dropped": 0, "timestamp": 1558314564, "episode_reward_max": 851.7536113002759, "timesteps_this_iter": 41318, "pid": 46936, "custom_metrics": {"cost2_mean": -38.902108570844796, "outflow_rate_mean": 890.4043897897361, "system_level_velocity_mean": 16.855590690236554, "cost2_min": -53.590169110419154, "cost1_min": 16.36264461803438, "cost1_mean": 402.66849400717035, "cost1_max": 452.34601872184584, "outflow_rate_max": 1016.5289556994883, "system_level_velocity_max": 18.438987679454637, "outflow_rate_min": 478.85323924047754, "cost2_max": -15.896104766949653, "system_level_velocity_min": 14.04062080778099}, "policy_reward_mean": {}, "time_since_restore": 1346.6854486465454, "episodes_total": 1146, "iterations_since_restore": 36, "episode_reward_min": 37.411213874841664, "episodes_this_iter": 33, "episode_len_mean": 667.18, "done": false, "training_iteration": 36, "date": "2019-05-20_01-09-24", "node_ip": "10.138.0.2", "timesteps_total": 1793400}
{"hostname": "flow-main", "episode_reward_mean": 751.0304429343626, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c19e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9978>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.89519429206848, "timesteps_since_restore": 1834813, "info": {"update_time_ms": 8.292, "load_time_ms": 6.64, "sample_time_ms": 21382.622, "num_steps_trained": 1834813, "default": {"entropy": 1.338913917541504, "policy_loss": -0.008484256453812122, "vf_loss": 44.29736328125, "kl": 0.013479462824761868, "vf_explained_var": 0.1419796347618103, "total_loss": 44.29191207885742, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 1834813, "grad_time_ms": 10089.281}, "time_total_s": 1377.580642938614, "num_metric_batches_dropped": 0, "timestamp": 1558314595, "episode_reward_max": 851.7536113002759, "timesteps_this_iter": 41413, "pid": 46936, "custom_metrics": {"cost2_mean": -38.88659239203718, "outflow_rate_mean": 887.9386116798267, "system_level_velocity_mean": 16.748479064229, "cost2_min": -53.590169110419154, "cost1_min": 16.36264461803438, "cost1_mean": 404.5127312173679, "cost1_max": 452.34601872184584, "outflow_rate_max": 1016.5289556994883, "system_level_velocity_max": 18.651760244108488, "outflow_rate_min": 478.85323924047754, "cost2_max": -15.896104766949653, "system_level_velocity_min": 13.85488386197502}, "policy_reward_mean": {}, "time_since_restore": 1377.580642938614, "episodes_total": 1180, "iterations_since_restore": 37, "episode_reward_min": 37.411213874841664, "episodes_this_iter": 34, "episode_len_mean": 675.14, "done": false, "training_iteration": 37, "date": "2019-05-20_01-09-55", "node_ip": "10.138.0.2", "timesteps_total": 1834813}
{"hostname": "flow-main", "episode_reward_mean": 756.9469667044593, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c14e0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.1803674697876, "timesteps_since_restore": 1875783, "info": {"update_time_ms": 8.436, "load_time_ms": 6.635, "sample_time_ms": 21416.718, "num_steps_trained": 1875783, "default": {"entropy": 1.363389253616333, "policy_loss": -0.00836810190230608, "vf_loss": 44.867454528808594, "kl": 0.01393047533929348, "vf_explained_var": 0.12747669219970703, "total_loss": 44.862220764160156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 1875783, "grad_time_ms": 10119.46}, "time_total_s": 1409.7610104084015, "num_metric_batches_dropped": 0, "timestamp": 1558314627, "episode_reward_max": 851.7536113002759, "timesteps_this_iter": 40970, "pid": 46936, "custom_metrics": {"cost2_mean": -39.79486225292599, "outflow_rate_mean": 890.5829298292105, "system_level_velocity_mean": 16.65710961500699, "cost2_min": -53.750031037862655, "cost1_min": 21.89836559724968, "cost1_mean": 407.3203981543288, "cost1_max": 449.77698052441656, "outflow_rate_max": 1016.5289556994883, "system_level_velocity_max": 18.651760244108488, "outflow_rate_min": 504.027103115012, "cost2_max": -18.304244156205126, "system_level_velocity_min": 13.85488386197502}, "policy_reward_mean": {}, "time_since_restore": 1409.7610104084015, "episodes_total": 1214, "iterations_since_restore": 38, "episode_reward_min": 44.366880339627635, "episodes_this_iter": 34, "episode_len_mean": 682.89, "done": false, "training_iteration": 38, "date": "2019-05-20_01-10-27", "node_ip": "10.138.0.2", "timesteps_total": 1875783}
{"hostname": "flow-main", "episode_reward_mean": 767.006508552476, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2160>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.728103637695312, "timesteps_since_restore": 1917156, "info": {"update_time_ms": 8.31, "load_time_ms": 6.606, "sample_time_ms": 21043.236, "num_steps_trained": 1917156, "default": {"entropy": 1.3588427305221558, "policy_loss": -0.006657409947365522, "vf_loss": 48.653236389160156, "kl": 0.012942284345626831, "vf_explained_var": 0.12816382944583893, "total_loss": 48.64949417114258, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 1917156, "grad_time_ms": 10114.914}, "time_total_s": 1440.4891140460968, "num_metric_batches_dropped": 0, "timestamp": 1558314658, "episode_reward_max": 841.1479394942261, "timesteps_this_iter": 41373, "pid": 46936, "custom_metrics": {"cost2_mean": -39.15198178377022, "outflow_rate_mean": 895.4716557675576, "system_level_velocity_mean": 16.73479897947396, "cost2_min": -53.750031037862655, "cost1_min": 26.174528373788338, "cost1_mean": 414.3155206115743, "cost1_max": 449.01844052231684, "outflow_rate_max": 1001.1820911304811, "system_level_velocity_max": 18.651760244108488, "outflow_rate_min": 523.3468590889785, "cost2_max": -20.78730877591244, "system_level_velocity_min": 14.57772931911609}, "policy_reward_mean": {}, "time_since_restore": 1440.4891140460968, "episodes_total": 1252, "iterations_since_restore": 39, "episode_reward_min": 52.16808870953283, "episodes_this_iter": 38, "episode_len_mean": 690.63, "done": false, "training_iteration": 39, "date": "2019-05-20_01-10-58", "node_ip": "10.138.0.2", "timesteps_total": 1917156}
{"hostname": "flow-main", "episode_reward_mean": 775.879366411511, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c15c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1c18>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.45017409324646, "timesteps_since_restore": 1958515, "info": {"update_time_ms": 8.211, "load_time_ms": 6.23, "sample_time_ms": 20914.535, "num_steps_trained": 1958515, "default": {"entropy": 1.3590823411941528, "policy_loss": -0.0070896390825510025, "vf_loss": 39.0633544921875, "kl": 0.013488403521478176, "vf_explained_var": 0.20130637288093567, "total_loss": 39.05929946899414, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 1958515, "grad_time_ms": 9959.306}, "time_total_s": 1469.9392881393433, "num_metric_batches_dropped": 0, "timestamp": 1558314687, "episode_reward_max": 840.8378367770366, "timesteps_this_iter": 41359, "pid": 46936, "custom_metrics": {"cost2_mean": -39.552273446252066, "outflow_rate_mean": 899.2218353568757, "system_level_velocity_mean": 16.739129697307366, "cost2_min": -56.926712156604474, "cost1_min": 286.2427769237464, "cost1_mean": 419.0413283003631, "cost1_max": 450.3081149597228, "outflow_rate_max": 1009.5742940164411, "system_level_velocity_max": 18.165007908764416, "outflow_rate_min": 788.3733297663332, "cost2_max": -27.086590561350867, "system_level_velocity_min": 14.57772931911609}, "policy_reward_mean": {}, "time_since_restore": 1469.9392881393433, "episodes_total": 1283, "iterations_since_restore": 40, "episode_reward_min": 512.6175948749984, "episodes_this_iter": 31, "episode_len_mean": 697.61, "done": false, "training_iteration": 40, "date": "2019-05-20_01-11-27", "node_ip": "10.138.0.2", "timesteps_total": 1958515}
{"hostname": "flow-main", "episode_reward_mean": 778.1050888371855, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b60f0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.85243582725525, "timesteps_since_restore": 1999558, "info": {"update_time_ms": 8.273, "load_time_ms": 6.164, "sample_time_ms": 20958.055, "num_steps_trained": 1999558, "default": {"entropy": 1.3676235675811768, "policy_loss": -0.009146293625235558, "vf_loss": 44.0042610168457, "kl": 0.014897184446454048, "vf_explained_var": 0.16763362288475037, "total_loss": 43.99846649169922, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 1999558, "grad_time_ms": 9926.351}, "time_total_s": 1501.7917239665985, "num_metric_batches_dropped": 0, "timestamp": 1558314719, "episode_reward_max": 840.8378367770366, "timesteps_this_iter": 41043, "pid": 46936, "custom_metrics": {"cost2_mean": -38.32799151014028, "outflow_rate_mean": 900.8826920043351, "system_level_velocity_mean": 16.862066284568332, "cost2_min": -56.926712156604474, "cost1_min": 286.2427769237464, "cost1_mean": 420.88383163579414, "cost1_max": 450.3081149597228, "outflow_rate_max": 1009.5742940164411, "system_level_velocity_max": 18.165007908764416, "outflow_rate_min": 808.000467952243, "cost2_max": -27.892511670490716, "system_level_velocity_min": 14.170190320779044}, "policy_reward_mean": {}, "time_since_restore": 1501.7917239665985, "episodes_total": 1316, "iterations_since_restore": 41, "episode_reward_min": 512.6175948749984, "episodes_this_iter": 33, "episode_len_mean": 696.28, "done": false, "training_iteration": 41, "date": "2019-05-20_01-11-59", "node_ip": "10.138.0.2", "timesteps_total": 1999558}
{"hostname": "flow-main", "episode_reward_mean": 772.8473478347671, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cec470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d335f8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.393009901046753, "timesteps_since_restore": 2040508, "info": {"update_time_ms": 8.328, "load_time_ms": 6.198, "sample_time_ms": 20980.326, "num_steps_trained": 2040508, "default": {"entropy": 1.3634065389633179, "policy_loss": -0.008243422023952007, "vf_loss": 44.4637336730957, "kl": 0.0136572802439332, "vf_explained_var": 0.17392075061798096, "total_loss": 44.458560943603516, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2040508, "grad_time_ms": 9939.427}, "time_total_s": 1533.1847338676453, "num_metric_batches_dropped": 0, "timestamp": 1558314751, "episode_reward_max": 850.4580624780705, "timesteps_this_iter": 40950, "pid": 46936, "custom_metrics": {"cost2_mean": -38.31943802439911, "outflow_rate_mean": 896.9233711490547, "system_level_velocity_mean": 16.8460318841665, "cost2_min": -56.926712156604474, "cost1_min": 29.30070837746082, "cost1_mean": 417.6815863806539, "cost1_max": 451.466965470932, "outflow_rate_max": 1021.8388694351158, "system_level_velocity_max": 18.83422988721171, "outflow_rate_min": 533.3424564857304, "cost2_max": -19.250571878891, "system_level_velocity_min": 14.154029293436265}, "policy_reward_mean": {}, "time_since_restore": 1533.1847338676453, "episodes_total": 1350, "iterations_since_restore": 42, "episode_reward_min": 65.59330484082199, "episodes_this_iter": 34, "episode_len_mean": 692.1, "done": false, "training_iteration": 42, "date": "2019-05-20_01-12-31", "node_ip": "10.138.0.2", "timesteps_total": 2040508}
{"hostname": "flow-main", "episode_reward_mean": 762.2702860336658, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c13c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1c18>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.046602487564087, "timesteps_since_restore": 2081314, "info": {"update_time_ms": 8.327, "load_time_ms": 6.401, "sample_time_ms": 21177.88, "num_steps_trained": 2081314, "default": {"entropy": 1.3648347854614258, "policy_loss": -0.008827834390103817, "vf_loss": 41.52705764770508, "kl": 0.01519016083329916, "vf_explained_var": 0.2675458788871765, "total_loss": 41.521644592285156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2081314, "grad_time_ms": 9964.251}, "time_total_s": 1564.2313363552094, "num_metric_batches_dropped": 0, "timestamp": 1558314782, "episode_reward_max": 850.4580624780705, "timesteps_this_iter": 40806, "pid": 46936, "custom_metrics": {"cost2_mean": -37.86715023915801, "outflow_rate_mean": 892.7215799177732, "system_level_velocity_mean": 16.884514221449294, "cost2_min": -52.5864442174787, "cost1_min": 29.30070837746082, "cost1_mean": 413.9671474583832, "cost1_max": 455.8609945697397, "outflow_rate_max": 1021.8388694351158, "system_level_velocity_max": 18.83422988721171, "outflow_rate_min": 533.3424564857304, "cost2_max": -19.250571878891, "system_level_velocity_min": 13.264538291754121}, "policy_reward_mean": {}, "time_since_restore": 1564.2313363552094, "episodes_total": 1383, "iterations_since_restore": 43, "episode_reward_min": 65.59330484082199, "episodes_this_iter": 33, "episode_len_mean": 684.44, "done": false, "training_iteration": 43, "date": "2019-05-20_01-13-02", "node_ip": "10.138.0.2", "timesteps_total": 2081314}
{"hostname": "flow-main", "episode_reward_mean": 746.7242953609405, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6320>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b60f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6518>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 33.378883838653564, "timesteps_since_restore": 2123334, "info": {"update_time_ms": 8.406, "load_time_ms": 6.589, "sample_time_ms": 21169.358, "num_steps_trained": 2123334, "default": {"entropy": 1.3695155382156372, "policy_loss": -0.007695646490901709, "vf_loss": 48.504478454589844, "kl": 0.01453336887061596, "vf_explained_var": 0.1821471005678177, "total_loss": 48.50004959106445, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2123334, "grad_time_ms": 10187.844}, "time_total_s": 1597.610220193863, "num_metric_batches_dropped": 0, "timestamp": 1558314815, "episode_reward_max": 850.4580624780705, "timesteps_this_iter": 42020, "pid": 46936, "custom_metrics": {"cost2_mean": -38.59273223600412, "outflow_rate_mean": 889.7555991936059, "system_level_velocity_mean": 16.84398438769477, "cost2_min": -56.69398651294203, "cost1_min": 29.30070837746082, "cost1_mean": 406.7888950115, "cost1_max": 455.8609945697397, "outflow_rate_max": 1021.8388694351158, "system_level_velocity_max": 18.83422988721171, "outflow_rate_min": 533.3424564857304, "cost2_max": -19.250571878891, "system_level_velocity_min": 13.264538291754121}, "policy_reward_mean": {}, "time_since_restore": 1597.610220193863, "episodes_total": 1419, "iterations_since_restore": 44, "episode_reward_min": 65.59330484082199, "episodes_this_iter": 36, "episode_len_mean": 674.24, "done": false, "training_iteration": 44, "date": "2019-05-20_01-13-35", "node_ip": "10.138.0.2", "timesteps_total": 2123334}
{"hostname": "flow-main", "episode_reward_mean": 745.0198938740151, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2160>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.83100390434265, "timesteps_since_restore": 2164405, "info": {"update_time_ms": 8.464, "load_time_ms": 6.872, "sample_time_ms": 21174.996, "num_steps_trained": 2164405, "default": {"entropy": 1.3759113550186157, "policy_loss": -0.007973706349730492, "vf_loss": 53.037010192871094, "kl": 0.014260883443057537, "vf_explained_var": 0.1621803492307663, "total_loss": 53.032249450683594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2164405, "grad_time_ms": 10089.788}, "time_total_s": 1629.4412240982056, "num_metric_batches_dropped": 0, "timestamp": 1558314847, "episode_reward_max": 828.544483796893, "timesteps_this_iter": 41071, "pid": 46936, "custom_metrics": {"cost2_mean": -39.59853592580946, "outflow_rate_mean": 887.6076835220474, "system_level_velocity_mean": 16.717195115983937, "cost2_min": -56.69398651294203, "cost1_min": 22.907011088583975, "cost1_mean": 405.07093189012863, "cost1_max": 455.8609945697397, "outflow_rate_max": 1002.7089073389836, "system_level_velocity_max": 18.467898549699704, "outflow_rate_min": 514.7543381332865, "cost2_max": -19.94239376439675, "system_level_velocity_min": 12.678849482282041}, "policy_reward_mean": {}, "time_since_restore": 1629.4412240982056, "episodes_total": 1455, "iterations_since_restore": 45, "episode_reward_min": 45.41473823326627, "episodes_this_iter": 36, "episode_len_mean": 676.6, "done": false, "training_iteration": 45, "date": "2019-05-20_01-14-07", "node_ip": "10.138.0.2", "timesteps_total": 2164405}
{"hostname": "flow-main", "episode_reward_mean": 745.3724937670502, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b67b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.48782134056091, "timesteps_since_restore": 2205793, "info": {"update_time_ms": 8.564, "load_time_ms": 6.97, "sample_time_ms": 21265.776, "num_steps_trained": 2205793, "default": {"entropy": 1.3762505054473877, "policy_loss": -0.009927581064403057, "vf_loss": 45.116329193115234, "kl": 0.015558709390461445, "vf_explained_var": 0.20066313445568085, "total_loss": 45.10990524291992, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2205793, "grad_time_ms": 10157.98}, "time_total_s": 1661.9290454387665, "num_metric_batches_dropped": 0, "timestamp": 1558314880, "episode_reward_max": 864.6908174355816, "timesteps_this_iter": 41388, "pid": 46936, "custom_metrics": {"cost2_mean": -39.69129350201664, "outflow_rate_mean": 895.1547352490411, "system_level_velocity_mean": 16.846220983882297, "cost2_min": -56.69398651294203, "cost1_min": 22.907011088583975, "cost1_mean": 404.1676852381797, "cost1_max": 453.2770097662677, "outflow_rate_max": 1038.817707680284, "system_level_velocity_max": 18.467898549699704, "outflow_rate_min": 514.7543381332865, "cost2_max": -19.94239376439675, "system_level_velocity_min": 12.678849482282041}, "policy_reward_mean": {}, "time_since_restore": 1661.9290454387665, "episodes_total": 1489, "iterations_since_restore": 46, "episode_reward_min": 45.41473823326627, "episodes_this_iter": 34, "episode_len_mean": 671.59, "done": false, "training_iteration": 46, "date": "2019-05-20_01-14-40", "node_ip": "10.138.0.2", "timesteps_total": 2205793}
{"hostname": "flow-main", "episode_reward_mean": 752.3353965394854, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9198>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6ba8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.449714422225952, "timesteps_since_restore": 2247221, "info": {"update_time_ms": 8.69, "load_time_ms": 6.804, "sample_time_ms": 21249.579, "num_steps_trained": 2247221, "default": {"entropy": 1.3593882322311401, "policy_loss": -0.010495745576918125, "vf_loss": 48.479251861572266, "kl": 0.017337888479232788, "vf_explained_var": 0.20900900661945343, "total_loss": 48.472660064697266, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2247221, "grad_time_ms": 10230.367}, "time_total_s": 1693.3787598609924, "num_metric_batches_dropped": 0, "timestamp": 1558314911, "episode_reward_max": 864.6908174355816, "timesteps_this_iter": 41428, "pid": 46936, "custom_metrics": {"cost2_mean": -39.20402451979364, "outflow_rate_mean": 899.7809445558308, "system_level_velocity_mean": 16.966390002157397, "cost2_min": -55.95105355216671, "cost1_min": 13.719593360770933, "cost1_mean": 405.5158261896372, "cost1_max": 452.2925917817503, "outflow_rate_max": 1038.817707680284, "system_level_velocity_max": 18.467898549699704, "outflow_rate_min": 472.99230095463946, "cost2_max": -14.671063496351731, "system_level_velocity_min": 12.678849482282041}, "policy_reward_mean": {}, "time_since_restore": 1693.3787598609924, "episodes_total": 1526, "iterations_since_restore": 47, "episode_reward_min": 26.87585437407234, "episodes_this_iter": 37, "episode_len_mean": 670.51, "done": false, "training_iteration": 47, "date": "2019-05-20_01-15-11", "node_ip": "10.138.0.2", "timesteps_total": 2247221}
{"hostname": "flow-main", "episode_reward_mean": 759.1618691749952, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d336d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d337f0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.350794076919556, "timesteps_since_restore": 2288616, "info": {"update_time_ms": 8.594, "load_time_ms": 6.491, "sample_time_ms": 21417.03, "num_steps_trained": 2288616, "default": {"entropy": 1.3538511991500854, "policy_loss": -0.009456710889935493, "vf_loss": 44.02420425415039, "kl": 0.01669897884130478, "vf_explained_var": 0.19782035052776337, "total_loss": 44.01850509643555, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2288616, "grad_time_ms": 10081.244}, "time_total_s": 1725.729553937912, "num_metric_batches_dropped": 0, "timestamp": 1558314944, "episode_reward_max": 864.6908174355816, "timesteps_this_iter": 41395, "pid": 46936, "custom_metrics": {"cost2_mean": -39.48164681377987, "outflow_rate_mean": 906.4235842024515, "system_level_velocity_mean": 16.980039332491437, "cost2_min": -55.95105355216671, "cost1_min": 13.719593360770933, "cost1_mean": 407.33663862319537, "cost1_max": 452.38149581166317, "outflow_rate_max": 1038.817707680284, "system_level_velocity_max": 18.378579137045257, "outflow_rate_min": 472.99230095463946, "cost2_max": -14.671063496351731, "system_level_velocity_min": 11.48235321547439}, "policy_reward_mean": {}, "time_since_restore": 1725.729553937912, "episodes_total": 1558, "iterations_since_restore": 48, "episode_reward_min": 26.87585437407234, "episodes_this_iter": 32, "episode_len_mean": 673.63, "done": false, "training_iteration": 48, "date": "2019-05-20_01-15-44", "node_ip": "10.138.0.2", "timesteps_total": 2288616}
{"hostname": "flow-main", "episode_reward_mean": 768.9089862081632, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897390>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897dd8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.952576398849487, "timesteps_since_restore": 2329360, "info": {"update_time_ms": 8.48, "load_time_ms": 6.407, "sample_time_ms": 21144.985, "num_steps_trained": 2329360, "default": {"entropy": 1.3816159963607788, "policy_loss": -0.009309758432209492, "vf_loss": 45.11166763305664, "kl": 0.01710011251270771, "vf_explained_var": 0.16104498505592346, "total_loss": 45.106204986572266, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2329360, "grad_time_ms": 10273.285}, "time_total_s": 1755.6821303367615, "num_metric_batches_dropped": 0, "timestamp": 1558314974, "episode_reward_max": 855.7811432611967, "timesteps_this_iter": 40744, "pid": 46936, "custom_metrics": {"cost2_mean": -38.86165120792122, "outflow_rate_mean": 916.0465550162211, "system_level_velocity_mean": 17.10613723170621, "cost2_min": -52.78717763266549, "cost1_min": 13.719593360770933, "cost1_mean": 414.783082519464, "cost1_max": 455.7820874367709, "outflow_rate_max": 1033.830420927356, "system_level_velocity_max": 18.473419761147454, "outflow_rate_min": 472.99230095463946, "cost2_max": -14.671063496351731, "system_level_velocity_min": 11.48235321547439}, "policy_reward_mean": {}, "time_since_restore": 1755.6821303367615, "episodes_total": 1591, "iterations_since_restore": 49, "episode_reward_min": 26.87585437407234, "episodes_this_iter": 33, "episode_len_mean": 681.83, "done": false, "training_iteration": 49, "date": "2019-05-20_01-16-14", "node_ip": "10.138.0.2", "timesteps_total": 2329360}
{"hostname": "flow-main", "episode_reward_mean": 768.9549180543386, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b69b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b65c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b68d0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.100295543670654, "timesteps_since_restore": 2370285, "info": {"update_time_ms": 8.748, "load_time_ms": 6.582, "sample_time_ms": 21249.395, "num_steps_trained": 2370285, "default": {"entropy": 1.3851219415664673, "policy_loss": -0.010089565068483353, "vf_loss": 45.45283889770508, "kl": 0.016548478975892067, "vf_explained_var": 0.1882837414741516, "total_loss": 45.446475982666016, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2370285, "grad_time_ms": 10236.598}, "time_total_s": 1785.7824258804321, "num_metric_batches_dropped": 0, "timestamp": 1558315004, "episode_reward_max": 839.7543473663884, "timesteps_this_iter": 40925, "pid": 46936, "custom_metrics": {"cost2_mean": -38.937164069707876, "outflow_rate_mean": 917.3137901657838, "system_level_velocity_mean": 17.12342450353536, "cost2_min": -52.78717763266549, "cost1_min": 67.67739234115912, "cost1_mean": 417.9548066870137, "cost1_max": 455.7820874367709, "outflow_rate_max": 1033.830420927356, "system_level_velocity_max": 18.473419761147454, "outflow_rate_min": 673.2307262324101, "cost2_max": -27.99872598456594, "system_level_velocity_min": 11.48235321547439}, "policy_reward_mean": {}, "time_since_restore": 1785.7824258804321, "episodes_total": 1624, "iterations_since_restore": 50, "episode_reward_min": 129.7962181933518, "episodes_this_iter": 33, "episode_len_mean": 687.59, "done": false, "training_iteration": 50, "date": "2019-05-20_01-16-44", "node_ip": "10.138.0.2", "timesteps_total": 2370285}
{"hostname": "flow-main", "episode_reward_mean": 766.8806864768594, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c12e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1978>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1908>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.754998683929443, "timesteps_since_restore": 2412378, "info": {"update_time_ms": 8.637, "load_time_ms": 6.63, "sample_time_ms": 21183.334, "num_steps_trained": 2412378, "default": {"entropy": 1.3895981311798096, "policy_loss": -0.009580194018781185, "vf_loss": 47.50490188598633, "kl": 0.015782982110977173, "vf_explained_var": 0.15929202735424042, "total_loss": 47.498870849609375, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2412378, "grad_time_ms": 10294.103}, "time_total_s": 1817.5374245643616, "num_metric_batches_dropped": 0, "timestamp": 1558315036, "episode_reward_max": 826.8635072028819, "timesteps_this_iter": 42093, "pid": 46936, "custom_metrics": {"cost2_mean": -38.67078621179214, "outflow_rate_mean": 912.7555151709173, "system_level_velocity_mean": 17.11681477741108, "cost2_min": -51.706434204197045, "cost1_min": 18.66563620117483, "cost1_mean": 418.6093503650367, "cost1_max": 455.7820874367709, "outflow_rate_max": 1033.830420927356, "system_level_velocity_max": 18.473419761147454, "outflow_rate_min": 464.3815039433309, "cost2_max": -17.79232125587889, "system_level_velocity_min": 13.296713738006469}, "policy_reward_mean": {}, "time_since_restore": 1817.5374245643616, "episodes_total": 1659, "iterations_since_restore": 51, "episode_reward_min": 42.17166560896453, "episodes_this_iter": 35, "episode_len_mean": 690.17, "done": false, "training_iteration": 51, "date": "2019-05-20_01-17-16", "node_ip": "10.138.0.2", "timesteps_total": 2412378}
{"hostname": "flow-main", "episode_reward_mean": 752.014869113066, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028987b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028989e8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.693236351013184, "timesteps_since_restore": 2453125, "info": {"update_time_ms": 8.589, "load_time_ms": 6.716, "sample_time_ms": 20950.562, "num_steps_trained": 2453125, "default": {"entropy": 1.4182963371276855, "policy_loss": -0.009946702048182487, "vf_loss": 50.81062316894531, "kl": 0.015527981333434582, "vf_explained_var": 0.13200540840625763, "total_loss": 50.804168701171875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2453125, "grad_time_ms": 10356.378}, "time_total_s": 1847.2306609153748, "num_metric_batches_dropped": 0, "timestamp": 1558315065, "episode_reward_max": 826.8635072028819, "timesteps_this_iter": 40747, "pid": 46936, "custom_metrics": {"cost2_mean": -38.59848714699345, "outflow_rate_mean": 903.6317281397781, "system_level_velocity_mean": 17.024876567887723, "cost2_min": -59.514253288577656, "cost1_min": 18.66563620117483, "cost1_mean": 411.98995223805616, "cost1_max": 451.706836934002, "outflow_rate_max": 1002.6701166289713, "system_level_velocity_max": 18.401925060094428, "outflow_rate_min": 464.3815039433309, "cost2_max": -17.79232125587889, "system_level_velocity_min": 12.367246417940823}, "policy_reward_mean": {}, "time_since_restore": 1847.2306609153748, "episodes_total": 1695, "iterations_since_restore": 52, "episode_reward_min": 42.17166560896453, "episodes_this_iter": 36, "episode_len_mean": 683.11, "done": false, "training_iteration": 52, "date": "2019-05-20_01-17-45", "node_ip": "10.138.0.2", "timesteps_total": 2453125}
{"hostname": "flow-main", "episode_reward_mean": 741.1073323642596, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6358>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.75931477546692, "timesteps_since_restore": 2494549, "info": {"update_time_ms": 8.812, "load_time_ms": 6.438, "sample_time_ms": 21234.557, "num_steps_trained": 2494549, "default": {"entropy": 1.4112646579742432, "policy_loss": -0.009647698141634464, "vf_loss": 45.5865364074707, "kl": 0.01531518530100584, "vf_explained_var": 0.18337447941303253, "total_loss": 45.58033752441406, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2494549, "grad_time_ms": 10245.722}, "time_total_s": 1879.9899756908417, "num_metric_batches_dropped": 0, "timestamp": 1558315098, "episode_reward_max": 829.2373624483283, "timesteps_this_iter": 41424, "pid": 46936, "custom_metrics": {"cost2_mean": -38.30356068382641, "outflow_rate_mean": 890.7600419450272, "system_level_velocity_mean": 16.891270675998555, "cost2_min": -59.514253288577656, "cost1_min": 18.66563620117483, "cost1_mean": 403.3393430304965, "cost1_max": 451.706836934002, "outflow_rate_max": 982.5405044132292, "system_level_velocity_max": 18.63846652521049, "outflow_rate_min": 464.3815039433309, "cost2_max": -15.266322455342316, "system_level_velocity_min": 12.367246417940823}, "policy_reward_mean": {}, "time_since_restore": 1879.9899756908417, "episodes_total": 1730, "iterations_since_restore": 53, "episode_reward_min": 42.17166560896453, "episodes_this_iter": 35, "episode_len_mean": 673.62, "done": false, "training_iteration": 53, "date": "2019-05-20_01-18-18", "node_ip": "10.138.0.2", "timesteps_total": 2494549}
{"hostname": "flow-main", "episode_reward_mean": 741.2812837895293, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1160>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.944087028503418, "timesteps_since_restore": 2536205, "info": {"update_time_ms": 8.572, "load_time_ms": 6.147, "sample_time_ms": 20979.601, "num_steps_trained": 2536205, "default": {"entropy": 1.4027049541473389, "policy_loss": -0.011032803915441036, "vf_loss": 43.972049713134766, "kl": 0.017256256192922592, "vf_explained_var": 0.1908854991197586, "total_loss": 43.96489715576172, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2536205, "grad_time_ms": 10357.801}, "time_total_s": 1911.934062719345, "num_metric_batches_dropped": 0, "timestamp": 1558315130, "episode_reward_max": 830.167303728379, "timesteps_this_iter": 41656, "pid": 46936, "custom_metrics": {"cost2_mean": -38.143415148330796, "outflow_rate_mean": 890.1653599748785, "system_level_velocity_mean": 16.773580284262245, "cost2_min": -59.514253288577656, "cost1_min": 18.995607541176263, "cost1_mean": 401.54952530971184, "cost1_max": 451.706836934002, "outflow_rate_max": 1005.5308036742866, "system_level_velocity_max": 18.63846652521049, "outflow_rate_min": 489.7966667128977, "cost2_max": -14.293883311586422, "system_level_velocity_min": 12.367246417940823}, "policy_reward_mean": {}, "time_since_restore": 1911.934062719345, "episodes_total": 1763, "iterations_since_restore": 54, "episode_reward_min": 48.26343889187002, "episodes_this_iter": 33, "episode_len_mean": 673.62, "done": false, "training_iteration": 54, "date": "2019-05-20_01-18-50", "node_ip": "10.138.0.2", "timesteps_total": 2536205}
{"hostname": "flow-main", "episode_reward_mean": 749.8281447298671, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6208>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.4515540599823, "timesteps_since_restore": 2578243, "info": {"update_time_ms": 8.781, "load_time_ms": 6.082, "sample_time_ms": 20747.525, "num_steps_trained": 2578243, "default": {"entropy": 1.393703579902649, "policy_loss": -0.009736986830830574, "vf_loss": 46.622108459472656, "kl": 0.017779365181922913, "vf_explained_var": 0.1976676732301712, "total_loss": 46.616371154785156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2578243, "grad_time_ms": 10452.071}, "time_total_s": 1942.3856167793274, "num_metric_batches_dropped": 0, "timestamp": 1558315161, "episode_reward_max": 862.9828805075729, "timesteps_this_iter": 42038, "pid": 46936, "custom_metrics": {"cost2_mean": -38.18595913715281, "outflow_rate_mean": 891.9587192154092, "system_level_velocity_mean": 16.640717993144033, "cost2_min": -59.82858290206674, "cost1_min": 18.995607541176263, "cost1_mean": 399.7598954682724, "cost1_max": 446.88705899388833, "outflow_rate_max": 1013.2364690424125, "system_level_velocity_max": 18.63846652521049, "outflow_rate_min": 489.7966667128977, "cost2_max": -14.293883311586422, "system_level_velocity_min": 14.011948225152976}, "policy_reward_mean": {}, "time_since_restore": 1942.3856167793274, "episodes_total": 1799, "iterations_since_restore": 55, "episode_reward_min": 48.26343889187002, "episodes_this_iter": 36, "episode_len_mean": 672.95, "done": false, "training_iteration": 55, "date": "2019-05-20_01-19-21", "node_ip": "10.138.0.2", "timesteps_total": 2578243}
{"hostname": "flow-main", "episode_reward_mean": 762.275096741334, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b23c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2198>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.9284245967865, "timesteps_since_restore": 2620166, "info": {"update_time_ms": 8.617, "load_time_ms": 6.288, "sample_time_ms": 20873.462, "num_steps_trained": 2620166, "default": {"entropy": 1.392667531967163, "policy_loss": -0.011092963628470898, "vf_loss": 43.32421875, "kl": 0.017243076115846634, "vf_explained_var": 0.1859276443719864, "total_loss": 43.31700897216797, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2620166, "grad_time_ms": 10269.854}, "time_total_s": 1974.314041376114, "num_metric_batches_dropped": 0, "timestamp": 1558315193, "episode_reward_max": 862.9828805075729, "timesteps_this_iter": 41923, "pid": 46936, "custom_metrics": {"cost2_mean": -37.71735635277088, "outflow_rate_mean": 902.1223312778664, "system_level_velocity_mean": 16.686067385686194, "cost2_min": -59.82858290206674, "cost1_min": 18.995607541176263, "cost1_mean": 403.5441852542673, "cost1_max": 450.25361535242433, "outflow_rate_max": 1037.2796266757769, "system_level_velocity_max": 18.997142075639967, "outflow_rate_min": 489.7966667128977, "cost2_max": -14.293883311586422, "system_level_velocity_min": 12.700252686025644}, "policy_reward_mean": {}, "time_since_restore": 1974.314041376114, "episodes_total": 1832, "iterations_since_restore": 56, "episode_reward_min": 39.89742853748713, "episodes_this_iter": 33, "episode_len_mean": 675.53, "done": false, "training_iteration": 56, "date": "2019-05-20_01-19-53", "node_ip": "10.138.0.2", "timesteps_total": 2620166}
{"hostname": "flow-main", "episode_reward_mean": 769.3488209202451, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c16a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1f28>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.61615562438965, "timesteps_since_restore": 2662009, "info": {"update_time_ms": 8.501, "load_time_ms": 6.576, "sample_time_ms": 20593.067, "num_steps_trained": 2662009, "default": {"entropy": 1.3823689222335815, "policy_loss": -0.009756354615092278, "vf_loss": 45.674766540527344, "kl": 0.015834573656320572, "vf_explained_var": 0.14521251618862152, "total_loss": 45.66857147216797, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2662009, "grad_time_ms": 10467.111}, "time_total_s": 2004.9301970005035, "num_metric_batches_dropped": 0, "timestamp": 1558315223, "episode_reward_max": 862.9828805075729, "timesteps_this_iter": 41843, "pid": 46936, "custom_metrics": {"cost2_mean": -37.80438655898905, "outflow_rate_mean": 906.1748871498189, "system_level_velocity_mean": 16.68664706471115, "cost2_min": -59.82858290206674, "cost1_min": 20.295548094508998, "cost1_mean": 405.80105250037775, "cost1_max": 452.1442332785131, "outflow_rate_max": 1037.2796266757769, "system_level_velocity_max": 18.997142075639967, "outflow_rate_min": 498.0544255067595, "cost2_max": -18.292944199103694, "system_level_velocity_min": 12.700252686025644}, "policy_reward_mean": {}, "time_since_restore": 2004.9301970005035, "episodes_total": 1865, "iterations_since_restore": 57, "episode_reward_min": 39.89742853748713, "episodes_this_iter": 33, "episode_len_mean": 678.05, "done": false, "training_iteration": 57, "date": "2019-05-20_01-20-23", "node_ip": "10.138.0.2", "timesteps_total": 2662009}
{"hostname": "flow-main", "episode_reward_mean": 782.888903554019, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898400>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898cf8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.996413469314575, "timesteps_since_restore": 2703748, "info": {"update_time_ms": 8.653, "load_time_ms": 6.771, "sample_time_ms": 20502.804, "num_steps_trained": 2703748, "default": {"entropy": 1.4006800651550293, "policy_loss": -0.010369360446929932, "vf_loss": 43.27766036987305, "kl": 0.019067490473389626, "vf_explained_var": 0.17267371714115143, "total_loss": 43.27157974243164, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 2703748, "grad_time_ms": 10520.487}, "time_total_s": 2036.9266104698181, "num_metric_batches_dropped": 0, "timestamp": 1558315255, "episode_reward_max": 861.5734889948114, "timesteps_this_iter": 41739, "pid": 46936, "custom_metrics": {"cost2_mean": -38.315920264286284, "outflow_rate_mean": 914.317998724368, "system_level_velocity_mean": 16.681230079418345, "cost2_min": -58.770314478536456, "cost1_min": 20.295548094508998, "cost1_mean": 411.35895999994847, "cost1_max": 453.7409084433849, "outflow_rate_max": 1043.2463702523871, "system_level_velocity_max": 18.997142075639967, "outflow_rate_min": 502.7282416547235, "cost2_max": -18.292944199103694, "system_level_velocity_min": 12.700252686025644}, "policy_reward_mean": {}, "time_since_restore": 2036.9266104698181, "episodes_total": 1901, "iterations_since_restore": 58, "episode_reward_min": 39.89742853748713, "episodes_this_iter": 36, "episode_len_mean": 685.78, "done": false, "training_iteration": 58, "date": "2019-05-20_01-20-55", "node_ip": "10.138.0.2", "timesteps_total": 2703748}
{"hostname": "flow-main", "episode_reward_mean": 799.0189987972932, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cdb0b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c67b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6550>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 34.119301080703735, "timesteps_since_restore": 2746499, "info": {"update_time_ms": 8.593, "load_time_ms": 6.687, "sample_time_ms": 21070.362, "num_steps_trained": 2746499, "default": {"entropy": 1.4017869234085083, "policy_loss": -0.009692714549601078, "vf_loss": 41.203792572021484, "kl": 0.01558065228164196, "vf_explained_var": 0.2272348552942276, "total_loss": 41.19760513305664, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2746499, "grad_time_ms": 10372.316}, "time_total_s": 2071.045911550522, "num_metric_batches_dropped": 0, "timestamp": 1558315289, "episode_reward_max": 859.2908659831768, "timesteps_this_iter": 42751, "pid": 46936, "custom_metrics": {"cost2_mean": -38.662134892811075, "outflow_rate_mean": 926.7970303335287, "system_level_velocity_mean": 16.735642227732804, "cost2_min": -58.770314478536456, "cost1_min": 261.0482915611334, "cost1_mean": 419.90074810796585, "cost1_max": 453.9899214407077, "outflow_rate_max": 1057.5617346326135, "system_level_velocity_max": 18.17773820913054, "outflow_rate_min": 756.0298603536211, "cost2_max": -27.06379634864054, "system_level_velocity_min": 12.80897871782338}, "policy_reward_mean": {}, "time_since_restore": 2071.045911550522, "episodes_total": 1934, "iterations_since_restore": 59, "episode_reward_min": 506.40844731520883, "episodes_this_iter": 33, "episode_len_mean": 695.81, "done": false, "training_iteration": 59, "date": "2019-05-20_01-21-29", "node_ip": "10.138.0.2", "timesteps_total": 2746499}
{"hostname": "flow-main", "episode_reward_mean": 804.5488498601408, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6828>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6e48>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.641446590423584, "timesteps_since_restore": 2789015, "info": {"update_time_ms": 8.338, "load_time_ms": 6.871, "sample_time_ms": 20850.172, "num_steps_trained": 2789015, "default": {"entropy": 1.4099721908569336, "policy_loss": -0.007416670676320791, "vf_loss": 44.21861267089844, "kl": 0.015748603269457817, "vf_explained_var": 0.1857915222644806, "total_loss": 44.21473693847656, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2789015, "grad_time_ms": 10645.082}, "time_total_s": 2101.6873581409454, "num_metric_batches_dropped": 0, "timestamp": 1558315320, "episode_reward_max": 889.1779763154871, "timesteps_this_iter": 42516, "pid": 46936, "custom_metrics": {"cost2_mean": -38.47772462230617, "outflow_rate_mean": 927.897469079097, "system_level_velocity_mean": 16.771476565364413, "cost2_min": -58.770314478536456, "cost1_min": 18.788762413999248, "cost1_mean": 419.84513564997667, "cost1_max": 453.9899214407077, "outflow_rate_max": 1057.5617346326135, "system_level_velocity_max": 18.298532058108965, "outflow_rate_min": 489.92596116141834, "cost2_max": -15.728118061892285, "system_level_velocity_min": 13.548492061491451}, "policy_reward_mean": {}, "time_since_restore": 2101.6873581409454, "episodes_total": 1967, "iterations_since_restore": 60, "episode_reward_min": 44.51111466875808, "episodes_this_iter": 33, "episode_len_mean": 693.28, "done": false, "training_iteration": 60, "date": "2019-05-20_01-22-00", "node_ip": "10.138.0.2", "timesteps_total": 2789015}
{"hostname": "flow-main", "episode_reward_mean": 803.2578048451776, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6550>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c67b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.021974086761475, "timesteps_since_restore": 2831343, "info": {"update_time_ms": 8.725, "load_time_ms": 6.932, "sample_time_ms": 21027.381, "num_steps_trained": 2831343, "default": {"entropy": 1.4172732830047607, "policy_loss": -0.009507578797638416, "vf_loss": 47.59619903564453, "kl": 0.017147554084658623, "vf_explained_var": 0.1927472949028015, "total_loss": 47.59054946899414, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2831343, "grad_time_ms": 10495.563}, "time_total_s": 2133.709332227707, "num_metric_batches_dropped": 0, "timestamp": 1558315352, "episode_reward_max": 889.1779763154871, "timesteps_this_iter": 42328, "pid": 46936, "custom_metrics": {"cost2_mean": -37.94176116998657, "outflow_rate_mean": 921.1257721630484, "system_level_velocity_mean": 16.723546885157553, "cost2_min": -53.54129264018751, "cost1_min": 18.788762413999248, "cost1_mean": 418.5875845461209, "cost1_max": 457.8857558726264, "outflow_rate_max": 1057.5617346326135, "system_level_velocity_max": 18.298532058108965, "outflow_rate_min": 489.92596116141834, "cost2_max": -15.728118061892285, "system_level_velocity_min": 13.758458502260677}, "policy_reward_mean": {}, "time_since_restore": 2133.709332227707, "episodes_total": 2001, "iterations_since_restore": 61, "episode_reward_min": 44.51111466875808, "episodes_this_iter": 34, "episode_len_mean": 693.28, "done": false, "training_iteration": 61, "date": "2019-05-20_01-22-32", "node_ip": "10.138.0.2", "timesteps_total": 2831343}
{"hostname": "flow-main", "episode_reward_mean": 785.6454369031375, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a95f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a90f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9860>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 33.252936124801636, "timesteps_since_restore": 2873348, "info": {"update_time_ms": 8.482, "load_time_ms": 6.896, "sample_time_ms": 21386.261, "num_steps_trained": 2873348, "default": {"entropy": 1.4072133302688599, "policy_loss": -0.00995555054396391, "vf_loss": 45.26669692993164, "kl": 0.01549968495965004, "vf_explained_var": 0.20852921903133392, "total_loss": 45.260231018066406, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2873348, "grad_time_ms": 10492.537}, "time_total_s": 2166.9622683525085, "num_metric_batches_dropped": 0, "timestamp": 1558315385, "episode_reward_max": 889.6962986864087, "timesteps_this_iter": 42005, "pid": 46936, "custom_metrics": {"cost2_mean": -37.49105669063355, "outflow_rate_mean": 910.1333321447019, "system_level_velocity_mean": 16.690485808792243, "cost2_min": -53.54129264018751, "cost1_min": 18.788762413999248, "cost1_mean": 410.5131992538865, "cost1_max": 457.8857558726264, "outflow_rate_max": 1025.552485415217, "system_level_velocity_max": 18.537916458209022, "outflow_rate_min": 489.92596116141834, "cost2_max": -15.696373271003944, "system_level_velocity_min": 13.758458502260677}, "policy_reward_mean": {}, "time_since_restore": 2166.9622683525085, "episodes_total": 2034, "iterations_since_restore": 62, "episode_reward_min": 44.51111466875808, "episodes_this_iter": 33, "episode_len_mean": 681.33, "done": false, "training_iteration": 62, "date": "2019-05-20_01-23-05", "node_ip": "10.138.0.2", "timesteps_total": 2873348}
{"hostname": "flow-main", "episode_reward_mean": 787.6790307623767, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c63c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c64a8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6b38>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.295611143112183, "timesteps_since_restore": 2915354, "info": {"update_time_ms": 8.286, "load_time_ms": 6.828, "sample_time_ms": 20979.531, "num_steps_trained": 2915354, "default": {"entropy": 1.4279353618621826, "policy_loss": -0.011426184326410294, "vf_loss": 43.344566345214844, "kl": 0.018155962228775024, "vf_explained_var": 0.26780402660369873, "total_loss": 43.33722686767578, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2915354, "grad_time_ms": 10749.763}, "time_total_s": 2198.2578794956207, "num_metric_batches_dropped": 0, "timestamp": 1558315417, "episode_reward_max": 889.6962986864087, "timesteps_this_iter": 42006, "pid": 46936, "custom_metrics": {"cost2_mean": -37.64428651936458, "outflow_rate_mean": 911.4368612050323, "system_level_velocity_mean": 16.74830350967903, "cost2_min": -51.312295689146424, "cost1_min": 25.33245493138778, "cost1_mean": 415.7474024243492, "cost1_max": 457.8857558726264, "outflow_rate_max": 1026.508773098793, "system_level_velocity_max": 18.537916458209022, "outflow_rate_min": 520.6905966089835, "cost2_max": -15.696373271003944, "system_level_velocity_min": 13.758458502260677}, "policy_reward_mean": {}, "time_since_restore": 2198.2578794956207, "episodes_total": 2068, "iterations_since_restore": 63, "episode_reward_min": 60.43760602127735, "episodes_this_iter": 34, "episode_len_mean": 688.05, "done": false, "training_iteration": 63, "date": "2019-05-20_01-23-37", "node_ip": "10.138.0.2", "timesteps_total": 2915354}
{"hostname": "flow-main", "episode_reward_mean": 782.2682984953344, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a97f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c0288ee48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9b00>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 33.51100039482117, "timesteps_since_restore": 2956867, "info": {"update_time_ms": 8.514, "load_time_ms": 6.814, "sample_time_ms": 21379.699, "num_steps_trained": 2956867, "default": {"entropy": 1.4251466989517212, "policy_loss": -0.01080554910004139, "vf_loss": 44.790164947509766, "kl": 0.016949094831943512, "vf_explained_var": 0.23538528382778168, "total_loss": 44.783172607421875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 2956867, "grad_time_ms": 10506.282}, "time_total_s": 2231.768879890442, "num_metric_batches_dropped": 0, "timestamp": 1558315450, "episode_reward_max": 889.6962986864087, "timesteps_this_iter": 41513, "pid": 46936, "custom_metrics": {"cost2_mean": -37.5550880770317, "outflow_rate_mean": 912.6999087265722, "system_level_velocity_mean": 16.807004203925864, "cost2_min": -51.312295689146424, "cost1_min": 25.33245493138778, "cost1_mean": 416.18601778219295, "cost1_max": 456.4217015996192, "outflow_rate_max": 1026.508773098793, "system_level_velocity_max": 18.537916458209022, "outflow_rate_min": 520.6905966089835, "cost2_max": -15.696373271003944, "system_level_velocity_min": 13.767554191805507}, "policy_reward_mean": {}, "time_since_restore": 2231.768879890442, "episodes_total": 2101, "iterations_since_restore": 64, "episode_reward_min": 60.43760602127735, "episodes_this_iter": 33, "episode_len_mean": 687.49, "done": false, "training_iteration": 64, "date": "2019-05-20_01-24-10", "node_ip": "10.138.0.2", "timesteps_total": 2956867}
{"hostname": "flow-main", "episode_reward_mean": 790.0287905066801, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b60b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b66a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6c18>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.50217318534851, "timesteps_since_restore": 2998102, "info": {"update_time_ms": 8.162, "load_time_ms": 6.969, "sample_time_ms": 21484.335, "num_steps_trained": 2998102, "default": {"entropy": 1.4366014003753662, "policy_loss": -0.009637629613280296, "vf_loss": 49.390132904052734, "kl": 0.01612219586968422, "vf_explained_var": 0.16918909549713135, "total_loss": 49.38412094116211, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 2998102, "grad_time_ms": 10505.592}, "time_total_s": 2263.2710530757904, "num_metric_batches_dropped": 0, "timestamp": 1558315482, "episode_reward_max": 881.3460849195101, "timesteps_this_iter": 41235, "pid": 46936, "custom_metrics": {"cost2_mean": -38.426099964120255, "outflow_rate_mean": 912.6704678908318, "system_level_velocity_mean": 16.761629594521413, "cost2_min": -51.312295689146424, "cost1_min": 345.9030154031632, "cost1_mean": 421.89193194476456, "cost1_max": 456.4217015996192, "outflow_rate_max": 1044.1036618795429, "system_level_velocity_max": 18.349981634106147, "outflow_rate_min": 781.0406736847389, "cost2_max": -23.43990239650445, "system_level_velocity_min": 13.767554191805507}, "policy_reward_mean": {}, "time_since_restore": 2263.2710530757904, "episodes_total": 2134, "iterations_since_restore": 65, "episode_reward_min": 694.2513282134869, "episodes_this_iter": 33, "episode_len_mean": 699.44, "done": false, "training_iteration": 65, "date": "2019-05-20_01-24-42", "node_ip": "10.138.0.2", "timesteps_total": 2998102}
{"hostname": "flow-main", "episode_reward_mean": 774.725655087985, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6be0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.492196559906006, "timesteps_since_restore": 3039925, "info": {"update_time_ms": 8.144, "load_time_ms": 6.863, "sample_time_ms": 21195.018, "num_steps_trained": 3039925, "default": {"entropy": 1.4397763013839722, "policy_loss": -0.009194345213472843, "vf_loss": 45.8265266418457, "kl": 0.01782900281250477, "vf_explained_var": 0.18340319395065308, "total_loss": 45.821346282958984, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 3039925, "grad_time_ms": 10751.327}, "time_total_s": 2294.7632496356964, "num_metric_batches_dropped": 0, "timestamp": 1558315513, "episode_reward_max": 881.3460849195101, "timesteps_this_iter": 41823, "pid": 46936, "custom_metrics": {"cost2_mean": -38.02907548842769, "outflow_rate_mean": 911.3278056314348, "system_level_velocity_mean": 16.871554228233276, "cost2_min": -50.58414773012103, "cost1_min": 19.43783743341998, "cost1_mean": 415.0989401183001, "cost1_max": 460.9334639917963, "outflow_rate_max": 1044.1036618795429, "system_level_velocity_max": 18.461899046141166, "outflow_rate_min": 493.3539058965372, "cost2_max": -17.987645030265114, "system_level_velocity_min": 13.767554191805507}, "policy_reward_mean": {}, "time_since_restore": 2294.7632496356964, "episodes_total": 2170, "iterations_since_restore": 66, "episode_reward_min": 35.97141064858503, "episodes_this_iter": 36, "episode_len_mean": 684.01, "done": false, "training_iteration": 66, "date": "2019-05-20_01-25-13", "node_ip": "10.138.0.2", "timesteps_total": 3039925}
{"hostname": "flow-main", "episode_reward_mean": 775.5610009897964, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d02cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6dd8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.590217351913452, "timesteps_since_restore": 3081139, "info": {"update_time_ms": 8.164, "load_time_ms": 6.698, "sample_time_ms": 21493.456, "num_steps_trained": 3081139, "default": {"entropy": 1.4497039318084717, "policy_loss": -0.011453227140009403, "vf_loss": 46.723724365234375, "kl": 0.016177143901586533, "vf_explained_var": 0.22120119631290436, "total_loss": 46.715911865234375, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3081139, "grad_time_ms": 10452.345}, "time_total_s": 2325.35346698761, "num_metric_batches_dropped": 0, "timestamp": 1558315544, "episode_reward_max": 881.3460849195101, "timesteps_this_iter": 41214, "pid": 46936, "custom_metrics": {"cost2_mean": -38.18851644397113, "outflow_rate_mean": 915.4119754617416, "system_level_velocity_mean": 16.937810674398154, "cost2_min": -53.85249223992231, "cost1_min": 19.43783743341998, "cost1_mean": 417.2718976171546, "cost1_max": 460.9334639917963, "outflow_rate_max": 1044.1036618795429, "system_level_velocity_max": 18.461899046141166, "outflow_rate_min": 493.3539058965372, "cost2_max": -17.987645030265114, "system_level_velocity_min": 14.04823974030715}, "policy_reward_mean": {}, "time_since_restore": 2325.35346698761, "episodes_total": 2202, "iterations_since_restore": 67, "episode_reward_min": 35.97141064858503, "episodes_this_iter": 32, "episode_len_mean": 684.57, "done": false, "training_iteration": 67, "date": "2019-05-20_01-25-44", "node_ip": "10.138.0.2", "timesteps_total": 3081139}
{"hostname": "flow-main", "episode_reward_mean": 769.8329861742552, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b66a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6c18>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.95683455467224, "timesteps_since_restore": 3122898, "info": {"update_time_ms": 7.859, "load_time_ms": 7.127, "sample_time_ms": 21544.618, "num_steps_trained": 3122898, "default": {"entropy": 1.4494086503982544, "policy_loss": -0.013849404640495777, "vf_loss": 43.86076354980469, "kl": 0.018536442890763283, "vf_explained_var": 0.282995343208313, "total_loss": 43.85108184814453, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 3122898, "grad_time_ms": 10496.043}, "time_total_s": 2358.310301542282, "num_metric_batches_dropped": 0, "timestamp": 1558315577, "episode_reward_max": 876.9293185922285, "timesteps_this_iter": 41759, "pid": 46936, "custom_metrics": {"cost2_mean": -37.61422605569538, "outflow_rate_mean": 912.1035147318256, "system_level_velocity_mean": 16.896666425281733, "cost2_min": -53.85249223992231, "cost1_min": 19.43783743341998, "cost1_mean": 413.5463196714819, "cost1_max": 460.9334639917963, "outflow_rate_max": 1020.6993625390204, "system_level_velocity_max": 18.461899046141166, "outflow_rate_min": 493.3539058965372, "cost2_max": -17.987645030265114, "system_level_velocity_min": 12.530766953284756}, "policy_reward_mean": {}, "time_since_restore": 2358.310301542282, "episodes_total": 2237, "iterations_since_restore": 68, "episode_reward_min": 35.97141064858503, "episodes_this_iter": 35, "episode_len_mean": 678.98, "done": false, "training_iteration": 68, "date": "2019-05-20_01-26-17", "node_ip": "10.138.0.2", "timesteps_total": 3122898}
{"hostname": "flow-main", "episode_reward_mean": 774.9011141989254, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6b70>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.359249114990234, "timesteps_since_restore": 3164173, "info": {"update_time_ms": 8.041, "load_time_ms": 7.215, "sample_time_ms": 21142.39, "num_steps_trained": 3164173, "default": {"entropy": 1.4625935554504395, "policy_loss": -0.011647593230009079, "vf_loss": 47.21918487548828, "kl": 0.01881367154419422, "vf_explained_var": 0.2316790223121643, "total_loss": 47.21177291870117, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3164173, "grad_time_ms": 10621.926}, "time_total_s": 2389.6695506572723, "num_metric_batches_dropped": 0, "timestamp": 1558315609, "episode_reward_max": 872.742811338539, "timesteps_this_iter": 41275, "pid": 46936, "custom_metrics": {"cost2_mean": -37.265407062001394, "outflow_rate_mean": 909.6025084590779, "system_level_velocity_mean": 16.917672354256457, "cost2_min": -56.850200726205316, "cost1_min": 14.41743136706527, "cost1_mean": 417.9556367731, "cost1_max": 458.1511078808338, "outflow_rate_max": 1020.6993625390204, "system_level_velocity_max": 18.385177162190626, "outflow_rate_min": 435.97980633183084, "cost2_max": -16.936604427044113, "system_level_velocity_min": 12.530766953284756}, "policy_reward_mean": {}, "time_since_restore": 2389.6695506572723, "episodes_total": 2273, "iterations_since_restore": 69, "episode_reward_min": 30.877652976156554, "episodes_this_iter": 36, "episode_len_mean": 686.96, "done": false, "training_iteration": 69, "date": "2019-05-20_01-26-49", "node_ip": "10.138.0.2", "timesteps_total": 3164173}
{"hostname": "flow-main", "episode_reward_mean": 751.6160444195049, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a90f0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.739001035690308, "timesteps_since_restore": 3205848, "info": {"update_time_ms": 8.283, "load_time_ms": 7.031, "sample_time_ms": 21585.629, "num_steps_trained": 3205848, "default": {"entropy": 1.4593865871429443, "policy_loss": -0.01086785551160574, "vf_loss": 48.047943115234375, "kl": 0.016528721898794174, "vf_explained_var": 0.31959596276283264, "total_loss": 48.040794372558594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3205848, "grad_time_ms": 10289.692}, "time_total_s": 2421.4085516929626, "num_metric_batches_dropped": 0, "timestamp": 1558315640, "episode_reward_max": 872.742811338539, "timesteps_this_iter": 41675, "pid": 46936, "custom_metrics": {"cost2_mean": -37.62264403926822, "outflow_rate_mean": 893.3381921203813, "system_level_velocity_mean": 16.79695567109038, "cost2_min": -56.850200726205316, "cost1_min": 14.172467653970626, "cost1_mean": 404.8284589619616, "cost1_max": 459.32301310830996, "outflow_rate_max": 1020.457658903354, "system_level_velocity_max": 18.887829752789713, "outflow_rate_min": 435.97980633183084, "cost2_max": -15.187377154561137, "system_level_velocity_min": 12.530766953284756}, "policy_reward_mean": {}, "time_since_restore": 2421.4085516929626, "episodes_total": 2309, "iterations_since_restore": 70, "episode_reward_min": 28.349014687415096, "episodes_this_iter": 36, "episode_len_mean": 672.5, "done": false, "training_iteration": 70, "date": "2019-05-20_01-27-20", "node_ip": "10.138.0.2", "timesteps_total": 3205848}
{"hostname": "flow-main", "episode_reward_mean": 745.8460894971996, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c0288e7b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c11d0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.633679628372192, "timesteps_since_restore": 3247350, "info": {"update_time_ms": 7.96, "load_time_ms": 7.304, "sample_time_ms": 21471.925, "num_steps_trained": 3247350, "default": {"entropy": 1.495408058166504, "policy_loss": -0.013235015794634819, "vf_loss": 47.73524856567383, "kl": 0.018039803951978683, "vf_explained_var": 0.4596520960330963, "total_loss": 47.72607421875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 3247350, "grad_time_ms": 10362.841}, "time_total_s": 2453.042231321335, "num_metric_batches_dropped": 0, "timestamp": 1558315672, "episode_reward_max": 872.742811338539, "timesteps_this_iter": 41502, "pid": 46936, "custom_metrics": {"cost2_mean": -37.800401904810926, "outflow_rate_mean": 894.5909843009437, "system_level_velocity_mean": 16.876874852384173, "cost2_min": -56.850200726205316, "cost1_min": 14.172467653970626, "cost1_mean": 406.6243916639412, "cost1_max": 459.32301310830996, "outflow_rate_max": 1020.457658903354, "system_level_velocity_max": 18.887829752789713, "outflow_rate_min": 435.97980633183084, "cost2_max": -15.187377154561137, "system_level_velocity_min": 13.114311284792322}, "policy_reward_mean": {}, "time_since_restore": 2453.042231321335, "episodes_total": 2340, "iterations_since_restore": 71, "episode_reward_min": 28.349014687415096, "episodes_this_iter": 31, "episode_len_mean": 675.08, "done": false, "training_iteration": 71, "date": "2019-05-20_01-27-52", "node_ip": "10.138.0.2", "timesteps_total": 3247350}
{"hostname": "flow-main", "episode_reward_mean": 736.8143848369486, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f98>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.85027575492859, "timesteps_since_restore": 3288519, "info": {"update_time_ms": 8.384, "load_time_ms": 7.153, "sample_time_ms": 21172.92, "num_steps_trained": 3288519, "default": {"entropy": 1.4708257913589478, "policy_loss": -0.011825921013951302, "vf_loss": 49.74281311035156, "kl": 0.019464775919914246, "vf_explained_var": 0.3415723443031311, "total_loss": 49.73537063598633, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3288519, "grad_time_ms": 10420.522}, "time_total_s": 2483.8925070762634, "num_metric_batches_dropped": 0, "timestamp": 1558315703, "episode_reward_max": 840.9724607144367, "timesteps_this_iter": 41169, "pid": 46936, "custom_metrics": {"cost2_mean": -38.56723865613233, "outflow_rate_mean": 887.9450071208132, "system_level_velocity_mean": 16.669014673202327, "cost2_min": -53.994510225693226, "cost1_min": 11.39511769677321, "cost1_mean": 401.8529076765652, "cost1_max": 459.32301310830996, "outflow_rate_max": 1005.9880584155829, "system_level_velocity_max": 18.945334335689267, "outflow_rate_min": 464.2002765876701, "cost2_max": -12.154660516780933, "system_level_velocity_min": 11.324551224699983}, "policy_reward_mean": {}, "time_since_restore": 2483.8925070762634, "episodes_total": 2374, "iterations_since_restore": 72, "episode_reward_min": 28.349014687415096, "episodes_this_iter": 34, "episode_len_mean": 675.71, "done": false, "training_iteration": 72, "date": "2019-05-20_01-28-23", "node_ip": "10.138.0.2", "timesteps_total": 3288519}
{"hostname": "flow-main", "episode_reward_mean": 747.4319246775024, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6cc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6550>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.873642683029175, "timesteps_since_restore": 3330135, "info": {"update_time_ms": 8.413, "load_time_ms": 7.328, "sample_time_ms": 21514.959, "num_steps_trained": 3330135, "default": {"entropy": 1.4783604145050049, "policy_loss": -0.012891552411019802, "vf_loss": 49.67366409301758, "kl": 0.019903188571333885, "vf_explained_var": 0.31498342752456665, "total_loss": 49.665252685546875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3330135, "grad_time_ms": 10139.093}, "time_total_s": 2515.7661497592926, "num_metric_batches_dropped": 0, "timestamp": 1558315735, "episode_reward_max": 862.1957698153128, "timesteps_this_iter": 41616, "pid": 46936, "custom_metrics": {"cost2_mean": -38.10730141600848, "outflow_rate_mean": 891.1064980079163, "system_level_velocity_mean": 16.757520000641122, "cost2_min": -50.98698846604517, "cost1_min": 11.39511769677321, "cost1_mean": 407.79916196866964, "cost1_max": 464.39624443507284, "outflow_rate_max": 1018.1312788005205, "system_level_velocity_max": 18.945334335689267, "outflow_rate_min": 464.2002765876701, "cost2_max": -12.154660516780933, "system_level_velocity_min": 11.324551224699983}, "policy_reward_mean": {}, "time_since_restore": 2515.7661497592926, "episodes_total": 2408, "iterations_since_restore": 73, "episode_reward_min": 28.759649416561523, "episodes_this_iter": 34, "episode_len_mean": 681.78, "done": false, "training_iteration": 73, "date": "2019-05-20_01-28-55", "node_ip": "10.138.0.2", "timesteps_total": 3330135}
{"hostname": "flow-main", "episode_reward_mean": 751.4505438509046, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1fd0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1e80>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.732605695724487, "timesteps_since_restore": 3371245, "info": {"update_time_ms": 8.201, "load_time_ms": 7.23, "sample_time_ms": 21221.528, "num_steps_trained": 3371245, "default": {"entropy": 1.4633324146270752, "policy_loss": -0.012584145180881023, "vf_loss": 45.93876647949219, "kl": 0.017718084156513214, "vf_explained_var": 0.30967578291893005, "total_loss": 45.93016815185547, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3371245, "grad_time_ms": 10153.864}, "time_total_s": 2546.498755455017, "num_metric_batches_dropped": 0, "timestamp": 1558315766, "episode_reward_max": 862.1957698153128, "timesteps_this_iter": 41110, "pid": 46936, "custom_metrics": {"cost2_mean": -38.56832202554671, "outflow_rate_mean": 897.1140568906039, "system_level_velocity_mean": 16.757141236396784, "cost2_min": -58.62803268350271, "cost1_min": 11.39511769677321, "cost1_mean": 405.2306724659813, "cost1_max": 464.39624443507284, "outflow_rate_max": 1018.1312788005205, "system_level_velocity_max": 18.945334335689267, "outflow_rate_min": 448.5093812448499, "cost2_max": -12.154660516780933, "system_level_velocity_min": 11.324551224699983}, "policy_reward_mean": {}, "time_since_restore": 2546.498755455017, "episodes_total": 2443, "iterations_since_restore": 74, "episode_reward_min": 28.759649416561523, "episodes_this_iter": 35, "episode_len_mean": 677.22, "done": false, "training_iteration": 74, "date": "2019-05-20_01-29-26", "node_ip": "10.138.0.2", "timesteps_total": 3371245}
{"hostname": "flow-main", "episode_reward_mean": 767.5742072319606, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6208>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.912983417510986, "timesteps_since_restore": 3412685, "info": {"update_time_ms": 8.171, "load_time_ms": 6.77, "sample_time_ms": 21209.102, "num_steps_trained": 3412685, "default": {"entropy": 1.4752923250198364, "policy_loss": -0.009810201823711395, "vf_loss": 45.81884765625, "kl": 0.01640401966869831, "vf_explained_var": 0.41723477840423584, "total_loss": 45.81272888183594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 3412685, "grad_time_ms": 10208.221}, "time_total_s": 2578.411738872528, "num_metric_batches_dropped": 0, "timestamp": 1558315798, "episode_reward_max": 862.1957698153128, "timesteps_this_iter": 41440, "pid": 46936, "custom_metrics": {"cost2_mean": -38.50199780682069, "outflow_rate_mean": 912.9801626970645, "system_level_velocity_mean": 17.000616278831014, "cost2_min": -58.62803268350271, "cost1_min": 17.466670715799733, "cost1_mean": 414.5092514861581, "cost1_max": 466.87847344695285, "outflow_rate_max": 1039.8711992640592, "system_level_velocity_max": 18.84373489660555, "outflow_rate_min": 448.5093812448499, "cost2_max": -14.484623406672902, "system_level_velocity_min": 13.459302842065972}, "policy_reward_mean": {}, "time_since_restore": 2578.411738872528, "episodes_total": 2476, "iterations_since_restore": 75, "episode_reward_min": 46.7871308772505, "episodes_this_iter": 33, "episode_len_mean": 683.21, "done": false, "training_iteration": 75, "date": "2019-05-20_01-29-58", "node_ip": "10.138.0.2", "timesteps_total": 3412685}
{"hostname": "flow-main", "episode_reward_mean": 771.7877918219127, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6748>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6240>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.9021999835968, "timesteps_since_restore": 3453968, "info": {"update_time_ms": 8.402, "load_time_ms": 6.748, "sample_time_ms": 21448.705, "num_steps_trained": 3453968, "default": {"entropy": 1.4754494428634644, "policy_loss": -0.010962340049445629, "vf_loss": 51.481414794921875, "kl": 0.017789771780371666, "vf_explained_var": 0.28290849924087524, "total_loss": 51.474456787109375, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3453968, "grad_time_ms": 10009.864}, "time_total_s": 2610.313938856125, "num_metric_batches_dropped": 0, "timestamp": 1558315830, "episode_reward_max": 860.7175064706632, "timesteps_this_iter": 41283, "pid": 46936, "custom_metrics": {"cost2_mean": -38.39188240148474, "outflow_rate_mean": 924.1408228300319, "system_level_velocity_mean": 17.1490070285911, "cost2_min": -58.62803268350271, "cost1_min": 17.466670715799733, "cost1_mean": 418.1497821134219, "cost1_max": 466.87847344695285, "outflow_rate_max": 1039.8711992640592, "system_level_velocity_max": 18.84373489660555, "outflow_rate_min": 448.5093812448499, "cost2_max": -14.484623406672902, "system_level_velocity_min": 13.459302842065972}, "policy_reward_mean": {}, "time_since_restore": 2610.313938856125, "episodes_total": 2511, "iterations_since_restore": 76, "episode_reward_min": 41.835933209207674, "episodes_this_iter": 35, "episode_len_mean": 684.14, "done": false, "training_iteration": 76, "date": "2019-05-20_01-30-30", "node_ip": "10.138.0.2", "timesteps_total": 3453968}
{"hostname": "flow-main", "episode_reward_mean": 775.8380298664819, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c13c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1320>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.277143239974976, "timesteps_since_restore": 3495533, "info": {"update_time_ms": 8.282, "load_time_ms": 7.026, "sample_time_ms": 21392.735, "num_steps_trained": 3495533, "default": {"entropy": 1.4760394096374512, "policy_loss": -0.01191686000674963, "vf_loss": 46.14278793334961, "kl": 0.01897941343486309, "vf_explained_var": 0.2770766019821167, "total_loss": 46.1351432800293, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 3495533, "grad_time_ms": 10131.799}, "time_total_s": 2641.5910820961, "num_metric_batches_dropped": 0, "timestamp": 1558315861, "episode_reward_max": 865.4724561850296, "timesteps_this_iter": 41565, "pid": 46936, "custom_metrics": {"cost2_mean": -39.017142485004555, "outflow_rate_mean": 928.8815465635449, "system_level_velocity_mean": 17.106946784275088, "cost2_min": -57.11585113962618, "cost1_min": 19.327167323955447, "cost1_mean": 419.37117096252814, "cost1_max": 466.87847344695285, "outflow_rate_max": 1051.5158796889577, "system_level_velocity_max": 18.84373489660555, "outflow_rate_min": 480.8049343577141, "cost2_max": -17.704311627414143, "system_level_velocity_min": 11.562393185762236}, "policy_reward_mean": {}, "time_since_restore": 2641.5910820961, "episodes_total": 2545, "iterations_since_restore": 77, "episode_reward_min": 41.835933209207674, "episodes_this_iter": 34, "episode_len_mean": 687.23, "done": false, "training_iteration": 77, "date": "2019-05-20_01-31-01", "node_ip": "10.138.0.2", "timesteps_total": 3495533}
{"hostname": "flow-main", "episode_reward_mean": 769.525664449411, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9da0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 32.56782603263855, "timesteps_since_restore": 3537174, "info": {"update_time_ms": 8.43, "load_time_ms": 6.561, "sample_time_ms": 21292.081, "num_steps_trained": 3537174, "default": {"entropy": 1.4810121059417725, "policy_loss": -0.010350340977311134, "vf_loss": 49.59567642211914, "kl": 0.017797227948904037, "vf_explained_var": 0.17923733592033386, "total_loss": 49.58932876586914, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3537174, "grad_time_ms": 10194.829}, "time_total_s": 2674.1589081287384, "num_metric_batches_dropped": 0, "timestamp": 1558315893, "episode_reward_max": 873.89878782743, "timesteps_this_iter": 41641, "pid": 46936, "custom_metrics": {"cost2_mean": -38.390591741827656, "outflow_rate_mean": 927.4417788815789, "system_level_velocity_mean": 17.185721537979784, "cost2_min": -57.11585113962618, "cost1_min": 19.327167323955447, "cost1_mean": 412.96621883999256, "cost1_max": 463.0945355992019, "outflow_rate_max": 1051.5158796889577, "system_level_velocity_max": 18.820388809779573, "outflow_rate_min": 473.35536332605574, "cost2_max": -17.704311627414143, "system_level_velocity_min": 11.562393185762236}, "policy_reward_mean": {}, "time_since_restore": 2674.1589081287384, "episodes_total": 2581, "iterations_since_restore": 78, "episode_reward_min": 41.835933209207674, "episodes_this_iter": 36, "episode_len_mean": 673.45, "done": false, "training_iteration": 78, "date": "2019-05-20_01-31-33", "node_ip": "10.138.0.2", "timesteps_total": 3537174}
{"hostname": "flow-main", "episode_reward_mean": 780.3708007613728, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1cf8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.95433020591736, "timesteps_since_restore": 3578573, "info": {"update_time_ms": 8.637, "load_time_ms": 6.605, "sample_time_ms": 21365.27, "num_steps_trained": 3578573, "default": {"entropy": 1.486362099647522, "policy_loss": -0.009914912283420563, "vf_loss": 45.30217742919922, "kl": 0.01559446007013321, "vf_explained_var": 0.18327346444129944, "total_loss": 45.2957763671875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 3578573, "grad_time_ms": 9980.903}, "time_total_s": 2704.1132383346558, "num_metric_batches_dropped": 0, "timestamp": 1558315923, "episode_reward_max": 873.89878782743, "timesteps_this_iter": 41399, "pid": 46936, "custom_metrics": {"cost2_mean": -38.353023476340944, "outflow_rate_mean": 927.5197622619264, "system_level_velocity_mean": 17.15269105004853, "cost2_min": -57.11585113962618, "cost1_min": 21.26278213485749, "cost1_mean": 415.979232430029, "cost1_max": 463.0945355992019, "outflow_rate_max": 1051.5158796889577, "system_level_velocity_max": 18.820388809779573, "outflow_rate_min": 473.35536332605574, "cost2_max": -18.206980560601757, "system_level_velocity_min": 11.562393185762236}, "policy_reward_mean": {}, "time_since_restore": 2704.1132383346558, "episodes_total": 2615, "iterations_since_restore": 79, "episode_reward_min": 47.72949886130558, "episodes_this_iter": 34, "episode_len_mean": 678.88, "done": false, "training_iteration": 79, "date": "2019-05-20_01-32-03", "node_ip": "10.138.0.2", "timesteps_total": 3578573}
{"hostname": "flow-main", "episode_reward_mean": 773.8789253823337, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1a20>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.38203191757202, "timesteps_since_restore": 3619486, "info": {"update_time_ms": 8.351, "load_time_ms": 6.621, "sample_time_ms": 21155.147, "num_steps_trained": 3619486, "default": {"entropy": 1.504563331604004, "policy_loss": -0.011658393777906895, "vf_loss": 47.36396789550781, "kl": 0.01812373846769333, "vf_explained_var": 0.1791297197341919, "total_loss": 47.356388092041016, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 3619486, "grad_time_ms": 10054.136}, "time_total_s": 2734.495270252228, "num_metric_batches_dropped": 0, "timestamp": 1558315954, "episode_reward_max": 873.89878782743, "timesteps_this_iter": 40913, "pid": 46936, "custom_metrics": {"cost2_mean": -37.99884318666065, "outflow_rate_mean": 923.1059654725636, "system_level_velocity_mean": 17.2271882747663, "cost2_min": -58.643135518494915, "cost1_min": 12.819147712019696, "cost1_mean": 414.68621703392864, "cost1_max": 463.92575217863936, "outflow_rate_max": 1044.6286366055876, "system_level_velocity_max": 19.104751920759938, "outflow_rate_min": 443.01748075831955, "cost2_max": -14.858005558523175, "system_level_velocity_min": 12.829536061155979}, "policy_reward_mean": {}, "time_since_restore": 2734.495270252228, "episodes_total": 2647, "iterations_since_restore": 80, "episode_reward_min": 29.192592506998036, "episodes_this_iter": 32, "episode_len_mean": 674.46, "done": false, "training_iteration": 80, "date": "2019-05-20_01-32-34", "node_ip": "10.138.0.2", "timesteps_total": 3619486}
{"hostname": "flow-main", "episode_reward_mean": 784.7634365579527, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9278>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.7170147895813, "timesteps_since_restore": 3662104, "info": {"update_time_ms": 8.381, "load_time_ms": 6.149, "sample_time_ms": 21139.024, "num_steps_trained": 3662104, "default": {"entropy": 1.5043362379074097, "policy_loss": -0.010856868699193, "vf_loss": 48.88884353637695, "kl": 0.016866693273186684, "vf_explained_var": 0.17130692303180695, "total_loss": 48.88178634643555, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3662104, "grad_time_ms": 10079.378}, "time_total_s": 2766.212285041809, "num_metric_batches_dropped": 0, "timestamp": 1558315986, "episode_reward_max": 856.2229312715154, "timesteps_this_iter": 42618, "pid": 46936, "custom_metrics": {"cost2_mean": -39.174577936076524, "outflow_rate_mean": 925.728417802588, "system_level_velocity_mean": 17.211191477833964, "cost2_min": -58.643135518494915, "cost1_min": 12.819147712019696, "cost1_mean": 422.8405425041447, "cost1_max": 464.75188792110555, "outflow_rate_max": 1044.6286366055876, "system_level_velocity_max": 19.104751920759938, "outflow_rate_min": 443.01748075831955, "cost2_max": -14.858005558523175, "system_level_velocity_min": 12.829536061155979}, "policy_reward_mean": {}, "time_since_restore": 2766.212285041809, "episodes_total": 2681, "iterations_since_restore": 81, "episode_reward_min": 29.192592506998036, "episodes_this_iter": 34, "episode_len_mean": 688.98, "done": false, "training_iteration": 81, "date": "2019-05-20_01-33-06", "node_ip": "10.138.0.2", "timesteps_total": 3662104}
{"hostname": "flow-main", "episode_reward_mean": 778.7441614942206, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c64e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6240>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.896652221679688, "timesteps_since_restore": 3703680, "info": {"update_time_ms": 8.108, "load_time_ms": 6.214, "sample_time_ms": 21320.531, "num_steps_trained": 3703680, "default": {"entropy": 1.5244532823562622, "policy_loss": -0.012593413703143597, "vf_loss": 48.30989456176758, "kl": 0.017258580774068832, "vf_explained_var": 0.21544326841831207, "total_loss": 48.301185607910156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 3703680, "grad_time_ms": 10003.725}, "time_total_s": 2798.1089372634888, "num_metric_batches_dropped": 0, "timestamp": 1558316018, "episode_reward_max": 883.3977024871535, "timesteps_this_iter": 41576, "pid": 46936, "custom_metrics": {"cost2_mean": -39.010266990947024, "outflow_rate_mean": 920.6704794200497, "system_level_velocity_mean": 17.17446747757577, "cost2_min": -58.643135518494915, "cost1_min": 12.819147712019696, "cost1_mean": 419.50701123891326, "cost1_max": 464.75188792110555, "outflow_rate_max": 1044.6286366055876, "system_level_velocity_max": 19.104751920759938, "outflow_rate_min": 443.01748075831955, "cost2_max": -14.858005558523175, "system_level_velocity_min": 12.829536061155979}, "policy_reward_mean": {}, "time_since_restore": 2798.1089372634888, "episodes_total": 2718, "iterations_since_restore": 82, "episode_reward_min": 29.192592506998036, "episodes_this_iter": 37, "episode_len_mean": 685.19, "done": false, "training_iteration": 82, "date": "2019-05-20_01-33-38", "node_ip": "10.138.0.2", "timesteps_total": 3703680}
{"hostname": "flow-main", "episode_reward_mean": 789.4351174022376, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c19e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1320>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.597150564193726, "timesteps_since_restore": 3744661, "info": {"update_time_ms": 7.991, "load_time_ms": 5.975, "sample_time_ms": 21015.438, "num_steps_trained": 3744661, "default": {"entropy": 1.5320943593978882, "policy_loss": -0.010482033714652061, "vf_loss": 47.553340911865234, "kl": 0.01745929941534996, "vf_explained_var": 0.17956818640232086, "total_loss": 47.546791076660156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3744661, "grad_time_ms": 10081.101}, "time_total_s": 2827.7060878276825, "num_metric_batches_dropped": 0, "timestamp": 1558316047, "episode_reward_max": 883.3977024871535, "timesteps_this_iter": 40981, "pid": 46936, "custom_metrics": {"cost2_mean": -38.99053727942439, "outflow_rate_mean": 925.1463315552406, "system_level_velocity_mean": 17.238971761469717, "cost2_min": -54.956461799498776, "cost1_min": 182.67833043290466, "cost1_mean": 426.58953201467216, "cost1_max": 464.75188792110555, "outflow_rate_max": 1039.220494081602, "system_level_velocity_max": 18.9212239673534, "outflow_rate_min": 743.3112401727701, "cost2_max": -28.247491144947148, "system_level_velocity_min": 13.52879022797802}, "policy_reward_mean": {}, "time_since_restore": 2827.7060878276825, "episodes_total": 2751, "iterations_since_restore": 83, "episode_reward_min": 335.02538692261226, "episodes_this_iter": 33, "episode_len_mean": 694.09, "done": false, "training_iteration": 83, "date": "2019-05-20_01-34-07", "node_ip": "10.138.0.2", "timesteps_total": 3744661}
{"hostname": "flow-main", "episode_reward_mean": 772.6673457242418, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a98d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a92b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a96d8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.58772587776184, "timesteps_since_restore": 3785847, "info": {"update_time_ms": 7.971, "load_time_ms": 6.192, "sample_time_ms": 21095.95, "num_steps_trained": 3785847, "default": {"entropy": 1.541767954826355, "policy_loss": -0.01272610668092966, "vf_loss": 43.579017639160156, "kl": 0.017831651493906975, "vf_explained_var": 0.2194625735282898, "total_loss": 43.57030487060547, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3785847, "grad_time_ms": 9987.832}, "time_total_s": 2858.2938137054443, "num_metric_batches_dropped": 0, "timestamp": 1558316078, "episode_reward_max": 883.3977024871535, "timesteps_this_iter": 41186, "pid": 46936, "custom_metrics": {"cost2_mean": -38.11448215639014, "outflow_rate_mean": 912.9988928778096, "system_level_velocity_mean": 17.177125841481967, "cost2_min": -54.956461799498776, "cost1_min": 18.59321281295674, "cost1_mean": 418.0920742482226, "cost1_max": 464.94500798803233, "outflow_rate_max": 1039.220494081602, "system_level_velocity_max": 18.9212239673534, "outflow_rate_min": 489.92596116141834, "cost2_max": -15.185183935037735, "system_level_velocity_min": 13.52879022797802}, "policy_reward_mean": {}, "time_since_restore": 2858.2938137054443, "episodes_total": 2786, "iterations_since_restore": 84, "episode_reward_min": 44.171091354732326, "episodes_this_iter": 35, "episode_len_mean": 682.68, "done": false, "training_iteration": 84, "date": "2019-05-20_01-34-38", "node_ip": "10.138.0.2", "timesteps_total": 3785847}
{"hostname": "flow-main", "episode_reward_mean": 765.6147739939499, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b66d8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b60f0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.619667291641235, "timesteps_since_restore": 3826804, "info": {"update_time_ms": 8.218, "load_time_ms": 6.229, "sample_time_ms": 21045.102, "num_steps_trained": 3826804, "default": {"entropy": 1.55606210231781, "policy_loss": -0.011675345711410046, "vf_loss": 52.022335052490234, "kl": 0.01653819903731346, "vf_explained_var": 0.1875981241464615, "total_loss": 52.014381408691406, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 3826804, "grad_time_ms": 10009.697}, "time_total_s": 2889.9134809970856, "num_metric_batches_dropped": 0, "timestamp": 1558316110, "episode_reward_max": 848.631355635709, "timesteps_this_iter": 40957, "pid": 46936, "custom_metrics": {"cost2_mean": -37.341020593077225, "outflow_rate_mean": 911.0619094057074, "system_level_velocity_mean": 17.211015133279474, "cost2_min": -54.58669521275775, "cost1_min": 18.59321281295674, "cost1_mean": 415.9709562836178, "cost1_max": 464.94500798803233, "outflow_rate_max": 1025.2146946914268, "system_level_velocity_max": 18.83306642711724, "outflow_rate_min": 489.92596116141834, "cost2_max": -15.185183935037735, "system_level_velocity_min": 13.670101377754644}, "policy_reward_mean": {}, "time_since_restore": 2889.9134809970856, "episodes_total": 2820, "iterations_since_restore": 85, "episode_reward_min": 44.171091354732326, "episodes_this_iter": 34, "episode_len_mean": 678.59, "done": false, "training_iteration": 85, "date": "2019-05-20_01-35-10", "node_ip": "10.138.0.2", "timesteps_total": 3826804}
{"hostname": "flow-main", "episode_reward_mean": 767.2739325630969, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6048>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6978>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.83289337158203, "timesteps_since_restore": 3867676, "info": {"update_time_ms": 8.133, "load_time_ms": 6.096, "sample_time_ms": 20779.646, "num_steps_trained": 3867676, "default": {"entropy": 1.5749471187591553, "policy_loss": -0.011603661812841892, "vf_loss": 46.142242431640625, "kl": 0.01794455386698246, "vf_explained_var": 0.2562153935432434, "total_loss": 46.134674072265625, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.2250000238418579}, "num_steps_sampled": 3867676, "grad_time_ms": 10067.098}, "time_total_s": 2919.7463743686676, "num_metric_batches_dropped": 0, "timestamp": 1558316139, "episode_reward_max": 834.6703792487097, "timesteps_this_iter": 40872, "pid": 46936, "custom_metrics": {"cost2_mean": -37.09863850483341, "outflow_rate_mean": 908.306437210537, "system_level_velocity_mean": 17.191771117491076, "cost2_min": -54.58669521275775, "cost1_min": 26.124608493241922, "cost1_mean": 419.2348512442629, "cost1_max": 474.7455489684697, "outflow_rate_max": 1011.2210473681648, "system_level_velocity_max": 19.212245845965757, "outflow_rate_min": 521.5369196119092, "cost2_max": -17.787415783552657, "system_level_velocity_min": 13.670101377754644}, "policy_reward_mean": {}, "time_since_restore": 2919.7463743686676, "episodes_total": 2853, "iterations_since_restore": 86, "episode_reward_min": 59.27388043145089, "episodes_this_iter": 33, "episode_len_mean": 685.31, "done": false, "training_iteration": 86, "date": "2019-05-20_01-35-39", "node_ip": "10.138.0.2", "timesteps_total": 3867676}
{"hostname": "flow-main", "episode_reward_mean": 749.6907677658268, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47cc0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 31.367802381515503, "timesteps_since_restore": 3909311, "info": {"update_time_ms": 8.15, "load_time_ms": 6.041, "sample_time_ms": 20797.878, "num_steps_trained": 3909311, "default": {"entropy": 1.6137890815734863, "policy_loss": -0.011658248491585255, "vf_loss": 44.687381744384766, "kl": 0.017592741176486015, "vf_explained_var": 0.30336159467697144, "total_loss": 44.67967987060547, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3909311, "grad_time_ms": 10060.984}, "time_total_s": 2951.114176750183, "num_metric_batches_dropped": 0, "timestamp": 1558316171, "episode_reward_max": 834.6703792487097, "timesteps_this_iter": 41635, "pid": 46936, "custom_metrics": {"cost2_mean": -36.49084733214386, "outflow_rate_mean": 894.4725221684354, "system_level_velocity_mean": 17.051012530831365, "cost2_min": -54.58669521275775, "cost1_min": 26.124608493241922, "cost1_mean": 412.14803249647565, "cost1_max": 474.7455489684697, "outflow_rate_max": 1060.8430051521675, "system_level_velocity_max": 19.212245845965757, "outflow_rate_min": 521.5369196119092, "cost2_max": -17.787415783552657, "system_level_velocity_min": 12.293379882272303}, "policy_reward_mean": {}, "time_since_restore": 2951.114176750183, "episodes_total": 2889, "iterations_since_restore": 87, "episode_reward_min": 59.27388043145089, "episodes_this_iter": 36, "episode_len_mean": 680.95, "done": false, "training_iteration": 87, "date": "2019-05-20_01-36-11", "node_ip": "10.138.0.2", "timesteps_total": 3909311}
{"hostname": "flow-main", "episode_reward_mean": 734.1057577720198, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cf5da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c64e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6cc0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.50655245780945, "timesteps_since_restore": 3950921, "info": {"update_time_ms": 8.024, "load_time_ms": 6.076, "sample_time_ms": 20521.178, "num_steps_trained": 3950921, "default": {"entropy": 1.621644377708435, "policy_loss": -0.014753212220966816, "vf_loss": 46.43049240112305, "kl": 0.019536077976226807, "vf_explained_var": 0.3471394181251526, "total_loss": 46.420135498046875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 3950921, "grad_time_ms": 10031.277}, "time_total_s": 2980.6207292079926, "num_metric_batches_dropped": 0, "timestamp": 1558316200, "episode_reward_max": 834.6703792487097, "timesteps_this_iter": 41610, "pid": 46936, "custom_metrics": {"cost2_mean": -36.58952237212396, "outflow_rate_mean": 884.0175349367958, "system_level_velocity_mean": 16.9470270709784, "cost2_min": -50.675890643632044, "cost1_min": 23.995401255019033, "cost1_mean": 406.7599617499911, "cost1_max": 474.7455489684697, "outflow_rate_max": 1060.8430051521675, "system_level_velocity_max": 19.212245845965757, "outflow_rate_min": 479.1839115688295, "cost2_max": -16.30345597977408, "system_level_velocity_min": 12.293379882272303}, "policy_reward_mean": {}, "time_since_restore": 2980.6207292079926, "episodes_total": 2924, "iterations_since_restore": 88, "episode_reward_min": 60.17081822939312, "episodes_this_iter": 35, "episode_len_mean": 676.88, "done": false, "training_iteration": 88, "date": "2019-05-20_01-36-40", "node_ip": "10.138.0.2", "timesteps_total": 3950921}
{"hostname": "flow-main", "episode_reward_mean": 732.8995905551719, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47ba8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.073770999908447, "timesteps_since_restore": 3992490, "info": {"update_time_ms": 7.786, "load_time_ms": 5.945, "sample_time_ms": 20442.565, "num_steps_trained": 3992490, "default": {"entropy": 1.5986648797988892, "policy_loss": -0.009369423612952232, "vf_loss": 48.97804641723633, "kl": 0.018438342958688736, "vf_explained_var": 0.23678843677043915, "total_loss": 48.97282409667969, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 3992490, "grad_time_ms": 10122.959}, "time_total_s": 3010.694500207901, "num_metric_batches_dropped": 0, "timestamp": 1558316230, "episode_reward_max": 830.7835383968561, "timesteps_this_iter": 41569, "pid": 46936, "custom_metrics": {"cost2_mean": -36.362329618176, "outflow_rate_mean": 884.422180332021, "system_level_velocity_mean": 16.93852695067643, "cost2_min": -50.675890643632044, "cost1_min": 23.995401255019033, "cost1_mean": 406.7564560527875, "cost1_max": 461.2554172260915, "outflow_rate_max": 1060.8430051521675, "system_level_velocity_max": 18.793804646283096, "outflow_rate_min": 479.1839115688295, "cost2_max": -13.791405549531756, "system_level_velocity_min": 12.293379882272303}, "policy_reward_mean": {}, "time_since_restore": 3010.694500207901, "episodes_total": 2957, "iterations_since_restore": 89, "episode_reward_min": 60.17081822939312, "episodes_this_iter": 33, "episode_len_mean": 676.88, "done": false, "training_iteration": 89, "date": "2019-05-20_01-37-10", "node_ip": "10.138.0.2", "timesteps_total": 3992490}
{"hostname": "flow-main", "episode_reward_mean": 748.3747791037899, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d1ca20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cf5da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d1cb70>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.22238254547119, "timesteps_since_restore": 4034416, "info": {"update_time_ms": 7.852, "load_time_ms": 5.955, "sample_time_ms": 20382.504, "num_steps_trained": 4034416, "default": {"entropy": 1.6053866147994995, "policy_loss": -0.011171671561896801, "vf_loss": 53.50831604003906, "kl": 0.0169575996696949, "vf_explained_var": 0.2123381644487381, "total_loss": 53.50095748901367, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 4034416, "grad_time_ms": 10068.435}, "time_total_s": 3039.916882753372, "num_metric_batches_dropped": 0, "timestamp": 1558316260, "episode_reward_max": 830.7835383968561, "timesteps_this_iter": 41926, "pid": 46936, "custom_metrics": {"cost2_mean": -36.99085739345103, "outflow_rate_mean": 897.0502155116336, "system_level_velocity_mean": 17.040097770309693, "cost2_min": -50.675890643632044, "cost1_min": 23.995401255019033, "cost1_mean": 415.78623045732974, "cost1_max": 461.2554172260915, "outflow_rate_max": 1023.620437724506, "system_level_velocity_max": 18.718192846361784, "outflow_rate_min": 479.1839115688295, "cost2_max": -13.791405549531756, "system_level_velocity_min": 13.954367555959445}, "policy_reward_mean": {}, "time_since_restore": 3039.916882753372, "episodes_total": 2991, "iterations_since_restore": 90, "episode_reward_min": 60.17081822939312, "episodes_this_iter": 34, "episode_len_mean": 686.77, "done": false, "training_iteration": 90, "date": "2019-05-20_01-37-40", "node_ip": "10.138.0.2", "timesteps_total": 4034416}
{"hostname": "flow-main", "episode_reward_mean": 761.8867532183658, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6dd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6a58>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6ef0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.502774953842163, "timesteps_since_restore": 4075587, "info": {"update_time_ms": 7.803, "load_time_ms": 6.107, "sample_time_ms": 20198.484, "num_steps_trained": 4075587, "default": {"entropy": 1.597112774848938, "policy_loss": -0.01243679691106081, "vf_loss": 54.82728958129883, "kl": 0.01865200325846672, "vf_explained_var": 0.16679470241069794, "total_loss": 54.81904602050781, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22499999403953552}, "num_steps_sampled": 4075587, "grad_time_ms": 10032.15}, "time_total_s": 3069.4196577072144, "num_metric_batches_dropped": 0, "timestamp": 1558316289, "episode_reward_max": 843.2562770464999, "timesteps_this_iter": 41171, "pid": 46936, "custom_metrics": {"cost2_mean": -36.94358141687669, "outflow_rate_mean": 905.9196309642133, "system_level_velocity_mean": 17.083407738581748, "cost2_min": -51.48094226360121, "cost1_min": 217.66818394991603, "cost1_mean": 420.591429216292, "cost1_max": 461.2554172260915, "outflow_rate_max": 1042.2634530147516, "system_level_velocity_max": 18.718192846361784, "outflow_rate_min": 725.4446870168069, "cost2_max": -13.791405549531756, "system_level_velocity_min": 14.757732901648737}, "policy_reward_mean": {}, "time_since_restore": 3069.4196577072144, "episodes_total": 3028, "iterations_since_restore": 91, "episode_reward_min": 414.16946678947835, "episodes_this_iter": 37, "episode_len_mean": 691.55, "done": false, "training_iteration": 91, "date": "2019-05-20_01-38-09", "node_ip": "10.138.0.2", "timesteps_total": 4075587}
{"hostname": "flow-main", "episode_reward_mean": 740.0882329144214, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b27b8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2ac8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.840415000915527, "timesteps_since_restore": 4116333, "info": {"update_time_ms": 7.666, "load_time_ms": 6.089, "sample_time_ms": 20090.892, "num_steps_trained": 4116333, "default": {"entropy": 1.5904887914657593, "policy_loss": -0.009134058840572834, "vf_loss": 54.18465042114258, "kl": 0.02018929086625576, "vf_explained_var": 0.12733574211597443, "total_loss": 54.180057525634766, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.22500000894069672}, "num_steps_sampled": 4116333, "grad_time_ms": 9934.339}, "time_total_s": 3099.26007270813, "num_metric_batches_dropped": 0, "timestamp": 1558316319, "episode_reward_max": 848.1039139927565, "timesteps_this_iter": 40746, "pid": 46936, "custom_metrics": {"cost2_mean": -35.77610671024777, "outflow_rate_mean": 900.9894495877426, "system_level_velocity_mean": 17.20507037522753, "cost2_min": -51.48094226360121, "cost1_min": 15.801557420713742, "cost1_mean": 405.05044669723065, "cost1_max": 459.8818903595416, "outflow_rate_max": 1042.2634530147516, "system_level_velocity_max": 19.09667727746762, "outflow_rate_min": 474.51294398726327, "cost2_max": -14.476496815797876, "system_level_velocity_min": 14.731088637300418}, "policy_reward_mean": {}, "time_since_restore": 3099.26007270813, "episodes_total": 3066, "iterations_since_restore": 92, "episode_reward_min": 32.4489763470766, "episodes_this_iter": 38, "episode_len_mean": 661.56, "done": false, "training_iteration": 92, "date": "2019-05-20_01-38-39", "node_ip": "10.138.0.2", "timesteps_total": 4116333}
{"hostname": "flow-main", "episode_reward_mean": 746.2899584404903, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47dd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47a58>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.470521211624146, "timesteps_since_restore": 4157685, "info": {"update_time_ms": 7.645, "load_time_ms": 6.311, "sample_time_ms": 20056.063, "num_steps_trained": 4157685, "default": {"entropy": 1.6116487979888916, "policy_loss": -0.012427307665348053, "vf_loss": 46.29377365112305, "kl": 0.014793301932513714, "vf_explained_var": 0.19750332832336426, "total_loss": 46.28634262084961, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4157685, "grad_time_ms": 10056.307}, "time_total_s": 3129.730593919754, "num_metric_batches_dropped": 0, "timestamp": 1558316350, "episode_reward_max": 851.6206296122214, "timesteps_this_iter": 41352, "pid": 46936, "custom_metrics": {"cost2_mean": -35.10244526928281, "outflow_rate_mean": 904.3111820972823, "system_level_velocity_mean": 17.339316301045827, "cost2_min": -52.9448752288548, "cost1_min": 15.801557420713742, "cost1_mean": 408.73453444552376, "cost1_max": 459.8818903595416, "outflow_rate_max": 1038.0427626325159, "system_level_velocity_max": 19.09667727746762, "outflow_rate_min": 474.51294398726327, "cost2_max": -14.476496815797876, "system_level_velocity_min": 14.731088637300418}, "policy_reward_mean": {}, "time_since_restore": 3129.730593919754, "episodes_total": 3101, "iterations_since_restore": 93, "episode_reward_min": 32.4489763470766, "episodes_this_iter": 35, "episode_len_mean": 662.16, "done": false, "training_iteration": 93, "date": "2019-05-20_01-39-10", "node_ip": "10.138.0.2", "timesteps_total": 4157685}
{"hostname": "flow-main", "episode_reward_mean": 749.2889581005588, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1470>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.56043815612793, "timesteps_since_restore": 4198756, "info": {"update_time_ms": 7.673, "load_time_ms": 6.261, "sample_time_ms": 19868.574, "num_steps_trained": 4198756, "default": {"entropy": 1.606174111366272, "policy_loss": -0.011604930274188519, "vf_loss": 45.174339294433594, "kl": 0.013916419818997383, "vf_explained_var": 0.29594916105270386, "total_loss": 45.16743087768555, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4198756, "grad_time_ms": 10140.023}, "time_total_s": 3159.291032075882, "num_metric_batches_dropped": 0, "timestamp": 1558316379, "episode_reward_max": 851.6206296122214, "timesteps_this_iter": 41071, "pid": 46936, "custom_metrics": {"cost2_mean": -35.76357547363889, "outflow_rate_mean": 906.2786521451459, "system_level_velocity_mean": 17.192488628948738, "cost2_min": -52.9448752288548, "cost1_min": 15.801557420713742, "cost1_mean": 408.5488951393662, "cost1_max": 459.94566807068134, "outflow_rate_max": 1008.3417006210219, "system_level_velocity_max": 19.09667727746762, "outflow_rate_min": 474.51294398726327, "cost2_max": -14.476496815797876, "system_level_velocity_min": 14.292861337669981}, "policy_reward_mean": {}, "time_since_restore": 3159.291032075882, "episodes_total": 3134, "iterations_since_restore": 94, "episode_reward_min": 32.4489763470766, "episodes_this_iter": 33, "episode_len_mean": 667.66, "done": false, "training_iteration": 94, "date": "2019-05-20_01-39-39", "node_ip": "10.138.0.2", "timesteps_total": 4198756}
{"hostname": "flow-main", "episode_reward_mean": 756.920384780324, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47908>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47e48>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.10051155090332, "timesteps_since_restore": 4239953, "info": {"update_time_ms": 7.494, "load_time_ms": 6.387, "sample_time_ms": 19875.434, "num_steps_trained": 4239953, "default": {"entropy": 1.611758828163147, "policy_loss": -0.010483602993190289, "vf_loss": 46.31748962402344, "kl": 0.014167420566082, "vf_explained_var": 0.23701058328151703, "total_loss": 46.31178665161133, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 4239953, "grad_time_ms": 9981.955}, "time_total_s": 3189.3915436267853, "num_metric_batches_dropped": 0, "timestamp": 1558316409, "episode_reward_max": 851.6206296122214, "timesteps_this_iter": 41197, "pid": 46936, "custom_metrics": {"cost2_mean": -36.2440553694728, "outflow_rate_mean": 904.0719792128849, "system_level_velocity_mean": 17.042858466053048, "cost2_min": -59.18000973364018, "cost1_min": 27.113689367265287, "cost1_mean": 410.07846337889487, "cost1_max": 459.94566807068134, "outflow_rate_max": 1008.3417006210219, "system_level_velocity_max": 18.60259951165265, "outflow_rate_min": 530.6016792192834, "cost2_max": -18.95846148375291, "system_level_velocity_min": 14.292861337669981}, "policy_reward_mean": {}, "time_since_restore": 3189.3915436267853, "episodes_total": 3168, "iterations_since_restore": 95, "episode_reward_min": 54.98726256621674, "episodes_this_iter": 34, "episode_len_mean": 676.23, "done": false, "training_iteration": 95, "date": "2019-05-20_01-40-09", "node_ip": "10.138.0.2", "timesteps_total": 4239953}
{"hostname": "flow-main", "episode_reward_mean": 759.300339363761, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2780>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2e48>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2208>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 30.765288829803467, "timesteps_since_restore": 4281452, "info": {"update_time_ms": 7.373, "load_time_ms": 6.378, "sample_time_ms": 19858.399, "num_steps_trained": 4281452, "default": {"entropy": 1.6232575178146362, "policy_loss": -0.011492514051496983, "vf_loss": 44.93660354614258, "kl": 0.01620466075837612, "vf_explained_var": 0.23774750530719757, "total_loss": 44.930580139160156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4281452, "grad_time_ms": 10093.394}, "time_total_s": 3220.1568324565887, "num_metric_batches_dropped": 0, "timestamp": 1558316440, "episode_reward_max": 848.8325890916856, "timesteps_this_iter": 41499, "pid": 46936, "custom_metrics": {"cost2_mean": -36.38942912974349, "outflow_rate_mean": 903.370157985776, "system_level_velocity_mean": 16.948961886628155, "cost2_min": -59.18000973364018, "cost1_min": 27.113689367265287, "cost1_mean": 409.0641734601538, "cost1_max": 459.94566807068134, "outflow_rate_max": 1013.1000962380064, "system_level_velocity_max": 18.60259951165265, "outflow_rate_min": 530.6016792192834, "cost2_max": -18.95846148375291, "system_level_velocity_min": 14.16829182107778}, "policy_reward_mean": {}, "time_since_restore": 3220.1568324565887, "episodes_total": 3201, "iterations_since_restore": 96, "episode_reward_min": 54.98726256621674, "episodes_this_iter": 33, "episode_len_mean": 677.99, "done": false, "training_iteration": 96, "date": "2019-05-20_01-40-40", "node_ip": "10.138.0.2", "timesteps_total": 4281452}
{"hostname": "flow-main", "episode_reward_mean": 756.5593091094703, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47dd8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47fd0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.61253523826599, "timesteps_since_restore": 4322812, "info": {"update_time_ms": 7.492, "load_time_ms": 6.079, "sample_time_ms": 19499.948, "num_steps_trained": 4322812, "default": {"entropy": 1.6279690265655518, "policy_loss": -0.010189137421548367, "vf_loss": 47.333045959472656, "kl": 0.013405820354819298, "vf_explained_var": 0.19724759459495544, "total_loss": 47.327388763427734, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4322812, "grad_time_ms": 10075.108}, "time_total_s": 3247.7693676948547, "num_metric_batches_dropped": 0, "timestamp": 1558316468, "episode_reward_max": 848.8325890916856, "timesteps_this_iter": 41360, "pid": 46936, "custom_metrics": {"cost2_mean": -35.75422922889814, "outflow_rate_mean": 900.3750479381529, "system_level_velocity_mean": 16.92750355617642, "cost2_min": -59.18000973364018, "cost1_min": 27.113689367265287, "cost1_mean": 406.20322327321924, "cost1_max": 455.24647430806635, "outflow_rate_max": 1013.1000962380064, "system_level_velocity_max": 18.60259951165265, "outflow_rate_min": 530.6016792192834, "cost2_max": -18.95846148375291, "system_level_velocity_min": 14.16829182107778}, "policy_reward_mean": {}, "time_since_restore": 3247.7693676948547, "episodes_total": 3235, "iterations_since_restore": 97, "episode_reward_min": 54.98726256621674, "episodes_this_iter": 34, "episode_len_mean": 673.05, "done": false, "training_iteration": 97, "date": "2019-05-20_01-41-08", "node_ip": "10.138.0.2", "timesteps_total": 4322812}
{"hostname": "flow-main", "episode_reward_mean": 766.6658155037253, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2710>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b6be0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.72884225845337, "timesteps_since_restore": 4364282, "info": {"update_time_ms": 7.626, "load_time_ms": 6.121, "sample_time_ms": 19573.88, "num_steps_trained": 4364282, "default": {"entropy": 1.6342076063156128, "policy_loss": -0.011503712274134159, "vf_loss": 43.825050354003906, "kl": 0.014258664101362228, "vf_explained_var": 0.1858757585287094, "total_loss": 43.818355560302734, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4364282, "grad_time_ms": 9923.545}, "time_total_s": 3276.498209953308, "num_metric_batches_dropped": 0, "timestamp": 1558316497, "episode_reward_max": 843.3805540535777, "timesteps_this_iter": 41470, "pid": 46936, "custom_metrics": {"cost2_mean": -35.35701466901983, "outflow_rate_mean": 899.2322966705029, "system_level_velocity_mean": 16.843900931439524, "cost2_min": -53.58223346792198, "cost1_min": 11.65293157378445, "cost1_mean": 411.0127397122472, "cost1_max": 455.24647430806635, "outflow_rate_max": 1013.1000962380064, "system_level_velocity_max": 18.450738502022283, "outflow_rate_min": 464.2002765876701, "cost2_max": -12.786238538409325, "system_level_velocity_min": 14.096473488695306}, "policy_reward_mean": {}, "time_since_restore": 3276.498209953308, "episodes_total": 3267, "iterations_since_restore": 98, "episode_reward_min": 26.721386639112243, "episodes_this_iter": 32, "episode_len_mean": 683.22, "done": false, "training_iteration": 98, "date": "2019-05-20_01-41-37", "node_ip": "10.138.0.2", "timesteps_total": 4364282}
{"hostname": "flow-main", "episode_reward_mean": 758.1867411848368, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2668>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2400>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.901284217834473, "timesteps_since_restore": 4406472, "info": {"update_time_ms": 7.525, "load_time_ms": 6.031, "sample_time_ms": 19479.488, "num_steps_trained": 4406472, "default": {"entropy": 1.6376283168792725, "policy_loss": -0.013421936891973019, "vf_loss": 49.80738830566406, "kl": 0.01402160432189703, "vf_explained_var": 0.16937443614006042, "total_loss": 49.7986946105957, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4406472, "grad_time_ms": 9999.874}, "time_total_s": 3306.3994941711426, "num_metric_batches_dropped": 0, "timestamp": 1558316527, "episode_reward_max": 843.3805540535777, "timesteps_this_iter": 42190, "pid": 46936, "custom_metrics": {"cost2_mean": -34.612435537450075, "outflow_rate_mean": 888.6870776322809, "system_level_velocity_mean": 16.81446805524912, "cost2_min": -53.664608751136505, "cost1_min": 11.65293157378445, "cost1_mean": 406.34312211504823, "cost1_max": 460.7790370081129, "outflow_rate_max": 995.3079946990734, "system_level_velocity_max": 18.609170786271385, "outflow_rate_min": 455.5388410410685, "cost2_max": -12.786238538409325, "system_level_velocity_min": 14.096473488695306}, "policy_reward_mean": {}, "time_since_restore": 3306.3994941711426, "episodes_total": 3304, "iterations_since_restore": 99, "episode_reward_min": 26.721386639112243, "episodes_this_iter": 37, "episode_len_mean": 676.5, "done": false, "training_iteration": 99, "date": "2019-05-20_01-42-07", "node_ip": "10.138.0.2", "timesteps_total": 4406472}
{"hostname": "flow-main", "episode_reward_mean": 742.1964846268664, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c64e0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6550>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.040186405181885, "timesteps_since_restore": 4447330, "info": {"update_time_ms": 7.822, "load_time_ms": 6.091, "sample_time_ms": 19355.404, "num_steps_trained": 4447330, "default": {"entropy": 1.6358152627944946, "policy_loss": -0.01086410228163004, "vf_loss": 51.15859603881836, "kl": 0.014579343609511852, "vf_explained_var": 0.15312883257865906, "total_loss": 51.15264892578125, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.3375000059604645}, "num_steps_sampled": 4447330, "grad_time_ms": 10104.987}, "time_total_s": 3335.4396805763245, "num_metric_batches_dropped": 0, "timestamp": 1558316556, "episode_reward_max": 839.9470517526306, "timesteps_this_iter": 40858, "pid": 46936, "custom_metrics": {"cost2_mean": -34.34545738694118, "outflow_rate_mean": 882.0421145768914, "system_level_velocity_mean": 16.894808827466626, "cost2_min": -53.664608751136505, "cost1_min": 11.65293157378445, "cost1_mean": 401.86137822884723, "cost1_max": 460.7790370081129, "outflow_rate_max": 995.3079946990734, "system_level_velocity_max": 18.609170786271385, "outflow_rate_min": 455.5388410410685, "cost2_max": -12.786238538409325, "system_level_velocity_min": 12.544988500540867}, "policy_reward_mean": {}, "time_since_restore": 3335.4396805763245, "episodes_total": 3341, "iterations_since_restore": 100, "episode_reward_min": 26.721386639112243, "episodes_this_iter": 37, "episode_len_mean": 666.08, "done": false, "training_iteration": 100, "date": "2019-05-20_01-42-36", "node_ip": "10.138.0.2", "timesteps_total": 4447330}
{"hostname": "flow-main", "episode_reward_mean": 752.2798631303009, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2dd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2cf8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.298884391784668, "timesteps_since_restore": 4488348, "info": {"update_time_ms": 7.805, "load_time_ms": 6.103, "sample_time_ms": 19310.0, "num_steps_trained": 4488348, "default": {"entropy": 1.6352115869522095, "policy_loss": -0.00970232579857111, "vf_loss": 48.90696334838867, "kl": 0.012702466920018196, "vf_explained_var": 0.14147667586803436, "total_loss": 48.901546478271484, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4488348, "grad_time_ms": 10030.586}, "time_total_s": 3363.738564968109, "num_metric_batches_dropped": 0, "timestamp": 1558316584, "episode_reward_max": 843.7789069258068, "timesteps_this_iter": 41018, "pid": 46936, "custom_metrics": {"cost2_mean": -34.588631657748486, "outflow_rate_mean": 895.4031894877869, "system_level_velocity_mean": 17.04723532076225, "cost2_min": -53.664608751136505, "cost1_min": 17.104410842269985, "cost1_mean": 410.1254316241459, "cost1_max": 460.7790370081129, "outflow_rate_max": 1013.967706525343, "system_level_velocity_max": 18.609170786271385, "outflow_rate_min": 455.5388410410685, "cost2_max": -14.334867844709391, "system_level_velocity_min": 12.544988500540867}, "policy_reward_mean": {}, "time_since_restore": 3363.738564968109, "episodes_total": 3375, "iterations_since_restore": 101, "episode_reward_min": 45.707644184000095, "episodes_this_iter": 34, "episode_len_mean": 674.53, "done": false, "training_iteration": 101, "date": "2019-05-20_01-43-04", "node_ip": "10.138.0.2", "timesteps_total": 4488348}
{"hostname": "flow-main", "episode_reward_mean": 743.4043923610957, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d474a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d473c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47240>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.426960468292236, "timesteps_since_restore": 4530495, "info": {"update_time_ms": 7.781, "load_time_ms": 6.183, "sample_time_ms": 19109.13, "num_steps_trained": 4530495, "default": {"entropy": 1.637514591217041, "policy_loss": -0.011730913072824478, "vf_loss": 50.74201965332031, "kl": 0.014412627555429935, "vf_explained_var": 0.13283663988113403, "total_loss": 50.73515319824219, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4530495, "grad_time_ms": 10090.533}, "time_total_s": 3392.1655254364014, "num_metric_batches_dropped": 0, "timestamp": 1558316613, "episode_reward_max": 843.7789069258068, "timesteps_this_iter": 42147, "pid": 46936, "custom_metrics": {"cost2_mean": -34.482211054819516, "outflow_rate_mean": 886.3218931111055, "system_level_velocity_mean": 17.04951488263397, "cost2_min": -50.44527189765415, "cost1_min": 21.865245630656368, "cost1_mean": 406.02899768573576, "cost1_max": 453.676509164056, "outflow_rate_max": 1013.967706525343, "system_level_velocity_max": 18.649091562338743, "outflow_rate_min": 502.7353691205481, "cost2_max": -14.875295139434876, "system_level_velocity_min": 12.544988500540867}, "policy_reward_mean": {}, "time_since_restore": 3392.1655254364014, "episodes_total": 3411, "iterations_since_restore": 102, "episode_reward_min": 44.397045448735774, "episodes_this_iter": 36, "episode_len_mean": 669.35, "done": false, "training_iteration": 102, "date": "2019-05-20_01-43-33", "node_ip": "10.138.0.2", "timesteps_total": 4530495}
{"hostname": "flow-main", "episode_reward_mean": 745.5355501223144, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33940>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33be0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.097792625427246, "timesteps_since_restore": 4572211, "info": {"update_time_ms": 7.76, "load_time_ms": 6.024, "sample_time_ms": 18897.712, "num_steps_trained": 4572211, "default": {"entropy": 1.6411985158920288, "policy_loss": -0.011640884913504124, "vf_loss": 48.71895980834961, "kl": 0.014464464969933033, "vf_explained_var": 0.1425148844718933, "total_loss": 48.71220016479492, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4572211, "grad_time_ms": 9966.066}, "time_total_s": 3419.2633180618286, "num_metric_batches_dropped": 0, "timestamp": 1558316640, "episode_reward_max": 850.0190269528697, "timesteps_this_iter": 41716, "pid": 46936, "custom_metrics": {"cost2_mean": -35.24442884486909, "outflow_rate_mean": 893.0087390119132, "system_level_velocity_mean": 17.006701799069614, "cost2_min": -54.04763981444336, "cost1_min": 15.323058390826858, "cost1_mean": 407.9848970727741, "cost1_max": 461.0863226255523, "outflow_rate_max": 1018.7311398289129, "system_level_velocity_max": 18.649091562338743, "outflow_rate_min": 481.0028128682593, "cost2_max": -14.875295139434876, "system_level_velocity_min": 14.267807550139208}, "policy_reward_mean": {}, "time_since_restore": 3419.2633180618286, "episodes_total": 3447, "iterations_since_restore": 103, "episode_reward_min": 30.12907857224748, "episodes_this_iter": 36, "episode_len_mean": 674.05, "done": false, "training_iteration": 103, "date": "2019-05-20_01-44-00", "node_ip": "10.138.0.2", "timesteps_total": 4572211}
{"hostname": "flow-main", "episode_reward_mean": 744.136535477078, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b18d0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.105865240097046, "timesteps_since_restore": 4613729, "info": {"update_time_ms": 7.704, "load_time_ms": 6.078, "sample_time_ms": 18818.332, "num_steps_trained": 4613729, "default": {"entropy": 1.6498913764953613, "policy_loss": -0.010069385170936584, "vf_loss": 51.37929153442383, "kl": 0.013935921713709831, "vf_explained_var": 0.11854857206344604, "total_loss": 51.37392807006836, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4613729, "grad_time_ms": 9901.504}, "time_total_s": 3447.3691833019257, "num_metric_batches_dropped": 0, "timestamp": 1558316668, "episode_reward_max": 850.0190269528697, "timesteps_this_iter": 41518, "pid": 46936, "custom_metrics": {"cost2_mean": -35.180291204177045, "outflow_rate_mean": 897.1404406786895, "system_level_velocity_mean": 17.10011623965642, "cost2_min": -54.04763981444336, "cost1_min": 15.323058390826858, "cost1_mean": 408.7972927678807, "cost1_max": 463.14560502565524, "outflow_rate_max": 1018.7311398289129, "system_level_velocity_max": 19.16019953070052, "outflow_rate_min": 481.0028128682593, "cost2_max": -14.875295139434876, "system_level_velocity_min": 14.267807550139208}, "policy_reward_mean": {}, "time_since_restore": 3447.3691833019257, "episodes_total": 3483, "iterations_since_restore": 104, "episode_reward_min": 30.12907857224748, "episodes_this_iter": 36, "episode_len_mean": 671.16, "done": false, "training_iteration": 104, "date": "2019-05-20_01-44-28", "node_ip": "10.138.0.2", "timesteps_total": 4613729}
{"hostname": "flow-main", "episode_reward_mean": 760.7126513848534, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02897128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1898>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.428863525390625, "timesteps_since_restore": 4655606, "info": {"update_time_ms": 7.56, "load_time_ms": 5.941, "sample_time_ms": 18539.991, "num_steps_trained": 4655606, "default": {"entropy": 1.6749075651168823, "policy_loss": -0.00978821236640215, "vf_loss": 47.4668083190918, "kl": 0.012591109611093998, "vf_explained_var": 0.13099990785121918, "total_loss": 47.46126937866211, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4655606, "grad_time_ms": 9913.424}, "time_total_s": 3474.7980468273163, "num_metric_batches_dropped": 0, "timestamp": 1558316695, "episode_reward_max": 854.5318586544854, "timesteps_this_iter": 41877, "pid": 46936, "custom_metrics": {"cost2_mean": -34.985324062536755, "outflow_rate_mean": 910.8408127968571, "system_level_velocity_mean": 17.249399210184293, "cost2_min": -54.04763981444336, "cost1_min": 15.323058390826858, "cost1_mean": 418.3131952079267, "cost1_max": 463.14560502565524, "outflow_rate_max": 1026.308003545694, "system_level_velocity_max": 19.16019953070052, "outflow_rate_min": 481.0028128682593, "cost2_max": -15.697716828902518, "system_level_velocity_min": 14.267807550139208}, "policy_reward_mean": {}, "time_since_restore": 3474.7980468273163, "episodes_total": 3516, "iterations_since_restore": 105, "episode_reward_min": 30.12907857224748, "episodes_this_iter": 33, "episode_len_mean": 680.87, "done": false, "training_iteration": 105, "date": "2019-05-20_01-44-55", "node_ip": "10.138.0.2", "timesteps_total": 4655606}
{"hostname": "flow-main", "episode_reward_mean": 759.5943193735894, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b23c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2e80>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.75290083885193, "timesteps_since_restore": 4697168, "info": {"update_time_ms": 7.512, "load_time_ms": 5.772, "sample_time_ms": 18249.982, "num_steps_trained": 4697168, "default": {"entropy": 1.6727967262268066, "policy_loss": -0.01183079369366169, "vf_loss": 49.492034912109375, "kl": 0.014732356183230877, "vf_explained_var": 0.18573786318302155, "total_loss": 49.48517608642578, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4697168, "grad_time_ms": 9802.771}, "time_total_s": 3501.550947666168, "num_metric_batches_dropped": 0, "timestamp": 1558316722, "episode_reward_max": 854.5318586544854, "timesteps_this_iter": 41562, "pid": 46936, "custom_metrics": {"cost2_mean": -34.49169562840306, "outflow_rate_mean": 904.5861358422927, "system_level_velocity_mean": 17.39223768092696, "cost2_min": -53.02913670904398, "cost1_min": 20.10070993363646, "cost1_mean": 420.6163706439082, "cost1_max": 463.14560502565524, "outflow_rate_max": 1026.308003545694, "system_level_velocity_max": 19.16019953070052, "outflow_rate_min": 502.7282416547235, "cost2_max": -16.517749824241093, "system_level_velocity_min": 14.511528553061668}, "policy_reward_mean": {}, "time_since_restore": 3501.550947666168, "episodes_total": 3551, "iterations_since_restore": 106, "episode_reward_min": 42.63727883973373, "episodes_this_iter": 35, "episode_len_mean": 680.95, "done": false, "training_iteration": 106, "date": "2019-05-20_01-45-22", "node_ip": "10.138.0.2", "timesteps_total": 4697168}
{"hostname": "flow-main", "episode_reward_mean": 768.1134351683864, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c11d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47240>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47e80>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.827053785324097, "timesteps_since_restore": 4739125, "info": {"update_time_ms": 7.409, "load_time_ms": 5.836, "sample_time_ms": 18288.941, "num_steps_trained": 4739125, "default": {"entropy": 1.6640595197677612, "policy_loss": -0.010782914236187935, "vf_loss": 50.7762565612793, "kl": 0.01547160279005766, "vf_explained_var": 0.1783660352230072, "total_loss": 50.77069091796875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4739125, "grad_time_ms": 9786.1}, "time_total_s": 3529.3780014514923, "num_metric_batches_dropped": 0, "timestamp": 1558316750, "episode_reward_max": 854.5318586544854, "timesteps_this_iter": 41957, "pid": 46936, "custom_metrics": {"cost2_mean": -34.71447521208011, "outflow_rate_mean": 904.6745180984899, "system_level_velocity_mean": 17.309298509353493, "cost2_min": -56.15359115337698, "cost1_min": 20.10070993363646, "cost1_mean": 423.7889970605567, "cost1_max": 462.0333019781783, "outflow_rate_max": 1026.308003545694, "system_level_velocity_max": 18.962199665906414, "outflow_rate_min": 502.7282416547235, "cost2_max": -16.62310303473419, "system_level_velocity_min": 14.10350958509174}, "policy_reward_mean": {}, "time_since_restore": 3529.3780014514923, "episodes_total": 3586, "iterations_since_restore": 107, "episode_reward_min": 42.63727883973373, "episodes_this_iter": 35, "episode_len_mean": 689.1, "done": false, "training_iteration": 107, "date": "2019-05-20_01-45-50", "node_ip": "10.138.0.2", "timesteps_total": 4739125}
{"hostname": "flow-main", "episode_reward_mean": 762.3827550808924, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33e48>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.146196126937866, "timesteps_since_restore": 4781059, "info": {"update_time_ms": 7.207, "load_time_ms": 5.776, "sample_time_ms": 18182.131, "num_steps_trained": 4781059, "default": {"entropy": 1.6645570993423462, "policy_loss": -0.01004020869731903, "vf_loss": 50.73116683959961, "kl": 0.01362503133714199, "vf_explained_var": 0.180403932929039, "total_loss": 50.72572708129883, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4781059, "grad_time_ms": 9835.718}, "time_total_s": 3557.52419757843, "num_metric_batches_dropped": 0, "timestamp": 1558316778, "episode_reward_max": 841.7973154381505, "timesteps_this_iter": 41934, "pid": 46936, "custom_metrics": {"cost2_mean": -35.348449715167696, "outflow_rate_mean": 897.9324931479775, "system_level_velocity_mean": 17.117479633950225, "cost2_min": -56.15359115337698, "cost1_min": 20.10070993363646, "cost1_mean": 419.5791532790193, "cost1_max": 458.45902002442455, "outflow_rate_max": 992.6108878654827, "system_level_velocity_max": 18.962199665906414, "outflow_rate_min": 502.7282416547235, "cost2_max": -16.62310303473419, "system_level_velocity_min": 13.464775896890343}, "policy_reward_mean": {}, "time_since_restore": 3557.52419757843, "episodes_total": 3622, "iterations_since_restore": 108, "episode_reward_min": 42.63727883973373, "episodes_this_iter": 36, "episode_len_mean": 688.4, "done": false, "training_iteration": 108, "date": "2019-05-20_01-46-18", "node_ip": "10.138.0.2", "timesteps_total": 4781059}
{"hostname": "flow-main", "episode_reward_mean": 767.1497270830682, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47240>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d471d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47be0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.81758952140808, "timesteps_since_restore": 4822005, "info": {"update_time_ms": 7.226, "load_time_ms": 5.917, "sample_time_ms": 18119.709, "num_steps_trained": 4822005, "default": {"entropy": 1.6629359722137451, "policy_loss": -0.009979653172194958, "vf_loss": 51.96244430541992, "kl": 0.014615575782954693, "vf_explained_var": 0.17131027579307556, "total_loss": 51.95740509033203, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.3375000059604645}, "num_steps_sampled": 4822005, "grad_time_ms": 9690.865}, "time_total_s": 3585.3417870998383, "num_metric_batches_dropped": 0, "timestamp": 1558316806, "episode_reward_max": 841.7973154381505, "timesteps_this_iter": 40946, "pid": 46936, "custom_metrics": {"cost2_mean": -34.83644426064092, "outflow_rate_mean": 902.5749184260968, "system_level_velocity_mean": 17.136389741665404, "cost2_min": -56.15359115337698, "cost1_min": 16.557447834009963, "cost1_mean": 421.278098885144, "cost1_max": 457.4016621183725, "outflow_rate_max": 1031.5378884969612, "system_level_velocity_max": 18.799525105453966, "outflow_rate_min": 461.86595774819625, "cost2_max": -13.875741250627474, "system_level_velocity_min": 13.464775896890343}, "policy_reward_mean": {}, "time_since_restore": 3585.3417870998383, "episodes_total": 3658, "iterations_since_restore": 109, "episode_reward_min": 43.44967603008573, "episodes_this_iter": 36, "episode_len_mean": 688.34, "done": false, "training_iteration": 109, "date": "2019-05-20_01-46-46", "node_ip": "10.138.0.2", "timesteps_total": 4822005}
{"hostname": "flow-main", "episode_reward_mean": 757.5735229089472, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33fd0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33da0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.08419132232666, "timesteps_since_restore": 4862953, "info": {"update_time_ms": 6.883, "load_time_ms": 5.731, "sample_time_ms": 18053.119, "num_steps_trained": 4862953, "default": {"entropy": 1.6794750690460205, "policy_loss": -0.012243064120411873, "vf_loss": 49.673240661621094, "kl": 0.014313566498458385, "vf_explained_var": 0.17865701019763947, "total_loss": 49.665828704833984, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.3375000059604645}, "num_steps_sampled": 4862953, "grad_time_ms": 9663.409}, "time_total_s": 3613.425978422165, "num_metric_batches_dropped": 0, "timestamp": 1558316834, "episode_reward_max": 833.7007208156127, "timesteps_this_iter": 40948, "pid": 46936, "custom_metrics": {"cost2_mean": -34.10172072948514, "outflow_rate_mean": 898.3221527053043, "system_level_velocity_mean": 17.224754057242542, "cost2_min": -51.94058500408635, "cost1_min": 16.557447834009963, "cost1_mean": 418.014882411036, "cost1_max": 457.09601843518567, "outflow_rate_max": 1031.5378884969612, "system_level_velocity_max": 18.737157321369583, "outflow_rate_min": 461.86595774819625, "cost2_max": -13.875741250627474, "system_level_velocity_min": 13.464775896890343}, "policy_reward_mean": {}, "time_since_restore": 3613.425978422165, "episodes_total": 3691, "iterations_since_restore": 110, "episode_reward_min": 43.44967603008573, "episodes_this_iter": 33, "episode_len_mean": 678.93, "done": false, "training_iteration": 110, "date": "2019-05-20_01-47-14", "node_ip": "10.138.0.2", "timesteps_total": 4862953}
{"hostname": "flow-main", "episode_reward_mean": 757.2291898466716, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2c88>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.37378740310669, "timesteps_since_restore": 4905204, "info": {"update_time_ms": 6.857, "load_time_ms": 5.707, "sample_time_ms": 17856.613, "num_steps_trained": 4905204, "default": {"entropy": 1.6754533052444458, "policy_loss": -0.010253321379423141, "vf_loss": 46.051937103271484, "kl": 0.013559919781982899, "vf_explained_var": 0.17322219908237457, "total_loss": 46.046260833740234, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4905204, "grad_time_ms": 9667.497}, "time_total_s": 3639.7997658252716, "num_metric_batches_dropped": 0, "timestamp": 1558316861, "episode_reward_max": 833.7007208156127, "timesteps_this_iter": 42251, "pid": 46936, "custom_metrics": {"cost2_mean": -32.96408308096775, "outflow_rate_mean": 897.3606326457875, "system_level_velocity_mean": 17.293078953390065, "cost2_min": -51.94058500408635, "cost1_min": 16.557447834009963, "cost1_mean": 416.71937123663827, "cost1_max": 458.83511586829684, "outflow_rate_max": 1031.5378884969612, "system_level_velocity_max": 18.694307811753323, "outflow_rate_min": 461.86595774819625, "cost2_max": -13.875741250627474, "system_level_velocity_min": 13.978026433951106}, "policy_reward_mean": {}, "time_since_restore": 3639.7997658252716, "episodes_total": 3725, "iterations_since_restore": 111, "episode_reward_min": 43.44967603008573, "episodes_this_iter": 34, "episode_len_mean": 675.15, "done": false, "training_iteration": 111, "date": "2019-05-20_01-47-41", "node_ip": "10.138.0.2", "timesteps_total": 4905204}
{"hostname": "flow-main", "episode_reward_mean": 751.5217962897775, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d1cef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9208>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9eb8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.868700742721558, "timesteps_since_restore": 4946362, "info": {"update_time_ms": 6.958, "load_time_ms": 5.635, "sample_time_ms": 17834.911, "num_steps_trained": 4946362, "default": {"entropy": 1.66817045211792, "policy_loss": -0.010900438763201237, "vf_loss": 53.95762634277344, "kl": 0.015049245208501816, "vf_explained_var": 0.12053325027227402, "total_loss": 53.95180892944336, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 4946362, "grad_time_ms": 9633.665}, "time_total_s": 3667.668466567993, "num_metric_batches_dropped": 0, "timestamp": 1558316888, "episode_reward_max": 845.7463577354418, "timesteps_this_iter": 41158, "pid": 46936, "custom_metrics": {"cost2_mean": -33.71542045562783, "outflow_rate_mean": 892.0119825197854, "system_level_velocity_mean": 17.15821327887441, "cost2_min": -49.48787652916151, "cost1_min": 23.989886920386468, "cost1_mean": 409.11643227597, "cost1_max": 468.19806078432487, "outflow_rate_max": 1010.997038656953, "system_level_velocity_max": 19.36318966204732, "outflow_rate_min": 514.1511736692719, "cost2_max": -16.827040366165377, "system_level_velocity_min": 13.848746776397396}, "policy_reward_mean": {}, "time_since_restore": 3667.668466567993, "episodes_total": 3761, "iterations_since_restore": 112, "episode_reward_min": 44.93676816649401, "episodes_this_iter": 36, "episode_len_mean": 668.66, "done": false, "training_iteration": 112, "date": "2019-05-20_01-48-08", "node_ip": "10.138.0.2", "timesteps_total": 4946362}
{"hostname": "flow-main", "episode_reward_mean": 767.1701442709575, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33b70>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.22294020652771, "timesteps_since_restore": 4987972, "info": {"update_time_ms": 6.962, "load_time_ms": 5.636, "sample_time_ms": 17948.501, "num_steps_trained": 4987972, "default": {"entropy": 1.6579866409301758, "policy_loss": -0.01085704192519188, "vf_loss": 51.56348419189453, "kl": 0.014289095997810364, "vf_explained_var": 0.11555319279432297, "total_loss": 51.55745315551758, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 4987972, "grad_time_ms": 9632.53}, "time_total_s": 3695.891406774521, "num_metric_batches_dropped": 0, "timestamp": 1558316917, "episode_reward_max": 877.4826768141645, "timesteps_this_iter": 41610, "pid": 46936, "custom_metrics": {"cost2_mean": -34.54879943310116, "outflow_rate_mean": 900.5873868447861, "system_level_velocity_mean": 17.079120331583386, "cost2_min": -49.16166558903487, "cost1_min": 24.19941068348551, "cost1_mean": 412.5525388806715, "cost1_max": 468.19806078432487, "outflow_rate_max": 996.9964093737568, "system_level_velocity_max": 19.36318966204732, "outflow_rate_min": 515.8691769055615, "cost2_max": -19.320914329918672, "system_level_velocity_min": 13.848746776397396}, "policy_reward_mean": {}, "time_since_restore": 3695.891406774521, "episodes_total": 3795, "iterations_since_restore": 113, "episode_reward_min": 44.93676816649401, "episodes_this_iter": 34, "episode_len_mean": 675.77, "done": false, "training_iteration": 113, "date": "2019-05-20_01-48-37", "node_ip": "10.138.0.2", "timesteps_total": 4987972}
{"hostname": "flow-main", "episode_reward_mean": 761.6001794931706, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9208>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a99e8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.39579486846924, "timesteps_since_restore": 5029247, "info": {"update_time_ms": 6.92, "load_time_ms": 5.48, "sample_time_ms": 17985.538, "num_steps_trained": 5029247, "default": {"entropy": 1.67426598072052, "policy_loss": -0.011221632361412048, "vf_loss": 50.12302780151367, "kl": 0.013793054036796093, "vf_explained_var": 0.15283136069774628, "total_loss": 50.11646270751953, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 5029247, "grad_time_ms": 9624.185}, "time_total_s": 3724.28720164299, "num_metric_batches_dropped": 0, "timestamp": 1558316945, "episode_reward_max": 877.4826768141645, "timesteps_this_iter": 41275, "pid": 46936, "custom_metrics": {"cost2_mean": -34.593725869615334, "outflow_rate_mean": 903.7003762387848, "system_level_velocity_mean": 17.010146941362233, "cost2_min": -49.16166558903487, "cost1_min": 12.32955264715982, "cost1_mean": 407.04372555760506, "cost1_max": 468.19806078432487, "outflow_rate_max": 996.9964093737568, "system_level_velocity_max": 19.36318966204732, "outflow_rate_min": 467.7500288525429, "cost2_max": -13.691543653929468, "system_level_velocity_min": 13.848746776397396}, "policy_reward_mean": {}, "time_since_restore": 3724.28720164299, "episodes_total": 3829, "iterations_since_restore": 114, "episode_reward_min": 25.4606557624275, "episodes_this_iter": 34, "episode_len_mean": 667.32, "done": false, "training_iteration": 114, "date": "2019-05-20_01-49-05", "node_ip": "10.138.0.2", "timesteps_total": 5029247}
{"hostname": "flow-main", "episode_reward_mean": 772.139755596082, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33be0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.04355001449585, "timesteps_since_restore": 5070875, "info": {"update_time_ms": 6.871, "load_time_ms": 5.5, "sample_time_ms": 17947.56, "num_steps_trained": 5070875, "default": {"entropy": 1.6827349662780762, "policy_loss": -0.010747984051704407, "vf_loss": 49.18349075317383, "kl": 0.013928905129432678, "vf_explained_var": 0.15772199630737305, "total_loss": 49.177452087402344, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5070875, "grad_time_ms": 9622.593}, "time_total_s": 3751.330751657486, "num_metric_batches_dropped": 0, "timestamp": 1558316972, "episode_reward_max": 877.4826768141645, "timesteps_this_iter": 41628, "pid": 46936, "custom_metrics": {"cost2_mean": -35.18040707840291, "outflow_rate_mean": 906.5954976482059, "system_level_velocity_mean": 16.811476463964695, "cost2_min": -48.8030977825594, "cost1_min": 12.32955264715982, "cost1_mean": 411.1345586718326, "cost1_max": 455.5611134120039, "outflow_rate_max": 1001.8233516827277, "system_level_velocity_max": 18.257280340783232, "outflow_rate_min": 467.7500288525429, "cost2_max": -13.691543653929468, "system_level_velocity_min": 12.826622441443147}, "policy_reward_mean": {}, "time_since_restore": 3751.330751657486, "episodes_total": 3862, "iterations_since_restore": 115, "episode_reward_min": 25.4606557624275, "episodes_this_iter": 33, "episode_len_mean": 679.85, "done": false, "training_iteration": 115, "date": "2019-05-20_01-49-32", "node_ip": "10.138.0.2", "timesteps_total": 5070875}
{"hostname": "flow-main", "episode_reward_mean": 772.1140025161694, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9208>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.707602739334106, "timesteps_since_restore": 5112664, "info": {"update_time_ms": 6.867, "load_time_ms": 5.651, "sample_time_ms": 18021.916, "num_steps_trained": 5112664, "default": {"entropy": 1.6768913269042969, "policy_loss": -0.012182186357676983, "vf_loss": 46.46135711669922, "kl": 0.0149703249335289, "vf_explained_var": 0.19157537817955017, "total_loss": 46.454219818115234, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5112664, "grad_time_ms": 9644.083}, "time_total_s": 3779.03835439682, "num_metric_batches_dropped": 0, "timestamp": 1558317000, "episode_reward_max": 857.0615141257462, "timesteps_this_iter": 41789, "pid": 46936, "custom_metrics": {"cost2_mean": -35.53395672631251, "outflow_rate_mean": 901.2663504908028, "system_level_velocity_mean": 16.739934812619847, "cost2_min": -47.267368872585244, "cost1_min": 12.32955264715982, "cost1_mean": 410.5853437203069, "cost1_max": 455.5611134120039, "outflow_rate_max": 1001.8233516827277, "system_level_velocity_max": 18.288588753036397, "outflow_rate_min": 467.7500288525429, "cost2_max": -13.691543653929468, "system_level_velocity_min": 12.826622441443147}, "policy_reward_mean": {}, "time_since_restore": 3779.03835439682, "episodes_total": 3895, "iterations_since_restore": 116, "episode_reward_min": 25.4606557624275, "episodes_this_iter": 33, "episode_len_mean": 682.66, "done": false, "training_iteration": 116, "date": "2019-05-20_01-50-00", "node_ip": "10.138.0.2", "timesteps_total": 5112664}
{"hostname": "flow-main", "episode_reward_mean": 782.4323547298012, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33748>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.528620958328247, "timesteps_since_restore": 5154119, "info": {"update_time_ms": 6.901, "load_time_ms": 5.646, "sample_time_ms": 18089.954, "num_steps_trained": 5154119, "default": {"entropy": 1.6824191808700562, "policy_loss": -0.011329692788422108, "vf_loss": 54.53997039794922, "kl": 0.015065685845911503, "vf_explained_var": 0.10320021957159042, "total_loss": 54.533721923828125, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5154119, "grad_time_ms": 9647.158}, "time_total_s": 3807.5669753551483, "num_metric_batches_dropped": 0, "timestamp": 1558317029, "episode_reward_max": 856.2535764001204, "timesteps_this_iter": 41455, "pid": 46936, "custom_metrics": {"cost2_mean": -34.929966250366604, "outflow_rate_mean": 902.57971949159, "system_level_velocity_mean": 16.791413065881557, "cost2_min": -49.12286505869751, "cost1_min": 22.095063124523946, "cost1_mean": 414.91239900791834, "cost1_max": 454.5308698570671, "outflow_rate_max": 1001.8233516827277, "system_level_velocity_max": 18.288588753036397, "outflow_rate_min": 510.14859100925133, "cost2_max": -17.52742531253641, "system_level_velocity_min": 12.826622441443147}, "policy_reward_mean": {}, "time_since_restore": 3807.5669753551483, "episodes_total": 3932, "iterations_since_restore": 117, "episode_reward_min": 47.60297090635544, "episodes_this_iter": 37, "episode_len_mean": 688.93, "done": false, "training_iteration": 117, "date": "2019-05-20_01-50-29", "node_ip": "10.138.0.2", "timesteps_total": 5154119}
{"hostname": "flow-main", "episode_reward_mean": 785.0136096118867, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9278>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9eb8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.775649547576904, "timesteps_since_restore": 5195301, "info": {"update_time_ms": 6.907, "load_time_ms": 5.703, "sample_time_ms": 17982.852, "num_steps_trained": 5195301, "default": {"entropy": 1.6856309175491333, "policy_loss": -0.011370116844773293, "vf_loss": 46.161861419677734, "kl": 0.014607599005103111, "vf_explained_var": 0.1489742249250412, "total_loss": 46.15542221069336, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 5195301, "grad_time_ms": 9618.219}, "time_total_s": 3834.342624902725, "num_metric_batches_dropped": 0, "timestamp": 1558317055, "episode_reward_max": 879.6643438538491, "timesteps_this_iter": 41182, "pid": 46936, "custom_metrics": {"cost2_mean": -34.43695915601371, "outflow_rate_mean": 910.2162844534563, "system_level_velocity_mean": 17.048606891213726, "cost2_min": -54.58200959979415, "cost1_min": 22.095063124523946, "cost1_mean": 418.9256846466726, "cost1_max": 454.5308698570671, "outflow_rate_max": 1000.2377321432584, "system_level_velocity_max": 18.317008760430063, "outflow_rate_min": 510.14859100925133, "cost2_max": -17.52742531253641, "system_level_velocity_min": 13.40846995564999}, "policy_reward_mean": {}, "time_since_restore": 3834.342624902725, "episodes_total": 3965, "iterations_since_restore": 118, "episode_reward_min": 47.60297090635544, "episodes_this_iter": 33, "episode_len_mean": 686.01, "done": false, "training_iteration": 118, "date": "2019-05-20_01-50-55", "node_ip": "10.138.0.2", "timesteps_total": 5195301}
{"hostname": "flow-main", "episode_reward_mean": 775.9338636215268, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1898>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.419074535369873, "timesteps_since_restore": 5236647, "info": {"update_time_ms": 6.834, "load_time_ms": 5.558, "sample_time_ms": 17935.39, "num_steps_trained": 5236647, "default": {"entropy": 1.699147343635559, "policy_loss": -0.011087711900472641, "vf_loss": 46.842254638671875, "kl": 0.014435753226280212, "vf_explained_var": 0.18488739430904388, "total_loss": 46.83604049682617, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5236647, "grad_time_ms": 9625.582}, "time_total_s": 3861.761699438095, "num_metric_batches_dropped": 0, "timestamp": 1558317083, "episode_reward_max": 879.6643438538491, "timesteps_this_iter": 41346, "pid": 46936, "custom_metrics": {"cost2_mean": -33.60605149131236, "outflow_rate_mean": 914.9211189943879, "system_level_velocity_mean": 17.18280576388311, "cost2_min": -54.58200959979415, "cost1_min": 22.095063124523946, "cost1_mean": 416.3418029507127, "cost1_max": 455.0384573088399, "outflow_rate_max": 1021.317791026688, "system_level_velocity_max": 18.556547308165587, "outflow_rate_min": 510.14859100925133, "cost2_max": -17.52742531253641, "system_level_velocity_min": 13.40846995564999}, "policy_reward_mean": {}, "time_since_restore": 3861.761699438095, "episodes_total": 4001, "iterations_since_restore": 119, "episode_reward_min": 47.60297090635544, "episodes_this_iter": 36, "episode_len_mean": 677.69, "done": false, "training_iteration": 119, "date": "2019-05-20_01-51-23", "node_ip": "10.138.0.2", "timesteps_total": 5236647}
{"hostname": "flow-main", "episode_reward_mean": 773.7921844254857, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a97f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9438>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.04299545288086, "timesteps_since_restore": 5278019, "info": {"update_time_ms": 6.909, "load_time_ms": 5.578, "sample_time_ms": 17903.169, "num_steps_trained": 5278019, "default": {"entropy": 1.70085871219635, "policy_loss": -0.012474213726818562, "vf_loss": 50.07552719116211, "kl": 0.014433227479457855, "vf_explained_var": 0.14723420143127441, "total_loss": 50.06792068481445, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5278019, "grad_time_ms": 9652.514}, "time_total_s": 3889.804694890976, "num_metric_batches_dropped": 0, "timestamp": 1558317111, "episode_reward_max": 879.6643438538491, "timesteps_this_iter": 41372, "pid": 46936, "custom_metrics": {"cost2_mean": -33.83063904720703, "outflow_rate_mean": 915.7979987131297, "system_level_velocity_mean": 17.114779211106974, "cost2_min": -54.58200959979415, "cost1_min": 62.6104154311283, "cost1_mean": 416.00921485205924, "cost1_max": 455.0384573088399, "outflow_rate_max": 1021.5187373483252, "system_level_velocity_max": 18.556547308165587, "outflow_rate_min": 667.7336758268658, "cost2_max": -20.855136104011642, "system_level_velocity_min": 12.881175193969513}, "policy_reward_mean": {}, "time_since_restore": 3889.804694890976, "episodes_total": 4034, "iterations_since_restore": 120, "episode_reward_min": 124.86781559062413, "episodes_this_iter": 33, "episode_len_mean": 678.63, "done": false, "training_iteration": 120, "date": "2019-05-20_01-51-51", "node_ip": "10.138.0.2", "timesteps_total": 5278019}
{"hostname": "flow-main", "episode_reward_mean": 775.9204660300583, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33d68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33c88>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.826534032821655, "timesteps_since_restore": 5319441, "info": {"update_time_ms": 7.009, "load_time_ms": 5.423, "sample_time_ms": 18030.991, "num_steps_trained": 5319441, "default": {"entropy": 1.7088497877120972, "policy_loss": -0.010421690531075, "vf_loss": 45.408660888671875, "kl": 0.013274098746478558, "vf_explained_var": 0.13604074716567993, "total_loss": 45.40271759033203, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5319441, "grad_time_ms": 9669.796}, "time_total_s": 3917.6312289237976, "num_metric_batches_dropped": 0, "timestamp": 1558317139, "episode_reward_max": 876.4162457330144, "timesteps_this_iter": 41422, "pid": 46936, "custom_metrics": {"cost2_mean": -33.7312711873097, "outflow_rate_mean": 914.57384546936, "system_level_velocity_mean": 17.09446695599665, "cost2_min": -50.01628556523592, "cost1_min": 158.98489638609857, "cost1_mean": 417.62161574481064, "cost1_max": 461.69029787327645, "outflow_rate_max": 1021.5187373483252, "system_level_velocity_max": 18.573192201200253, "outflow_rate_min": 689.7927180436432, "cost2_max": -20.855136104011642, "system_level_velocity_min": 12.881175193969513}, "policy_reward_mean": {}, "time_since_restore": 3917.6312289237976, "episodes_total": 4067, "iterations_since_restore": 121, "episode_reward_min": 297.59195153631987, "episodes_this_iter": 33, "episode_len_mean": 681.47, "done": false, "training_iteration": 121, "date": "2019-05-20_01-52-19", "node_ip": "10.138.0.2", "timesteps_total": 5319441}
{"hostname": "flow-main", "episode_reward_mean": 784.545567567623, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9588>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.747836351394653, "timesteps_since_restore": 5360759, "info": {"update_time_ms": 6.916, "load_time_ms": 5.379, "sample_time_ms": 17908.01, "num_steps_trained": 5360759, "default": {"entropy": 1.7029540538787842, "policy_loss": -0.012009738013148308, "vf_loss": 47.583946228027344, "kl": 0.013499467633664608, "vf_explained_var": 0.15697446465492249, "total_loss": 47.57648849487305, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 5360759, "grad_time_ms": 9681.154}, "time_total_s": 3944.3790652751923, "num_metric_batches_dropped": 0, "timestamp": 1558317166, "episode_reward_max": 858.4806215723811, "timesteps_this_iter": 41318, "pid": 46936, "custom_metrics": {"cost2_mean": -34.29962691949453, "outflow_rate_mean": 911.3291527598928, "system_level_velocity_mean": 17.049071439128063, "cost2_min": -47.996736442978346, "cost1_min": 158.98489638609857, "cost1_mean": 421.9355095489262, "cost1_max": 464.4812590949178, "outflow_rate_max": 1021.5187373483252, "system_level_velocity_max": 18.770271129367877, "outflow_rate_min": 689.7927180436432, "cost2_max": -23.6529970781097, "system_level_velocity_min": 12.881175193969513}, "policy_reward_mean": {}, "time_since_restore": 3944.3790652751923, "episodes_total": 4100, "iterations_since_restore": 122, "episode_reward_min": 297.59195153631987, "episodes_this_iter": 33, "episode_len_mean": 689.35, "done": false, "training_iteration": 122, "date": "2019-05-20_01-52-46", "node_ip": "10.138.0.2", "timesteps_total": 5360759}
{"hostname": "flow-main", "episode_reward_mean": 786.7950139189932, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a92b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9080>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.00771713256836, "timesteps_since_restore": 5402451, "info": {"update_time_ms": 6.882, "load_time_ms": 5.436, "sample_time_ms": 17870.79, "num_steps_trained": 5402451, "default": {"entropy": 1.710857629776001, "policy_loss": -0.014921465888619423, "vf_loss": 45.03203201293945, "kl": 0.01759643480181694, "vf_explained_var": 0.2141970545053482, "total_loss": 45.02305221557617, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5402451, "grad_time_ms": 9696.778}, "time_total_s": 3972.3867824077606, "num_metric_batches_dropped": 0, "timestamp": 1558317194, "episode_reward_max": 889.2559869382671, "timesteps_this_iter": 41692, "pid": 46936, "custom_metrics": {"cost2_mean": -34.439856513437256, "outflow_rate_mean": 907.0248833989656, "system_level_velocity_mean": 17.058654492751007, "cost2_min": -46.26197009518098, "cost1_min": 15.288378387670921, "cost1_mean": 421.17717792104463, "cost1_max": 464.4812590949178, "outflow_rate_max": 1017.0462294459973, "system_level_velocity_max": 18.770271129367877, "outflow_rate_min": 472.5580275473099, "cost2_max": -10.608032080325628, "system_level_velocity_min": 13.502250078962986}, "policy_reward_mean": {}, "time_since_restore": 3972.3867824077606, "episodes_total": 4135, "iterations_since_restore": 123, "episode_reward_min": 41.32504834000699, "episodes_this_iter": 35, "episode_len_mean": 688.32, "done": false, "training_iteration": 123, "date": "2019-05-20_01-53-14", "node_ip": "10.138.0.2", "timesteps_total": 5402451}
{"hostname": "flow-main", "episode_reward_mean": 788.956660250282, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33668>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33c18>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.206488132476807, "timesteps_since_restore": 5444444, "info": {"update_time_ms": 7.041, "load_time_ms": 5.445, "sample_time_ms": 17855.237, "num_steps_trained": 5444444, "default": {"entropy": 1.7118781805038452, "policy_loss": -0.013470297679305077, "vf_loss": 45.40979766845703, "kl": 0.015536632388830185, "vf_explained_var": 0.1702946424484253, "total_loss": 45.40156936645508, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5444444, "grad_time_ms": 9693.408}, "time_total_s": 4000.5932705402374, "num_metric_batches_dropped": 0, "timestamp": 1558317222, "episode_reward_max": 889.2559869382671, "timesteps_this_iter": 41993, "pid": 46936, "custom_metrics": {"cost2_mean": -34.97310489773337, "outflow_rate_mean": 907.8269140269766, "system_level_velocity_mean": 16.875304251361225, "cost2_min": -52.56108070690689, "cost1_min": 15.288378387670921, "cost1_mean": 419.7018344303024, "cost1_max": 464.4812590949178, "outflow_rate_max": 1017.0462294459973, "system_level_velocity_max": 18.770271129367877, "outflow_rate_min": 472.5580275473099, "cost2_max": -10.608032080325628, "system_level_velocity_min": 13.502250078962986}, "policy_reward_mean": {}, "time_since_restore": 4000.5932705402374, "episodes_total": 4168, "iterations_since_restore": 124, "episode_reward_min": 41.32504834000699, "episodes_this_iter": 33, "episode_len_mean": 692.34, "done": false, "training_iteration": 124, "date": "2019-05-20_01-53-42", "node_ip": "10.138.0.2", "timesteps_total": 5444444}
{"hostname": "flow-main", "episode_reward_mean": 790.2725759021288, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9358>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a96d8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.017751693725586, "timesteps_since_restore": 5486239, "info": {"update_time_ms": 7.054, "load_time_ms": 5.474, "sample_time_ms": 17943.928, "num_steps_trained": 5486239, "default": {"entropy": 1.710683822631836, "policy_loss": -0.010095900855958462, "vf_loss": 40.1452751159668, "kl": 0.013989550992846489, "vf_explained_var": 0.18710163235664368, "total_loss": 40.13990020751953, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5486239, "grad_time_ms": 9702.024}, "time_total_s": 4028.611022233963, "num_metric_batches_dropped": 0, "timestamp": 1558317250, "episode_reward_max": 900.1767049407662, "timesteps_this_iter": 41795, "pid": 46936, "custom_metrics": {"cost2_mean": -34.57048122814723, "outflow_rate_mean": 910.0306275797446, "system_level_velocity_mean": 16.79756246494595, "cost2_min": -52.56108070690689, "cost1_min": 15.288378387670921, "cost1_mean": 417.0863284625567, "cost1_max": 459.5038385973395, "outflow_rate_max": 1014.4852924561376, "system_level_velocity_max": 18.43925211043231, "outflow_rate_min": 472.5580275473099, "cost2_max": -10.608032080325628, "system_level_velocity_min": 13.502250078962986}, "policy_reward_mean": {}, "time_since_restore": 4028.611022233963, "episodes_total": 4200, "iterations_since_restore": 125, "episode_reward_min": 41.32504834000699, "episodes_this_iter": 32, "episode_len_mean": 690.03, "done": false, "training_iteration": 125, "date": "2019-05-20_01-54-10", "node_ip": "10.138.0.2", "timesteps_total": 5486239}
{"hostname": "flow-main", "episode_reward_mean": 783.5194408218476, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2198>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2fd0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.93331789970398, "timesteps_since_restore": 5527833, "info": {"update_time_ms": 7.167, "load_time_ms": 5.467, "sample_time_ms": 18011.995, "num_steps_trained": 5527833, "default": {"entropy": 1.7152241468429565, "policy_loss": -0.009888086467981339, "vf_loss": 49.14795684814453, "kl": 0.014601321890950203, "vf_explained_var": 0.14919570088386536, "total_loss": 49.143001556396484, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5527833, "grad_time_ms": 9655.805}, "time_total_s": 4056.544340133667, "num_metric_batches_dropped": 0, "timestamp": 1558317278, "episode_reward_max": 900.1767049407662, "timesteps_this_iter": 41594, "pid": 46936, "custom_metrics": {"cost2_mean": -35.12161004983278, "outflow_rate_mean": 913.2707518318336, "system_level_velocity_mean": 16.75108765477833, "cost2_min": -52.56108070690689, "cost1_min": 13.032419154024295, "cost1_mean": 413.4782870294382, "cost1_max": 460.4201416121844, "outflow_rate_max": 1033.6575208871604, "system_level_velocity_max": 18.673627222476174, "outflow_rate_min": 462.64045036444384, "cost2_max": -12.1929457181999, "system_level_velocity_min": 13.628168970155109}, "policy_reward_mean": {}, "time_since_restore": 4056.544340133667, "episodes_total": 4235, "iterations_since_restore": 126, "episode_reward_min": 33.701370760155825, "episodes_this_iter": 35, "episode_len_mean": 685.01, "done": false, "training_iteration": 126, "date": "2019-05-20_01-54-38", "node_ip": "10.138.0.2", "timesteps_total": 5527833}
{"hostname": "flow-main", "episode_reward_mean": 786.0331288907671, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47940>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47860>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.99238610267639, "timesteps_since_restore": 5569636, "info": {"update_time_ms": 7.199, "load_time_ms": 5.418, "sample_time_ms": 17861.204, "num_steps_trained": 5569636, "default": {"entropy": 1.7156890630722046, "policy_loss": -0.012092440389096737, "vf_loss": 50.12693405151367, "kl": 0.014186376705765724, "vf_explained_var": 0.16548262536525726, "total_loss": 50.119625091552734, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5569636, "grad_time_ms": 9752.544}, "time_total_s": 4084.5367262363434, "num_metric_batches_dropped": 0, "timestamp": 1558317306, "episode_reward_max": 900.1767049407662, "timesteps_this_iter": 41803, "pid": 46936, "custom_metrics": {"cost2_mean": -35.492206258366544, "outflow_rate_mean": 915.9425944286739, "system_level_velocity_mean": 16.852550249290044, "cost2_min": -52.47123111812465, "cost1_min": 13.032419154024295, "cost1_mean": 416.157108377435, "cost1_max": 460.4201416121844, "outflow_rate_max": 1033.6575208871604, "system_level_velocity_max": 18.673627222476174, "outflow_rate_min": 462.64045036444384, "cost2_max": -12.1929457181999, "system_level_velocity_min": 13.628168970155109}, "policy_reward_mean": {}, "time_since_restore": 4084.5367262363434, "episodes_total": 4271, "iterations_since_restore": 127, "episode_reward_min": 33.701370760155825, "episodes_this_iter": 36, "episode_len_mean": 685.48, "done": false, "training_iteration": 127, "date": "2019-05-20_01-55-06", "node_ip": "10.138.0.2", "timesteps_total": 5569636}
{"hostname": "flow-main", "episode_reward_mean": 776.0651405579415, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1be0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1470>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.2660653591156, "timesteps_since_restore": 5611430, "info": {"update_time_ms": 7.201, "load_time_ms": 5.333, "sample_time_ms": 17971.472, "num_steps_trained": 5611430, "default": {"entropy": 1.7103773355484009, "policy_loss": -0.010927703231573105, "vf_loss": 48.74900817871094, "kl": 0.013371833600103855, "vf_explained_var": 0.12462753802537918, "total_loss": 48.742591857910156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5611430, "grad_time_ms": 9790.838}, "time_total_s": 4112.802791595459, "num_metric_batches_dropped": 0, "timestamp": 1558317334, "episode_reward_max": 870.3008632540124, "timesteps_this_iter": 41794, "pid": 46936, "custom_metrics": {"cost2_mean": -35.54264933228974, "outflow_rate_mean": 912.1147903178538, "system_level_velocity_mean": 16.868135841138038, "cost2_min": -49.496790297411366, "cost1_min": 13.032419154024295, "cost1_mean": 411.48687665405845, "cost1_max": 460.4201416121844, "outflow_rate_max": 1033.6575208871604, "system_level_velocity_max": 18.673627222476174, "outflow_rate_min": 462.64045036444384, "cost2_max": -12.1929457181999, "system_level_velocity_min": 13.628168970155109}, "policy_reward_mean": {}, "time_since_restore": 4112.802791595459, "episodes_total": 4306, "iterations_since_restore": 128, "episode_reward_min": 33.701370760155825, "episodes_this_iter": 35, "episode_len_mean": 678.37, "done": false, "training_iteration": 128, "date": "2019-05-20_01-55-34", "node_ip": "10.138.0.2", "timesteps_total": 5611430}
{"hostname": "flow-main", "episode_reward_mean": 776.1700830323392, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b19b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1860>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1d30>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.48788809776306, "timesteps_since_restore": 5653206, "info": {"update_time_ms": 7.482, "load_time_ms": 5.266, "sample_time_ms": 17898.578, "num_steps_trained": 5653206, "default": {"entropy": 1.705506443977356, "policy_loss": -0.011208711192011833, "vf_loss": 49.681156158447266, "kl": 0.01461623515933752, "vf_explained_var": 0.12911248207092285, "total_loss": 49.67488098144531, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5653206, "grad_time_ms": 9770.287}, "time_total_s": 4139.290679693222, "num_metric_batches_dropped": 0, "timestamp": 1558317361, "episode_reward_max": 867.0539362622349, "timesteps_this_iter": 41776, "pid": 46936, "custom_metrics": {"cost2_mean": -35.68413326291522, "outflow_rate_mean": 909.3982495110249, "system_level_velocity_mean": 16.811457103919132, "cost2_min": -46.70414754255831, "cost1_min": 22.541569551071067, "cost1_mean": 410.8859991784709, "cost1_max": 459.0331653633898, "outflow_rate_max": 1025.8163623797498, "system_level_velocity_max": 19.031502113245455, "outflow_rate_min": 506.6818421976401, "cost2_max": -15.812079674705906, "system_level_velocity_min": 13.466343487952274}, "policy_reward_mean": {}, "time_since_restore": 4139.290679693222, "episodes_total": 4338, "iterations_since_restore": 129, "episode_reward_min": 51.507760632908585, "episodes_this_iter": 32, "episode_len_mean": 679.95, "done": false, "training_iteration": 129, "date": "2019-05-20_01-56-01", "node_ip": "10.138.0.2", "timesteps_total": 5653206}
{"hostname": "flow-main", "episode_reward_mean": 768.0817848657462, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9c18>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9ac8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.15601658821106, "timesteps_since_restore": 5695068, "info": {"update_time_ms": 7.412, "load_time_ms": 5.482, "sample_time_ms": 17926.224, "num_steps_trained": 5695068, "default": {"entropy": 1.7160181999206543, "policy_loss": -0.012920031324028969, "vf_loss": 44.665977478027344, "kl": 0.014471713453531265, "vf_explained_var": 0.1508474498987198, "total_loss": 44.65793991088867, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5695068, "grad_time_ms": 9754.704}, "time_total_s": 4167.446696281433, "num_metric_batches_dropped": 0, "timestamp": 1558317389, "episode_reward_max": 856.7648841994985, "timesteps_this_iter": 41862, "pid": 46936, "custom_metrics": {"cost2_mean": -35.26604520878016, "outflow_rate_mean": 907.579724274501, "system_level_velocity_mean": 16.669900445040373, "cost2_min": -46.70414754255831, "cost1_min": 22.541569551071067, "cost1_mean": 404.82828523893966, "cost1_max": 459.0331653633898, "outflow_rate_max": 1025.8163623797498, "system_level_velocity_max": 19.031502113245455, "outflow_rate_min": 506.6818421976401, "cost2_max": -15.812079674705906, "system_level_velocity_min": 13.466343487952274}, "policy_reward_mean": {}, "time_since_restore": 4167.446696281433, "episodes_total": 4372, "iterations_since_restore": 130, "episode_reward_min": 51.507760632908585, "episodes_this_iter": 34, "episode_len_mean": 674.87, "done": false, "training_iteration": 130, "date": "2019-05-20_01-56-29", "node_ip": "10.138.0.2", "timesteps_total": 5695068}
{"hostname": "flow-main", "episode_reward_mean": 784.4842663432132, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33a58>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33f28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33eb8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.396469593048096, "timesteps_since_restore": 5736783, "info": {"update_time_ms": 7.3, "load_time_ms": 5.675, "sample_time_ms": 18004.168, "num_steps_trained": 5736783, "default": {"entropy": 1.729949712753296, "policy_loss": -0.013050084002315998, "vf_loss": 50.08750534057617, "kl": 0.015264345332980156, "vf_explained_var": 0.11159060150384903, "total_loss": 50.07960891723633, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5736783, "grad_time_ms": 9733.637}, "time_total_s": 4195.843165874481, "num_metric_batches_dropped": 0, "timestamp": 1558317417, "episode_reward_max": 867.4866798531473, "timesteps_this_iter": 41715, "pid": 46936, "custom_metrics": {"cost2_mean": -34.4079378147464, "outflow_rate_mean": 917.8202233193417, "system_level_velocity_mean": 16.640888826080566, "cost2_min": -46.45721868088687, "cost1_min": 30.342651852723478, "cost1_mean": 413.11255840455647, "cost1_max": 459.0331653633898, "outflow_rate_max": 1025.8163623797498, "system_level_velocity_max": 19.031502113245455, "outflow_rate_min": 543.9377109875985, "cost2_max": -17.924940835788085, "system_level_velocity_min": 13.466343487952274}, "policy_reward_mean": {}, "time_since_restore": 4195.843165874481, "episodes_total": 4409, "iterations_since_restore": 131, "episode_reward_min": 67.40892329213581, "episodes_this_iter": 37, "episode_len_mean": 688.38, "done": false, "training_iteration": 131, "date": "2019-05-20_01-56-57", "node_ip": "10.138.0.2", "timesteps_total": 5736783}
{"hostname": "flow-main", "episode_reward_mean": 794.8388685838826, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9d30>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9c18>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.925450325012207, "timesteps_since_restore": 5778311, "info": {"update_time_ms": 7.195, "load_time_ms": 5.635, "sample_time_ms": 18014.302, "num_steps_trained": 5778311, "default": {"entropy": 1.726665735244751, "policy_loss": -0.014246032573282719, "vf_loss": 43.4015998840332, "kl": 0.01622188277542591, "vf_explained_var": 0.15711641311645508, "total_loss": 43.39282989501953, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5778311, "grad_time_ms": 9740.823}, "time_total_s": 4222.768616199493, "num_metric_batches_dropped": 0, "timestamp": 1558317444, "episode_reward_max": 885.1559183917692, "timesteps_this_iter": 41528, "pid": 46936, "custom_metrics": {"cost2_mean": -33.62386161641154, "outflow_rate_mean": 920.0025126377284, "system_level_velocity_mean": 16.652176055156602, "cost2_min": -49.198032756665015, "cost1_min": 122.1307834747346, "cost1_mean": 417.6394654364384, "cost1_max": 456.2833023803644, "outflow_rate_max": 1016.4336629548694, "system_level_velocity_max": 18.122014365942377, "outflow_rate_min": 737.4675785341943, "cost2_max": -17.992808438818624, "system_level_velocity_min": 12.759573872722028}, "policy_reward_mean": {}, "time_since_restore": 4222.768616199493, "episodes_total": 4441, "iterations_since_restore": 132, "episode_reward_min": 249.00485562331002, "episodes_this_iter": 32, "episode_len_mean": 694.92, "done": false, "training_iteration": 132, "date": "2019-05-20_01-57-24", "node_ip": "10.138.0.2", "timesteps_total": 5778311}
{"hostname": "flow-main", "episode_reward_mean": 795.6902784699989, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2c88>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b2198>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b20b8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.027724742889404, "timesteps_since_restore": 5820461, "info": {"update_time_ms": 7.227, "load_time_ms": 5.567, "sample_time_ms": 17907.205, "num_steps_trained": 5820461, "default": {"entropy": 1.73344087600708, "policy_loss": -0.012074325233697891, "vf_loss": 47.50533676147461, "kl": 0.014424212276935577, "vf_explained_var": 0.14747539162635803, "total_loss": 47.498130798339844, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5820461, "grad_time_ms": 9749.969}, "time_total_s": 4249.796340942383, "num_metric_batches_dropped": 0, "timestamp": 1558317471, "episode_reward_max": 885.1559183917692, "timesteps_this_iter": 42150, "pid": 46936, "custom_metrics": {"cost2_mean": -32.49941263969708, "outflow_rate_mean": 914.7363634303606, "system_level_velocity_mean": 16.847215768844087, "cost2_min": -49.198032756665015, "cost1_min": 25.54995980998997, "cost1_mean": 419.72840312790754, "cost1_max": 456.2833023803644, "outflow_rate_max": 1026.455487572573, "system_level_velocity_max": 18.408264948334395, "outflow_rate_min": 523.3537611367134, "cost2_max": -17.992808438818624, "system_level_velocity_min": 12.759573872722028}, "policy_reward_mean": {}, "time_since_restore": 4249.796340942383, "episodes_total": 4475, "iterations_since_restore": 133, "episode_reward_min": 51.30568509588974, "episodes_this_iter": 34, "episode_len_mean": 693.39, "done": false, "training_iteration": 133, "date": "2019-05-20_01-57-51", "node_ip": "10.138.0.2", "timesteps_total": 5820461}
{"hostname": "flow-main", "episode_reward_mean": 785.6878574500915, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c13c8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1b38>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1470>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.00707483291626, "timesteps_since_restore": 5862274, "info": {"update_time_ms": 7.159, "load_time_ms": 5.626, "sample_time_ms": 17868.433, "num_steps_trained": 5862274, "default": {"entropy": 1.7407091856002808, "policy_loss": -0.013722855597734451, "vf_loss": 45.750244140625, "kl": 0.016205670312047005, "vf_explained_var": 0.1555059850215912, "total_loss": 45.74198913574219, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5862274, "grad_time_ms": 9768.706}, "time_total_s": 4277.803415775299, "num_metric_batches_dropped": 0, "timestamp": 1558317499, "episode_reward_max": 885.1559183917692, "timesteps_this_iter": 41813, "pid": 46936, "custom_metrics": {"cost2_mean": -32.20544708761153, "outflow_rate_mean": 907.484626202634, "system_level_velocity_mean": 16.892490451197347, "cost2_min": -49.198032756665015, "cost1_min": 25.54995980998997, "cost1_mean": 414.8653969954759, "cost1_max": 456.2833023803644, "outflow_rate_max": 1026.455487572573, "system_level_velocity_max": 18.408264948334395, "outflow_rate_min": 523.3537611367134, "cost2_max": -17.992808438818624, "system_level_velocity_min": 12.759573872722028}, "policy_reward_mean": {}, "time_since_restore": 4277.803415775299, "episodes_total": 4509, "iterations_since_restore": 134, "episode_reward_min": 51.30568509588974, "episodes_this_iter": 34, "episode_len_mean": 684.81, "done": false, "training_iteration": 134, "date": "2019-05-20_01-58-19", "node_ip": "10.138.0.2", "timesteps_total": 5862274}
{"hostname": "flow-main", "episode_reward_mean": 779.2424252881043, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02cfe518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1860>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.22838020324707, "timesteps_since_restore": 5904539, "info": {"update_time_ms": 7.18, "load_time_ms": 5.677, "sample_time_ms": 17773.019, "num_steps_trained": 5904539, "default": {"entropy": 1.7468044757843018, "policy_loss": -0.01210745144635439, "vf_loss": 37.556236267089844, "kl": 0.015564991161227226, "vf_explained_var": 0.214284285902977, "total_loss": 37.54938507080078, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5904539, "grad_time_ms": 9785.825}, "time_total_s": 4305.031795978546, "num_metric_batches_dropped": 0, "timestamp": 1558317527, "episode_reward_max": 867.4008971224407, "timesteps_this_iter": 42265, "pid": 46936, "custom_metrics": {"cost2_mean": -31.786581211528954, "outflow_rate_mean": 900.9748256651262, "system_level_velocity_mean": 16.861727958153146, "cost2_min": -44.02992008293059, "cost1_min": 25.54995980998997, "cost1_mean": 409.91007862892417, "cost1_max": 453.2513467848312, "outflow_rate_max": 1026.455487572573, "system_level_velocity_max": 18.408264948334395, "outflow_rate_min": 523.3537611367134, "cost2_max": -18.35729677233802, "system_level_velocity_min": 12.763011198719989}, "policy_reward_mean": {}, "time_since_restore": 4305.031795978546, "episodes_total": 4541, "iterations_since_restore": 135, "episode_reward_min": 51.30568509588974, "episodes_this_iter": 32, "episode_len_mean": 678.62, "done": false, "training_iteration": 135, "date": "2019-05-20_01-58-47", "node_ip": "10.138.0.2", "timesteps_total": 5904539}
{"hostname": "flow-main", "episode_reward_mean": 771.3456223359739, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9eb8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.25663709640503, "timesteps_since_restore": 5946074, "info": {"update_time_ms": 7.085, "load_time_ms": 5.743, "sample_time_ms": 17820.793, "num_steps_trained": 5946074, "default": {"entropy": 1.7517962455749512, "policy_loss": -0.013086993247270584, "vf_loss": 45.332550048828125, "kl": 0.014800396747887135, "vf_explained_var": 0.2152254730463028, "total_loss": 45.324459075927734, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5946074, "grad_time_ms": 9770.837}, "time_total_s": 4333.288433074951, "num_metric_batches_dropped": 0, "timestamp": 1558317555, "episode_reward_max": 867.4008971224407, "timesteps_this_iter": 41535, "pid": 46936, "custom_metrics": {"cost2_mean": -31.90271367236522, "outflow_rate_mean": 902.8788887595899, "system_level_velocity_mean": 16.737500060947674, "cost2_min": -51.869136819818095, "cost1_min": 63.942737218755326, "cost1_mean": 405.8270479313217, "cost1_max": 452.4503577799113, "outflow_rate_max": 1015.806733885064, "system_level_velocity_max": 18.57775644730981, "outflow_rate_min": 651.907574163735, "cost2_max": -19.36412858043424, "system_level_velocity_min": 12.763011198719989}, "policy_reward_mean": {}, "time_since_restore": 4333.288433074951, "episodes_total": 4575, "iterations_since_restore": 136, "episode_reward_min": 126.44827054762591, "episodes_this_iter": 34, "episode_len_mean": 676.07, "done": false, "training_iteration": 136, "date": "2019-05-20_01-59-15", "node_ip": "10.138.0.2", "timesteps_total": 5946074}
{"hostname": "flow-main", "episode_reward_mean": 776.4909759370689, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b19b0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.401095151901245, "timesteps_since_restore": 5988148, "info": {"update_time_ms": 7.013, "load_time_ms": 5.774, "sample_time_ms": 17958.725, "num_steps_trained": 5988148, "default": {"entropy": 1.734697699546814, "policy_loss": -0.011727298609912395, "vf_loss": 46.68115997314453, "kl": 0.014394010417163372, "vf_explained_var": 0.21238136291503906, "total_loss": 46.67428970336914, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 5988148, "grad_time_ms": 9673.601}, "time_total_s": 4361.689528226852, "num_metric_batches_dropped": 0, "timestamp": 1558317584, "episode_reward_max": 867.4008971224407, "timesteps_this_iter": 42074, "pid": 46936, "custom_metrics": {"cost2_mean": -32.67030666082467, "outflow_rate_mean": 906.8131182301609, "system_level_velocity_mean": 16.635601871205996, "cost2_min": -51.869136819818095, "cost1_min": 123.73271269900785, "cost1_mean": 407.81628611636285, "cost1_max": 451.992235860754, "outflow_rate_max": 1003.174016782847, "system_level_velocity_max": 18.57775644730981, "outflow_rate_min": 744.0905824218692, "cost2_max": -19.36412858043424, "system_level_velocity_min": 13.734340670607125}, "policy_reward_mean": {}, "time_since_restore": 4361.689528226852, "episodes_total": 4610, "iterations_since_restore": 137, "episode_reward_min": 225.19312344450609, "episodes_this_iter": 35, "episode_len_mean": 683.0, "done": false, "training_iteration": 137, "date": "2019-05-20_01-59-44", "node_ip": "10.138.0.2", "timesteps_total": 5988148}
{"hostname": "flow-main", "episode_reward_mean": 776.3732747114913, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a98d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9c18>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.222554445266724, "timesteps_since_restore": 6030465, "info": {"update_time_ms": 7.044, "load_time_ms": 5.961, "sample_time_ms": 17987.496, "num_steps_trained": 6030465, "default": {"entropy": 1.7389827966690063, "policy_loss": -0.011685905046761036, "vf_loss": 48.82666778564453, "kl": 0.014772826805710793, "vf_explained_var": 0.1822052150964737, "total_loss": 48.819969177246094, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6030465, "grad_time_ms": 9739.734}, "time_total_s": 4390.912082672119, "num_metric_batches_dropped": 0, "timestamp": 1558317613, "episode_reward_max": 861.0785832266506, "timesteps_this_iter": 42317, "pid": 46936, "custom_metrics": {"cost2_mean": -33.18394226270388, "outflow_rate_mean": 904.6053564826968, "system_level_velocity_mean": 16.530747156294364, "cost2_min": -48.985122024477334, "cost1_min": 148.47732225927962, "cost1_mean": 408.2667390899641, "cost1_max": 451.992235860754, "outflow_rate_max": 1003.174016782847, "system_level_velocity_max": 18.229543140046736, "outflow_rate_min": 687.3848628981921, "cost2_max": -21.03736929122831, "system_level_velocity_min": 13.734340670607125}, "policy_reward_mean": {}, "time_since_restore": 4390.912082672119, "episodes_total": 4647, "iterations_since_restore": 138, "episode_reward_min": 294.07268206418473, "episodes_this_iter": 37, "episode_len_mean": 686.51, "done": false, "training_iteration": 138, "date": "2019-05-20_02-00-13", "node_ip": "10.138.0.2", "timesteps_total": 6030465}
{"hostname": "flow-main", "episode_reward_mean": 779.0286052748853, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1e80>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.343745946884155, "timesteps_since_restore": 6073033, "info": {"update_time_ms": 6.901, "load_time_ms": 6.027, "sample_time_ms": 18169.015, "num_steps_trained": 6073033, "default": {"entropy": 1.7548854351043701, "policy_loss": -0.014734506607055664, "vf_loss": 45.3007926940918, "kl": 0.01645560748875141, "vf_explained_var": 0.18983899056911469, "total_loss": 45.2916145324707, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 6073033, "grad_time_ms": 9843.895}, "time_total_s": 4420.255828619003, "num_metric_batches_dropped": 0, "timestamp": 1558317642, "episode_reward_max": 866.6785331954807, "timesteps_this_iter": 42568, "pid": 46936, "custom_metrics": {"cost2_mean": -33.563964244705005, "outflow_rate_mean": 907.807088692726, "system_level_velocity_mean": 16.500479998534058, "cost2_min": -48.985122024477334, "cost1_min": 148.47732225927962, "cost1_mean": 408.72869883188883, "cost1_max": 451.992235860754, "outflow_rate_max": 1024.0629374624568, "system_level_velocity_max": 18.229543140046736, "outflow_rate_min": 687.3848628981921, "cost2_max": -23.22605411844075, "system_level_velocity_min": 13.946062226863058}, "policy_reward_mean": {}, "time_since_restore": 4420.255828619003, "episodes_total": 4681, "iterations_since_restore": 139, "episode_reward_min": 294.07268206418473, "episodes_this_iter": 34, "episode_len_mean": 687.83, "done": false, "training_iteration": 139, "date": "2019-05-20_02-00-42", "node_ip": "10.138.0.2", "timesteps_total": 6073033}
{"hostname": "flow-main", "episode_reward_mean": 779.9429606691739, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9f60>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9710>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.909517526626587, "timesteps_since_restore": 6114846, "info": {"update_time_ms": 6.858, "load_time_ms": 5.886, "sample_time_ms": 18039.679, "num_steps_trained": 6114846, "default": {"entropy": 1.7618489265441895, "policy_loss": -0.012665930204093456, "vf_loss": 40.038414001464844, "kl": 0.015652671456336975, "vf_explained_var": 0.210026353597641, "total_loss": 40.031028747558594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6114846, "grad_time_ms": 9847.996}, "time_total_s": 4447.16534614563, "num_metric_batches_dropped": 0, "timestamp": 1558317669, "episode_reward_max": 866.6785331954807, "timesteps_this_iter": 41813, "pid": 46936, "custom_metrics": {"cost2_mean": -33.05044635505594, "outflow_rate_mean": 906.461499092334, "system_level_velocity_mean": 16.56891913131057, "cost2_min": -48.985122024477334, "cost1_min": 148.47732225927962, "cost1_mean": 409.56292461801866, "cost1_max": 448.672240193413, "outflow_rate_max": 1024.0629374624568, "system_level_velocity_max": 18.229543140046736, "outflow_rate_min": 687.3848628981921, "cost2_max": -23.22605411844075, "system_level_velocity_min": 13.946062226863058}, "policy_reward_mean": {}, "time_since_restore": 4447.16534614563, "episodes_total": 4712, "iterations_since_restore": 140, "episode_reward_min": 294.07268206418473, "episodes_this_iter": 31, "episode_len_mean": 687.83, "done": false, "training_iteration": 140, "date": "2019-05-20_02-01-09", "node_ip": "10.138.0.2", "timesteps_total": 6114846}
{"hostname": "flow-main", "episode_reward_mean": 789.7002412216852, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1d30>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b16a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1860>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.442703008651733, "timesteps_since_restore": 6157336, "info": {"update_time_ms": 6.926, "load_time_ms": 5.786, "sample_time_ms": 17913.398, "num_steps_trained": 6157336, "default": {"entropy": 1.7553781270980835, "policy_loss": -0.014571313746273518, "vf_loss": 48.74589538574219, "kl": 0.016698909923434258, "vf_explained_var": 0.17098529636859894, "total_loss": 48.736961364746094, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 6157336, "grad_time_ms": 9878.547}, "time_total_s": 4474.608049154282, "num_metric_batches_dropped": 0, "timestamp": 1558317697, "episode_reward_max": 867.6453871000425, "timesteps_this_iter": 42490, "pid": 46936, "custom_metrics": {"cost2_mean": -32.47055308600743, "outflow_rate_mean": 916.6039406400615, "system_level_velocity_mean": 16.676624237844706, "cost2_min": -45.14753017280164, "cost1_min": 166.73046086464223, "cost1_mean": 414.59152367341244, "cost1_max": 449.0335329194924, "outflow_rate_max": 1024.0629374624568, "system_level_velocity_max": 18.156014489537014, "outflow_rate_min": 767.1134364478315, "cost2_max": -23.22605411844075, "system_level_velocity_min": 13.987840075322051}, "policy_reward_mean": {}, "time_since_restore": 4474.608049154282, "episodes_total": 4745, "iterations_since_restore": 141, "episode_reward_min": 308.75786140931973, "episodes_this_iter": 33, "episode_len_mean": 692.03, "done": false, "training_iteration": 141, "date": "2019-05-20_02-01-37", "node_ip": "10.138.0.2", "timesteps_total": 6157336}
{"hostname": "flow-main", "episode_reward_mean": 777.1063580089425, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898e48>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47cc0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47470>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.771347045898438, "timesteps_since_restore": 6199902, "info": {"update_time_ms": 7.035, "load_time_ms": 5.817, "sample_time_ms": 18073.692, "num_steps_trained": 6199902, "default": {"entropy": 1.7623273134231567, "policy_loss": -0.013317245058715343, "vf_loss": 48.026222229003906, "kl": 0.015711156651377678, "vf_explained_var": 0.1343737244606018, "total_loss": 48.01820755004883, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 6199902, "grad_time_ms": 9902.861}, "time_total_s": 4503.37939620018, "num_metric_batches_dropped": 0, "timestamp": 1558317725, "episode_reward_max": 867.6453871000425, "timesteps_this_iter": 42566, "pid": 46936, "custom_metrics": {"cost2_mean": -32.75601601132554, "outflow_rate_mean": 906.4345634102744, "system_level_velocity_mean": 16.585628183605266, "cost2_min": -47.266955232721145, "cost1_min": 14.474121477486754, "cost1_mean": 405.7985202543044, "cost1_max": 449.0335329194924, "outflow_rate_max": 1016.1223886676501, "system_level_velocity_max": 18.09749537776859, "outflow_rate_min": 469.5592207029642, "cost2_max": -11.408721305207337, "system_level_velocity_min": 14.113147664867299}, "policy_reward_mean": {}, "time_since_restore": 4503.37939620018, "episodes_total": 4780, "iterations_since_restore": 142, "episode_reward_min": 35.97543639227062, "episodes_this_iter": 35, "episode_len_mean": 681.66, "done": false, "training_iteration": 142, "date": "2019-05-20_02-02-05", "node_ip": "10.138.0.2", "timesteps_total": 6199902}
{"hostname": "flow-main", "episode_reward_mean": 768.286142620917, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b12b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b19e8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1ac8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.08755612373352, "timesteps_since_restore": 6242117, "info": {"update_time_ms": 6.999, "load_time_ms": 5.858, "sample_time_ms": 18175.497, "num_steps_trained": 6242117, "default": {"entropy": 1.7717814445495605, "policy_loss": -0.013091851025819778, "vf_loss": 41.63623809814453, "kl": 0.01569356396794319, "vf_explained_var": 0.21686050295829773, "total_loss": 41.62844467163086, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6242117, "grad_time_ms": 9906.456}, "time_total_s": 4531.466952323914, "num_metric_batches_dropped": 0, "timestamp": 1558317754, "episode_reward_max": 867.6453871000425, "timesteps_this_iter": 42215, "pid": 46936, "custom_metrics": {"cost2_mean": -32.875589453306056, "outflow_rate_mean": 903.804770745433, "system_level_velocity_mean": 16.471664081552184, "cost2_min": -47.266955232721145, "cost1_min": 14.474121477486754, "cost1_mean": 399.76773978413314, "cost1_max": 449.0335329194924, "outflow_rate_max": 1018.4346193320441, "system_level_velocity_max": 18.20401136070323, "outflow_rate_min": 469.5592207029642, "cost2_max": -11.408721305207337, "system_level_velocity_min": 12.831274216235725}, "policy_reward_mean": {}, "time_since_restore": 4531.466952323914, "episodes_total": 4815, "iterations_since_restore": 143, "episode_reward_min": 35.97543639227062, "episodes_this_iter": 35, "episode_len_mean": 675.08, "done": false, "training_iteration": 143, "date": "2019-05-20_02-02-34", "node_ip": "10.138.0.2", "timesteps_total": 6242117}
{"hostname": "flow-main", "episode_reward_mean": 764.6831534164556, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d476d8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47e10>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.44980812072754, "timesteps_since_restore": 6284541, "info": {"update_time_ms": 6.928, "load_time_ms": 5.77, "sample_time_ms": 18228.801, "num_steps_trained": 6284541, "default": {"entropy": 1.7746379375457764, "policy_loss": -0.012988773174583912, "vf_loss": 44.877925872802734, "kl": 0.015002659521996975, "vf_explained_var": 0.19921907782554626, "total_loss": 44.87000274658203, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 6284541, "grad_time_ms": 9898.117}, "time_total_s": 4559.916760444641, "num_metric_batches_dropped": 0, "timestamp": 1558317782, "episode_reward_max": 888.5075484421621, "timesteps_this_iter": 42424, "pid": 46936, "custom_metrics": {"cost2_mean": -33.60658356490895, "outflow_rate_mean": 895.337207067139, "system_level_velocity_mean": 16.19597835825366, "cost2_min": -47.266955232721145, "cost1_min": 14.474121477486754, "cost1_mean": 395.54688702806646, "cost1_max": 448.37300471312767, "outflow_rate_max": 1018.4346193320441, "system_level_velocity_max": 18.303851411031932, "outflow_rate_min": 469.5592207029642, "cost2_max": -11.408721305207337, "system_level_velocity_min": 12.831274216235725}, "policy_reward_mean": {}, "time_since_restore": 4559.916760444641, "episodes_total": 4847, "iterations_since_restore": 144, "episode_reward_min": 35.97543639227062, "episodes_this_iter": 32, "episode_len_mean": 678.68, "done": false, "training_iteration": 144, "date": "2019-05-20_02-03-02", "node_ip": "10.138.0.2", "timesteps_total": 6284541}
{"hostname": "flow-main", "episode_reward_mean": 774.3223410750569, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1f28>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b19e8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.829493522644043, "timesteps_since_restore": 6326552, "info": {"update_time_ms": 6.941, "load_time_ms": 5.623, "sample_time_ms": 18397.151, "num_steps_trained": 6326552, "default": {"entropy": 1.777313232421875, "policy_loss": -0.013232456520199776, "vf_loss": 43.84857177734375, "kl": 0.014510123059153557, "vf_explained_var": 0.21334369480609894, "total_loss": 43.84023666381836, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6326552, "grad_time_ms": 9889.378}, "time_total_s": 4588.746253967285, "num_metric_batches_dropped": 0, "timestamp": 1558317811, "episode_reward_max": 888.5075484421621, "timesteps_this_iter": 42011, "pid": 46936, "custom_metrics": {"cost2_mean": -32.98112346429978, "outflow_rate_mean": 904.3513696826725, "system_level_velocity_mean": 16.29521518206669, "cost2_min": -45.010104893383726, "cost1_min": 145.06086489864958, "cost1_mean": 403.62504698547707, "cost1_max": 451.5365231302882, "outflow_rate_max": 1018.4346193320441, "system_level_velocity_max": 18.549898521672855, "outflow_rate_min": 797.8968063484025, "cost2_max": -19.969202737868205, "system_level_velocity_min": 12.831274216235725}, "policy_reward_mean": {}, "time_since_restore": 4588.746253967285, "episodes_total": 4880, "iterations_since_restore": 145, "episode_reward_min": 293.57202797843553, "episodes_this_iter": 33, "episode_len_mean": 688.74, "done": false, "training_iteration": 145, "date": "2019-05-20_02-03-31", "node_ip": "10.138.0.2", "timesteps_total": 6326552}
{"hostname": "flow-main", "episode_reward_mean": 783.0007919169497, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c65c0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6198>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.205496311187744, "timesteps_since_restore": 6368531, "info": {"update_time_ms": 6.919, "load_time_ms": 5.492, "sample_time_ms": 18406.523, "num_steps_trained": 6368531, "default": {"entropy": 1.7707093954086304, "policy_loss": -0.013627531938254833, "vf_loss": 50.12977981567383, "kl": 0.016271354630589485, "vf_explained_var": 0.1990339607000351, "total_loss": 50.12164306640625, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6368531, "grad_time_ms": 9874.547}, "time_total_s": 4616.951750278473, "num_metric_batches_dropped": 0, "timestamp": 1558317839, "episode_reward_max": 888.5075484421621, "timesteps_this_iter": 41979, "pid": 46936, "custom_metrics": {"cost2_mean": -33.22268659100211, "outflow_rate_mean": 903.0094999729195, "system_level_velocity_mean": 16.356566316665393, "cost2_min": -45.64887457978081, "cost1_min": 145.06086489864958, "cost1_mean": 409.2453062385737, "cost1_max": 452.64928711421055, "outflow_rate_max": 997.4258016851593, "system_level_velocity_max": 18.549898521672855, "outflow_rate_min": 798.8476571220081, "cost2_max": -19.969202737868205, "system_level_velocity_min": 12.975354991201074}, "policy_reward_mean": {}, "time_since_restore": 4616.951750278473, "episodes_total": 4916, "iterations_since_restore": 146, "episode_reward_min": 293.57202797843553, "episodes_this_iter": 36, "episode_len_mean": 695.32, "done": false, "training_iteration": 146, "date": "2019-05-20_02-03-59", "node_ip": "10.138.0.2", "timesteps_total": 6368531}
{"hostname": "flow-main", "episode_reward_mean": 780.263916251495, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47e10>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47668>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.380558490753174, "timesteps_since_restore": 6410817, "info": {"update_time_ms": 6.87, "load_time_ms": 5.45, "sample_time_ms": 18400.533, "num_steps_trained": 6410817, "default": {"entropy": 1.7801259756088257, "policy_loss": -0.013834171928465366, "vf_loss": 50.488365173339844, "kl": 0.01622018776834011, "vf_explained_var": 0.16593357920646667, "total_loss": 50.47999954223633, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6410817, "grad_time_ms": 9879.091}, "time_total_s": 4645.332308769226, "num_metric_batches_dropped": 0, "timestamp": 1558317868, "episode_reward_max": 855.4548635952785, "timesteps_this_iter": 42286, "pid": 46936, "custom_metrics": {"cost2_mean": -32.292602890235585, "outflow_rate_mean": 901.0413613298322, "system_level_velocity_mean": 16.522740769269202, "cost2_min": -45.64887457978081, "cost1_min": 29.851723100818923, "cost1_mean": 408.93673435012823, "cost1_max": 453.781188773109, "outflow_rate_max": 1015.7991098118553, "system_level_velocity_max": 18.549898521672855, "outflow_rate_min": 495.2506585232349, "cost2_max": -16.336418616884345, "system_level_velocity_min": 12.681438578269509}, "policy_reward_mean": {}, "time_since_restore": 4645.332308769226, "episodes_total": 4950, "iterations_since_restore": 147, "episode_reward_min": 68.22835206703866, "episodes_this_iter": 34, "episode_len_mean": 688.81, "done": false, "training_iteration": 147, "date": "2019-05-20_02-04-28", "node_ip": "10.138.0.2", "timesteps_total": 6410817}
{"hostname": "flow-main", "episode_reward_mean": 767.5732314981042, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b12b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b16a0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b15c0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.141988515853882, "timesteps_since_restore": 6452882, "info": {"update_time_ms": 6.824, "load_time_ms": 5.358, "sample_time_ms": 18264.54, "num_steps_trained": 6452882, "default": {"entropy": 1.7891650199890137, "policy_loss": -0.014174451120197773, "vf_loss": 49.09215545654297, "kl": 0.016939809545874596, "vf_explained_var": 0.18952763080596924, "total_loss": 49.08369827270508, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6452882, "grad_time_ms": 9808.181}, "time_total_s": 4672.47429728508, "num_metric_batches_dropped": 0, "timestamp": 1558317895, "episode_reward_max": 855.4548635952785, "timesteps_this_iter": 42065, "pid": 46936, "custom_metrics": {"cost2_mean": -33.28127797772213, "outflow_rate_mean": 890.2456186840642, "system_level_velocity_mean": 16.374083954907395, "cost2_min": -47.17170022298179, "cost1_min": 22.863056535283928, "cost1_mean": 400.6087513007914, "cost1_max": 453.781188773109, "outflow_rate_max": 1027.4483910875551, "system_level_velocity_max": 18.482475064595743, "outflow_rate_min": 483.3858788336254, "cost2_max": -16.336418616884345, "system_level_velocity_min": 12.681438578269509}, "policy_reward_mean": {}, "time_since_restore": 4672.47429728508, "episodes_total": 4985, "iterations_since_restore": 148, "episode_reward_min": 51.73713257925375, "episodes_this_iter": 35, "episode_len_mean": 679.74, "done": false, "training_iteration": 148, "date": "2019-05-20_02-04-55", "node_ip": "10.138.0.2", "timesteps_total": 6452882}
{"hostname": "flow-main", "episode_reward_mean": 761.4188409506731, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c65f8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c64a8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.42990207672119, "timesteps_since_restore": 6495264, "info": {"update_time_ms": 6.609, "load_time_ms": 5.356, "sample_time_ms": 18225.941, "num_steps_trained": 6495264, "default": {"entropy": 1.775220274925232, "policy_loss": -0.012404088862240314, "vf_loss": 43.12237548828125, "kl": 0.015681302174925804, "vf_explained_var": 0.19702379405498505, "total_loss": 43.115264892578125, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 6495264, "grad_time_ms": 9855.372}, "time_total_s": 4701.904199361801, "num_metric_batches_dropped": 0, "timestamp": 1558317924, "episode_reward_max": 855.4548635952785, "timesteps_this_iter": 42382, "pid": 46936, "custom_metrics": {"cost2_mean": -33.30665946522227, "outflow_rate_mean": 889.3816819364306, "system_level_velocity_mean": 16.341219801579072, "cost2_min": -47.17170022298179, "cost1_min": 22.863056535283928, "cost1_mean": 398.765977803144, "cost1_max": 453.781188773109, "outflow_rate_max": 1033.231270133803, "system_level_velocity_max": 18.482475064595743, "outflow_rate_min": 483.3858788336254, "cost2_max": -16.336418616884345, "system_level_velocity_min": 12.681438578269509}, "policy_reward_mean": {}, "time_since_restore": 4701.904199361801, "episodes_total": 5018, "iterations_since_restore": 149, "episode_reward_min": 51.73713257925375, "episodes_this_iter": 33, "episode_len_mean": 677.06, "done": false, "training_iteration": 149, "date": "2019-05-20_02-05-24", "node_ip": "10.138.0.2", "timesteps_total": 6495264}
{"hostname": "flow-main", "episode_reward_mean": 757.9887360762278, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47630>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47550>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47eb8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.45677614212036, "timesteps_since_restore": 6537178, "info": {"update_time_ms": 6.72, "load_time_ms": 5.434, "sample_time_ms": 18371.617, "num_steps_trained": 6537178, "default": {"entropy": 1.7889137268066406, "policy_loss": -0.01300831139087677, "vf_loss": 48.44126510620117, "kl": 0.015926754102110863, "vf_explained_var": 0.20645500719547272, "total_loss": 48.43362808227539, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6537178, "grad_time_ms": 9864.769}, "time_total_s": 4730.3609755039215, "num_metric_batches_dropped": 0, "timestamp": 1558317953, "episode_reward_max": 850.1278660798544, "timesteps_this_iter": 41914, "pid": 46936, "custom_metrics": {"cost2_mean": -33.48562843116309, "outflow_rate_mean": 886.330669773856, "system_level_velocity_mean": 16.445360973821515, "cost2_min": -50.27202588391637, "cost1_min": 22.863056535283928, "cost1_mean": 398.01824502036965, "cost1_max": 453.7031882917663, "outflow_rate_max": 1033.231270133803, "system_level_velocity_max": 18.529631318712426, "outflow_rate_min": 483.3858788336254, "cost2_max": -15.504517422997072, "system_level_velocity_min": 13.200833031427852}, "policy_reward_mean": {}, "time_since_restore": 4730.3609755039215, "episodes_total": 5053, "iterations_since_restore": 150, "episode_reward_min": 51.73713257925375, "episodes_this_iter": 35, "episode_len_mean": 672.81, "done": false, "training_iteration": 150, "date": "2019-05-20_02-05-53", "node_ip": "10.138.0.2", "timesteps_total": 6537178}
{"hostname": "flow-main", "episode_reward_mean": 766.3043066101028, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33a58>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.389779090881348, "timesteps_since_restore": 6578788, "info": {"update_time_ms": 6.75, "load_time_ms": 5.478, "sample_time_ms": 18475.958, "num_steps_trained": 6578788, "default": {"entropy": 1.7767850160598755, "policy_loss": -0.01372796855866909, "vf_loss": 47.427669525146484, "kl": 0.01586005836725235, "vf_explained_var": 0.2399023026227951, "total_loss": 47.41929244995117, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6578788, "grad_time_ms": 9855.595}, "time_total_s": 4758.750754594803, "num_metric_batches_dropped": 0, "timestamp": 1558317981, "episode_reward_max": 850.1278660798544, "timesteps_this_iter": 41610, "pid": 46936, "custom_metrics": {"cost2_mean": -33.629245397309546, "outflow_rate_mean": 897.2065696726501, "system_level_velocity_mean": 16.589182511499693, "cost2_min": -50.27202588391637, "cost1_min": 26.20226259460871, "cost1_mean": 404.4218059504339, "cost1_max": 459.6426987631403, "outflow_rate_max": 1035.7873411015498, "system_level_velocity_max": 18.74389533637956, "outflow_rate_min": 518.8686878601767, "cost2_max": -15.504517422997072, "system_level_velocity_min": 13.200833031427852}, "policy_reward_mean": {}, "time_since_restore": 4758.750754594803, "episodes_total": 5087, "iterations_since_restore": 151, "episode_reward_min": 49.5934017232071, "episodes_this_iter": 34, "episode_len_mean": 679.1, "done": false, "training_iteration": 151, "date": "2019-05-20_02-06-21", "node_ip": "10.138.0.2", "timesteps_total": 6578788}
{"hostname": "flow-main", "episode_reward_mean": 770.8008551755121, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6860>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6b00>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6d30>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.18442940711975, "timesteps_since_restore": 6620680, "info": {"update_time_ms": 6.769, "load_time_ms": 5.47, "sample_time_ms": 18446.165, "num_steps_trained": 6620680, "default": {"entropy": 1.794716238975525, "policy_loss": -0.014276579953730106, "vf_loss": 44.892051696777344, "kl": 0.01673082821071148, "vf_explained_var": 0.2203221172094345, "total_loss": 44.8834228515625, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6620680, "grad_time_ms": 9827.006}, "time_total_s": 4786.935184001923, "num_metric_batches_dropped": 0, "timestamp": 1558318009, "episode_reward_max": 891.8041709933748, "timesteps_this_iter": 41892, "pid": 46936, "custom_metrics": {"cost2_mean": -34.473882122098345, "outflow_rate_mean": 898.0152809221305, "system_level_velocity_mean": 16.524698688592416, "cost2_min": -50.27202588391637, "cost1_min": 26.20226259460871, "cost1_mean": 406.4410697450427, "cost1_max": 459.6426987631403, "outflow_rate_max": 1035.7873411015498, "system_level_velocity_max": 18.74389533637956, "outflow_rate_min": 518.8686878601767, "cost2_max": -15.504517422997072, "system_level_velocity_min": 13.90638716612445}, "policy_reward_mean": {}, "time_since_restore": 4786.935184001923, "episodes_total": 5121, "iterations_since_restore": 152, "episode_reward_min": 49.5934017232071, "episodes_this_iter": 34, "episode_len_mean": 685.74, "done": false, "training_iteration": 152, "date": "2019-05-20_02-06-49", "node_ip": "10.138.0.2", "timesteps_total": 6620680}
{"hostname": "flow-main", "episode_reward_mean": 775.2083643882677, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6080>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f98>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.14409852027893, "timesteps_since_restore": 6662987, "info": {"update_time_ms": 6.789, "load_time_ms": 5.496, "sample_time_ms": 18346.913, "num_steps_trained": 6662987, "default": {"entropy": 1.8160330057144165, "policy_loss": -0.01395456399768591, "vf_loss": 45.76785659790039, "kl": 0.016850188374519348, "vf_explained_var": 0.25113600492477417, "total_loss": 45.759586334228516, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6662987, "grad_time_ms": 9832.41}, "time_total_s": 4814.0792825222015, "num_metric_batches_dropped": 0, "timestamp": 1558318037, "episode_reward_max": 891.8041709933748, "timesteps_this_iter": 42307, "pid": 46936, "custom_metrics": {"cost2_mean": -35.22518889835263, "outflow_rate_mean": 899.5072454705952, "system_level_velocity_mean": 16.377555641145474, "cost2_min": -51.06153415532576, "cost1_min": 26.20226259460871, "cost1_mean": 407.7514221848815, "cost1_max": 459.6426987631403, "outflow_rate_max": 1035.7873411015498, "system_level_velocity_max": 18.74389533637956, "outflow_rate_min": 522.3590845245769, "cost2_max": -19.20733949089512, "system_level_velocity_min": 13.90638716612445}, "policy_reward_mean": {}, "time_since_restore": 4814.0792825222015, "episodes_total": 5154, "iterations_since_restore": 153, "episode_reward_min": 49.5934017232071, "episodes_this_iter": 33, "episode_len_mean": 692.26, "done": false, "training_iteration": 153, "date": "2019-05-20_02-07-17", "node_ip": "10.138.0.2", "timesteps_total": 6662987}
{"hostname": "flow-main", "episode_reward_mean": 785.8455854339624, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6e80>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6470>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6160>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.699791431427002, "timesteps_since_restore": 6705284, "info": {"update_time_ms": 6.87, "load_time_ms": 5.423, "sample_time_ms": 18352.582, "num_steps_trained": 6705284, "default": {"entropy": 1.8081939220428467, "policy_loss": -0.015320888720452785, "vf_loss": 45.79762649536133, "kl": 0.01644160784780979, "vf_explained_var": 0.2467421144247055, "total_loss": 45.7878532409668, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6705284, "grad_time_ms": 9851.601}, "time_total_s": 4842.7790739536285, "num_metric_batches_dropped": 0, "timestamp": 1558318065, "episode_reward_max": 891.8041709933748, "timesteps_this_iter": 42297, "pid": 46936, "custom_metrics": {"cost2_mean": -34.7742255139897, "outflow_rate_mean": 900.8621586085853, "system_level_velocity_mean": 16.35765683668374, "cost2_min": -51.06153415532576, "cost1_min": 354.37639007405176, "cost1_mean": 412.51048527520993, "cost1_max": 461.1123043644332, "outflow_rate_max": 1011.0914967289916, "system_level_velocity_max": 18.71838762630768, "outflow_rate_min": 786.3286922466572, "cost2_max": -23.63272656474624, "system_level_velocity_min": 13.909282914478133}, "policy_reward_mean": {}, "time_since_restore": 4842.7790739536285, "episodes_total": 5186, "iterations_since_restore": 154, "episode_reward_min": 696.3263680072841, "episodes_this_iter": 32, "episode_len_mean": 699.72, "done": false, "training_iteration": 154, "date": "2019-05-20_02-07-45", "node_ip": "10.138.0.2", "timesteps_total": 6705284}
{"hostname": "flow-main", "episode_reward_mean": 774.9228155212888, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c64e0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6d68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6780>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.099990606307983, "timesteps_since_restore": 6746908, "info": {"update_time_ms": 6.848, "load_time_ms": 5.409, "sample_time_ms": 18296.595, "num_steps_trained": 6746908, "default": {"entropy": 1.829203486442566, "policy_loss": -0.01620909571647644, "vf_loss": 49.345001220703125, "kl": 0.016360286623239517, "vf_explained_var": 0.23723168671131134, "total_loss": 49.334312438964844, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6746908, "grad_time_ms": 9835.319}, "time_total_s": 4870.8790645599365, "num_metric_batches_dropped": 0, "timestamp": 1558318093, "episode_reward_max": 864.9364649679151, "timesteps_this_iter": 41624, "pid": 46936, "custom_metrics": {"cost2_mean": -34.34192484119058, "outflow_rate_mean": 895.1303306981774, "system_level_velocity_mean": 16.394003200589985, "cost2_min": -51.06153415532576, "cost1_min": 12.229090929653285, "cost1_mean": 406.99548477860657, "cost1_max": 461.1123043644332, "outflow_rate_max": 1011.0914967289916, "system_level_velocity_max": 18.71838762630768, "outflow_rate_min": 467.63246017283916, "cost2_max": -11.464427140963847, "system_level_velocity_min": 14.087224246426953}, "policy_reward_mean": {}, "time_since_restore": 4870.8790645599365, "episodes_total": 5221, "iterations_since_restore": 155, "episode_reward_min": 31.46484866695531, "episodes_this_iter": 35, "episode_len_mean": 688.71, "done": false, "training_iteration": 155, "date": "2019-05-20_02-08-13", "node_ip": "10.138.0.2", "timesteps_total": 6746908}
{"hostname": "flow-main", "episode_reward_mean": 776.2281593774139, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6198>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.803650856018066, "timesteps_since_restore": 6788083, "info": {"update_time_ms": 6.871, "load_time_ms": 5.495, "sample_time_ms": 18242.911, "num_steps_trained": 6788083, "default": {"entropy": 1.8320996761322021, "policy_loss": -0.015237638726830482, "vf_loss": 48.69003677368164, "kl": 0.01672879047691822, "vf_explained_var": 0.25083139538764954, "total_loss": 48.680442810058594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 6788083, "grad_time_ms": 9849.003}, "time_total_s": 4898.682715415955, "num_metric_batches_dropped": 0, "timestamp": 1558318121, "episode_reward_max": 864.9364649679151, "timesteps_this_iter": 41175, "pid": 46936, "custom_metrics": {"cost2_mean": -33.55029793753107, "outflow_rate_mean": 893.7603918783575, "system_level_velocity_mean": 16.56544776649055, "cost2_min": -49.69269852297343, "cost1_min": 12.229090929653285, "cost1_mean": 410.8290008118284, "cost1_max": 461.1123043644332, "outflow_rate_max": 995.7979318925793, "system_level_velocity_max": 18.71838762630768, "outflow_rate_min": 467.63246017283916, "cost2_max": -11.464427140963847, "system_level_velocity_min": 14.087224246426953}, "policy_reward_mean": {}, "time_since_restore": 4898.682715415955, "episodes_total": 5255, "iterations_since_restore": 156, "episode_reward_min": 31.46484866695531, "episodes_this_iter": 34, "episode_len_mean": 688.71, "done": false, "training_iteration": 156, "date": "2019-05-20_02-08-41", "node_ip": "10.138.0.2", "timesteps_total": 6788083}
{"hostname": "flow-main", "episode_reward_mean": 762.6372375524418, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33be0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.63667631149292, "timesteps_since_restore": 6829168, "info": {"update_time_ms": 6.911, "load_time_ms": 5.46, "sample_time_ms": 18084.781, "num_steps_trained": 6829168, "default": {"entropy": 1.8393771648406982, "policy_loss": -0.012599754147231579, "vf_loss": 51.872802734375, "kl": 0.016459429636597633, "vf_explained_var": 0.17808137834072113, "total_loss": 51.865760803222656, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6829168, "grad_time_ms": 9833.114}, "time_total_s": 4925.3193917274475, "num_metric_batches_dropped": 0, "timestamp": 1558318148, "episode_reward_max": 840.0044769185846, "timesteps_this_iter": 41085, "pid": 46936, "custom_metrics": {"cost2_mean": -34.35967600715903, "outflow_rate_mean": 883.700394669698, "system_level_velocity_mean": 16.49482760759633, "cost2_min": -49.69269852297343, "cost1_min": 12.229090929653285, "cost1_mean": 405.68843761798047, "cost1_max": 460.2470335329763, "outflow_rate_max": 998.1830133675833, "system_level_velocity_max": 18.575911324222105, "outflow_rate_min": 467.63246017283916, "cost2_max": -11.464427140963847, "system_level_velocity_min": 12.284058587916668}, "policy_reward_mean": {}, "time_since_restore": 4925.3193917274475, "episodes_total": 5289, "iterations_since_restore": 157, "episode_reward_min": 31.46484866695531, "episodes_this_iter": 34, "episode_len_mean": 683.74, "done": false, "training_iteration": 157, "date": "2019-05-20_02-09-08", "node_ip": "10.138.0.2", "timesteps_total": 6829168}
{"hostname": "flow-main", "episode_reward_mean": 767.2913872959346, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f60>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.04399609565735, "timesteps_since_restore": 6871339, "info": {"update_time_ms": 6.961, "load_time_ms": 5.348, "sample_time_ms": 18173.931, "num_steps_trained": 6871339, "default": {"entropy": 1.8397947549819946, "policy_loss": -0.012942496687173843, "vf_loss": 50.1636962890625, "kl": 0.014923176728188992, "vf_explained_var": 0.21550075709819794, "total_loss": 50.15578842163086, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6871339, "grad_time_ms": 9833.748}, "time_total_s": 4953.363387823105, "num_metric_batches_dropped": 0, "timestamp": 1558318176, "episode_reward_max": 855.6306251299939, "timesteps_this_iter": 42171, "pid": 46936, "custom_metrics": {"cost2_mean": -34.3646057748884, "outflow_rate_mean": 886.047108409792, "system_level_velocity_mean": 16.625945889222294, "cost2_min": -52.10586023654727, "cost1_min": 21.91914507812724, "cost1_mean": 412.8856018697416, "cost1_max": 462.13144434844764, "outflow_rate_max": 998.1830133675833, "system_level_velocity_max": 18.575911324222105, "outflow_rate_min": 505.39415711364484, "cost2_max": -15.983802749465417, "system_level_velocity_min": 12.284058587916668}, "policy_reward_mean": {}, "time_since_restore": 4953.363387823105, "episodes_total": 5325, "iterations_since_restore": 158, "episode_reward_min": 50.8457408661621, "episodes_this_iter": 36, "episode_len_mean": 689.83, "done": false, "training_iteration": 158, "date": "2019-05-20_02-09-36", "node_ip": "10.138.0.2", "timesteps_total": 6871339}
{"hostname": "flow-main", "episode_reward_mean": 764.5272415817428, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6cc0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6a58>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.77606463432312, "timesteps_since_restore": 6913202, "info": {"update_time_ms": 7.182, "load_time_ms": 5.352, "sample_time_ms": 18113.091, "num_steps_trained": 6913202, "default": {"entropy": 1.8439885377883911, "policy_loss": -0.013092471286654472, "vf_loss": 45.2693977355957, "kl": 0.016294488683342934, "vf_explained_var": 0.1897611767053604, "total_loss": 45.261802673339844, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6913202, "grad_time_ms": 9729.145}, "time_total_s": 4981.139452457428, "num_metric_batches_dropped": 0, "timestamp": 1558318204, "episode_reward_max": 855.6306251299939, "timesteps_this_iter": 41863, "pid": 46936, "custom_metrics": {"cost2_mean": -34.506732345795356, "outflow_rate_mean": 884.1829529659223, "system_level_velocity_mean": 16.666016427026026, "cost2_min": -52.10586023654727, "cost1_min": 21.91914507812724, "cost1_mean": 413.174273586826, "cost1_max": 462.13144434844764, "outflow_rate_max": 998.1830133675833, "system_level_velocity_max": 18.77589861373277, "outflow_rate_min": 505.39415711364484, "cost2_max": -15.983802749465417, "system_level_velocity_min": 12.284058587916668}, "policy_reward_mean": {}, "time_since_restore": 4981.139452457428, "episodes_total": 5360, "iterations_since_restore": 159, "episode_reward_min": 50.8457408661621, "episodes_this_iter": 35, "episode_len_mean": 689.82, "done": false, "training_iteration": 159, "date": "2019-05-20_02-10-04", "node_ip": "10.138.0.2", "timesteps_total": 6913202}
{"hostname": "flow-main", "episode_reward_mean": 772.898020868609, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c18d0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c17b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1898>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.09692072868347, "timesteps_since_restore": 6954333, "info": {"update_time_ms": 7.125, "load_time_ms": 5.197, "sample_time_ms": 18041.602, "num_steps_trained": 6954333, "default": {"entropy": 1.8439515829086304, "policy_loss": -0.012896426022052765, "vf_loss": 44.65605163574219, "kl": 0.015123369172215462, "vf_explained_var": 0.19790147244930267, "total_loss": 44.64826202392578, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 6954333, "grad_time_ms": 9764.934}, "time_total_s": 5009.236373186111, "num_metric_batches_dropped": 0, "timestamp": 1558318232, "episode_reward_max": 855.6306251299939, "timesteps_this_iter": 41131, "pid": 46936, "custom_metrics": {"cost2_mean": -34.37583080265612, "outflow_rate_mean": 885.0166333126198, "system_level_velocity_mean": 16.700975625433603, "cost2_min": -52.10586023654727, "cost1_min": 305.3598067266286, "cost1_mean": 419.40433064351816, "cost1_max": 467.59565551852154, "outflow_rate_max": 976.6644661592641, "system_level_velocity_max": 19.039196996182923, "outflow_rate_min": 757.145166480836, "cost2_max": -21.18455038085272, "system_level_velocity_min": 11.782880652763373}, "policy_reward_mean": {}, "time_since_restore": 5009.236373186111, "episodes_total": 5392, "iterations_since_restore": 160, "episode_reward_min": 684.5367568436584, "episodes_this_iter": 32, "episode_len_mean": 699.33, "done": false, "training_iteration": 160, "date": "2019-05-20_02-10-32", "node_ip": "10.138.0.2", "timesteps_total": 6954333}
{"hostname": "flow-main", "episode_reward_mean": 769.2322412299867, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33cf8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33ef0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 29.055260181427002, "timesteps_since_restore": 6996368, "info": {"update_time_ms": 7.236, "load_time_ms": 5.127, "sample_time_ms": 18125.842, "num_steps_trained": 6996368, "default": {"entropy": 1.8696467876434326, "policy_loss": -0.012659681960940361, "vf_loss": 53.572540283203125, "kl": 0.015787092968821526, "vf_explained_var": 0.14839884638786316, "total_loss": 53.565208435058594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 6996368, "grad_time_ms": 9746.187}, "time_total_s": 5038.291633367538, "num_metric_batches_dropped": 0, "timestamp": 1558318261, "episode_reward_max": 838.0878748448298, "timesteps_this_iter": 42035, "pid": 46936, "custom_metrics": {"cost2_mean": -34.54742990699281, "outflow_rate_mean": 883.0456136579285, "system_level_velocity_mean": 16.633894293784678, "cost2_min": -49.21848346555839, "cost1_min": 248.0265688431216, "cost1_mean": 416.54893965446877, "cost1_max": 467.59565551852154, "outflow_rate_max": 1009.0587131813555, "system_level_velocity_max": 19.039196996182923, "outflow_rate_min": 754.3737028280839, "cost2_max": -21.18455038085272, "system_level_velocity_min": 11.782880652763373}, "policy_reward_mean": {}, "time_since_restore": 5038.291633367538, "episodes_total": 5428, "iterations_since_restore": 161, "episode_reward_min": 439.30277254967393, "episodes_this_iter": 36, "episode_len_mean": 697.2, "done": false, "training_iteration": 161, "date": "2019-05-20_02-11-01", "node_ip": "10.138.0.2", "timesteps_total": 6996368}
{"hostname": "flow-main", "episode_reward_mean": 766.1525854822023, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a99e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.84233045578003, "timesteps_since_restore": 7038053, "info": {"update_time_ms": 7.143, "load_time_ms": 5.203, "sample_time_ms": 18077.061, "num_steps_trained": 7038053, "default": {"entropy": 1.8750942945480347, "policy_loss": -0.01255104225128889, "vf_loss": 48.04558181762695, "kl": 0.015402202494442463, "vf_explained_var": 0.17358583211898804, "total_loss": 48.038230895996094, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7038053, "grad_time_ms": 9760.079}, "time_total_s": 5066.1339638233185, "num_metric_batches_dropped": 0, "timestamp": 1558318289, "episode_reward_max": 856.5752066126058, "timesteps_this_iter": 41685, "pid": 46936, "custom_metrics": {"cost2_mean": -34.67746934666136, "outflow_rate_mean": 879.6264363887119, "system_level_velocity_mean": 16.612848446599333, "cost2_min": -49.21848346555839, "cost1_min": 241.14275314370212, "cost1_mean": 414.8404588374701, "cost1_max": 467.59565551852154, "outflow_rate_max": 1009.0587131813555, "system_level_velocity_max": 19.039196996182923, "outflow_rate_min": 754.3737028280839, "cost2_max": -24.651328318072377, "system_level_velocity_min": 11.782880652763373}, "policy_reward_mean": {}, "time_since_restore": 5066.1339638233185, "episodes_total": 5462, "iterations_since_restore": 162, "episode_reward_min": 425.74156493111667, "episodes_this_iter": 34, "episode_len_mean": 694.35, "done": false, "training_iteration": 162, "date": "2019-05-20_02-11-29", "node_ip": "10.138.0.2", "timesteps_total": 7038053}
{"hostname": "flow-main", "episode_reward_mean": 764.8652408613187, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9be0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a93c8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9b38>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.76114559173584, "timesteps_since_restore": 7079544, "info": {"update_time_ms": 7.115, "load_time_ms": 5.212, "sample_time_ms": 18167.066, "num_steps_trained": 7079544, "default": {"entropy": 1.8727079629898071, "policy_loss": -0.01419635210186243, "vf_loss": 48.364017486572266, "kl": 0.016316428780555725, "vf_explained_var": 0.15864229202270508, "total_loss": 48.35532760620117, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7079544, "grad_time_ms": 9731.767}, "time_total_s": 5093.895109415054, "num_metric_batches_dropped": 0, "timestamp": 1558318317, "episode_reward_max": 856.5752066126058, "timesteps_this_iter": 41491, "pid": 46936, "custom_metrics": {"cost2_mean": -34.955756777919625, "outflow_rate_mean": 879.0319761325887, "system_level_velocity_mean": 16.739366957123536, "cost2_min": -49.21848346555839, "cost1_min": 241.14275314370212, "cost1_mean": 418.0022640744414, "cost1_max": 462.10222947469555, "outflow_rate_max": 990.4646469750772, "system_level_velocity_max": 18.811015312350563, "outflow_rate_min": 754.3737028280839, "cost2_max": -24.651328318072377, "system_level_velocity_min": 12.862360610698646}, "policy_reward_mean": {}, "time_since_restore": 5093.895109415054, "episodes_total": 5495, "iterations_since_restore": 163, "episode_reward_min": 425.74156493111667, "episodes_this_iter": 33, "episode_len_mean": 694.35, "done": false, "training_iteration": 163, "date": "2019-05-20_02-11-57", "node_ip": "10.138.0.2", "timesteps_total": 7079544}
{"hostname": "flow-main", "episode_reward_mean": 767.787439298012, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1828>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.570835828781128, "timesteps_since_restore": 7120865, "info": {"update_time_ms": 7.16, "load_time_ms": 5.304, "sample_time_ms": 17967.555, "num_steps_trained": 7120865, "default": {"entropy": 1.87033212184906, "policy_loss": -0.012708817608654499, "vf_loss": 49.076148986816406, "kl": 0.014876087196171284, "vf_explained_var": 0.1879977136850357, "total_loss": 49.068458557128906, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 7120865, "grad_time_ms": 9718.26}, "time_total_s": 5120.465945243835, "num_metric_batches_dropped": 0, "timestamp": 1558318343, "episode_reward_max": 856.5752066126058, "timesteps_this_iter": 41321, "pid": 46936, "custom_metrics": {"cost2_mean": -34.74929056320399, "outflow_rate_mean": 876.0186996227844, "system_level_velocity_mean": 16.937053622499583, "cost2_min": -46.91161944927747, "cost1_min": 241.14275314370212, "cost1_mean": 423.60913807744623, "cost1_max": 463.03001237110163, "outflow_rate_max": 990.4646469750772, "system_level_velocity_max": 18.811015312350563, "outflow_rate_min": 763.117223129578, "cost2_max": -24.067393610833918, "system_level_velocity_min": 14.229446222693015}, "policy_reward_mean": {}, "time_since_restore": 5120.465945243835, "episodes_total": 5529, "iterations_since_restore": 164, "episode_reward_min": 425.74156493111667, "episodes_this_iter": 34, "episode_len_mean": 697.14, "done": false, "training_iteration": 164, "date": "2019-05-20_02-12-23", "node_ip": "10.138.0.2", "timesteps_total": 7120865}
{"hostname": "flow-main", "episode_reward_mean": 767.8124851778143, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9908>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a99e8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.610918760299683, "timesteps_since_restore": 7162735, "info": {"update_time_ms": 7.146, "load_time_ms": 5.39, "sample_time_ms": 17912.484, "num_steps_trained": 7162735, "default": {"entropy": 1.8723185062408447, "policy_loss": -0.013028155080974102, "vf_loss": 46.85516357421875, "kl": 0.015052751637995243, "vf_explained_var": 0.19696424901485443, "total_loss": 46.84722137451172, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7162735, "grad_time_ms": 9724.241}, "time_total_s": 5148.076864004135, "num_metric_batches_dropped": 0, "timestamp": 1558318371, "episode_reward_max": 835.7119881313903, "timesteps_this_iter": 41870, "pid": 46936, "custom_metrics": {"cost2_mean": -35.43635718727462, "outflow_rate_mean": 874.1404599431407, "system_level_velocity_mean": 16.933660230112036, "cost2_min": -46.7526741745924, "cost1_min": 330.9099914036974, "cost1_mean": 423.5290482809502, "cost1_max": 465.76435748790414, "outflow_rate_max": 969.1344933670445, "system_level_velocity_max": 18.933669002251154, "outflow_rate_min": 773.9904439345868, "cost2_max": -24.067393610833918, "system_level_velocity_min": 14.148250261395848}, "policy_reward_mean": {}, "time_since_restore": 5148.076864004135, "episodes_total": 5563, "iterations_since_restore": 165, "episode_reward_min": 604.8602689609189, "episodes_this_iter": 34, "episode_len_mean": 698.19, "done": false, "training_iteration": 165, "date": "2019-05-20_02-12-51", "node_ip": "10.138.0.2", "timesteps_total": 7162735}
{"hostname": "flow-main", "episode_reward_mean": 755.0805948521036, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1b70>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c17b8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1470>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.52314853668213, "timesteps_since_restore": 7204597, "info": {"update_time_ms": 7.154, "load_time_ms": 5.257, "sample_time_ms": 17950.282, "num_steps_trained": 7204597, "default": {"entropy": 1.8676915168762207, "policy_loss": -0.013388718478381634, "vf_loss": 53.348636627197266, "kl": 0.0151111651211977, "vf_explained_var": 0.17593440413475037, "total_loss": 53.34035110473633, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7204597, "grad_time_ms": 9758.536}, "time_total_s": 5176.600012540817, "num_metric_batches_dropped": 0, "timestamp": 1558318400, "episode_reward_max": 828.2338994729522, "timesteps_this_iter": 41862, "pid": 46936, "custom_metrics": {"cost2_mean": -35.636502132155016, "outflow_rate_mean": 866.4289487587662, "system_level_velocity_mean": 16.912631425621736, "cost2_min": -48.24030451505182, "cost1_min": 23.163955956332064, "cost1_mean": 414.2065699722011, "cost1_max": 465.83266741666336, "outflow_rate_max": 969.1344933670445, "system_level_velocity_max": 19.13352142124108, "outflow_rate_min": 502.1133248918595, "cost2_max": -17.21630690609265, "system_level_velocity_min": 14.148250261395848}, "policy_reward_mean": {}, "time_since_restore": 5176.600012540817, "episodes_total": 5598, "iterations_since_restore": 166, "episode_reward_min": 50.61792384926748, "episodes_this_iter": 35, "episode_len_mean": 684.07, "done": false, "training_iteration": 166, "date": "2019-05-20_02-13-20", "node_ip": "10.138.0.2", "timesteps_total": 7204597}
{"hostname": "flow-main", "episode_reward_mean": 753.004128030521, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02898588>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f60>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c65f8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.920087337493896, "timesteps_since_restore": 7246088, "info": {"update_time_ms": 7.159, "load_time_ms": 5.371, "sample_time_ms": 18070.883, "num_steps_trained": 7246088, "default": {"entropy": 1.8904632329940796, "policy_loss": -0.013643079437315464, "vf_loss": 52.189369201660156, "kl": 0.016038373112678528, "vf_explained_var": 0.16456547379493713, "total_loss": 52.18114471435547, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7246088, "grad_time_ms": 9765.484}, "time_total_s": 5204.520099878311, "num_metric_batches_dropped": 0, "timestamp": 1558318428, "episode_reward_max": 828.2338994729522, "timesteps_this_iter": 41491, "pid": 46936, "custom_metrics": {"cost2_mean": -35.92244325019737, "outflow_rate_mean": 869.6944417385546, "system_level_velocity_mean": 16.761984683769565, "cost2_min": -49.835532526611786, "cost1_min": 23.163955956332064, "cost1_mean": 411.8954812648268, "cost1_max": 465.83266741666336, "outflow_rate_max": 963.8386991865065, "system_level_velocity_max": 19.13352142124108, "outflow_rate_min": 502.1133248918595, "cost2_max": -17.21630690609265, "system_level_velocity_min": 14.325874963091882}, "policy_reward_mean": {}, "time_since_restore": 5204.520099878311, "episodes_total": 5636, "iterations_since_restore": 167, "episode_reward_min": 50.61792384926748, "episodes_this_iter": 38, "episode_len_mean": 684.64, "done": false, "training_iteration": 167, "date": "2019-05-20_02-13-48", "node_ip": "10.138.0.2", "timesteps_total": 7246088}
{"hostname": "flow-main", "episode_reward_mean": 749.4103794817403, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a92b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9c50>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9438>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.742592573165894, "timesteps_since_restore": 7287703, "info": {"update_time_ms": 7.137, "load_time_ms": 5.438, "sample_time_ms": 18064.525, "num_steps_trained": 7287703, "default": {"entropy": 1.8920568227767944, "policy_loss": -0.010932281613349915, "vf_loss": 45.19841384887695, "kl": 0.014959699474275112, "vf_explained_var": 0.1808926910161972, "total_loss": 45.192535400390625, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7287703, "grad_time_ms": 9740.247}, "time_total_s": 5232.262692451477, "num_metric_batches_dropped": 0, "timestamp": 1558318455, "episode_reward_max": 828.2338994729522, "timesteps_this_iter": 41615, "pid": 46936, "custom_metrics": {"cost2_mean": -35.59635042301054, "outflow_rate_mean": 869.8140496661858, "system_level_velocity_mean": 16.77543464412582, "cost2_min": -49.835532526611786, "cost1_min": 23.163955956332064, "cost1_mean": 410.8996769241079, "cost1_max": 465.83266741666336, "outflow_rate_max": 972.2471859895627, "system_level_velocity_max": 18.890621782165603, "outflow_rate_min": 502.1133248918595, "cost2_max": -17.21630690609265, "system_level_velocity_min": 13.876392957322158}, "policy_reward_mean": {}, "time_since_restore": 5232.262692451477, "episodes_total": 5669, "iterations_since_restore": 168, "episode_reward_min": 50.61792384926748, "episodes_this_iter": 33, "episode_len_mean": 681.77, "done": false, "training_iteration": 168, "date": "2019-05-20_02-14-15", "node_ip": "10.138.0.2", "timesteps_total": 7287703}
{"hostname": "flow-main", "episode_reward_mean": 763.1309112788673, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1ef0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1400>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.329342365264893, "timesteps_since_restore": 7329938, "info": {"update_time_ms": 7.161, "load_time_ms": 5.449, "sample_time_ms": 18100.715, "num_steps_trained": 7329938, "default": {"entropy": 1.9010059833526611, "policy_loss": -0.01309621799737215, "vf_loss": 49.35698318481445, "kl": 0.016329370439052582, "vf_explained_var": 0.1974220871925354, "total_loss": 49.34939956665039, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7329938, "grad_time_ms": 9759.448}, "time_total_s": 5260.592034816742, "num_metric_batches_dropped": 0, "timestamp": 1558318484, "episode_reward_max": 827.7594301506307, "timesteps_this_iter": 42235, "pid": 46936, "custom_metrics": {"cost2_mean": -35.22003057088411, "outflow_rate_mean": 870.7789524146442, "system_level_velocity_mean": 16.70077363549982, "cost2_min": -49.835532526611786, "cost1_min": 165.99228014508515, "cost1_mean": 418.1351418349122, "cost1_max": 464.1139004599463, "outflow_rate_max": 972.2471859895627, "system_level_velocity_max": 18.680465639493498, "outflow_rate_min": 707.330880409193, "cost2_max": -23.101771956089785, "system_level_velocity_min": 13.876392957322158}, "policy_reward_mean": {}, "time_since_restore": 5260.592034816742, "episodes_total": 5704, "iterations_since_restore": 169, "episode_reward_min": 300.97054777896403, "episodes_this_iter": 35, "episode_len_mean": 695.89, "done": false, "training_iteration": 169, "date": "2019-05-20_02-14-44", "node_ip": "10.138.0.2", "timesteps_total": 7329938}
{"hostname": "flow-main", "episode_reward_mean": 753.3907115527172, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9358>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9908>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.08729600906372, "timesteps_since_restore": 7371006, "info": {"update_time_ms": 7.178, "load_time_ms": 5.523, "sample_time_ms": 18055.921, "num_steps_trained": 7371006, "default": {"entropy": 1.9090611934661865, "policy_loss": -0.014296975918114185, "vf_loss": 46.77421951293945, "kl": 0.015600526705384254, "vf_explained_var": 0.20365166664123535, "total_loss": 46.76519012451172, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7371006, "grad_time_ms": 9702.602}, "time_total_s": 5287.679330825806, "num_metric_batches_dropped": 0, "timestamp": 1558318511, "episode_reward_max": 841.0468186940022, "timesteps_this_iter": 41068, "pid": 46936, "custom_metrics": {"cost2_mean": -35.63166108816009, "outflow_rate_mean": 864.6029308056209, "system_level_velocity_mean": 16.577078040910187, "cost2_min": -47.36741764229827, "cost1_min": 117.65822629729257, "cost1_mean": 409.77605360432943, "cost1_max": 459.97249403062875, "outflow_rate_max": 972.2471859895627, "system_level_velocity_max": 18.636266679814028, "outflow_rate_min": 705.594211781098, "cost2_max": -23.128543668298423, "system_level_velocity_min": 13.577034722327548}, "policy_reward_mean": {}, "time_since_restore": 5287.679330825806, "episodes_total": 5739, "iterations_since_restore": 170, "episode_reward_min": 214.5332828951771, "episodes_this_iter": 35, "episode_len_mean": 686.7, "done": false, "training_iteration": 170, "date": "2019-05-20_02-15-11", "node_ip": "10.138.0.2", "timesteps_total": 7371006}
{"hostname": "flow-main", "episode_reward_mean": 743.0797444335527, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47f28>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d47da0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.058798789978027, "timesteps_since_restore": 7411461, "info": {"update_time_ms": 7.046, "load_time_ms": 5.418, "sample_time_ms": 17934.667, "num_steps_trained": 7411461, "default": {"entropy": 1.9274269342422485, "policy_loss": -0.014097530394792557, "vf_loss": 48.291221618652344, "kl": 0.018877703696489334, "vf_explained_var": 0.2336132973432541, "total_loss": 48.28349304199219, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7411461, "grad_time_ms": 9725.297}, "time_total_s": 5315.738129615784, "num_metric_batches_dropped": 0, "timestamp": 1558318539, "episode_reward_max": 859.8766698731594, "timesteps_this_iter": 40455, "pid": 46936, "custom_metrics": {"cost2_mean": -34.41973213762241, "outflow_rate_mean": 860.4089883595364, "system_level_velocity_mean": 16.648466783403265, "cost2_min": -45.94724477330832, "cost1_min": 25.331966690329942, "cost1_mean": 403.9657125363755, "cost1_max": 461.83768310323205, "outflow_rate_max": 977.2740969191324, "system_level_velocity_max": 18.679623733120508, "outflow_rate_min": 517.8321139646935, "cost2_max": -16.189164737361562, "system_level_velocity_min": 13.239714252804877}, "policy_reward_mean": {}, "time_since_restore": 5315.738129615784, "episodes_total": 5775, "iterations_since_restore": 171, "episode_reward_min": 59.147818936857995, "episodes_this_iter": 36, "episode_len_mean": 674.72, "done": false, "training_iteration": 171, "date": "2019-05-20_02-15-39", "node_ip": "10.138.0.2", "timesteps_total": 7411461}
{"hostname": "flow-main", "episode_reward_mean": 740.3514102825642, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9e10>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9438>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.54047179222107, "timesteps_since_restore": 7453093, "info": {"update_time_ms": 7.174, "load_time_ms": 5.33, "sample_time_ms": 18021.364, "num_steps_trained": 7453093, "default": {"entropy": 1.914724349975586, "policy_loss": -0.013949587941169739, "vf_loss": 49.9457893371582, "kl": 0.017602378502488136, "vf_explained_var": 0.2481650412082672, "total_loss": 49.93777847290039, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7453093, "grad_time_ms": 9708.783}, "time_total_s": 5344.278601408005, "num_metric_batches_dropped": 0, "timestamp": 1558318568, "episode_reward_max": 859.8766698731594, "timesteps_this_iter": 41632, "pid": 46936, "custom_metrics": {"cost2_mean": -34.54064771946175, "outflow_rate_mean": 863.436241850181, "system_level_velocity_mean": 16.773602147493882, "cost2_min": -47.281755528199575, "cost1_min": 25.331966690329942, "cost1_mean": 404.31420998408976, "cost1_max": 461.83768310323205, "outflow_rate_max": 977.2740969191324, "system_level_velocity_max": 18.679623733120508, "outflow_rate_min": 517.8321139646935, "cost2_max": -16.189164737361562, "system_level_velocity_min": 13.239714252804877}, "policy_reward_mean": {}, "time_since_restore": 5344.278601408005, "episodes_total": 5809, "iterations_since_restore": 172, "episode_reward_min": 59.147818936857995, "episodes_this_iter": 34, "episode_len_mean": 670.75, "done": false, "training_iteration": 172, "date": "2019-05-20_02-16-08", "node_ip": "10.138.0.2", "timesteps_total": 7453093}
{"hostname": "flow-main", "episode_reward_mean": 746.9109920369981, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6390>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c65f8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6048>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.06952714920044, "timesteps_since_restore": 7494758, "info": {"update_time_ms": 7.231, "load_time_ms": 5.226, "sample_time_ms": 18039.996, "num_steps_trained": 7494758, "default": {"entropy": 1.9280577898025513, "policy_loss": -0.014330137521028519, "vf_loss": 39.450721740722656, "kl": 0.018257740885019302, "vf_explained_var": 0.31372618675231934, "total_loss": 39.44255447387695, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7494758, "grad_time_ms": 9720.433}, "time_total_s": 5372.348128557205, "num_metric_batches_dropped": 0, "timestamp": 1558318596, "episode_reward_max": 859.8766698731594, "timesteps_this_iter": 41665, "pid": 46936, "custom_metrics": {"cost2_mean": -34.51375663011236, "outflow_rate_mean": 867.3057064804449, "system_level_velocity_mean": 16.81977115915983, "cost2_min": -51.13298963064674, "cost1_min": 25.331966690329942, "cost1_mean": 410.50346357793336, "cost1_max": 461.83768310323205, "outflow_rate_max": 977.2740969191324, "system_level_velocity_max": 18.679623733120508, "outflow_rate_min": 517.8321139646935, "cost2_max": -16.189164737361562, "system_level_velocity_min": 13.239714252804877}, "policy_reward_mean": {}, "time_since_restore": 5372.348128557205, "episodes_total": 5842, "iterations_since_restore": 173, "episode_reward_min": 59.147818936857995, "episodes_this_iter": 33, "episode_len_mean": 679.94, "done": false, "training_iteration": 173, "date": "2019-05-20_02-16-36", "node_ip": "10.138.0.2", "timesteps_total": 7494758}
{"hostname": "flow-main", "episode_reward_mean": 760.6184702284168, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33da0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d475c0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33d68>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.602943420410156, "timesteps_since_restore": 7536737, "info": {"update_time_ms": 7.122, "load_time_ms": 5.262, "sample_time_ms": 18130.226, "num_steps_trained": 7536737, "default": {"entropy": 1.9428532123565674, "policy_loss": -0.013961908407509327, "vf_loss": 50.15693664550781, "kl": 0.018264487385749817, "vf_explained_var": 0.2209874391555786, "total_loss": 50.14914321899414, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7536737, "grad_time_ms": 9733.463}, "time_total_s": 5399.951071977615, "num_metric_batches_dropped": 0, "timestamp": 1558318623, "episode_reward_max": 827.6774929422518, "timesteps_this_iter": 41979, "pid": 46936, "custom_metrics": {"cost2_mean": -35.08240103439635, "outflow_rate_mean": 870.6935571748609, "system_level_velocity_mean": 16.780609575768185, "cost2_min": -51.13298963064674, "cost1_min": 181.87840031137478, "cost1_mean": 419.1790389009147, "cost1_max": 460.26237274579347, "outflow_rate_max": 972.3164511329243, "system_level_velocity_max": 18.673244569321906, "outflow_rate_min": 762.2326387935507, "cost2_max": -24.96215219555191, "system_level_velocity_min": 13.692778707250016}, "policy_reward_mean": {}, "time_since_restore": 5399.951071977615, "episodes_total": 5876, "iterations_since_restore": 174, "episode_reward_min": 334.8134016799871, "episodes_this_iter": 34, "episode_len_mean": 695.6, "done": false, "training_iteration": 174, "date": "2019-05-20_02-17-03", "node_ip": "10.138.0.2", "timesteps_total": 7536737}
{"hostname": "flow-main", "episode_reward_mean": 762.553398890892, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1b38>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1ba8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1860>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.583728075027466, "timesteps_since_restore": 7578591, "info": {"update_time_ms": 7.127, "load_time_ms": 5.161, "sample_time_ms": 18132.171, "num_steps_trained": 7578591, "default": {"entropy": 1.912937045097351, "policy_loss": -0.013381347060203552, "vf_loss": 57.79681396484375, "kl": 0.017162486910820007, "vf_explained_var": 0.18835429847240448, "total_loss": 57.78923034667969, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7578591, "grad_time_ms": 9728.756}, "time_total_s": 5427.534800052643, "num_metric_batches_dropped": 0, "timestamp": 1558318651, "episode_reward_max": 858.7699491509693, "timesteps_this_iter": 41854, "pid": 46936, "custom_metrics": {"cost2_mean": -35.16647399717841, "outflow_rate_mean": 867.5425543070502, "system_level_velocity_mean": 16.725865819770632, "cost2_min": -51.13298963064674, "cost1_min": 126.74146166503891, "cost1_mean": 417.22588204760507, "cost1_max": 463.9125523314001, "outflow_rate_max": 972.3164511329243, "system_level_velocity_max": 18.717846164624902, "outflow_rate_min": 734.6965129554098, "cost2_max": -24.975996127572984, "system_level_velocity_min": 13.692778707250016}, "policy_reward_mean": {}, "time_since_restore": 5427.534800052643, "episodes_total": 5913, "iterations_since_restore": 175, "episode_reward_min": 226.58016823861738, "episodes_this_iter": 37, "episode_len_mean": 694.17, "done": false, "training_iteration": 175, "date": "2019-05-20_02-17-31", "node_ip": "10.138.0.2", "timesteps_total": 7578591}
{"hostname": "flow-main", "episode_reward_mean": 761.8952278447991, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c61d0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6080>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.635862112045288, "timesteps_since_restore": 7619358, "info": {"update_time_ms": 7.235, "load_time_ms": 5.252, "sample_time_ms": 18080.137, "num_steps_trained": 7619358, "default": {"entropy": 1.92218017578125, "policy_loss": -0.01178027968853712, "vf_loss": 52.70576477050781, "kl": 0.016712460666894913, "vf_explained_var": 0.17949211597442627, "total_loss": 52.699623107910156, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7619358, "grad_time_ms": 9692.047}, "time_total_s": 5455.170662164688, "num_metric_batches_dropped": 0, "timestamp": 1558318679, "episode_reward_max": 858.7699491509693, "timesteps_this_iter": 40767, "pid": 46936, "custom_metrics": {"cost2_mean": -35.758522546342085, "outflow_rate_mean": 866.984326445563, "system_level_velocity_mean": 16.91885562720269, "cost2_min": -57.34179262757686, "cost1_min": 28.139979228704753, "cost1_mean": 416.45520283254183, "cost1_max": 468.0998531796163, "outflow_rate_max": 991.2385376214568, "system_level_velocity_max": 18.771288319088566, "outflow_rate_min": 533.2667831302955, "cost2_max": -17.9400797520607, "system_level_velocity_min": 12.784709107515795}, "policy_reward_mean": {}, "time_since_restore": 5455.170662164688, "episodes_total": 5948, "iterations_since_restore": 176, "episode_reward_min": 62.87149872403837, "episodes_this_iter": 35, "episode_len_mean": 685.11, "done": false, "training_iteration": 176, "date": "2019-05-20_02-17-59", "node_ip": "10.138.0.2", "timesteps_total": 7619358}
{"hostname": "flow-main", "episode_reward_mean": 759.9522157787509, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c19b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1828>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c15f8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.42388892173767, "timesteps_since_restore": 7661500, "info": {"update_time_ms": 7.266, "load_time_ms": 5.06, "sample_time_ms": 18027.85, "num_steps_trained": 7661500, "default": {"entropy": 1.9400794506072998, "policy_loss": -0.01651156134903431, "vf_loss": 49.60938262939453, "kl": 0.017945608124136925, "vf_explained_var": 0.21235968172550201, "total_loss": 49.59893035888672, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7661500, "grad_time_ms": 9694.832}, "time_total_s": 5482.594551086426, "num_metric_batches_dropped": 0, "timestamp": 1558318706, "episode_reward_max": 861.8954433012907, "timesteps_this_iter": 42142, "pid": 46936, "custom_metrics": {"cost2_mean": -35.72036697344785, "outflow_rate_mean": 869.6260488520523, "system_level_velocity_mean": 17.001927458705868, "cost2_min": -57.34179262757686, "cost1_min": 28.139979228704753, "cost1_mean": 414.34604630834525, "cost1_max": 468.0998531796163, "outflow_rate_max": 991.2385376214568, "system_level_velocity_max": 18.771288319088566, "outflow_rate_min": 533.2667831302955, "cost2_max": -17.9400797520607, "system_level_velocity_min": 12.784709107515795}, "policy_reward_mean": {}, "time_since_restore": 5482.594551086426, "episodes_total": 5983, "iterations_since_restore": 177, "episode_reward_min": 62.87149872403837, "episodes_this_iter": 35, "episode_len_mean": 679.5, "done": false, "training_iteration": 177, "date": "2019-05-20_02-18-26", "node_ip": "10.138.0.2", "timesteps_total": 7661500}
{"hostname": "flow-main", "episode_reward_mean": 763.0528892629779, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6b00>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6898>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6c50>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.349663257598877, "timesteps_since_restore": 7703211, "info": {"update_time_ms": 7.207, "load_time_ms": 5.031, "sample_time_ms": 18027.017, "num_steps_trained": 7703211, "default": {"entropy": 1.948022484779358, "policy_loss": -0.013533687219023705, "vf_loss": 46.88747024536133, "kl": 0.01672177016735077, "vf_explained_var": 0.20663349330425262, "total_loss": 46.879581451416016, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7703211, "grad_time_ms": 9657.803}, "time_total_s": 5509.944214344025, "num_metric_batches_dropped": 0, "timestamp": 1558318733, "episode_reward_max": 861.8954433012907, "timesteps_this_iter": 41711, "pid": 46936, "custom_metrics": {"cost2_mean": -35.52178983935802, "outflow_rate_mean": 872.4969436947971, "system_level_velocity_mean": 17.01413020038317, "cost2_min": -52.70527978388563, "cost1_min": 28.139979228704753, "cost1_mean": 417.2100663847317, "cost1_max": 468.0998531796163, "outflow_rate_max": 974.4836947168321, "system_level_velocity_max": 18.771288319088566, "outflow_rate_min": 533.2667831302955, "cost2_max": -17.9400797520607, "system_level_velocity_min": 12.784709107515795}, "policy_reward_mean": {}, "time_since_restore": 5509.944214344025, "episodes_total": 6017, "iterations_since_restore": 178, "episode_reward_min": 62.87149872403837, "episodes_this_iter": 34, "episode_len_mean": 684.0, "done": false, "training_iteration": 178, "date": "2019-05-20_02-18-53", "node_ip": "10.138.0.2", "timesteps_total": 7703211}
{"hostname": "flow-main", "episode_reward_mean": 755.5179338270849, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d336a0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33da0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33c88>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.64597487449646, "timesteps_since_restore": 7744620, "info": {"update_time_ms": 7.06, "load_time_ms": 5.03, "sample_time_ms": 17983.865, "num_steps_trained": 7744620, "default": {"entropy": 1.9559578895568848, "policy_loss": -0.01366133987903595, "vf_loss": 47.457157135009766, "kl": 0.017533402889966965, "vf_explained_var": 0.2191449999809265, "total_loss": 47.44941711425781, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7744620, "grad_time_ms": 9633.048}, "time_total_s": 5537.590189218521, "num_metric_batches_dropped": 0, "timestamp": 1558318761, "episode_reward_max": 861.8954433012907, "timesteps_this_iter": 41409, "pid": 46936, "custom_metrics": {"cost2_mean": -34.5767518802777, "outflow_rate_mean": 868.7723725101112, "system_level_velocity_mean": 16.977238512489564, "cost2_min": -54.41790839788185, "cost1_min": 12.158082901125653, "cost1_mean": 416.76001559691935, "cost1_max": 463.3971173675948, "outflow_rate_max": 980.567785483713, "system_level_velocity_max": 18.750106424400624, "outflow_rate_min": 467.63246017283916, "cost2_max": -12.519910340807968, "system_level_velocity_min": 14.680123150483823}, "policy_reward_mean": {}, "time_since_restore": 5537.590189218521, "episodes_total": 6051, "iterations_since_restore": 179, "episode_reward_min": 28.44467067890704, "episodes_this_iter": 34, "episode_len_mean": 684.46, "done": false, "training_iteration": 179, "date": "2019-05-20_02-19-21", "node_ip": "10.138.0.2", "timesteps_total": 7744620}
{"hostname": "flow-main", "episode_reward_mean": 749.8626846891763, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6518>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c60f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6198>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.14662003517151, "timesteps_since_restore": 7786530, "info": {"update_time_ms": 6.98, "load_time_ms": 4.983, "sample_time_ms": 18069.186, "num_steps_trained": 7786530, "default": {"entropy": 1.9705810546875, "policy_loss": -0.01343128178268671, "vf_loss": 47.37172317504883, "kl": 0.01641874387860298, "vf_explained_var": 0.20705966651439667, "total_loss": 47.36383819580078, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7786530, "grad_time_ms": 9654.121}, "time_total_s": 5565.736809253693, "num_metric_batches_dropped": 0, "timestamp": 1558318789, "episode_reward_max": 836.3047546906919, "timesteps_this_iter": 41910, "pid": 46936, "custom_metrics": {"cost2_mean": -34.80509428689851, "outflow_rate_mean": 860.3006741039061, "system_level_velocity_mean": 16.89901831679623, "cost2_min": -54.41790839788185, "cost1_min": 12.158082901125653, "cost1_mean": 413.9649290835207, "cost1_max": 463.3971173675948, "outflow_rate_max": 980.567785483713, "system_level_velocity_max": 18.750106424400624, "outflow_rate_min": 467.63246017283916, "cost2_max": -12.519910340807968, "system_level_velocity_min": 14.453705774395504}, "policy_reward_mean": {}, "time_since_restore": 5565.736809253693, "episodes_total": 6086, "iterations_since_restore": 180, "episode_reward_min": 28.44467067890704, "episodes_this_iter": 35, "episode_len_mean": 683.92, "done": false, "training_iteration": 180, "date": "2019-05-20_02-19-49", "node_ip": "10.138.0.2", "timesteps_total": 7786530}
{"hostname": "flow-main", "episode_reward_mean": 749.4537512323457, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a92b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9eb8>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9358>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.58521795272827, "timesteps_since_restore": 7828362, "info": {"update_time_ms": 6.873, "load_time_ms": 5.156, "sample_time_ms": 18039.914, "num_steps_trained": 7828362, "default": {"entropy": 1.9608341455459595, "policy_loss": -0.014093121513724327, "vf_loss": 47.60391616821289, "kl": 0.016800474375486374, "vf_explained_var": 0.24198976159095764, "total_loss": 47.59549331665039, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7828362, "grad_time_ms": 9635.645}, "time_total_s": 5593.322027206421, "num_metric_batches_dropped": 0, "timestamp": 1558318817, "episode_reward_max": 831.2785743506272, "timesteps_this_iter": 41832, "pid": 46936, "custom_metrics": {"cost2_mean": -34.14542634472877, "outflow_rate_mean": 856.0437478099021, "system_level_velocity_mean": 16.913583541529473, "cost2_min": -54.41790839788185, "cost1_min": 12.158082901125653, "cost1_mean": 413.9385201876238, "cost1_max": 465.8290181587179, "outflow_rate_max": 980.567785483713, "system_level_velocity_max": 19.002585798897755, "outflow_rate_min": 467.63246017283916, "cost2_max": -12.519910340807968, "system_level_velocity_min": 12.408658855224765}, "policy_reward_mean": {}, "time_since_restore": 5593.322027206421, "episodes_total": 6120, "iterations_since_restore": 181, "episode_reward_min": 28.44467067890704, "episodes_this_iter": 34, "episode_len_mean": 684.82, "done": false, "training_iteration": 181, "date": "2019-05-20_02-20-17", "node_ip": "10.138.0.2", "timesteps_total": 7828362}
{"hostname": "flow-main", "episode_reward_mean": 755.5816221487207, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c64a8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6588>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.23896813392639, "timesteps_since_restore": 7869887, "info": {"update_time_ms": 6.82, "load_time_ms": 5.073, "sample_time_ms": 17922.03, "num_steps_trained": 7869887, "default": {"entropy": 1.9756304025650024, "policy_loss": -0.01231006346642971, "vf_loss": 48.716407775878906, "kl": 0.01578456163406372, "vf_explained_var": 0.26947644352912903, "total_loss": 48.70942687988281, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7869887, "grad_time_ms": 9623.92}, "time_total_s": 5620.560995340347, "num_metric_batches_dropped": 0, "timestamp": 1558318844, "episode_reward_max": 826.7193704456905, "timesteps_this_iter": 41525, "pid": 46936, "custom_metrics": {"cost2_mean": -34.04499689905116, "outflow_rate_mean": 857.0932559123964, "system_level_velocity_mean": 16.86736355017356, "cost2_min": -48.53679428172816, "cost1_min": 27.56766296076657, "cost1_mean": 417.7496370290622, "cost1_max": 465.8290181587179, "outflow_rate_max": 974.0550677519501, "system_level_velocity_max": 19.002585798897755, "outflow_rate_min": 532.0227773979536, "cost2_max": -15.42012258018097, "system_level_velocity_min": 12.408658855224765}, "policy_reward_mean": {}, "time_since_restore": 5620.560995340347, "episodes_total": 6154, "iterations_since_restore": 182, "episode_reward_min": 62.07226879826071, "episodes_this_iter": 34, "episode_len_mean": 693.42, "done": false, "training_iteration": 182, "date": "2019-05-20_02-20-44", "node_ip": "10.138.0.2", "timesteps_total": 7869887}
{"hostname": "flow-main", "episode_reward_mean": 752.257130849195, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9eb8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a92b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9e10>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.575146436691284, "timesteps_since_restore": 7911276, "info": {"update_time_ms": 6.755, "load_time_ms": 5.148, "sample_time_ms": 17977.543, "num_steps_trained": 7911276, "default": {"entropy": 1.9746575355529785, "policy_loss": -0.014074605889618397, "vf_loss": 53.340362548828125, "kl": 0.016524506732821465, "vf_explained_var": 0.2236468493938446, "total_loss": 53.33186721801758, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7911276, "grad_time_ms": 9619.27}, "time_total_s": 5649.136141777039, "num_metric_batches_dropped": 0, "timestamp": 1558318873, "episode_reward_max": 845.7696036680215, "timesteps_this_iter": 41389, "pid": 46936, "custom_metrics": {"cost2_mean": -33.590172744029374, "outflow_rate_mean": 855.2879646755334, "system_level_velocity_mean": 16.89679851582831, "cost2_min": -52.9202293919696, "cost1_min": 27.458487675734844, "cost1_mean": 418.35837430112633, "cost1_max": 465.8290181587179, "outflow_rate_max": 988.4259835606131, "system_level_velocity_max": 19.002585798897755, "outflow_rate_min": 528.8082648922527, "cost2_max": -15.42012258018097, "system_level_velocity_min": 13.243619461100385}, "policy_reward_mean": {}, "time_since_restore": 5649.136141777039, "episodes_total": 6190, "iterations_since_restore": 183, "episode_reward_min": 64.15944907020351, "episodes_this_iter": 36, "episode_len_mean": 693.2, "done": false, "training_iteration": 183, "date": "2019-05-20_02-21-13", "node_ip": "10.138.0.2", "timesteps_total": 7911276}
{"hostname": "flow-main", "episode_reward_mean": 744.3063617824384, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6dd8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c60f0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6eb8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.475148916244507, "timesteps_since_restore": 7952814, "info": {"update_time_ms": 6.773, "load_time_ms": 5.198, "sample_time_ms": 17887.71, "num_steps_trained": 7952814, "default": {"entropy": 1.9896745681762695, "policy_loss": -0.014239384792745113, "vf_loss": 49.668914794921875, "kl": 0.016887061297893524, "vf_explained_var": 0.2193184792995453, "total_loss": 49.66037368774414, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7952814, "grad_time_ms": 9595.79}, "time_total_s": 5675.611290693283, "num_metric_batches_dropped": 0, "timestamp": 1558318899, "episode_reward_max": 849.048214942189, "timesteps_this_iter": 41538, "pid": 46936, "custom_metrics": {"cost2_mean": -34.49404029637314, "outflow_rate_mean": 853.1295338008395, "system_level_velocity_mean": 16.734141714024222, "cost2_min": -52.9202293919696, "cost1_min": 27.458487675734844, "cost1_mean": 415.0543125428154, "cost1_max": 462.1625174721703, "outflow_rate_max": 988.4259835606131, "system_level_velocity_max": 18.944009175346253, "outflow_rate_min": 528.8082648922527, "cost2_max": -15.42012258018097, "system_level_velocity_min": 13.219568603968996}, "policy_reward_mean": {}, "time_since_restore": 5675.611290693283, "episodes_total": 6225, "iterations_since_restore": 184, "episode_reward_min": 64.15944907020351, "episodes_this_iter": 35, "episode_len_mean": 693.2, "done": false, "training_iteration": 184, "date": "2019-05-20_02-21-39", "node_ip": "10.138.0.2", "timesteps_total": 7952814}
{"hostname": "flow-main", "episode_reward_mean": 735.1557474903708, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c15f8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.567870140075684, "timesteps_since_restore": 7994447, "info": {"update_time_ms": 6.702, "load_time_ms": 5.296, "sample_time_ms": 17871.915, "num_steps_trained": 7994447, "default": {"entropy": 2.010291576385498, "policy_loss": -0.015884244814515114, "vf_loss": 46.37311935424805, "kl": 0.01732391119003296, "vf_explained_var": 0.2781239151954651, "total_loss": 46.36308288574219, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 7994447, "grad_time_ms": 9609.653}, "time_total_s": 5703.179160833359, "num_metric_batches_dropped": 0, "timestamp": 1558318927, "episode_reward_max": 849.048214942189, "timesteps_this_iter": 41633, "pid": 46936, "custom_metrics": {"cost2_mean": -34.3744226792335, "outflow_rate_mean": 849.8409312878459, "system_level_velocity_mean": 16.643129837983853, "cost2_min": -53.28673661715452, "cost1_min": 27.458487675734844, "cost1_mean": 410.4967513625154, "cost1_max": 462.1625174721703, "outflow_rate_max": 988.4259835606131, "system_level_velocity_max": 18.944009175346253, "outflow_rate_min": 528.8082648922527, "cost2_max": -16.448489375151887, "system_level_velocity_min": 13.219568603968996}, "policy_reward_mean": {}, "time_since_restore": 5703.179160833359, "episodes_total": 6261, "iterations_since_restore": 185, "episode_reward_min": 64.15944907020351, "episodes_this_iter": 36, "episode_len_mean": 688.64, "done": false, "training_iteration": 185, "date": "2019-05-20_02-22-07", "node_ip": "10.138.0.2", "timesteps_total": 7994447}
{"hostname": "flow-main", "episode_reward_mean": 741.7255646930669, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6470>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6320>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f60>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.05631160736084, "timesteps_since_restore": 8036134, "info": {"update_time_ms": 6.555, "load_time_ms": 5.191, "sample_time_ms": 17898.11, "num_steps_trained": 8036134, "default": {"entropy": 2.0215680599212646, "policy_loss": -0.015950268134474754, "vf_loss": 52.58445739746094, "kl": 0.01760430634021759, "vf_explained_var": 0.22286421060562134, "total_loss": 52.57444763183594, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8036134, "grad_time_ms": 9625.272}, "time_total_s": 5731.23547244072, "num_metric_batches_dropped": 0, "timestamp": 1558318955, "episode_reward_max": 833.7972791892199, "timesteps_this_iter": 41687, "pid": 46936, "custom_metrics": {"cost2_mean": -35.029390740826656, "outflow_rate_mean": 852.2739352895139, "system_level_velocity_mean": 16.787014085890394, "cost2_min": -53.28673661715452, "cost1_min": 143.77775981134772, "cost1_mean": 418.45710094468524, "cost1_max": 457.8164019811542, "outflow_rate_max": 937.2829307111571, "system_level_velocity_max": 18.486480974157125, "outflow_rate_min": 704.3480737949578, "cost2_max": -20.211503087246367, "system_level_velocity_min": 13.219568603968996}, "policy_reward_mean": {}, "time_since_restore": 5731.23547244072, "episodes_total": 6296, "iterations_since_restore": 186, "episode_reward_min": 258.39709239458614, "episodes_this_iter": 35, "episode_len_mean": 695.44, "done": false, "training_iteration": 186, "date": "2019-05-20_02-22-35", "node_ip": "10.138.0.2", "timesteps_total": 8036134}
{"hostname": "flow-main", "episode_reward_mean": 741.8417577520685, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a99e8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.31242084503174, "timesteps_since_restore": 8077536, "info": {"update_time_ms": 6.447, "load_time_ms": 5.369, "sample_time_ms": 17913.165, "num_steps_trained": 8077536, "default": {"entropy": 2.035330057144165, "policy_loss": -0.01512666791677475, "vf_loss": 44.565486907958984, "kl": 0.016981009393930435, "vf_explained_var": 0.23432664573192596, "total_loss": 44.556095123291016, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8077536, "grad_time_ms": 9598.94}, "time_total_s": 5758.547893285751, "num_metric_batches_dropped": 0, "timestamp": 1558318982, "episode_reward_max": 833.7972791892199, "timesteps_this_iter": 41402, "pid": 46936, "custom_metrics": {"cost2_mean": -34.06257814393355, "outflow_rate_mean": 846.7072142155623, "system_level_velocity_mean": 16.634552902843314, "cost2_min": -53.28673661715452, "cost1_min": 237.7033296234178, "cost1_mean": 416.3089040752126, "cost1_max": 460.8742325830403, "outflow_rate_max": 935.3228457850246, "system_level_velocity_max": 18.605723806862475, "outflow_rate_min": 754.8677495055659, "cost2_max": -20.211503087246367, "system_level_velocity_min": 13.632977342791861}, "policy_reward_mean": {}, "time_since_restore": 5758.547893285751, "episodes_total": 6330, "iterations_since_restore": 187, "episode_reward_min": 435.8814310119889, "episodes_this_iter": 34, "episode_len_mean": 697.27, "done": false, "training_iteration": 187, "date": "2019-05-20_02-23-02", "node_ip": "10.138.0.2", "timesteps_total": 8077536}
{"hostname": "flow-main", "episode_reward_mean": 741.3022570923099, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6c50>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6f98>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.076500177383423, "timesteps_since_restore": 8119170, "info": {"update_time_ms": 6.452, "load_time_ms": 5.444, "sample_time_ms": 17750.88, "num_steps_trained": 8119170, "default": {"entropy": 2.0330309867858887, "policy_loss": -0.014395581558346748, "vf_loss": 44.32209777832031, "kl": 0.017667463049292564, "vf_explained_var": 0.22228501737117767, "total_loss": 44.31365966796875, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8119170, "grad_time_ms": 9634.184}, "time_total_s": 5784.624393463135, "num_metric_batches_dropped": 0, "timestamp": 1558319009, "episode_reward_max": 826.951628984905, "timesteps_this_iter": 41634, "pid": 46936, "custom_metrics": {"cost2_mean": -33.68535977548624, "outflow_rate_mean": 837.6242965262038, "system_level_velocity_mean": 16.57058658130638, "cost2_min": -52.5440876163842, "cost1_min": 237.7033296234178, "cost1_mean": 414.7729649492212, "cost1_max": 467.4430535200502, "outflow_rate_max": 937.819006091321, "system_level_velocity_max": 18.787574942011943, "outflow_rate_min": 723.2130761224275, "cost2_max": -20.433444815955205, "system_level_velocity_min": 11.852247203994471}, "policy_reward_mean": {}, "time_since_restore": 5784.624393463135, "episodes_total": 6363, "iterations_since_restore": 188, "episode_reward_min": 435.8814310119889, "episodes_this_iter": 33, "episode_len_mean": 697.27, "done": false, "training_iteration": 188, "date": "2019-05-20_02-23-29", "node_ip": "10.138.0.2", "timesteps_total": 8119170}
{"hostname": "flow-main", "episode_reward_mean": 728.4518958228629, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1a20>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6d68>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6780>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.285758018493652, "timesteps_since_restore": 8160428, "info": {"update_time_ms": 6.454, "load_time_ms": 5.354, "sample_time_ms": 17725.418, "num_steps_trained": 8160428, "default": {"entropy": 2.0495543479919434, "policy_loss": -0.017504803836345673, "vf_loss": 48.70721435546875, "kl": 0.01846514828503132, "vf_explained_var": 0.23869122564792633, "total_loss": 48.69594192504883, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 8160428, "grad_time_ms": 9623.992}, "time_total_s": 5811.910151481628, "num_metric_batches_dropped": 0, "timestamp": 1558319036, "episode_reward_max": 818.479398290146, "timesteps_this_iter": 41258, "pid": 46936, "custom_metrics": {"cost2_mean": -32.430381008859044, "outflow_rate_mean": 821.5518407745716, "system_level_velocity_mean": 16.372319499576083, "cost2_min": -52.5440876163842, "cost1_min": 20.59404933253322, "cost1_mean": 405.71879784735177, "cost1_max": 467.4430535200502, "outflow_rate_max": 937.819006091321, "system_level_velocity_max": 18.787574942011943, "outflow_rate_min": 474.7326101286828, "cost2_max": -17.537410371559908, "system_level_velocity_min": 11.852247203994471}, "policy_reward_mean": {}, "time_since_restore": 5811.910151481628, "episodes_total": 6400, "iterations_since_restore": 189, "episode_reward_min": 46.14092427731246, "episodes_this_iter": 37, "episode_len_mean": 690.59, "done": false, "training_iteration": 189, "date": "2019-05-20_02-23-56", "node_ip": "10.138.0.2", "timesteps_total": 8160428}
{"hostname": "flow-main", "episode_reward_mean": 725.660340176516, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6ef0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6128>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6320>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.074470043182373, "timesteps_since_restore": 8202370, "info": {"update_time_ms": 6.529, "load_time_ms": 5.447, "sample_time_ms": 17555.847, "num_steps_trained": 8202370, "default": {"entropy": 2.0620527267456055, "policy_loss": -0.018240582197904587, "vf_loss": 45.72884750366211, "kl": 0.019065555185079575, "vf_explained_var": 0.28721553087234497, "total_loss": 45.717041015625, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8202370, "grad_time_ms": 9586.07}, "time_total_s": 5837.984621524811, "num_metric_batches_dropped": 0, "timestamp": 1558319062, "episode_reward_max": 818.479398290146, "timesteps_this_iter": 41942, "pid": 46936, "custom_metrics": {"cost2_mean": -32.77168641613762, "outflow_rate_mean": 817.2989266131375, "system_level_velocity_mean": 16.334679472297225, "cost2_min": -47.308816093765536, "cost1_min": 20.59404933253322, "cost1_mean": 406.1904590330258, "cost1_max": 467.4430535200502, "outflow_rate_max": 973.831622432529, "system_level_velocity_max": 18.787574942011943, "outflow_rate_min": 474.7326101286828, "cost2_max": -17.537410371559908, "system_level_velocity_min": 11.852247203994471}, "policy_reward_mean": {}, "time_since_restore": 5837.984621524811, "episodes_total": 6433, "iterations_since_restore": 190, "episode_reward_min": 46.14092427731246, "episodes_this_iter": 33, "episode_len_mean": 693.32, "done": false, "training_iteration": 190, "date": "2019-05-20_02-24-22", "node_ip": "10.138.0.2", "timesteps_total": 8202370}
{"hostname": "flow-main", "episode_reward_mean": 721.5059450659987, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6898>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c02d33c88>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c6198>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.515706062316895, "timesteps_since_restore": 8243876, "info": {"update_time_ms": 6.587, "load_time_ms": 5.351, "sample_time_ms": 17559.382, "num_steps_trained": 8243876, "default": {"entropy": 2.0774879455566406, "policy_loss": -0.012502976693212986, "vf_loss": 50.382198333740234, "kl": 0.01568879373371601, "vf_explained_var": 0.1654423028230667, "total_loss": 50.3749885559082, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8243876, "grad_time_ms": 9575.935}, "time_total_s": 5865.500327587128, "num_metric_batches_dropped": 0, "timestamp": 1558319090, "episode_reward_max": 813.4872040387362, "timesteps_this_iter": 41506, "pid": 46936, "custom_metrics": {"cost2_mean": -31.87267744704008, "outflow_rate_mean": 815.1167790441947, "system_level_velocity_mean": 16.33318385916652, "cost2_min": -44.70046518781235, "cost1_min": 20.59404933253322, "cost1_mean": 406.1096076491686, "cost1_max": 460.86186138567314, "outflow_rate_max": 973.831622432529, "system_level_velocity_max": 18.720398607762686, "outflow_rate_min": 474.7326101286828, "cost2_max": -17.537410371559908, "system_level_velocity_min": 12.784080260332972}, "policy_reward_mean": {}, "time_since_restore": 5865.500327587128, "episodes_total": 6467, "iterations_since_restore": 191, "episode_reward_min": 46.14092427731246, "episodes_this_iter": 34, "episode_len_mean": 693.32, "done": false, "training_iteration": 191, "date": "2019-05-20_02-24-50", "node_ip": "10.138.0.2", "timesteps_total": 8243876}
{"hostname": "flow-main", "episode_reward_mean": 726.6641539898156, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b10f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1a58>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.73016881942749, "timesteps_since_restore": 8285727, "info": {"update_time_ms": 6.533, "load_time_ms": 5.44, "sample_time_ms": 17580.867, "num_steps_trained": 8285727, "default": {"entropy": 2.0722105503082275, "policy_loss": -0.015652066096663475, "vf_loss": 47.270416259765625, "kl": 0.017273809760808945, "vf_explained_var": 0.16935989260673523, "total_loss": 47.260597229003906, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8285727, "grad_time_ms": 9603.112}, "time_total_s": 5893.230496406555, "num_metric_batches_dropped": 0, "timestamp": 1558319117, "episode_reward_max": 829.5626473366793, "timesteps_this_iter": 41851, "pid": 46936, "custom_metrics": {"cost2_mean": -31.375452726408163, "outflow_rate_mean": 814.3170767955771, "system_level_velocity_mean": 16.212614515824278, "cost2_min": -46.86190359522389, "cost1_min": 265.73985241404705, "cost1_mean": 406.7126773847933, "cost1_max": 465.64101210599006, "outflow_rate_max": 973.831622432529, "system_level_velocity_max": 18.66382065161682, "outflow_rate_min": 727.1711547479447, "cost2_max": -17.567918004434837, "system_level_velocity_min": 12.784080260332972}, "policy_reward_mean": {}, "time_since_restore": 5893.230496406555, "episodes_total": 6501, "iterations_since_restore": 192, "episode_reward_min": 454.66057244122425, "episodes_this_iter": 34, "episode_len_mean": 697.0, "done": false, "training_iteration": 192, "date": "2019-05-20_02-25-17", "node_ip": "10.138.0.2", "timesteps_total": 8285727}
{"hostname": "flow-main", "episode_reward_mean": 734.5820585839363, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a99e8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9160>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9eb8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.479867696762085, "timesteps_since_restore": 8327547, "info": {"update_time_ms": 6.497, "load_time_ms": 5.288, "sample_time_ms": 17461.872, "num_steps_trained": 8327547, "default": {"entropy": 2.0603580474853516, "policy_loss": -0.014178982935845852, "vf_loss": 44.497406005859375, "kl": 0.017185747623443604, "vf_explained_var": 0.18040719628334045, "total_loss": 44.4890251159668, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8327547, "grad_time_ms": 9612.982}, "time_total_s": 5920.710364103317, "num_metric_batches_dropped": 0, "timestamp": 1558319145, "episode_reward_max": 829.5626473366793, "timesteps_this_iter": 41820, "pid": 46936, "custom_metrics": {"cost2_mean": -30.511538557055445, "outflow_rate_mean": 820.6231366390405, "system_level_velocity_mean": 16.38262042211914, "cost2_min": -46.86190359522389, "cost1_min": 192.1276458617961, "cost1_mean": 409.51493211342256, "cost1_max": 465.64101210599006, "outflow_rate_max": 915.3291670273238, "system_level_velocity_max": 18.66382065161682, "outflow_rate_min": 711.9768773524496, "cost2_max": -19.209886985993705, "system_level_velocity_min": 12.784080260332972}, "policy_reward_mean": {}, "time_since_restore": 5920.710364103317, "episodes_total": 6536, "iterations_since_restore": 193, "episode_reward_min": 343.89191071773763, "episodes_this_iter": 35, "episode_len_mean": 693.6, "done": false, "training_iteration": 193, "date": "2019-05-20_02-25-45", "node_ip": "10.138.0.2", "timesteps_total": 8327547}
{"hostname": "flow-main", "episode_reward_mean": 733.2403193316663, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1748>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b19b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b17f0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.252767324447632, "timesteps_since_restore": 8369005, "info": {"update_time_ms": 6.571, "load_time_ms": 5.284, "sample_time_ms": 17561.01, "num_steps_trained": 8369005, "default": {"entropy": 2.0679726600646973, "policy_loss": -0.013425474055111408, "vf_loss": 46.31806945800781, "kl": 0.01659698598086834, "vf_explained_var": 0.19565178453922272, "total_loss": 46.310245513916016, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8369005, "grad_time_ms": 9691.277}, "time_total_s": 5948.963131427765, "num_metric_batches_dropped": 0, "timestamp": 1558319173, "episode_reward_max": 822.0054310314356, "timesteps_this_iter": 41458, "pid": 46936, "custom_metrics": {"cost2_mean": -31.358923028139905, "outflow_rate_mean": 821.9701338692284, "system_level_velocity_mean": 16.377958280189503, "cost2_min": -46.86190359522389, "cost1_min": 192.1276458617961, "cost1_mean": 408.25996086656, "cost1_max": 467.5493380239414, "outflow_rate_max": 915.3291670273238, "system_level_velocity_max": 18.851992735436355, "outflow_rate_min": 711.4658935766604, "cost2_max": -19.209886985993705, "system_level_velocity_min": 13.696945993185452}, "policy_reward_mean": {}, "time_since_restore": 5948.963131427765, "episodes_total": 6570, "iterations_since_restore": 194, "episode_reward_min": 343.89191071773763, "episodes_this_iter": 34, "episode_len_mean": 690.44, "done": false, "training_iteration": 194, "date": "2019-05-20_02-26-13", "node_ip": "10.138.0.2", "timesteps_total": 8369005}
{"hostname": "flow-main", "episode_reward_mean": 739.1493661527463, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1438>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1f98>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028c1828>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.33262324333191, "timesteps_since_restore": 8410455, "info": {"update_time_ms": 6.667, "load_time_ms": 5.171, "sample_time_ms": 17558.394, "num_steps_trained": 8410455, "default": {"entropy": 2.059849262237549, "policy_loss": -0.013951210305094719, "vf_loss": 45.92412567138672, "kl": 0.016491016373038292, "vf_explained_var": 0.21860331296920776, "total_loss": 45.91574478149414, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8410455, "grad_time_ms": 9670.554}, "time_total_s": 5976.295754671097, "num_metric_batches_dropped": 0, "timestamp": 1558319200, "episode_reward_max": 822.0054310314356, "timesteps_this_iter": 41450, "pid": 46936, "custom_metrics": {"cost2_mean": -32.032022842797176, "outflow_rate_mean": 827.9933088850332, "system_level_velocity_mean": 16.49942656893604, "cost2_min": -49.766487377778766, "cost1_min": 192.1276458617961, "cost1_mean": 411.911590128294, "cost1_max": 468.3547288563864, "outflow_rate_max": 939.8946929327564, "system_level_velocity_max": 18.851992735436355, "outflow_rate_min": 711.4658935766604, "cost2_max": -18.262216795804903, "system_level_velocity_min": 13.696945993185452}, "policy_reward_mean": {}, "time_since_restore": 5976.295754671097, "episodes_total": 6608, "iterations_since_restore": 195, "episode_reward_min": 343.89191071773763, "episodes_this_iter": 38, "episode_len_mean": 691.43, "done": false, "training_iteration": 195, "date": "2019-05-20_02-26-40", "node_ip": "10.138.0.2", "timesteps_total": 8410455}
{"hostname": "flow-main", "episode_reward_mean": 737.4427343689655, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b10f0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1e80>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1358>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 28.026771068572998, "timesteps_since_restore": 8451914, "info": {"update_time_ms": 6.712, "load_time_ms": 5.107, "sample_time_ms": 17543.687, "num_steps_trained": 8451914, "default": {"entropy": 2.084733009338379, "policy_loss": -0.013958626426756382, "vf_loss": 42.14534378051758, "kl": 0.016569754108786583, "vf_explained_var": 0.21871717274188995, "total_loss": 42.13697814941406, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8451914, "grad_time_ms": 9682.704}, "time_total_s": 6004.32252573967, "num_metric_batches_dropped": 0, "timestamp": 1558319229, "episode_reward_max": 799.964099389293, "timesteps_this_iter": 41459, "pid": 46936, "custom_metrics": {"cost2_mean": -32.16161921498688, "outflow_rate_mean": 824.8130797252513, "system_level_velocity_mean": 16.466111214066785, "cost2_min": -49.766487377778766, "cost1_min": 134.29089234497667, "cost1_mean": 410.2143169520958, "cost1_max": 468.3547288563864, "outflow_rate_max": 939.8946929327564, "system_level_velocity_max": 18.851992735436355, "outflow_rate_min": 682.8034403250091, "cost2_max": -18.262216795804903, "system_level_velocity_min": 13.696945993185452}, "policy_reward_mean": {}, "time_since_restore": 6004.32252573967, "episodes_total": 6641, "iterations_since_restore": 196, "episode_reward_min": 237.3860404399386, "episodes_this_iter": 33, "episode_len_mean": 690.11, "done": false, "training_iteration": 196, "date": "2019-05-20_02-27-09", "node_ip": "10.138.0.2", "timesteps_total": 8451914}
{"hostname": "flow-main", "episode_reward_mean": 733.914642245003, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9ac8>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9a90>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a92b0>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.133268117904663, "timesteps_since_restore": 8493109, "info": {"update_time_ms": 6.895, "load_time_ms": 5.094, "sample_time_ms": 17509.072, "num_steps_trained": 8493109, "default": {"entropy": 2.0969045162200928, "policy_loss": -0.014117113314568996, "vf_loss": 52.29872512817383, "kl": 0.016525229439139366, "vf_explained_var": 0.1394958645105362, "total_loss": 52.29018783569336, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750006556510925}, "num_steps_sampled": 8493109, "grad_time_ms": 9699.298}, "time_total_s": 6031.4557938575745, "num_metric_batches_dropped": 0, "timestamp": 1558319256, "episode_reward_max": 799.964099389293, "timesteps_this_iter": 41195, "pid": 46936, "custom_metrics": {"cost2_mean": -31.89323787990754, "outflow_rate_mean": 824.1253320729442, "system_level_velocity_mean": 16.61585263027336, "cost2_min": -49.766487377778766, "cost1_min": 18.85037549745681, "cost1_mean": 411.66777516761124, "cost1_max": 468.3547288563864, "outflow_rate_max": 939.8946929327564, "system_level_velocity_max": 18.803122642248915, "outflow_rate_min": 482.4611236271113, "cost2_max": -13.044228520011673, "system_level_velocity_min": 14.443982622547415}, "policy_reward_mean": {}, "time_since_restore": 6031.4557938575745, "episodes_total": 6677, "iterations_since_restore": 197, "episode_reward_min": 48.890443345306075, "episodes_this_iter": 36, "episode_len_mean": 686.56, "done": false, "training_iteration": 197, "date": "2019-05-20_02-27-36", "node_ip": "10.138.0.2", "timesteps_total": 8493109}
{"hostname": "flow-main", "episode_reward_mean": 730.9106708842876, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b12b0>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1780>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1550>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 26.017922401428223, "timesteps_since_restore": 8534474, "info": {"update_time_ms": 6.914, "load_time_ms": 5.01, "sample_time_ms": 17510.559, "num_steps_trained": 8534474, "default": {"entropy": 2.1066651344299316, "policy_loss": -0.013220155611634254, "vf_loss": 46.73918914794922, "kl": 0.01707383804023266, "vf_explained_var": 0.15578897297382355, "total_loss": 46.731727600097656, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8534474, "grad_time_ms": 9691.366}, "time_total_s": 6057.473716259003, "num_metric_batches_dropped": 0, "timestamp": 1558319282, "episode_reward_max": 799.964099389293, "timesteps_this_iter": 41365, "pid": 46936, "custom_metrics": {"cost2_mean": -31.61125133295402, "outflow_rate_mean": 818.3413037824145, "system_level_velocity_mean": 16.591579874466753, "cost2_min": -48.03193139829288, "cost1_min": 18.85037549745681, "cost1_mean": 411.58287371851327, "cost1_max": 463.0535575564986, "outflow_rate_max": 905.8443573169926, "system_level_velocity_max": 18.643953202794794, "outflow_rate_min": 482.4611236271113, "cost2_max": -13.044228520011673, "system_level_velocity_min": 14.443982622547415}, "policy_reward_mean": {}, "time_since_restore": 6057.473716259003, "episodes_total": 6709, "iterations_since_restore": 198, "episode_reward_min": 48.890443345306075, "episodes_this_iter": 32, "episode_len_mean": 688.57, "done": false, "training_iteration": 198, "date": "2019-05-20_02-28-02", "node_ip": "10.138.0.2", "timesteps_total": 8534474}
{"hostname": "flow-main", "episode_reward_mean": 732.7525609407974, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9a90>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9630>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028a9ac8>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.115843772888184, "timesteps_since_restore": 8575551, "info": {"update_time_ms": 6.886, "load_time_ms": 4.983, "sample_time_ms": 17512.509, "num_steps_trained": 8575551, "default": {"entropy": 2.1095950603485107, "policy_loss": -0.014304918237030506, "vf_loss": 45.96165084838867, "kl": 0.01670907437801361, "vf_explained_var": 0.1699356734752655, "total_loss": 45.95298767089844, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8575551, "grad_time_ms": 9672.047}, "time_total_s": 6084.589560031891, "num_metric_batches_dropped": 0, "timestamp": 1558319309, "episode_reward_max": 798.9223251404441, "timesteps_this_iter": 41077, "pid": 46936, "custom_metrics": {"cost2_mean": -32.36142489809484, "outflow_rate_mean": 820.5769279306966, "system_level_velocity_mean": 16.520512423002998, "cost2_min": -50.794154434357125, "cost1_min": 338.59054302834477, "cost1_mean": 415.70408319313646, "cost1_max": 463.0535575564986, "outflow_rate_max": 915.4453471415744, "system_level_velocity_max": 18.643953202794794, "outflow_rate_min": 734.3532506632458, "cost2_max": -18.02491720241534, "system_level_velocity_min": 14.224315061074023}, "policy_reward_mean": {}, "time_since_restore": 6084.589560031891, "episodes_total": 6744, "iterations_since_restore": 199, "episode_reward_min": 551.7652907293358, "episodes_this_iter": 35, "episode_len_mean": 698.21, "done": false, "training_iteration": 199, "date": "2019-05-20_02-28-29", "node_ip": "10.138.0.2", "timesteps_total": 8575551}
{"hostname": "flow-main", "episode_reward_mean": 727.031009275371, "experiment_id": "edfbf1e08d084e94b0775c8179bfdb97", "config": {"use_gae": true, "tf_session_args": {"allow_soft_placement": true, "gpu_options": {"allow_growth": true}, "log_device_placement": false, "device_count": {"CPU": 1}, "intra_op_parallelism_threads": 2, "inter_op_parallelism_threads": 2}, "kl_coeff": 0.2, "num_gpus_per_worker": 0, "monitor": false, "input_evaluation": null, "clip_rewards": null, "env_config": {"flow_params": "{\n    \"env\": {\n        \"additional_params\": {\n            \"FLOW_RATE\": 2000,\n            \"FLOW_RATE_MERGE\": 100,\n            \"RL_PENETRATION\": 0.1,\n            \"buf_length\": 1,\n            \"eta1\": 1.0,\n            \"eta2\": 0.1,\n            \"eta3\": 0.1,\n            \"max_accel\": 3,\n            \"max_decel\": 3,\n            \"reward_scale\": 1.0,\n            \"t_min\": 1.0,\n            \"target_velocity\": 25\n        },\n        \"evaluate\": false,\n        \"horizon\": 1500,\n        \"sims_per_step\": 2,\n        \"warmup_steps\": 100\n    },\n    \"env_name\": \"MultiWaveAttenuationMergePOEnv\",\n    \"exp_tag\": \"multi_merge\",\n    \"initial\": {\n        \"additional_params\": {},\n        \"bunching\": 0,\n        \"edges_distribution\": \"all\",\n        \"lanes_distribution\": Infinity,\n        \"min_gap\": 0,\n        \"perturbation\": 0.0,\n        \"shuffle\": false,\n        \"spacing\": \"uniform\",\n        \"x0\": 0\n    },\n    \"net\": {\n        \"additional_params\": {\n            \"highway_lanes\": 1,\n            \"merge_lanes\": 1,\n            \"merge_length\": 100,\n            \"post_merge_length\": 100,\n            \"pre_merge_length\": 600,\n            \"speed_limit\": 30\n        },\n        \"inflows\": {\n            \"_InFlows__flows\": [\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_0\",\n                    \"vehsPerHour\": 1800.0,\n                    \"vtype\": \"human\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 10,\n                    \"edge\": \"inflow_highway\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_1\",\n                    \"vehsPerHour\": 200.0,\n                    \"vtype\": \"rl\"\n                },\n                {\n                    \"begin\": 1,\n                    \"departLane\": \"free\",\n                    \"departSpeed\": 7.5,\n                    \"edge\": \"inflow_merge\",\n                    \"end\": 2000000.0,\n                    \"name\": \"flow_2\",\n                    \"vehsPerHour\": 100,\n                    \"vtype\": \"human\"\n                }\n            ],\n            \"num_flows\": 3\n        },\n        \"netfile\": null,\n        \"no_internal_links\": false,\n        \"osm_path\": null\n    },\n    \"scenario\": \"MergeScenario\",\n    \"sim\": {\n        \"emission_path\": null,\n        \"lateral_resolution\": null,\n        \"no_step_log\": true,\n        \"num_clients\": 1,\n        \"overtake_right\": false,\n        \"port\": null,\n        \"print_warnings\": true,\n        \"pxpm\": 2,\n        \"render\": false,\n        \"restart_instance\": true,\n        \"save_render\": false,\n        \"seed\": null,\n        \"show_radius\": false,\n        \"sight_radius\": 25,\n        \"sim_step\": 0.2,\n        \"teleport_time\": -1\n    },\n    \"simulator\": \"traci\",\n    \"veh\": [\n        {\n            \"acceleration_controller\": [\n                \"SimCarFollowingController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 5,\n            \"routing_controller\": null,\n            \"veh_id\": \"human\"\n        },\n        {\n            \"acceleration_controller\": [\n                \"RLController\",\n                {}\n            ],\n            \"car_following_params\": {\n                \"controller_params\": {\n                    \"accel\": 1.0,\n                    \"carFollowModel\": \"IDM\",\n                    \"decel\": 1.5,\n                    \"impatience\": 0.5,\n                    \"maxSpeed\": 30,\n                    \"minGap\": 2.5,\n                    \"sigma\": 0.5,\n                    \"speedDev\": 0.1,\n                    \"speedFactor\": 1.0,\n                    \"tau\": 1.0\n                },\n                \"speed_mode\": 1\n            },\n            \"initial_speed\": 0,\n            \"lane_change_controller\": [\n                \"SimLaneChangeController\",\n                {}\n            ],\n            \"lane_change_params\": {\n                \"controller_params\": {\n                    \"laneChangeModel\": \"LC2013\",\n                    \"lcCooperative\": \"1.0\",\n                    \"lcKeepRight\": \"1.0\",\n                    \"lcSpeedGain\": \"1.0\",\n                    \"lcStrategic\": \"1.0\"\n                },\n                \"lane_change_mode\": 512\n            },\n            \"num_vehicles\": 0,\n            \"routing_controller\": null,\n            \"veh_id\": \"rl\"\n        }\n    ]\n}", "run": "PPO"}, "collect_metrics_timeout": 180, "log_level": "INFO", "clip_actions": false, "simple_optimizer": false, "sample_batch_size": 750, "env": "MultiWaveAttenuationMergePOEnv-v0_[eta1, eta2, eta3]:[1.0, 0.1, 0.1]_t_min:10.0_buf_len: 1", "custom_resources_per_worker": {}, "optimizer": {}, "num_sgd_iter": 10, "model": {"grayscale": false, "channel_major": false, "custom_model": null, "free_log_std": false, "custom_options": {}, "conv_filters": null, "squash_to_range": false, "lstm_cell_size": 256, "zero_mean": true, "dim": 84, "custom_preprocessor": null, "fcnet_hiddens": [128, 64, 32], "max_seq_len": 20, "lstm_use_prev_action_reward": false, "conv_activation": "relu", "framestack": true, "use_lstm": false, "fcnet_activation": "tanh"}, "input": "sampler", "horizon": 1500, "vf_loss_coeff": 1.0, "compress_observations": false, "num_envs_per_worker": 1, "sample_async": false, "num_gpus": 0, "output_max_file_size": 67108864, "lambda": 0.97, "multiagent": {"policy_graphs": {}, "policies_to_train": null, "policy_mapping_fn": null}, "output": null, "num_cpus_per_worker": 1, "preprocessor_pref": "deepmind", "clip_param": 0.3, "kl_target": 0.01, "output_compress_columns": ["obs", "new_obs"], "entropy_coeff": 0.0, "sgd_minibatch_size": 128, "train_batch_size": 30000, "callbacks": {"on_sample_end": null, "on_episode_step": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1080>", "on_episode_end": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b19b0>", "on_episode_start": "<ray.tune.suggest.variant_generator.function object at 0x7f2c028b1e80>", "on_train_result": null}, "observation_filter": "MeanStdFilter", "synchronize_filters": true, "gamma": 0.99, "local_evaluator_tf_session_args": {"intra_op_parallelism_threads": 8, "inter_op_parallelism_threads": 8}, "straggler_mitigation": false, "vf_share_layers": false, "vf_clip_param": 1000000.0, "lr": 0.0005, "num_workers": 20, "num_cpus_for_driver": 1, "lr_schedule": null, "batch_mode": "truncate_episodes"}, "time_this_iter_s": 27.59093475341797, "timesteps_since_restore": 8617107, "info": {"update_time_ms": 6.877, "load_time_ms": 4.983, "sample_time_ms": 17644.754, "num_steps_trained": 8617107, "default": {"entropy": 2.108520030975342, "policy_loss": -0.014439942315220833, "vf_loss": 47.382843017578125, "kl": 0.017835190519690514, "vf_explained_var": 0.17964419722557068, "total_loss": 47.374420166015625, "cur_lr": 0.0005000000237487257, "cur_kl_coeff": 0.33750003576278687}, "num_steps_sampled": 8617107, "grad_time_ms": 9691.597}, "time_total_s": 6112.180494785309, "num_metric_batches_dropped": 0, "timestamp": 1558319337, "episode_reward_max": 798.9223251404441, "timesteps_this_iter": 41556, "pid": 46936, "custom_metrics": {"cost2_mean": -32.37719455188819, "outflow_rate_mean": 816.8340389781257, "system_level_velocity_mean": 16.295391096505146, "cost2_min": -51.030517292477995, "cost1_min": 204.96514181466014, "cost1_mean": 408.5992537864505, "cost1_max": 463.0535575564986, "outflow_rate_max": 936.9676955110124, "system_level_velocity_max": 18.643953202794794, "outflow_rate_min": 711.5811504099444, "cost2_max": -18.02491720241534, "system_level_velocity_min": 12.90505561307253}, "policy_reward_mean": {}, "time_since_restore": 6112.180494785309, "episodes_total": 6780, "iterations_since_restore": 200, "episode_reward_min": 359.7685495280391, "episodes_this_iter": 36, "episode_len_mean": 694.36, "done": true, "training_iteration": 200, "date": "2019-05-20_02-28-57", "node_ip": "10.138.0.2", "timesteps_total": 8617107}
